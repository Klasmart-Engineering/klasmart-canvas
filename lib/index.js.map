{"version":3,"file":"index.js","sources":["../node_modules/rollup-plugin-node-builtins/src/es6/events.js","../src/domain/whiteboard/event-serializer/EventPainterController.ts","../src/domain/whiteboard/event-serializer/PaintEventSerializer.ts","../src/domain/whiteboard/SharedEventSerializerProvider.tsx","../node_modules/rollup-plugin-styles/dist/runtime/inject-css.js","../src/domain/whiteboard/hooks/useText.tsx","../src/domain/whiteboard/hooks/useFontFamily.tsx","../src/domain/whiteboard/hooks/useShapeColor.tsx","../src/domain/whiteboard/hooks/useShape.tsx","../src/domain/whiteboard/hooks/useWhiteboardClearModal.tsx","../src/domain/whiteboard/hooks/usePointerEvents.tsx","../src/domain/whiteboard/hooks/useFontColor.tsx","../src/domain/whiteboard/hooks/useTextIsActive.tsx","../src/domain/whiteboard/hooks/useShapeIsActive.tsx","../src/domain/whiteboard/hooks/useBrushIsActive.tsx","../src/domain/whiteboard/hooks/useEraseType.tsx","../src/domain/whiteboard/hooks/useShapesAreSelectable.tsx","../src/domain/whiteboard/hooks/useShapesAreEvented.tsx","../src/config/toolbar-default-values.ts","../src/domain/whiteboard/hooks/useLineWidth.tsx","../src/domain/whiteboard/hooks/useFloodFill.tsx","../src/domain/whiteboard/hooks/useFloodFillIsActive.tsx","../src/domain/whiteboard/hooks/useLaserIsActive.tsx","../src/domain/whiteboard/hooks/useClearIsActive.tsx","../src/domain/whiteboard/hooks/usePointerPermissions.tsx","../src/domain/whiteboard/hooks/lineWidthIsActive.tsx","../src/domain/whiteboard/hooks/useBrushType.tsx","../src/domain/whiteboard/hooks/canvasImagePopup.tsx","../src/domain/whiteboard/hooks/perfectShapeIsActive.tsx","../src/components/WhiteboardToogle.tsx","../src/domain/whiteboard/hooks/usePartialEraseIsActive.tsx","../src/domain/whiteboard/hooks/useUploadFileModal.tsx","../src/domain/whiteboard/redux/actions.ts","../src/domain/whiteboard/redux/permissionsReducer.ts","../src/domain/whiteboard/redux/usersReducer.ts","../src/domain/whiteboard/redux/canvasActionReducer.ts","../src/domain/whiteboard/redux/portfolioReducer.ts","../src/domain/whiteboard/redux/rootReducer.ts","../src/domain/whiteboard/redux/store.ts","../src/domain/whiteboard/brushes/classes/userInfoTooltip.ts","../src/domain/whiteboard/hooks/useSetUserInfoToDisplayModal.tsx","../src/domain/whiteboard/redux/utils.ts","../src/domain/whiteboard/hooks/usePointer.tsx","../src/domain/whiteboard/hooks/useBackgroundColor.tsx","../src/domain/whiteboard/hooks/useStampMode.tsx","../src/domain/whiteboard/hooks/useStamp.tsx","../src/domain/whiteboard/hooks/useStampIsActive.tsx","../src/domain/whiteboard/hooks/useStampAssignationModal.tsx","../src/domain/whiteboard/hooks/useStampAssignedStudents.tsx","../src/domain/whiteboard/WhiteboardContext.tsx","../src/components/toolbar/toolbar-section/ToolbarSection.tsx","../src/components/toolbar/toolbar-button/ToolbarButton.tsx","../src/assets/icons/toolbar/letter-a.svg","../src/assets/icons/toolbar/pointer.svg","../src/assets/icons/toolbar/hand.svg","../src/assets/icons/toolbar/crosshair.svg","../src/assets/icons/toolbar/point.svg","../src/assets/icons/toolbar/right.svg","../src/assets/icons/toolbar/trash.svg","../src/assets/icons/toolbar/eraser.svg","../src/assets/icons/toolbar/pen.svg","../src/assets/icons/toolbar/pencil.svg","../src/assets/icons/toolbar/felt.svg","../src/assets/icons/toolbar/crayon.svg","../src/assets/icons/toolbar/chalk.svg","../src/assets/icons/toolbar/paint-brush.svg","../src/assets/icons/toolbar/marker.svg","../src/assets/icons/toolbar/dashed-pen.svg","../src/assets/icons/toolbar/circle-shape.svg","../src/assets/icons/toolbar/rectangle-shape.svg","../src/assets/icons/toolbar/triangle-shape.svg","../src/assets/icons/toolbar/pentagon-shape.svg","../src/assets/icons/toolbar/hexagon-shape.svg","../src/assets/icons/toolbar/star-shape.svg","../src/assets/icons/toolbar/chat-bubble-shape.svg","../src/assets/icons/toolbar/move.svg","../src/assets/icons/toolbar/photo.svg","../src/assets/icons/toolbar/avatar.svg","../src/assets/icons/toolbar/undo.svg","../src/assets/icons/toolbar/redo.svg","../src/assets/icons/toolbar/clear.svg","../src/assets/icons/toolbar/screenshot.svg","../src/assets/icons/toolbar/share.svg","../src/assets/icons/toolbar/student-stamp-mode.svg","../src/assets/icons/toolbar/present-stamp-mode.svg","../src/assets/icons/toolbar/good-stamp.png","../src/assets/icons/toolbar/well-done-stamp.png","../src/assets/icons/toolbar/excellent-stamp.png","../src/components/toolbar/toolbar-sections.ts","../src/components/toolbar/special-button/SpecialButton.tsx","../src/components/toolbar/color-palette/ColorPalette.tsx","../src/components/toolbar/toolbar-selector/ToolbarSelector.tsx","../src/components/toolbar/special-selector/SpecialSelector.tsx","../src/config/toolbar-element-names.ts","../src/components/toolbar/permissions-mapper.ts","../src/components/toolbar/second-option-selector/SecondOptionSelector.tsx","../src/components/toolbar/Toolbar.tsx","../src/assets/cursors/erase-object.png","../src/domain/whiteboard/utils/shapes.ts","../src/config/undo-redo-values.ts","../src/domain/whiteboard/reducers/undo-redo.tsx","../src/domain/whiteboard/partial-erase/partialErase.ts","../src/domain/whiteboard/canvas-features/useSynchronization.tsx","../src/assets/shapes-points/arrowPoints.ts","../src/assets/shapes-points/chatBubblePoints.ts","../src/assets/shapes-points/circlePoints.ts","../src/assets/shapes-points/pentagonPoints.ts","../src/assets/shapes-points/starPoints.ts","../src/assets/shapes-points/trianglePoints.ts","../src/assets/shapes-points/hexagonPoints.ts","../src/assets/shapes-points/rectanglePoints.ts","../src/assets/shapes-points/index.ts","../src/domain/whiteboard/brushes/classes/chalkBrush.ts","../src/domain/whiteboard/brushes/classes/markerBrush.ts","../src/domain/whiteboard/brushes/classes/paintBrush.ts","../src/domain/whiteboard/brushes/classes/penBrush.ts","../src/domain/whiteboard/canvas-actions/feature-actions/changeBrushTypeUndoRedoGroup.tsx","../src/domain/whiteboard/canvas-actions/feature-actions/changeBrushTypeAction.tsx","../src/domain/whiteboard/shapes/shapes.ts","../src/domain/whiteboard/canvas-actions/shapeActions.ts","../src/domain/whiteboard/utils/scaling.ts","../src/domain/whiteboard/canvas-actions/mouseActions.ts","../src/domain/whiteboard/canvas-actions/objectHandlers.ts","../src/domain/whiteboard/canvas-actions/mouseHandlers/mouseDown.ts","../src/domain/whiteboard/brushes/utils/convertSVGPathInPoints.ts","../src/domain/whiteboard/brushes/utils/setBasePathInNormalBrushes.ts","../src/domain/whiteboard/canvas-actions/shapeActionUtils.ts","../src/domain/whiteboard/canvas-actions/shapeProps.ts","../src/domain/whiteboard/canvas-actions/mouseHandlers/mouseUp.ts","../src/domain/whiteboard/canvas-actions/mouseHandlers/mouseMove.ts","../src/domain/whiteboard/brushes/actions/changeLineColorInSpecialBrushes.ts","../src/domain/whiteboard/canvas-actions/strokeColor.ts","../src/domain/whiteboard/utils/findLocalObjects.ts","../src/domain/whiteboard/canvas-actions/eraseActions.ts","../src/domain/whiteboard/canvas-actions/clearWhiteboardActions.ts","../src/domain/whiteboard/canvas-actions/useCanvasActions.tsx","../src/domain/whiteboard/event-serializer/PainterEvents.ts","../node_modules/gifuct-js/lib/deinterlace.js","../node_modules/gifuct-js/lib/lzw.js","../node_modules/gifuct-js/lib/index.js","../src/domain/whiteboard/gifs-actions/gifToSprite.js","../src/domain/whiteboard/gifs-actions/fabricGif.js","../src/domain/whiteboard/brushes/classes/dashedBrush.ts","../src/domain/whiteboard/brushes/actions/addSynchronizationInSpecialBrushes.ts","../src/domain/whiteboard/synchronization-hooks/useSynchronizedAdded.tsx","../src/domain/whiteboard/synchronization-hooks/useSynchronizedMoved.tsx","../src/domain/whiteboard/undo-redo-actions/getPreviousBackground.tsx","../src/domain/whiteboard/undo-redo-actions/getStateVariables.tsx","../src/domain/whiteboard/undo-redo-actions/RenderLocalUndoRedo.tsx","../src/domain/whiteboard/undo-redo-actions/sendReconstructEvent.tsx","../src/domain/whiteboard/undo-redo-actions/RenderRemoteUndo.tsx","../src/domain/whiteboard/undo-redo-actions/RenderRemoteRedo.tsx","../src/domain/whiteboard/hooks/useUndoRedoEffect.tsx","../src/domain/whiteboard/brushes/actions/colorChangeSynchronizationInSpecialBrushes.ts","../src/domain/whiteboard/synchronization-hooks/useSynchronizedColorChanged.tsx","../src/domain/whiteboard/synchronization-hooks/useSynchronizedFontFamilyChanged.tsx","../src/domain/whiteboard/synchronization-hooks/useSynchronizedRemoved.tsx","../src/domain/whiteboard/synchronization-hooks/useSynchronizedRotated.tsx","../src/domain/whiteboard/synchronization-hooks/useSynchronizedScaled.tsx","../src/domain/whiteboard/synchronization-hooks/useSynchronizedSkewed.tsx","../src/domain/whiteboard/synchronization-hooks/useSynchronizedReconstruct.tsx","../src/domain/whiteboard/utils/laser.ts","../src/domain/whiteboard/synchronization-hooks/useSynchronizedPointer.tsx","../src/domain/whiteboard/synchronization-hooks/useSynchronizedSetToolbarPermissions.tsx","../src/domain/whiteboard/synchronization-hooks/useSynchronizedFontColorChanged.tsx","../src/domain/whiteboard/realtime/realtime.ts","../src/domain/whiteboard/synchronization-hooks/useSynchronizedMovingRealtime.tsx","../src/domain/whiteboard/brushes/actions/changeLineWidthInSpecialBrushes.ts","../src/domain/whiteboard/synchronization-hooks/useSynchronizedLineWidthChanged.tsx","../src/domain/whiteboard/synchronization-hooks/useSynchronizedModified.tsx","../src/domain/whiteboard/utils/useFixedAspectScaling.tsx","../src/modals/canvas-download/utils.ts","../src/modals/canvas-download/canvasDownload.tsx","../src/domain/whiteboard/canvas-features/useSetCanvas.tsx","../src/domain/whiteboard/canvas-features/useObjectManipulation.tsx","../src/domain/whiteboard/canvas-features/useFreeHandDrawing.tsx","../src/domain/whiteboard/canvas-features/useShapeFeature.tsx","../src/domain/whiteboard/utils/floodFiller.ts","../src/domain/whiteboard/utils/changeBackgroundColor.ts","../src/domain/whiteboard/utils/findIntersectedObjects.ts","../src/assets/cursors/flood-fill.png","../src/domain/whiteboard/utils/updateAfterCustomFloodFill.ts","../src/domain/whiteboard/utils/floodFillMouseEvent.ts","../src/domain/whiteboard/canvas-features/useFloodFill.tsx","../src/domain/whiteboard/canvas-features/useObjectSelection.tsx","../src/domain/whiteboard/canvas-features/useKeyHandlers.tsx","../src/domain/whiteboard/canvas-features/useTextObject.tsx","../src/domain/whiteboard/gifs-actions/util.ts","../src/domain/whiteboard/canvas-features/useAddImage.tsx","../src/domain/whiteboard/canvas-features/useChangeLineWidth.tsx","../src/domain/whiteboard/canvas-features/useUndoRedo.tsx","../src/domain/whiteboard/synchronization-hooks/useSynchronizedBrushTypeChanged.tsx","../src/domain/whiteboard/canvas-features/usePointerFeature.tsx","../src/assets/cursors/arrow-pointer.png","../src/assets/cursors/hand-pointer.png","../src/assets/cursors/crosshair-pointer.png","../src/domain/whiteboard/synchronization-hooks/useSynchronizedCursorPointer.tsx","../src/domain/whiteboard/synchronization-hooks/useBackgroundColorChanged.tsx","../src/domain/whiteboard/utils/objectSerializerFormatter.ts","../src/domain/whiteboard/canvas-features/useCopy.tsx","../src/domain/whiteboard/canvas-features/useStampFeature.tsx","../src/domain/whiteboard/synchronization-hooks/useSynchronizedSendStamp.tsx","../src/domain/whiteboard/canvas-features/useObjectHover.tsx","../src/domain/whiteboard/WhiteboardCanvas.tsx","../src/components/whiteboard/WhiteboardContainer.tsx","../src/components/AuthMenu.tsx","../src/domain/whiteboard/Whiteboard.tsx","../src/App.tsx"],"sourcesContent":["'use strict';\n\nvar domain;\n\n// This constructor is used to store event handlers. Instantiating this is\n// faster than explicitly calling `Object.create(null)` to get a \"clean\" empty\n// object (tested with v8 v4.9).\nfunction EventHandlers() {}\nEventHandlers.prototype = Object.create(null);\n\nfunction EventEmitter() {\n  EventEmitter.init.call(this);\n}\nexport default EventEmitter;\nexport {EventEmitter};\n\n// nodejs oddity\n// require('events') === require('events').EventEmitter\nEventEmitter.EventEmitter = EventEmitter\n\nEventEmitter.usingDomains = false;\n\nEventEmitter.prototype.domain = undefined;\nEventEmitter.prototype._events = undefined;\nEventEmitter.prototype._maxListeners = undefined;\n\n// By default EventEmitters will print a warning if more than 10 listeners are\n// added to it. This is a useful default which helps finding memory leaks.\nEventEmitter.defaultMaxListeners = 10;\n\nEventEmitter.init = function() {\n  this.domain = null;\n  if (EventEmitter.usingDomains) {\n    // if there is an active domain, then attach to it.\n    if (domain.active && !(this instanceof domain.Domain)) {\n      this.domain = domain.active;\n    }\n  }\n\n  if (!this._events || this._events === Object.getPrototypeOf(this)._events) {\n    this._events = new EventHandlers();\n    this._eventsCount = 0;\n  }\n\n  this._maxListeners = this._maxListeners || undefined;\n};\n\n// Obviously not all Emitters should be limited to 10. This function allows\n// that to be increased. Set to zero for unlimited.\nEventEmitter.prototype.setMaxListeners = function setMaxListeners(n) {\n  if (typeof n !== 'number' || n < 0 || isNaN(n))\n    throw new TypeError('\"n\" argument must be a positive number');\n  this._maxListeners = n;\n  return this;\n};\n\nfunction $getMaxListeners(that) {\n  if (that._maxListeners === undefined)\n    return EventEmitter.defaultMaxListeners;\n  return that._maxListeners;\n}\n\nEventEmitter.prototype.getMaxListeners = function getMaxListeners() {\n  return $getMaxListeners(this);\n};\n\n// These standalone emit* functions are used to optimize calling of event\n// handlers for fast cases because emit() itself often has a variable number of\n// arguments and can be deoptimized because of that. These functions always have\n// the same number of arguments and thus do not get deoptimized, so the code\n// inside them can execute faster.\nfunction emitNone(handler, isFn, self) {\n  if (isFn)\n    handler.call(self);\n  else {\n    var len = handler.length;\n    var listeners = arrayClone(handler, len);\n    for (var i = 0; i < len; ++i)\n      listeners[i].call(self);\n  }\n}\nfunction emitOne(handler, isFn, self, arg1) {\n  if (isFn)\n    handler.call(self, arg1);\n  else {\n    var len = handler.length;\n    var listeners = arrayClone(handler, len);\n    for (var i = 0; i < len; ++i)\n      listeners[i].call(self, arg1);\n  }\n}\nfunction emitTwo(handler, isFn, self, arg1, arg2) {\n  if (isFn)\n    handler.call(self, arg1, arg2);\n  else {\n    var len = handler.length;\n    var listeners = arrayClone(handler, len);\n    for (var i = 0; i < len; ++i)\n      listeners[i].call(self, arg1, arg2);\n  }\n}\nfunction emitThree(handler, isFn, self, arg1, arg2, arg3) {\n  if (isFn)\n    handler.call(self, arg1, arg2, arg3);\n  else {\n    var len = handler.length;\n    var listeners = arrayClone(handler, len);\n    for (var i = 0; i < len; ++i)\n      listeners[i].call(self, arg1, arg2, arg3);\n  }\n}\n\nfunction emitMany(handler, isFn, self, args) {\n  if (isFn)\n    handler.apply(self, args);\n  else {\n    var len = handler.length;\n    var listeners = arrayClone(handler, len);\n    for (var i = 0; i < len; ++i)\n      listeners[i].apply(self, args);\n  }\n}\n\nEventEmitter.prototype.emit = function emit(type) {\n  var er, handler, len, args, i, events, domain;\n  var needDomainExit = false;\n  var doError = (type === 'error');\n\n  events = this._events;\n  if (events)\n    doError = (doError && events.error == null);\n  else if (!doError)\n    return false;\n\n  domain = this.domain;\n\n  // If there is no 'error' event listener then throw.\n  if (doError) {\n    er = arguments[1];\n    if (domain) {\n      if (!er)\n        er = new Error('Uncaught, unspecified \"error\" event');\n      er.domainEmitter = this;\n      er.domain = domain;\n      er.domainThrown = false;\n      domain.emit('error', er);\n    } else if (er instanceof Error) {\n      throw er; // Unhandled 'error' event\n    } else {\n      // At least give some kind of context to the user\n      var err = new Error('Uncaught, unspecified \"error\" event. (' + er + ')');\n      err.context = er;\n      throw err;\n    }\n    return false;\n  }\n\n  handler = events[type];\n\n  if (!handler)\n    return false;\n\n  var isFn = typeof handler === 'function';\n  len = arguments.length;\n  switch (len) {\n    // fast cases\n    case 1:\n      emitNone(handler, isFn, this);\n      break;\n    case 2:\n      emitOne(handler, isFn, this, arguments[1]);\n      break;\n    case 3:\n      emitTwo(handler, isFn, this, arguments[1], arguments[2]);\n      break;\n    case 4:\n      emitThree(handler, isFn, this, arguments[1], arguments[2], arguments[3]);\n      break;\n    // slower\n    default:\n      args = new Array(len - 1);\n      for (i = 1; i < len; i++)\n        args[i - 1] = arguments[i];\n      emitMany(handler, isFn, this, args);\n  }\n\n  if (needDomainExit)\n    domain.exit();\n\n  return true;\n};\n\nfunction _addListener(target, type, listener, prepend) {\n  var m;\n  var events;\n  var existing;\n\n  if (typeof listener !== 'function')\n    throw new TypeError('\"listener\" argument must be a function');\n\n  events = target._events;\n  if (!events) {\n    events = target._events = new EventHandlers();\n    target._eventsCount = 0;\n  } else {\n    // To avoid recursion in the case that type === \"newListener\"! Before\n    // adding it to the listeners, first emit \"newListener\".\n    if (events.newListener) {\n      target.emit('newListener', type,\n                  listener.listener ? listener.listener : listener);\n\n      // Re-assign `events` because a newListener handler could have caused the\n      // this._events to be assigned to a new object\n      events = target._events;\n    }\n    existing = events[type];\n  }\n\n  if (!existing) {\n    // Optimize the case of one listener. Don't need the extra array object.\n    existing = events[type] = listener;\n    ++target._eventsCount;\n  } else {\n    if (typeof existing === 'function') {\n      // Adding the second element, need to change to array.\n      existing = events[type] = prepend ? [listener, existing] :\n                                          [existing, listener];\n    } else {\n      // If we've already got an array, just append.\n      if (prepend) {\n        existing.unshift(listener);\n      } else {\n        existing.push(listener);\n      }\n    }\n\n    // Check for listener leak\n    if (!existing.warned) {\n      m = $getMaxListeners(target);\n      if (m && m > 0 && existing.length > m) {\n        existing.warned = true;\n        var w = new Error('Possible EventEmitter memory leak detected. ' +\n                            existing.length + ' ' + type + ' listeners added. ' +\n                            'Use emitter.setMaxListeners() to increase limit');\n        w.name = 'MaxListenersExceededWarning';\n        w.emitter = target;\n        w.type = type;\n        w.count = existing.length;\n        emitWarning(w);\n      }\n    }\n  }\n\n  return target;\n}\nfunction emitWarning(e) {\n  typeof console.warn === 'function' ? console.warn(e) : console.log(e);\n}\nEventEmitter.prototype.addListener = function addListener(type, listener) {\n  return _addListener(this, type, listener, false);\n};\n\nEventEmitter.prototype.on = EventEmitter.prototype.addListener;\n\nEventEmitter.prototype.prependListener =\n    function prependListener(type, listener) {\n      return _addListener(this, type, listener, true);\n    };\n\nfunction _onceWrap(target, type, listener) {\n  var fired = false;\n  function g() {\n    target.removeListener(type, g);\n    if (!fired) {\n      fired = true;\n      listener.apply(target, arguments);\n    }\n  }\n  g.listener = listener;\n  return g;\n}\n\nEventEmitter.prototype.once = function once(type, listener) {\n  if (typeof listener !== 'function')\n    throw new TypeError('\"listener\" argument must be a function');\n  this.on(type, _onceWrap(this, type, listener));\n  return this;\n};\n\nEventEmitter.prototype.prependOnceListener =\n    function prependOnceListener(type, listener) {\n      if (typeof listener !== 'function')\n        throw new TypeError('\"listener\" argument must be a function');\n      this.prependListener(type, _onceWrap(this, type, listener));\n      return this;\n    };\n\n// emits a 'removeListener' event iff the listener was removed\nEventEmitter.prototype.removeListener =\n    function removeListener(type, listener) {\n      var list, events, position, i, originalListener;\n\n      if (typeof listener !== 'function')\n        throw new TypeError('\"listener\" argument must be a function');\n\n      events = this._events;\n      if (!events)\n        return this;\n\n      list = events[type];\n      if (!list)\n        return this;\n\n      if (list === listener || (list.listener && list.listener === listener)) {\n        if (--this._eventsCount === 0)\n          this._events = new EventHandlers();\n        else {\n          delete events[type];\n          if (events.removeListener)\n            this.emit('removeListener', type, list.listener || listener);\n        }\n      } else if (typeof list !== 'function') {\n        position = -1;\n\n        for (i = list.length; i-- > 0;) {\n          if (list[i] === listener ||\n              (list[i].listener && list[i].listener === listener)) {\n            originalListener = list[i].listener;\n            position = i;\n            break;\n          }\n        }\n\n        if (position < 0)\n          return this;\n\n        if (list.length === 1) {\n          list[0] = undefined;\n          if (--this._eventsCount === 0) {\n            this._events = new EventHandlers();\n            return this;\n          } else {\n            delete events[type];\n          }\n        } else {\n          spliceOne(list, position);\n        }\n\n        if (events.removeListener)\n          this.emit('removeListener', type, originalListener || listener);\n      }\n\n      return this;\n    };\n\nEventEmitter.prototype.removeAllListeners =\n    function removeAllListeners(type) {\n      var listeners, events;\n\n      events = this._events;\n      if (!events)\n        return this;\n\n      // not listening for removeListener, no need to emit\n      if (!events.removeListener) {\n        if (arguments.length === 0) {\n          this._events = new EventHandlers();\n          this._eventsCount = 0;\n        } else if (events[type]) {\n          if (--this._eventsCount === 0)\n            this._events = new EventHandlers();\n          else\n            delete events[type];\n        }\n        return this;\n      }\n\n      // emit removeListener for all listeners on all events\n      if (arguments.length === 0) {\n        var keys = Object.keys(events);\n        for (var i = 0, key; i < keys.length; ++i) {\n          key = keys[i];\n          if (key === 'removeListener') continue;\n          this.removeAllListeners(key);\n        }\n        this.removeAllListeners('removeListener');\n        this._events = new EventHandlers();\n        this._eventsCount = 0;\n        return this;\n      }\n\n      listeners = events[type];\n\n      if (typeof listeners === 'function') {\n        this.removeListener(type, listeners);\n      } else if (listeners) {\n        // LIFO order\n        do {\n          this.removeListener(type, listeners[listeners.length - 1]);\n        } while (listeners[0]);\n      }\n\n      return this;\n    };\n\nEventEmitter.prototype.listeners = function listeners(type) {\n  var evlistener;\n  var ret;\n  var events = this._events;\n\n  if (!events)\n    ret = [];\n  else {\n    evlistener = events[type];\n    if (!evlistener)\n      ret = [];\n    else if (typeof evlistener === 'function')\n      ret = [evlistener.listener || evlistener];\n    else\n      ret = unwrapListeners(evlistener);\n  }\n\n  return ret;\n};\n\nEventEmitter.listenerCount = function(emitter, type) {\n  if (typeof emitter.listenerCount === 'function') {\n    return emitter.listenerCount(type);\n  } else {\n    return listenerCount.call(emitter, type);\n  }\n};\n\nEventEmitter.prototype.listenerCount = listenerCount;\nfunction listenerCount(type) {\n  var events = this._events;\n\n  if (events) {\n    var evlistener = events[type];\n\n    if (typeof evlistener === 'function') {\n      return 1;\n    } else if (evlistener) {\n      return evlistener.length;\n    }\n  }\n\n  return 0;\n}\n\nEventEmitter.prototype.eventNames = function eventNames() {\n  return this._eventsCount > 0 ? Reflect.ownKeys(this._events) : [];\n};\n\n// About 1.5x faster than the two-arg version of Array#splice().\nfunction spliceOne(list, index) {\n  for (var i = index, k = i + 1, n = list.length; k < n; i += 1, k += 1)\n    list[i] = list[k];\n  list.pop();\n}\n\nfunction arrayClone(arr, i) {\n  var copy = new Array(i);\n  while (i--)\n    copy[i] = arr[i];\n  return copy;\n}\n\nfunction unwrapListeners(arr) {\n  var ret = new Array(arr.length);\n  for (var i = 0; i < ret.length; ++i) {\n    ret[i] = arr[i].listener || arr[i];\n  }\n  return ret;\n}\n","import { EventEmitter } from 'events';\nimport { IPainterController } from './IPainterController';\nimport { PainterEvent } from './PainterEvent';\nimport { ICanvasObject } from '../../../interfaces/objects/canvas-object';\nimport { IStampSyncTarget } from '../../../interfaces/stamps/stamp-sync-target';\n\n/**\n * This class is responsible for receiving remote events and translating that into\n * commands we can use to update the canvas. It needs to understand any optimizations\n * the PaintEventSerializer might do and decode those into usable data again. In the\n * PoC code the only optimization used was multiplying/dividing the coordinates to\n * reduce number of bytes in the data stream.\n */\nexport class EventPainterController extends EventEmitter\n  implements IPainterController {\n  readonly events: PainterEvent[] = [];\n\n  public ws: WebSocket | null;\n\n  private isEventRunning: boolean = false;\n\n  constructor() {\n    super();\n\n    // Websocket is used for test purposes until event emitter is ready. TEMPORARY.\n    // @ts-ignore\n    this.ws = new WebSocket(`ws://${window.location.hostname}:6969`);\n\n    this.ws.onopen = () => {\n      console.log('opened');\n    };\n\n    this.ws.onmessage = (event) => {\n      let data = JSON.parse(event.data);\n\n      switch (data.eventType) {\n        case 'moving': {\n          this.emit('moving', data.id, data.target);\n          break;\n        }\n        case 'added': {\n          this.emit('added', data.id, data.objectType, data.target);\n          break;\n        }\n        case 'moved': {\n          this.emit('moved', data.id, data.objectType, data.target);\n          break;\n        }\n        case 'lineWidthChanged': {\n          this.emit('lineWidthChanged', data.id, data.objectType, data.target);\n          break;\n        }\n        case 'textEdit': {\n          this.emit('textEdit', data.id, data.target);\n          break;\n        }\n        case 'modified': {\n          this.emit('modified', data.id, data.objectType, data.target);\n          break;\n        }\n        case 'rotated': {\n          this.emit('rotated', data.id, data.objectType, data.target);\n          break;\n        }\n        case 'scaled': {\n          this.emit('scaled', data.id, data.objectType, data.target);\n          break;\n        }\n        case 'removed': {\n          this.emit('removed', data.id, data.target);\n          break;\n        }\n        case 'skewed': {\n          this.emit('skewed', data.id, data.target);\n          break;\n        }\n        case 'colorChanged': {\n          this.emit('colorChanged', data.id, data.objectType, data.target);\n          break;\n        }\n        case 'fontFamilyChanged': {\n          this.emit('fontFamilyChanged', data.id, data.target);\n          break;\n        }\n        case 'pointer': {\n          this.emit('pointer', data.id, data.target);\n          break;\n        }\n        case 'setToolbarPermissions': {\n          this.emit('setToolbarPermissions', data.id, data.target);\n          break;\n        }\n        case 'fontColorChanged': {\n          this.emit('fontColorChanged', data.id, data.objectType, data.target);\n          break;\n        }\n        case 'cursorPointer': {\n          this.emit('cursorPointer', data.id, data.target);\n          break;\n        }\n        case 'backgroundColorChanged': {\n          this.emit('backgroundColorChanged', data.id, data.target);\n          break;\n        }\n        case 'sendStamp': {\n          this.emit('sendStamp', data.id, data.target);\n          break;\n        }\n        case 'setUserInfoToDisplay': {\n          this.emit('setUserInfoToDisplay', data.id, data.target);\n          break;\n        }\n        case 'brushTypeChanged': {\n          this.emit('brushTypeChanged', data.id, data.target);\n          break;\n        }\n        default:\n          break;\n      }\n    };\n\n    this.ws.onclose = () => {\n      this.ws = null;\n    };\n  }\n\n  async replayEvents(): Promise<void> {\n    for (const event of this.events) {\n      this.parseAndEmitEvent(event);\n    }\n  }\n\n  handlePainterEvent(events: PainterEvent[]) {\n    for (const event of events) {\n      if (event.isPersistent) {\n        this.waitForEventRunningChanges().then(() => {\n          this.events.push(event);\n          this.parseAndEmitEvent(event);\n        });\n      } else {\n        this.events.push(event);\n        this.parseAndEmitEvent(event);\n      }\n\n      // TODO: We can clear the list of events if we receive a\n      // 'clear all' event. We know there wont be any events to\n      // replay to get to current state of whiteboard right after\n      // a clear (whiteboard will be empty). This assumption might\n      // change once we implement Undo/Redo functions though.\n\n      // In the Poc it used to look like this:\n      // if (event.type === 'painterClear') {\n      //   this.events.splice(0, this.events.length - 1);\n      // }\n    }\n  }\n\n  requestRefetch(): void {\n    this.emit('refetch');\n  }\n\n  public setEventRunning(value: boolean) {\n    this.isEventRunning = value;\n  }\n\n  public getEventRunning() {\n    return this.isEventRunning;\n  }\n\n  private waitForEventRunningChanges() {\n    return new Promise<void>(async (resolve, reject) => {\n      let totalTime = 0;\n      const limitTime = 1000;\n      const timePerIteration = 10;\n\n      const timeout = (ms: number) => {\n        return new Promise((resolve) => setTimeout(resolve, ms));\n      };\n\n      const isFinished = (): Promise<boolean> => {\n        return new Promise(async (resolve) => {\n          if (totalTime >= limitTime) resolve(false);\n\n          if (!this.getEventRunning()) {\n            resolve(true);\n          } else {\n            await timeout(timePerIteration);\n            totalTime += timePerIteration;\n            resolve(isFinished());\n          }\n        });\n      };\n\n      const result = await isFinished();\n\n      if (result === true) {\n        resolve();\n      } else if (result === false) {\n        reject();\n      }\n    });\n  }\n\n  private parseAndEmitEvent(event: PainterEvent) {\n    // NOTE: Empty object if param is undefined.\n    const eventParam = event.param ? event.param : '{}';\n\n    // NOTE: In our case (based on the PaintEventSerializer implementation) the param\n    // will be a JSON stringified fabric.js target object. We may want to introduce\n    // some more type safety for this once we start doing data optimizations in the\n    // serializer. Param data will not be modified by the server.\n    const target = JSON.parse(eventParam);\n\n    // this.emit(event.type, event.objectType, target);\n\n    // NOTE: Right now it might seem unnecessary to have all these events\n    // sharing all the same parameters. But in the future if we apply\n    // som optimization the parameters might be different between add\n    // delete, moved. etc.\n\n    switch (event.type) {\n      case 'added':\n        this.added(event.id, event.objectType, target, !!event.isPersistent);\n        break;\n      case 'moved':\n        this.moved(event.id, event.objectType, target, !!event.isPersistent);\n        break;\n      case 'rotated':\n        this.rotated(event.id, event.objectType, target, !!event.isPersistent);\n        break;\n      case 'scaled':\n        this.scaled(event.id, event.objectType, target, !!event.isPersistent);\n        break;\n      case 'skewed':\n        this.skewed(event.id, target);\n        break;\n      case 'colorChanged':\n        this.colorChanged(\n          event.id,\n          event.objectType,\n          target,\n          !!event.isPersistent\n        );\n        break;\n      case 'modified':\n        this.modified(event.id, event.objectType, target, !!event.isPersistent);\n        break;\n      case 'fontFamilyChanged':\n        this.fontFamilyChanged(event.id, target, !!event.isPersistent);\n        break;\n      case 'removed':\n        this.removed(event.id, target, !!event.isPersistent);\n        break;\n      case 'moving':\n        this.moving(event.id, target);\n        break;\n      case 'setToolbarPermissions':\n        this.setToolbarPermissions(event.id, target, !!event.isPersistent);\n        break;\n      case 'lineWidthChanged':\n        this.lineWidthChanged(\n          event.id,\n          event.objectType,\n          target,\n          !!event.isPersistent\n        );\n        break;\n      case 'pointer':\n        this.pointer(event.id, target);\n        break;\n      case 'textEdit':\n        this.textEdit(event.id, target);\n        break;\n      case 'brushTypeChanged':\n        this.brushTypeChanged(event.id, target, !!event.isPersistent);\n        break;\n      case 'backgroundColorChanged':\n        this.backgroundColorChanged(event.id, target);\n        break;\n      case 'sendStamp':\n        this.sendStamp(event.id, target, !!event.isPersistent);\n        break;\n      case 'fontColorChanged':\n        this.fontColorChanged(\n          event.id,\n          event.objectType,\n          target,\n          !!event.isPersistent\n        );\n        break;\n      case 'reconstruct':\n        this.reconstruct(event.id, target, !!event.isPersistent);\n        break;\n      case 'setUserInfoToDisplay':\n        this.setUserInfoToDisplay('setUserInfoToDisplay', target);\n        break;\n      case 'cursorPointer':\n        this.cursorPointer(event.id, target);\n        break;\n    }\n  }\n\n  private setUserInfoToDisplay(id: string, target: ICanvasObject) {\n    this.emit('setUserInfoToDisplay', id, target);\n    // TEMPORARY for realtime testing purposes.\n    if (!this.ws?.readyState) return;\n    this.ws?.send(\n      JSON.stringify({ id, eventType: 'setUserInfoToDisplay', target })\n    );\n  }\n\n  private textEdit(id: string, target: ICanvasObject) {\n    this.emit('textEdit', id, target);\n\n    // TEMPORARY for realtime testing purposes.\n    if (!this.ws?.readyState) return;\n    this.ws?.send(\n      JSON.stringify({ id, eventType: 'textEdit', target: { ...target, id } })\n    );\n  }\n\n  private added(\n    id: string,\n    objectType: string,\n    target: ICanvasObject,\n    isPersistent: boolean\n  ) {\n    this.emit('added', id, objectType, target, isPersistent);\n\n    // TEMPORARY for realtime testing purposes.\n    if (!this.ws?.readyState) return;\n    this.ws?.send(\n      JSON.stringify({\n        id,\n        objectType,\n        eventType: 'added',\n        target: { ...target, id },\n      })\n    );\n  }\n\n  private moved(\n    id: string,\n    objectType: string,\n    target: ICanvasObject,\n    isPersistent: boolean\n  ) {\n    this.emit('moved', id, objectType, target, isPersistent);\n\n    // TEMPORARY for realtime testing purposes.\n    if (!this.ws?.readyState) return;\n    this.ws?.send(\n      JSON.stringify({\n        id,\n        objectType,\n        eventType: 'moved',\n        target: { ...target },\n      })\n    );\n  }\n\n  private rotated(\n    id: string,\n    objectType: string,\n    target: ICanvasObject,\n    isPersistent: boolean\n  ) {\n    this.emit('rotated', id, objectType, target, isPersistent);\n\n    // TEMPORARY for realtime testing purposes.\n    if (!this.ws?.readyState) return;\n    this.ws?.send(\n      JSON.stringify({\n        id,\n        objectType,\n        eventType: 'rotated',\n        target: { ...target },\n      })\n    );\n  }\n\n  private scaled(\n    id: string,\n    objectType: string,\n    target: ICanvasObject,\n    isPersistent: boolean\n  ) {\n    this.emit('scaled', id, objectType, target, isPersistent);\n\n    // TEMPORARY for realtime testing purposes.\n    if (!this.ws?.readyState) return;\n    this.ws?.send(\n      JSON.stringify({ id, objectType, eventType: 'scaled', target })\n    );\n  }\n\n  private skewed(id: string, target: ICanvasObject) {\n    this.emit('skewed', id, target);\n\n    // TEMPORARY for realtime testing purposes.\n    if (!this.ws?.readyState) return;\n    this.ws?.send(JSON.stringify({ id, eventType: 'skewed', target }));\n  }\n\n  private colorChanged(\n    id: string,\n    objectType: string,\n    target: ICanvasObject,\n    isPersistent: boolean\n  ) {\n    this.emit('colorChanged', id, objectType, target, isPersistent);\n\n    // TEMPORARY for realtime testing purposes.\n    if (!this.ws?.readyState) return;\n    this.ws?.send(\n      JSON.stringify({ id, objectType, eventType: 'colorChanged', target })\n    );\n  }\n\n  private modified(\n    id: string,\n    objectType: string,\n    target: ICanvasObject,\n    isPersistent: boolean\n  ) {\n    this.emit('modified', id, objectType, target, isPersistent);\n\n    // TEMPORARY for realtime testing purposes.\n    if (!this.ws?.readyState) return;\n    this.ws?.send(\n      JSON.stringify({ id, objectType, target, eventType: 'modified' })\n    );\n  }\n\n  private fontFamilyChanged(\n    id: string,\n    target: ICanvasObject,\n    isPersistent: boolean\n  ) {\n    this.emit('fontFamilyChanged', id, target, isPersistent);\n\n    // TEMPORARY for realtime testing purposes.\n    if (!this.ws?.readyState) return;\n    this.ws?.send(\n      JSON.stringify({ id, target, eventType: 'fontFamilyChanged' })\n    );\n  }\n\n  private reconstruct(id: string, target: PainterEvent, isPersistent: boolean) {\n    this.emit('reconstruct', id, target, isPersistent);\n\n    // TEMPORARY for realtime testing purposes.\n    if (!this.ws?.readyState) return;\n    this.ws?.send(JSON.stringify({ id, target, eventType: 'reconstruct' }));\n  }\n\n  private removed(id: string, target: boolean, isPersistent: boolean) {\n    this.emit('removed', id, target, isPersistent);\n\n    // TEMPORARY for realtime testing purposes.\n    if (!this.ws?.readyState) return;\n    this.ws?.send(JSON.stringify({ id, target, eventType: 'removed' }));\n  }\n\n  private moving(id: string, target: ICanvasObject) {\n    this.emit('moving', id, target);\n\n    // TEMPORARY for realtime testing purposes.\n    if (!this.ws?.readyState) return;\n    this.ws?.send(JSON.stringify({ id, target, eventType: 'moving' }));\n  }\n\n  private setToolbarPermissions(\n    id: string,\n    target: ICanvasObject,\n    isPersistent: boolean\n  ) {\n    this.emit('setToolbarPermissions', id, target, isPersistent);\n\n    // TEMPORARY for realtime testing purposes.\n    if (!this.ws?.readyState) return;\n    this.ws?.send(\n      JSON.stringify({ id, target, eventType: 'setToolbarPermissions' })\n    );\n  }\n\n  private fontColorChanged(\n    id: string,\n    objectType: string,\n    target: ICanvasObject,\n    isPersistent: boolean\n  ) {\n    this.emit('fontColorChanged', id, objectType, target, isPersistent);\n\n    // TEMPORARY for realtime testing purposes.\n    if (!this.ws?.readyState) return;\n    this.ws?.send(\n      JSON.stringify({ id, objectType, eventType: 'fontColorChanged', target })\n    );\n  }\n\n  private lineWidthChanged(\n    id: string,\n    objectType: string,\n    target: ICanvasObject,\n    isPersistent: boolean\n  ) {\n    this.emit('lineWidthChanged', id, objectType, target, isPersistent);\n\n    // TEMPORARY for realtime testing purposes.\n    if (!this.ws?.readyState) return;\n    this.ws?.send(\n      JSON.stringify({ id, objectType, eventType: 'lineWidthChanged', target })\n    );\n  }\n\n  private pointer(id: string, target: ICanvasObject) {\n    this.emit('pointer', id, target);\n\n    // TEMPORARY for realtime testing purposes.\n    if (!this.ws?.readyState) return;\n    this.ws?.send(JSON.stringify({ id, eventType: 'pointer', target }));\n  }\n\n  private cursorPointer(id: string, target: ICanvasObject) {\n    this.emit('cursorPointer', id, target);\n\n    // TEMPORARY for realtime testing purposes.\n    if (!this.ws?.readyState) return;\n    this.ws?.send(JSON.stringify({ id, eventType: 'cursorPointer', target }));\n  }\n\n  private brushTypeChanged(\n    id: string,\n    target: ICanvasObject,\n    isPersistent: boolean\n  ) {\n    this.emit('brushTypeChanged', id, target, isPersistent);\n\n    // TEMPORARY for realtime testing purposes.\n    if (!this.ws?.readyState) return;\n    this.ws?.send(\n      JSON.stringify({ id, eventType: 'brushTypeChanged', target })\n    );\n  }\n\n  private backgroundColorChanged(id: string, target: ICanvasObject) {\n    this.emit('backgroundColorChanged', id, target);\n\n    // TEMPORARY for realtime testing purposes.\n    if (!this.ws?.readyState) return;\n    this.ws?.send(\n      JSON.stringify({ id, eventType: 'backgroundColorChanged', target })\n    );\n  }\n\n  private sendStamp(\n    id: string,\n    target: IStampSyncTarget,\n    isPersistent: boolean\n  ) {\n    this.emit('sendStamp', id, target, isPersistent);\n\n    // TEMPORARY for realtime testing purposes.\n    if (!this.ws?.readyState) return;\n    this.ws?.send(JSON.stringify({ id, eventType: 'sendStamp', target }));\n  }\n}\n","import { PainterEvent, PainterEventType } from './PainterEvent';\nimport { EventEmitter } from 'events';\nimport { ICanvasObject } from '../../../interfaces/objects/canvas-object';\nimport { IToolbarUI } from '../../../interfaces/toolbar/toolbar-ui';\nimport { IBrushSyncTarget } from '../../../interfaces/brushes/brush-sync-target';\nimport { Image } from 'fabric/fabric-impl';\nimport { IStampSyncTarget } from '../../../interfaces/stamps/stamp-sync-target';\nimport { IShapeCreationTarget } from '../../../interfaces/brushes/shape-creation-target';\n\n// TODO: This service should probably implement some sort of\n// event batching, especially the line drawing can generate\n// a lot of events in short time, with very minimal lines.\n// Those lines could probably be consolidated and sent as\n// a list of events or even resampled if precision isn't\n// a big concern.\n\n// TODO: Currently each coordinate will be sent twice\n// {p1, p2} -> {p2, p3} -> {p3 p4}, etc. This is wasteful\n// and should be improved.\n\nexport declare interface PaintEventSerializer {\n  on(event: 'event', listener: (payload: PainterEvent) => void): this;\n}\n\nexport interface ObjectEvent {\n  id: string;\n  type?: ObjectType;\n  target?: PayloadTarget;\n  avoidPersistentStoring?: boolean;\n}\n\nexport interface IBackgroundImageEvent {\n  id: string | undefined;\n  type?: ObjectType;\n  target?:\n    | Image\n    | string\n    | File\n    | { backgroundImage: string | File; id: string };\n}\n\nexport type ObjectType =\n  | 'path'\n  | 'textbox'\n  | 'activeSelection'\n  | 'reconstruct'\n  | 'shape'\n  | 'background'\n  | 'image'\n  | 'pointer'\n  | 'group'\n  | 'gif'\n  | 'backgroundImage'\n  | 'backgroundAdded'\n  | 'localImage'\n  | 'svg'\n  | 'userInfoToDisplay'\n  | 'cursorPointer';\n\nexport type PayloadTarget =\n  | ICanvasObject\n  | { objects: ICanvasObject[] }\n  | { background: string }\n  | { backgroundImage: fabric.Image }\n  | { pointer: boolean }\n  | boolean\n  | { activeIds?: string[]; eTarget?: ICanvasObject; isGroup?: boolean }\n  | IToolbarUI\n  | string\n  | {\n      coordinates: { x: number; y: number }[];\n      lineWidth: number;\n      color: string;\n    }\n  | { type: string; svg: string }\n  | IBrushSyncTarget\n  | IStampSyncTarget\n  | IShapeCreationTarget\n  | { src: string }\n  | string;\nexport class PaintEventSerializer extends EventEmitter\n  implements PaintEventSerializer {\n  readonly multiplier: number;\n  readonly serializedEventIDs: string[] = [];\n\n  constructor(multiplier: number) {\n    super();\n    this.multiplier = multiplier;\n  }\n\n  /**\n   * Push a new event to be serialized for synchronization.\n   */\n  push(type: PainterEventType, object: ObjectEvent): void {\n    // TODO: Optmization of which data get serialized, for example:\n    // we wouldn't need to send anything other than id and position\n    // for move events, or the updated color if object color was\n    // modified.\n\n    // TODO: In the case of line shapes, we will want the users to see\n    // the line appear directly, not just when it's finished. In this\n    // case we want to just send the object ID and the additional points\n    // being added. In the PoC I solved this by having begin/end events\n    // which just set up the properties of the line (color/thickness).\n    // We may want to think of similar optimizations later as well.\n    // Example of this was the 'shapeBegin' event, where brushParameters\n    // set up the style for the line.\n    //\n    // shapeBegin(id: string, brushParameters: BrushParameters): void {\n    // const data: OperationData = {\n    //  brush: brushParameters,\n    // };\n    //\n    // const event: PainterEvent = {\n    //   type: 'shapeBegin',\n    //   id: id,\n    //   param: JSON.stringify(data),\n    // };\n    //\n\n    // console.log(`Serializing event for object: ${object.id}`);\n\n    const shape = (object.target as IShapeCreationTarget)?.shape;\n\n    if (type === 'moving' && shape?.basePath) {\n      (object.target as IShapeCreationTarget).shape = shape.toJSON([\n        'basePath',\n      ]);\n    }\n\n    const uniqueObjectId = object.id;\n    const serialized: PainterEvent = {\n      id: uniqueObjectId,\n      type,\n      objectType: object.type as string,\n      param: JSON.stringify(object.target),\n      avoidPersistentStoring: object.avoidPersistentStoring,\n    };\n\n    // NOTE: The list of ID's this serialized generated is for filtering\n    // purposes. Preventing the local user from handling the same event\n    // twice. This state can be checked by using the 'didSerializeEvent'\n    // function.\n    this.serializedEventIDs.push(uniqueObjectId);\n    this.emit('event', serialized);\n  }\n\n  didSerializeEvent(id: string) {\n    return this.serializedEventIDs.findIndex((id2) => id2 === id) !== -1;\n  }\n}\n","import React, {\n  createContext,\n  FunctionComponent,\n  ReactChild,\n  ReactChildren,\n  useContext,\n  useEffect,\n  useState,\n  useCallback,\n} from 'react';\nimport { EventPainterController } from './event-serializer/EventPainterController';\nimport { PainterEvent } from './event-serializer/PainterEvent';\nimport { PaintEventSerializer } from './event-serializer/PaintEventSerializer';\nimport ICanvasActions from './canvas-actions/ICanvasActions';\n\n// NOTE: This is used to scale up the coordinates sent in events\n// to save bytes in the text representation of numbers. E.g. 33\n// instead of 0.0333333333. Sacrificing some sub-pixel accuracy.\nexport const NormalizeCoordinates = 1000;\n\ntype Props = {\n  children?: ReactChild | ReactChildren | null | Element[];\n  simulateNetworkSynchronization?: boolean;\n  simulatePersistence?: boolean;\n  canvasAreCreated?: boolean;\n};\n\ninterface IEventSerializerState {\n  eventSerializer: PaintEventSerializer;\n  eventController: EventPainterController;\n}\n\ninterface IEventSerializerContext {\n  state: IEventSerializerState;\n  actions: ICanvasActions;\n  requestAllEvents: () => void;\n}\n\nconst Context = createContext<IEventSerializerContext>({\n  state: {} as IEventSerializerState,\n  actions: {} as ICanvasActions,\n  requestAllEvents: () => {},\n});\n\n// NOTE: This class was added to allow demonstrating synchronizing whiteboard events without any network or server.\nexport const SharedEventSerializerContextProvider: FunctionComponent<Props> = ({\n  children,\n  simulateNetworkSynchronization,\n  simulatePersistence,\n  canvasAreCreated,\n}: Props): JSX.Element => {\n  const [eventSerializer] = useState<PaintEventSerializer>(\n    new PaintEventSerializer(NormalizeCoordinates)\n  );\n  const [eventController] = useState<EventPainterController>(\n    new EventPainterController()\n  );\n\n  // NOTE: This effect is used to set up network sync simulation. Just handling the locally\n  // serialized events directly using the event controller.\n  useEffect(() => {\n    if (!eventSerializer || !eventController) return;\n    if (!simulateNetworkSynchronization) return;\n\n    // NOTE: We will receive events from the server as arrays of serialized\n    // events. When joining a room the user will receive a big list of events\n    // of all that's been painted so far. After they received the initial big\n    // list the will receive individual events or smaller chunks of events as\n    // others users (and themselves) interact more with the whiteboard.\n\n    // The function receiving events might look like this:\n    const handleRemoteEvent = (payload: PainterEvent) => {\n      // IMPORTANT: We should keep in mind the user's own events\n      // will appear in this list as well. The server doesn't do\n      // any filtering based on the user at this point.\n\n      // Once the events have been received, there needs to be some code\n      // transforming the event data into commands for drawing or updating\n      // objects on the canvas.\n\n      eventController.handlePainterEvent([payload]);\n    };\n\n    // NOTE: This handler simulates receiving events from the server\n    // usually we wouldn't feed remote events directly in to the event\n    // serializer.\n    eventSerializer.on('event', handleRemoteEvent);\n\n    return () => {\n      eventSerializer.removeListener('event', handleRemoteEvent);\n    };\n  }, [eventSerializer, eventController, simulateNetworkSynchronization]);\n\n  // NOTE: Resubmit all events serialized so far.\n  const sendAllPersistentEvents = useCallback(() => {\n    if (!eventSerializer || !eventController) return;\n    if (!simulateNetworkSynchronization) return;\n\n    const stored = window.localStorage.getItem('canvas:simulated:events');\n    if (stored !== null) {\n      const persistentEvents = JSON.parse(stored);\n      console.log(`resubmitting persistent events: ${persistentEvents.length}`);\n      eventController.handlePainterEvent(persistentEvents);\n    }\n  }, [eventController, eventSerializer, simulateNetworkSynchronization]);\n\n  // NOTE: Request fetching all events.\n  const refetchEvents = useCallback(() => {\n    if (!eventSerializer || !eventController || !canvasAreCreated) return;\n\n    eventController.requestRefetch();\n  }, [canvasAreCreated, eventController, eventSerializer]);\n\n  // NOTE: This effect listens for refetch request\n  // and resubmits all events when it's invoked.\n  useEffect(() => {\n    if (!simulatePersistence) return;\n    if (!eventController) return;\n\n    const refetchRequestHandler = () => {\n      sendAllPersistentEvents();\n    };\n\n    eventController.on('refetch', refetchRequestHandler);\n\n    return () => {\n      eventController.removeListener('refetch', refetchRequestHandler);\n    };\n  }, [eventController, sendAllPersistentEvents, simulatePersistence]);\n\n  // NOTE: This effect sets up simulated persistance. This would simulate\n  // events being sent from the server when the user reloads the page.\n  useEffect(() => {\n    if (!eventSerializer || !eventController) return;\n    // changed from simulateNetworkSynchronization, needed network synch, but not persistence, which localStorage is for.\n    if (!simulatePersistence) return;\n\n    const stored = window.localStorage.getItem('canvas:simulated:events');\n    let persistentEvents = [];\n\n    if (stored !== null) {\n      persistentEvents = JSON.parse(stored);\n      console.log(\n        `applying simulated persistent events: ${persistentEvents.length}`\n      );\n      eventController.handlePainterEvent(persistentEvents);\n    }\n\n    let remoteEvents: PainterEvent[] = [...persistentEvents];\n    const nonpersistentEventTypes = [\n      'cursorPointer',\n      'moving',\n      'pointer',\n      'textEdit',\n    ];\n\n    const storeRemoteEvent = (payload: PainterEvent) => {\n      if (\n        nonpersistentEventTypes.includes(payload.type) ||\n        payload.id?.split(':')[1] === 'cursor' ||\n        payload.avoidPersistentStoring\n      )\n        return;\n\n      payload.isPersistent = true;\n      const length = remoteEvents.push(payload);\n      console.log(`storing simulated persistance events: ${length}`);\n\n      window.localStorage.setItem(\n        'canvas:simulated:events',\n        JSON.stringify(remoteEvents)\n      );\n    };\n\n    eventSerializer.on('event', storeRemoteEvent);\n\n    return () => {\n      eventSerializer.removeListener('event', storeRemoteEvent);\n    };\n  }, [\n    eventSerializer,\n    eventController,\n    simulatePersistence,\n    simulateNetworkSynchronization,\n  ]);\n\n  return (\n    <Context.Provider\n      value={{\n        state: {\n          eventSerializer: eventSerializer,\n          eventController: eventController,\n        },\n        actions: {} as ICanvasActions,\n        requestAllEvents: refetchEvents,\n      }}\n    >\n      {children}\n    </Context.Provider>\n  );\n};\n\nexport function useSharedEventSerializer(): IEventSerializerContext {\n  return useContext(Context);\n}\n\nexport default SharedEventSerializerContextProvider;\n","var e=[],t=[];function n(n,r){if(n&&\"undefined\"!=typeof document){var a,s=!0===r.prepend?\"prepend\":\"append\",d=!0===r.singleTag,i=\"string\"==typeof r.container?document.querySelector(r.container):document.getElementsByTagName(\"head\")[0];if(d){var u=e.indexOf(i);-1===u&&(u=e.push(i)-1,t[u]={}),a=t[u]&&t[u][s]?t[u][s]:t[u][s]=c()}else a=c();65279===n.charCodeAt(0)&&(n=n.substring(1)),a.styleSheet?a.styleSheet.cssText+=n:a.appendChild(document.createTextNode(n))}function c(){var e=document.createElement(\"style\");if(e.setAttribute(\"type\",\"text/css\"),r.attributes)for(var t=Object.keys(r.attributes),n=0;n<t.length;n++)e.setAttribute(t[n],r.attributes[t[n]]);var a=\"prepend\"===s?\"afterbegin\":\"beforeend\";return i.insertAdjacentElement(a,e),e}}export default n;\n","import { useState } from 'react';\nexport const useText = (newText: string = '') => {\n  const [text, updateText] = useState(newText);\n  return { text, updateText };\n};\n","import { useState } from 'react';\nexport const useFontFamily = (font: string = 'Arial') => {\n  const [fontFamily, updateFontFamily] = useState<string>(font);\n  return { fontFamily, updateFontFamily };\n};\n","import { useState } from 'react';\nexport const useShapeColor = (color: string = '#000000') => {\n  const [shapeColor, updateShapeColor] = useState(color);\n  return { shapeColor, updateShapeColor };\n};\n","import { useState } from 'react';\nexport const useShape = (newShape: string = 'rectangle') => {\n  const [shape, updateShape] = useState(newShape);\n  return { shape, updateShape };\n};\n","import React, { useCallback, useState } from 'react';\nimport Button from '@material-ui/core/Button';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport DialogActions from '@material-ui/core/DialogActions';\n\nexport interface IClearWhiteboardModal {\n  clearWhiteboard(): void;\n}\n\nexport const useWhiteboardClearModal = () => {\n  const [clearWhiteboardModal, setOpen] = useState(false);\n  const openModal = useCallback(() => {\n    setOpen(true);\n  }, []);\n\n  const closeModal = useCallback(() => {\n    setOpen(false);\n  }, []);\n\n  const ClearWhiteboardModal = (props: IClearWhiteboardModal) => {\n    return (\n      <div>\n        <Dialog\n          open={clearWhiteboardModal}\n          onClose={closeModal}\n          aria-labelledby=\"alert-dialog-title\"\n          aria-describedby=\"alert-dialog-description\"\n        >\n          <DialogTitle id=\"alert-dialog-title\">\n            {'Are you sure you want to clear the board?'}\n          </DialogTitle>\n          <DialogActions>\n            <Button onClick={closeModal} color=\"primary\" variant=\"contained\">\n              Cancel\n            </Button>\n            <Button\n              onClick={props.clearWhiteboard}\n              color=\"secondary\"\n              variant=\"contained\"\n            >\n              Yes\n            </Button>\n          </DialogActions>\n        </Dialog>\n      </div>\n    );\n  };\n\n  return { clearWhiteboardModal, openModal, closeModal, ClearWhiteboardModal };\n};\n","import { useState } from 'react';\n\nexport const usePointerEvents = (newState: boolean = true) => {\n  const [pointerEvents, setPointerEvents] = useState<boolean>(newState);\n\n  return { pointerEvents, setPointerEvents };\n};\n","import { useState } from 'react';\nexport const useFontColor = (color: string = '#000000') => {\n  const [fontColor, updateFontColor] = useState(color);\n  return { fontColor, updateFontColor };\n};\n","import { useState } from 'react';\n\nexport const useTextIsActive = () => {\n  const [textIsActive, updateTextIsActive] = useState(false);\n\n  return { textIsActive, updateTextIsActive };\n};\n","import { useState } from 'react';\n\nexport const useShapeIsActive = () => {\n  const [shapeIsActive, updateShapeIsActive] = useState(false);\n  return { shapeIsActive, updateShapeIsActive };\n};\n","import { useState } from 'react';\n\nexport const useBrushIsActive = () => {\n  const [brushIsActive, updateBrushIsActive] = useState(false);\n  return { brushIsActive, updateBrushIsActive };\n};\n","import { useState } from 'react';\nexport const useEraseType = (type: string | null = null) => {\n  const [eraseType, updateEraseType] = useState<string | null>(type);\n  return { eraseType, updateEraseType };\n};\n","import { useState } from 'react';\n\n/**\n * Indicates of shapes are selectable and eventful.\n */\nexport const useShapesAreSelectable = () => {\n  const [shapesAreSelectable, updateShapesAreSelectable] = useState(false);\n  return { shapesAreSelectable, updateShapesAreSelectable };\n};\n","import { useState } from 'react';\n\n/**\n * Indicates of shapes are eventful.\n */\nexport const useShapesAreEvented = () => {\n  const [shapesAreEvented, updateShapesAreEvented] = useState(false);\n  return { shapesAreEvented, updateShapesAreEvented };\n};\n","export const DEFAULT_VALUES = {\n  POINTER: 'arrow',\n  ERASE_TYPE: null,\n  PEN_LINE: 'pencil',\n  PEN_COLOR: '#000000',\n  LINE_WIDTH: 2,\n  FLOOD_FILL: '#000000',\n  FONT_FAMILY: 'Arial',\n  FONT_COLOR: '#000000',\n  SHAPE: 'rectangle',\n  SHAPE_COLOR: '#000000',\n  STAMP: 'good',\n  IS_DRAWING: false,\n  DISPLAY_USER_INFO_OPTION: 'none',\n  SELECTED_TOOL: 'pointers',\n};\n","import { useState } from 'react';\n\nexport const useLineWidth = (width: number = 2) => {\n  const [lineWidth, updateLineWidth] = useState(width);\n\n  return { lineWidth, updateLineWidth };\n};\n","import { useState } from 'react';\n\nexport const useFloodFill = (color: string = '#000000') => {\n  const [floodFill, updateFloodFill] = useState(color);\n  return { floodFill, updateFloodFill };\n};\n","import { useState } from 'react';\n\nexport const useFloodFillIsActive = () => {\n  const [floodFillIsActive, updateFloodFillIsActive] = useState(false);\n  return { floodFillIsActive, updateFloodFillIsActive };\n};\n","import { useState } from 'react';\n\n/**\n * Hook that updates and indicates if laser pointer is active.\n */\nexport const useLaserIsActive = () => {\n  const [laserIsActive, updateLaserIsActive] = useState(false);\n  return { laserIsActive, updateLaserIsActive };\n};\n\n/**\n * Hook that updates and indicates if laser pointer is available.\n */\nexport const useLaserIsAvailable = () => {\n  const [laserIsAvailable, updateLaserIsAvailable] = useState(false);\n  return { laserIsAvailable, updateLaserIsAvailable };\n};\n","import { useState } from 'react';\n\nexport const useClearIsActive = () => {\n  const [clearIsActive, updateClearIsActive] = useState(false);\n  return { clearIsActive, updateClearIsActive };\n};\n","import { useState } from 'react';\n\nexport const usePointerPermissions = () => {\n  const [pointerIsEnabled, setPointerIsEnabled] = useState(true);\n  return { pointerIsEnabled, setPointerIsEnabled };\n};\n","import { useState } from 'react';\n\nexport const useLineWidthIsActive = () => {\n  const [lineWidthIsActive, updateLineWidthIsActive] = useState(false);\n  return { lineWidthIsActive, updateLineWidthIsActive };\n};\n","import { useState } from 'react';\nimport { IBrushType } from '../../../interfaces/brushes/brush-type';\nexport const useBrushType = (type: IBrushType = 'pencil') => {\n  const [brushType, updateBrushType] = useState<IBrushType>(type);\n  return { brushType, updateBrushType };\n};\n","import { useState } from 'react';\n\nexport const canvasImagePopup = () => {\n  // eslint-disable-next-line react-hooks/rules-of-hooks\n  const [ imagePopupIsOpen, updateImagePopupIsOpen ] = useState(false);\n  return { imagePopupIsOpen, updateImagePopupIsOpen };\n};\n","import { useState } from 'react';\n\nexport const usePerfectShapeIsActive = () => {\n  const [perfectShapeIsActive, updatePerfectShapeIsActive] = useState(false);\n  return { perfectShapeIsActive, updatePerfectShapeIsActive };\n};\n","import React, { ChangeEvent, CSSProperties } from 'react';\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\nimport Switch from '@material-ui/core/Switch';\n\nexport default function WhiteboardToggle(props: {\n  label: string;\n  state: boolean;\n  onStateChange: (value: boolean) => void;\n}) {\n  const { label, state, onStateChange } = props;\n  const handleChange = (event: ChangeEvent<HTMLInputElement>) => {\n    const currentState = event.target.checked;\n    onStateChange(currentState);\n  };\n\n  const containerStyle: CSSProperties = {\n    display: 'inline-block',\n    paddingLeft: 10,\n  };\n\n  return (\n    <div style={containerStyle}>\n      <FormControlLabel\n        control={\n          <Switch\n            checked={state}\n            onChange={handleChange}\n            name=\"checkedB\"\n            color=\"primary\"\n          />\n        }\n        label={label}\n      />\n    </div>\n  );\n}\n","import { useState } from 'react';\n\nexport const usePartialEraseIsActive = () => {\n  const [partialEraseIsActive, updatePartialEraseIsActive] = useState(false);\n  return { partialEraseIsActive, updatePartialEraseIsActive };\n};\n","import React, { ChangeEvent, useCallback, useState } from 'react';\nimport Button from '@material-ui/core/Button';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport Radio from '@material-ui/core/Radio';\nimport RadioGroup from '@material-ui/core/RadioGroup';\nimport FormControl from '@material-ui/core/FormControl';\nimport FormGroup from '@material-ui/core/FormGroup';\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\nimport Checkbox from '@material-ui/core/Checkbox';\nimport { FormLabel } from '@material-ui/core';\nimport { PaintEventSerializer } from '../event-serializer/PaintEventSerializer';\nimport Modal from 'react-modal';\n\n\nexport interface IUploadFileModal {\n  setImage: (image: string | File) => void;\n  setIsGif: (status: boolean) => void;\n  setBackgroundImage: (image: string | File) => void;\n  setBackgroundImageIsPartialErasable: (status: boolean) => void;\n  isBackgroundImage: boolean;\n  setIsBackgroundImage: (status: boolean) => void;\n}\n\n/**\n Modal component to upload image files.\n This component handles the logic to set the type of file(png, svg, giff, img)\n the user is uploading.\n The file size limit is 5mb.\n */\n\nexport const useUploadFileModal = (eventSerializer: PaintEventSerializer, userId: string) => {\n  const [uploadFileModal, setOpen] = useState(false);\n  const openUploadFileModal = useCallback(() => {\n    setOpen(true);\n  }, []);\n\n  const closeUploadFileModal = useCallback(() => {\n    setOpen(false);\n  }, []);\n\n  const UploadFileModal = (props: IUploadFileModal) => {\n    const [value, setValue] = useState('element');\n    const [error, setError] = useState(false);\n    const [gifError, setGifError] = useState(false);\n    const handleChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n      setValue((event.target as HTMLInputElement).value);\n    };\n    const [\n      backgroundImageIsPartialErasable,\n      setBackgroundPartialErasable,\n    ] = useState(false);\n\n    const handleChangeCheckbox = (\n      event: React.ChangeEvent<HTMLInputElement>\n    ) => {\n      setBackgroundPartialErasable(event.target.checked);\n    };\n\n    const onImageChange = (event: ChangeEvent<HTMLInputElement>) => {\n      if (event.target.files && event.target.files[0]) {\n        const {\n          setBackgroundImageIsPartialErasable,\n          setIsBackgroundImage,\n          setBackgroundImage,\n          setImage,\n          setIsGif,\n        } = props;\n        const fileType = event.target.files[0].type;\n        const img = event.target.files[0];\n        const imageSize = img.size;\n        const totalSize = imageSize / 1024;\n\n        if (totalSize >= 5000) {\n          setError(true);\n          return;\n        }\n\n        if (value === 'background') {\n          if (fileType === 'image/gif') {\n            setGifError(true);\n            return;\n          }\n\n          setError(false);\n          setGifError(false);\n          const reader = new FileReader();\n\n          reader.onload = function (e) {\n            setBackgroundImageIsPartialErasable(backgroundImageIsPartialErasable);\n            setIsBackgroundImage(true);\n            if (e?.target?.result) {\n              setBackgroundImage(e.target.result as string);\n              setOpen(false);\n            }\n          }\n\n          reader.readAsDataURL(img);\n\n          return;\n        }\n\n        if (fileType === 'image/gif') {\n          setIsGif(true);\n          setIsBackgroundImage(false);\n          setBackgroundImageIsPartialErasable(false);\n          const reader = new FileReader();\n\n          reader.onload = function (e) {\n            if (e?.target?.result) {\n              setImage(e.target.result as string);\n            }\n          };\n\n          reader.readAsDataURL(img);\n        } else {\n          var reader = new FileReader();\n\n          reader.onload = function (e) {\n            if (e?.target?.result) {\n              // @ts-ignore\n              setImage(e.target.result);\n              setIsGif(false);\n              setIsBackgroundImage(false);\n              setBackgroundImageIsPartialErasable(false);\n            }\n          }\n\n          reader.readAsDataURL(img);\n        }\n\n        setOpen(false);\n        setError(false);\n        setGifError(false);\n      }\n    };\n\n    return (\n      <div>\n        <Modal\n          isOpen={uploadFileModal}\n          onRequestClose={closeUploadFileModal}\n          aria-labelledby=\"upload-image-dialog\"\n          aria-describedby=\"upload-image-dialog\" \n          id=\"upload-modal\"\n        >\n          <DialogTitle id=\"alert-dialog-title\">{'Upload image'}</DialogTitle>\n          <div\n            style={{\n              padding: '20px',\n            }}\n          >\n            {error && (\n              <FormLabel component=\"legend\">\n                File should be less than 5mb\n              </FormLabel>\n            )}\n            {gifError && (\n              <FormLabel component=\"legend\">\n                Can not use gifs as background image\n              </FormLabel>\n            )}\n            <FormControl component=\"fieldset\">\n              <RadioGroup\n                aria-label=\"gender\"\n                name=\"gender1\"\n                value={value}\n                onChange={handleChange}\n              >\n                <FormControlLabel\n                  value=\"element\"\n                  control={<Radio />}\n                  label=\"Set as a whiteboard element\"\n                />\n                <FormControlLabel\n                  value=\"background\"\n                  control={<Radio />}\n                  label=\"Set as background image\"\n                />\n              </RadioGroup>\n              {value === 'background' && (\n                <FormGroup>\n                  <FormControlLabel\n                    control={\n                      <Checkbox\n                        checked={backgroundImageIsPartialErasable}\n                        onChange={handleChangeCheckbox}\n                        name=\"gilad\"\n                      />\n                    }\n                    label=\"Set background image partial erasable\"\n                  />\n                </FormGroup>\n              )}\n            </FormControl>\n          </div>\n          <DialogActions>\n            <Button\n              onClick={closeUploadFileModal}\n              color=\"primary\"\n              variant=\"contained\"\n            >\n              Cancel\n            </Button>\n            <input\n              accept=\"image/*\"\n              style={{ display: 'none' }}\n              id=\"raised-button-file\"\n              multiple\n              type=\"file\"\n              onChange={onImageChange}\n            />\n            <label htmlFor=\"raised-button-file\">\n              <Button component=\"span\" color=\"default\" variant=\"contained\">\n                Upload\n              </Button>\n            </label>\n          </DialogActions>\n        </Modal>\n      </div>\n    );\n  };\n\n  return {\n    uploadFileModal,\n    openUploadFileModal,\n    closeUploadFileModal,\n    UploadFileModal,\n  };\n};\n","/**\n * Redux dispatch actions. Note, actions are directly named after permission properties to prevent\n * rewrites of multiple files.\n */\nexport const UPDATE_PEN = 'pen';\nexport const UPDATE_POINTER = 'pointer';\nexport const UPDATE_MOVE = 'move';\nexport const UPDATE_ERASE = 'erase';\nexport const UPDATE_PARTIAL_ERASE = 'partialErase';\nexport const UPDATE_FLOOD_FILL = 'floodFill';\nexport const UPDATE_TEXT = 'text';\nexport const UPDATE_SHAPE = 'shape';\nexport const UPDATE_UNDO_REDO = 'undoRedo';\nexport const UPDATE_CLEAR_WHITEBOARD = 'clearWhiteboard';\nexport const UPDATE_DOWNLOAD_CANVAS = 'downloadCanvas';\nexport const UPDATE_UPLOAD_IMAGE = 'uploadImage';\nexport const UPDATE_RECEIVED = 'updateReceived';\nexport const ADD_STAMP = 'addStamp';\nexport const UPDATE_USERS = 'updateUsers'\n","import { IPermissions } from '../../../interfaces/permissions/permissions';\nimport {\n  UPDATE_CLEAR_WHITEBOARD,\n  UPDATE_DOWNLOAD_CANVAS,\n  UPDATE_RECEIVED,\n  UPDATE_ERASE,\n  UPDATE_FLOOD_FILL,\n  UPDATE_MOVE,\n  UPDATE_PARTIAL_ERASE,\n  UPDATE_PEN,\n  UPDATE_POINTER,\n  UPDATE_SHAPE,\n  UPDATE_TEXT,\n  UPDATE_UNDO_REDO,\n  UPDATE_UPLOAD_IMAGE,\n} from './actions';\n\n/**\n * Default permissions state.\n */\nconst permissionsState: IPermissions = {\n  pointer: false,\n  move: false,\n  erase: false,\n  partialErase: false,\n  pen: false,\n  floodFill: false,\n  text: false,\n  shape: false,\n  undoRedo: false,\n  clearWhiteboard: false,\n  downloadCanvas: false,\n  uploadImage: false,\n  backgroundColor: false,\n  setUserInfoToDisplay: false,\n  cursorPointer: false\n}\n\n/**\n * Reducer\n * @param state Redux state\n * @param action Action\n */\nexport function permissionsReducer(\n  state: IPermissions = permissionsState,\n  action: { type: string; payload: boolean | IPermissions }\n) {\n  switch (action.type) {\n    case UPDATE_POINTER: {\n      return { ...state, pointer: action.payload };\n    }\n    case UPDATE_PEN: {\n      return { ...state, pen: action.payload };\n    }\n    case UPDATE_SHAPE: {\n      return { ...state, shape: action.payload };\n    }\n    case UPDATE_TEXT: {\n      return { ...state, text: action.payload };\n    }\n    case UPDATE_UNDO_REDO: {\n      return { ...state, undoRedo: action.payload };\n    }\n    case UPDATE_UPLOAD_IMAGE: {\n      return { ...state, uploadImage: action.payload };\n    }\n    case UPDATE_PARTIAL_ERASE: {\n      return { ...state, partialErase: action.payload };\n    }\n    case UPDATE_MOVE: {\n      return { ...state, move: action.payload };\n    }\n    case UPDATE_CLEAR_WHITEBOARD: {\n      return { ...state, clearWhiteboard: action.payload };\n    }\n    case UPDATE_DOWNLOAD_CANVAS: {\n      return { ...state, downloadCanvas: action.payload };\n    }\n    case UPDATE_ERASE: {\n      return { ...state, erase: action.payload };\n    }\n    case UPDATE_FLOOD_FILL: {\n      return { ...state, floodFill: action.payload };\n    }\n    case UPDATE_RECEIVED: {\n      return { ...state, ...(action.payload as IPermissions) };\n    }\n    default:\n      return state;\n  }\n}\n\n","import { IUser } from '../../../interfaces/user/user';\nimport { UPDATE_USERS } from './actions';\n\nconst teacherPermissions = {\n  allowClearAll: true,\n  allowClearOthers: true,\n  allowClearMyself: true,\n};\n\nconst studentPermissions = {\n  allowClearAll: false,\n  allowClearOthers: false,\n  allowClearMyself: true,\n};\n\n/**\n * Default users state.\n */\nconst initialState: IUser[] = [\n  {\n    id: \"1\",\n    name: 'William',\n    role: 'teacher',\n    permissions: teacherPermissions,\n    avatarImg:\n      'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACMAAAAjCAMAAAApB0NrAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAxNpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQ4IDc5LjE2NDAzNiwgMjAxOS8wOC8xMy0wMTowNjo1NyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6OUJGNjVFRkU2NUI2MTFFQkExNzZDNDMwOEMxRUQyODkiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6OUJGNjVFRkQ2NUI2MTFFQkExNzZDNDMwOEMxRUQyODkiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIDIwMjAgTWFjaW50b3NoIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9IjcyOEE2Q0I1MzNFQUUxNTcxRTk3NDVGOTVFNzgzNUU4IiBzdFJlZjpkb2N1bWVudElEPSI3MjhBNkNCNTMzRUFFMTU3MUU5NzQ1Rjk1RTc4MzVFOCIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Pt3gUSkAAAMAUExURYyTl8pbOYSEg7Z9Z6bZ4f+6lrKMdf/D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',\n  },\n  {\n    id: \"2\",\n    name: 'John',\n    role: 'student',\n    permissions: studentPermissions,\n    avatarImg:\n      'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACMAAAAjCAMAAAApB0NrAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAxNpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQ4IDc5LjE2NDAzNiwgMjAxOS8wOC8xMy0wMTowNjo1NyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6OUJGNjVFRkE2NUI2MTFFQkExNzZDNDMwOEMxRUQyODkiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6OUJGNjVFRjk2NUI2MTFFQkExNzZDNDMwOEMxRUQyODkiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIDIwMjAgTWFjaW50b3NoIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9IjIyNkJDNjlFRjMxRDAxOThFQjdBNTc3RURGQjY1RkUxIiBzdFJlZjpkb2N1bWVudElEPSIyMjZCQzY5RUYzMUQwMTk4RUI3QTU3N0VERkI2NUZFMSIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PkcZGzYAAAJ2UExURQAAAAAAAAAAAAAAAAEBAQAAABEREQEB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',\n  },\n  {\n    id: '3',\n    name: 'Mary',\n    role: 'student',\n    permissions: studentPermissions,\n    avatarImg:\n      'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACMAAAAjCAMAAAApB0NrAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAxNpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQ4IDc5LjE2NDAzNiwgMjAxOS8wOC8xMy0wMTowNjo1NyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6RDUyQzg0RDU2NUI2MTFFQkExNzZDNDMwOEMxRUQyODkiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6RDUyQzg0RDQ2NUI2MTFFQkExNzZDNDMwOEMxRUQyODkiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIDIwMjAgTWFjaW50b3NoIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9IjM3QTVBQTI1N0JDNjQzRTZCNUU1MDU2Nzk5NDc3RjIxIiBzdFJlZjpkb2N1bWVudElEPSIzN0E1QUEyNTdCQzY0M0U2QjVFNTA1Njc5OTQ3N0YyMSIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Pl2KB+YAAAMAUExURXxnUZyPjABnpKq1uFZCOP/kzLG9xZbG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',\n  },\n];\n\n/**\n * Reducer\n * @param state Redux state\n * @param action Action\n */\nexport function usersReducer(\n  state: IUser[] = initialState,\n  action: { type: string; payload: IUser | IUser[] }\n) {\n  switch (action.type) {\n    case UPDATE_USERS:\n      const users = action.payload;\n      return users\n    default:\n      return state;\n  }\n}\n","import { TypedShape } from \"../../../interfaces/shapes/shapes\";\n\n\nconst canvasBoardState = {\n  resize: false,\n  shape: null,\n  startPoint: { x:0, y: 0 },\n}\n\nexport function canvasBoardReducer(state: { resize: boolean; shape: TypedShape | null; startPoint: { x: number; y: number;} } = canvasBoardState, action: { type: string, payload?: any }) {\n  switch(action.type) {\n    case 'SET_FALSE': {\n      return { ...state, resize: false };\n    }\n    case 'SET_TRUE': {\n      return { ...state, resize: true };\n    }\n    case 'SET_SHAPE': {\n      return { ...state, shape: action.payload}\n    }\n    case 'SET_SHAPE_NULL': {\n      return { ...state, shape: null };\n    }\n    case 'SET_START_POINT': {\n      return { ...state, startPoint: action.payload }\n    }\n    default:\n      return state;\n  }\n}\n","import { INewStamp, IPortfolio } from '../../../interfaces/portfolio/portfolio';\nimport { ADD_STAMP } from './actions';\n\n/**\n * Default portfolio state.\n */\nconst initialState: IPortfolio[] = [\n  {\n    studentId: 'student',\n    studentStamps: [],\n  },\n  {\n    studentId: 'student2',\n    studentStamps: [],\n  },\n];\n\n/**\n * Reducer\n * @param state Redux state\n * @param action Action\n */\nexport function portfolioReducer(\n  state: IPortfolio[] = initialState,\n  action: { type: string; payload: INewStamp }\n) {\n  switch (action.type) {\n    case ADD_STAMP:\n      const { studentId, stamp } = action.payload;\n\n      const newState = state.map((portfolio) => {\n        // Finding for the element with the received studentId\n        if (portfolio.studentId === studentId) {\n          const stampExist = portfolio.studentStamps.find((current) => {\n            return current.stamp === stamp;\n          });\n\n          /**\n           * If received stamp doesn't exists in the student's portfolio\n           * this just will be added in the student's stamps array\n           * with the quantity of 1\n           */\n          if (!stampExist) {\n            return {\n              studentId,\n              studentStamps: [\n                ...portfolio.studentStamps,\n                { stamp, quantity: 1 },\n              ],\n            };\n          }\n\n          /**\n           * If received stamp exists in the student's porfolio,\n           * is necessary map the student's stamps array\n           * to update the quantity of stamps in the received stamp\n           */\n          const stampsUpdated = portfolio.studentStamps.map((currentStamp) => {\n            /**\n             * If the current stamp is the received stamp,\n             * current stamp quantity will increased in 1\n             */\n            if (currentStamp.stamp === stamp) {\n              return {\n                stamp: currentStamp.stamp,\n                quantity: currentStamp.quantity += 1,\n              };\n            }\n\n            return currentStamp;\n          });\n\n          return {\n            studentId,\n            studentStamps: stampsUpdated,\n          };\n        }\n\n        return portfolio;\n      });\n\n      return newState;\n\n    default:\n      return state;\n  }\n}\n","import { combineReducers } from 'redux';\nimport { permissionsReducer } from './permissionsReducer';\nimport { usersReducer } from './usersReducer';\nimport { canvasBoardReducer } from './canvasActionReducer';\nimport { portfolioReducer } from './portfolioReducer';\n\nconst rootReducer = combineReducers({\n  permissionsState: permissionsReducer,\n  usersState: usersReducer,\n  canvasBoardState: canvasBoardReducer,\n  potfolioReducer: portfolioReducer,\n});\n\nexport default rootReducer;\n","import { createStore } from 'redux';\nimport rootReducer from './rootReducer';\n\n/**\n * Redux store\n */\nconst store = createStore(rootReducer);\n\nexport default store;\n","import { fabric } from 'fabric';\nimport { ICanvasObject } from '../../../../interfaces/objects/canvas-object';\nimport store from '../../redux/store';\nimport { IUser } from '../../../../interfaces/user/user';\n\n/** Interface of the user info option selected variables. */\ninterface IUserInfoOption {\n  value: string;\n  label: string;\n  rectWidth: number;\n  rectHeight: number;\n  textLeft: number;\n  imgSize: number;\n  imgLeft: number;\n  imgTop: number;\n}\n\n/** Class responsible of creating a tooltip with the user info. */\nexport class UserInfoTooltip {\n  private _left: number = 0;\n  private _top: number = 0;\n  private _rect: fabric.Rect;\n  private _img: fabric.Image = new fabric.Image('');\n  private _text: fabric.Text;\n  private _shapesGroup: fabric.Group = new fabric.Group();\n  private _objectId: string | undefined = '';\n  public displayUserInfo: string = 'full';\n  private optionUserInfo: IUserInfoOption;\n  static instance: UserInfoTooltip;\n  static exists = false;\n\n  static infoOptions: IUserInfoOption[] = [\n    {\n      value: 'none',\n      label: 'None',\n      rectWidth: 0,\n      rectHeight: 0,\n      textLeft: 0,\n      imgSize: 0,\n      imgLeft: 0,\n      imgTop: 0,\n    },\n    {\n      value: 'avatar',\n      label: 'User avatar',\n      rectWidth: 35,\n      rectHeight: 35,\n      textLeft: 0,\n      imgSize: 35,\n      imgLeft: 0,\n      imgTop: 0,\n    },\n    {\n      value: 'name',\n      label: 'User name',\n      rectWidth: 115,\n      rectHeight: 25,\n      textLeft: 2.5,\n      imgSize: 35,\n      imgLeft: 0,\n      imgTop: 2.5,\n    },\n    {\n      value: 'full',\n      label: 'User name and avatar',\n      rectWidth: 150,\n      rectHeight: 40,\n      textLeft: 37.5,\n      imgSize: 35,\n      imgLeft: 2.5,\n      imgTop: 2.5,\n    },\n  ];\n\n  /**\n   * Singleton instance creator.\n   * @param {string} displayUserInfo - The value of the selected option for displaying the info.\n   */\n  static createInstance(displayUserInfo: string = 'none') {\n    if (UserInfoTooltip.exists) {\n      return UserInfoTooltip.instance;\n    } else {\n      UserInfoTooltip.instance = new UserInfoTooltip(displayUserInfo);\n    }\n  }\n\n  /**\n   * Create an user info tooltip.\n   * @param {string} displayUserInfo - The value of the selected option for displaying the info.\n   */\n  private constructor(displayUserInfo: string) {\n    UserInfoTooltip.exists = true;\n\n    this.optionUserInfo = UserInfoTooltip.infoOptions[0];\n    this.setInfoOption(displayUserInfo);\n\n    this._img = new fabric.Image('');\n    this._text = new fabric.Text('');\n    this._rect = new fabric.Rect();\n    this.setBasicShapes();\n  }\n\n  /**\n   * Set displayUserInfo value.\n   * @param {string} displayUserInfo - The value of the selected option for displaying the info.\n   */\n  private setInfoOption = (optionValue: string) => {\n    this.displayUserInfo = optionValue;\n    const infoOption = UserInfoTooltip.infoOptions.find(\n      (option) => option.value === this.displayUserInfo\n    );\n    if (infoOption) this.optionUserInfo = infoOption;\n  };\n\n  /**\n   * Create the 3 basic shapes of the tooltip group.\n   */\n  private setBasicShapes() {\n    this._rect = new fabric.Rect({\n      stroke: 'black',\n      fill: 'white',\n      width: this.optionUserInfo.rectWidth,\n      height: this.optionUserInfo.rectHeight,\n      shadow: 'rgba(0,0,0,0.3) 5px 5px 5px',\n      originX: 'left',\n      originY: 'top',\n    });\n\n    this._img.set({\n      originX: 'left',\n      originY: 'top',\n      left: this.optionUserInfo.imgLeft,\n      top: this.optionUserInfo.imgTop,\n      width: this.optionUserInfo.imgSize,\n      height: this.optionUserInfo.imgSize,\n    });\n\n    this._text = new fabric.Text('userName', {\n      fontSize: 14,\n      fontFamily: 'sans-serif',\n      originX: 'left',\n      originY: 'top',\n      left: this.optionUserInfo.textLeft,\n      top: 5,\n    });\n  }\n\n  /**\n   * Get the left position value.\n   * @return {number} The left value.\n   */\n  public get left() {\n    return this._left;\n  }\n\n  /**\n   * Check if position parameters are equal to the one of the object.\n   * @param {number} left - left value.\n   * @param {number} top - top value.\n   * @return {boolean}\n   */\n  public isInSamePosition(left: number, top: number) {\n    return this._left === left && this._top === top;\n  }\n\n  /**\n   * Set position values\n   * @param {number} left - left value.\n   * @param {number} top - top value.\n   */\n  public setPosition(left: number, top: number) {\n    const padding = 5;\n    this._left = left + padding;\n    this._top = top + padding;\n  }\n\n  /**\n   * Set user info\n   * @param {string} imageUrl - url or base64 string of the avatar image.\n   * @param {string} name - name of the user.\n   */\n  public setUserInfo(imageUrl: string, name: string) {\n    this.setImageUrl(imageUrl);\n    this.setText(name);\n  }\n\n  /**\n   * Set tooltip text\n   * @param {string} text - text.\n   */\n  private setText(text: string) {\n    this._text.set({ text });\n  }\n\n  /**\n   * Set image url\n   * @param {string} url - url or base64 string.\n   */\n  private setImageUrl(url: string) {\n    this._img.setSrc(url);\n  }\n\n  /**\n   * Check if tooltip is shown\n   * @return {boolean}\n   */\n  public isShown() {\n    return this._objectId !== '';\n  }\n\n  /**\n   * Check if tooltip assigned object is the same than the parameter one which is beign hovered and the type is the same\n   * @param {ICanvasObject} hoveredObject - canvasObject\n   * @return {boolean}\n   */\n  public hasTheSameObject(hoveredObject: ICanvasObject) {\n    return this._objectId === hoveredObject.id;\n  }\n\n  /**\n   * Check if tooltip type of display user info selected is the same than the parameter value\n   * @param {string} displayUserInfo - displayUserInfo\n   * @return {boolean}\n   */\n  public hasTheSameSelectedType(displayUserInfo: string) {\n    return this.displayUserInfo === displayUserInfo;\n  }\n\n  /**\n   * Remove the assigned object and reset display user info selected\n   */\n  public reset() {\n    this._objectId = '';\n    this.displayUserInfo = 'none';\n  }\n\n  /**\n   * Assign a canvas object to the tooltip\n   * @param {ICanvasObject} hoveredObject - canvasObject being hovered\n   */\n  private setObject(hoveredObject: ICanvasObject) {\n    this._objectId = hoveredObject.id;\n    const userId = this._objectId\n      ? this._objectId.substr(0, this._objectId.indexOf(':'))\n      : '';\n    const user = (store.getState().usersState as IUser[]).find((user) => user.id === userId);\n    this.setPosition(hoveredObject.left || 0, hoveredObject.top || 0);\n    if (user) {\n      this.setUserInfo(user.avatarImg, user.name);\n    } else {\n      this.setUserInfo(\n        'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACMAAAAjCAMAAAApB0NrAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAxNpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQ4IDc5LjE2NDAzNiwgMjAxOS8wOC8xMy0wMTowNjo1NyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6OUJGNjVFRkU2NUI2MTFFQkExNzZDNDMwOEMxRUQyODkiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6OUJGNjVFRkQ2NUI2MTFFQkExNzZDNDMwOEMxRUQyODkiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIDIwMjAgTWFjaW50b3NoIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9IjcyOEE2Q0I1MzNFQUUxNTcxRTk3NDVGOTVFNzgzNUU4IiBzdFJlZjpkb2N1bWVudElEPSI3MjhBNkNCNTMzRUFFMTU3MUU5NzQ1Rjk1RTc4MzVFOCIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Pt3gUSkAAAMAUExURYyTl8pbOYSEg7Z9Z6bZ4f+6lrKMdf/D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',\n        'placeholder'\n      );\n    }\n  }\n\n  /**\n   * Create the shapes fabric group according\n   */\n  private generateShapesGroup() {\n    if (this.displayUserInfo === 'full') {\n      this._shapesGroup = new fabric.Group(\n        [this._rect, this._img, this._text],\n        {\n          left: this._left,\n          top: this._top,\n        }\n      );\n    } else if (this.displayUserInfo === 'name') {\n      this._shapesGroup = new fabric.Group([this._rect, this._text], {\n        left: this._left,\n        top: this._top,\n      });\n    } else {\n      this._shapesGroup = new fabric.Group([this._img], {\n        left: this._left,\n        top: this._top,\n      });\n    }\n    (this._shapesGroup as ICanvasObject).id = 'tooltip';\n  }\n\n  /**\n   *\n   * @param {ICanvasObject} hoveredObject - hovered canvas object\n   * @param {string} displayUserInfo - display option\n   */\n  getDrawing(hoveredObject: ICanvasObject, displayUserInfo: string) {\n    if (this.displayUserInfo !== displayUserInfo) {\n      this.setInfoOption(displayUserInfo);\n      this.setBasicShapes();\n    }\n    this.setObject(hoveredObject);\n    this.generateShapesGroup();\n    return this._shapesGroup;\n  }\n}\n","import React, {  useCallback, useState } from 'react';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport Radio from '@material-ui/core/Radio';\nimport RadioGroup from '@material-ui/core/RadioGroup';\nimport FormControl from '@material-ui/core/FormControl';\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\nimport { useSharedEventSerializer } from '../SharedEventSerializerProvider';\nimport { ObjectEvent } from '../event-serializer/PaintEventSerializer';\nimport { useEffect } from 'react';\nimport { UserInfoTooltip } from '../brushes/classes/userInfoTooltip';\nimport { DialogActions, Button } from '@material-ui/core';\nimport Modal from 'react-modal';\n\n\nexport interface ISetUserInfoToDisplayModal {\n  selection: string;\n  setSelection: (selection: string) => void;\n}\n\n/**\n Modal component to select user info option to display on the tooltip that appears hovering an object.\n */\n\nexport const useSetUserInfoToDisplayModal = (setUserInfo: (value: string) => void) => {\n  \n  const {\n    state: { eventSerializer, eventController },\n  } = useSharedEventSerializer();\n\n  const [setUserInfoToDisplayModal, setOpen] = useState(false);\n  const openSetUserInfoToDisplayModal = useCallback(() => {\n    if(!setUserInfoToDisplayModal)\n      setOpen(true);\n  }, [setUserInfoToDisplayModal]);\n\n  /**\n   * Handles change on user info selection event received\n   */\n  useEffect(()=>{\n    eventController.on(\"setUserInfoToDisplay\", (event, payload)=> {\n      setUserInfo(payload)\n    })\n  }, [eventController, setUserInfo])\n\n  /**\n   * Component to display modal and handles change\n   * @param {ISetUserInfoToDisplayModal} props \n   */\n  const SetUserInfoToDisplayModal = (props: ISetUserInfoToDisplayModal) => {\n    \n    const { setSelection, selection } = props;\n    const [value, setValue] = useState(selection)\n    \n    /**\n     * Handle input radio change\n     * @param {React.ChangeEvent} event \n     */\n    const handleChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n      const value = (event.target as HTMLInputElement).value\n      setValue(value)\n    };\n\n    const confirm = () => {\n      setSelection(value)\n      const payload: ObjectEvent = {\n        type: 'userInfoToDisplay',\n        target: value,\n        id: 'teacher',\n      };\n      eventSerializer.push('setUserInfoToDisplay', payload);\n      setOpen(false);\n    }\n\n    const cancel = () => {\n      setOpen(false);\n    }\n\n    return (\n      <div>\n        <Modal\n          isOpen={setUserInfoToDisplayModal}\n          onRequestClose={cancel}\n          aria-labelledby=\"user-info-to-display-dialog\"\n          aria-describedby=\"user-info-to-display-dialog\"\n          id=\"userinfo-modal\"\n        >\n          <DialogTitle id=\"alert-dialog-title\">\n            {'Set user info to display'}\n          </DialogTitle>\n          <div\n            style={{\n              padding: '20px',\n            }}\n          >\n            <FormControl component=\"fieldset\">\n              <RadioGroup\n                aria-label=\"infotodisplay\"\n                name=\"infotodisplay\"\n                value={selection}\n                onChange={handleChange}\n              >\n                {UserInfoTooltip.infoOptions.map(option => (\n                  <FormControlLabel\n                  key={option.value}\n                  checked={value === option.value}\n                  value={option.value}\n                  control={<Radio />}\n                  label={option.label}\n                />\n                ))}\n                \n              </RadioGroup>\n            </FormControl>\n          </div>\n          <DialogActions>\n            <Button\n              onClick={cancel}\n              color=\"default\"\n              variant=\"contained\"\n            >\n              Cancel\n            </Button>\n            <Button\n              onClick={confirm}\n              color=\"primary\"\n              variant=\"contained\"\n            >\n              Confirm\n            </Button>\n          </DialogActions>\n        </Modal>\n      </div>\n    );\n  };\n\n  return {\n    openSetUserInfoToDisplayModal,\n    SetUserInfoToDisplayModal,\n  };\n};\n","import { IPermissions } from '../../../interfaces/permissions/permissions';\nimport store from './store';\n\n/**\n * Indicates if any tool is enabled in toolbar.\n */\nexport const getToolbarIsEnabled = (userId?: string): boolean => {\n  // teacher hardcoded until sign in active. TEMPORARY\n  if (userId && userId === 'teacher') {\n    return true;\n  }\n\n  const permissions = store.getState().permissionsState;\n\n  for (const key in permissions as IPermissions) {\n    if (permissions[key] === true) {\n      return true;\n    }\n  }\n\n  return false;\n}\n","import { useState } from 'react';\nimport { IPointerType } from '../../../interfaces/pointers/pointer-type';\nexport const usePointer = (pointerType: IPointerType = 'arrow') => {\n  const [pointer, updatePointer] = useState(pointerType);\n  return { pointer, updatePointer };\n};\n","import { useState } from 'react';\n\nexport const useBackgroundColor = (color: string = '#ffffff') => {\n  const [backgroundColor, updateBackgroundColor] = useState(color);\n  return { backgroundColor, updateBackgroundColor };\n};\n","import { useState } from 'react';\nimport { IStampMode } from '../../../interfaces/stamps/stamp-mode';\nexport const useStampMode = (mode: IStampMode = 'student') => {\n  const [stampMode, updateStampMode] = useState(mode);\n  return { stampMode, updateStampMode };\n};\n","import { useState } from 'react';\nexport const useStamp = (newStamp: string = 'good') => {\n  const [stamp, updateStamp] = useState(newStamp);\n  return { stamp, updateStamp };\n};\n","import { useState } from 'react';\n\nexport const useStampIsActive = () => {\n  const [stampIsActive, updateStampIsActive] = useState(false);\n  return { stampIsActive, updateStampIsActive };\n};\n","import React from 'react';\nimport { useState, useCallback } from 'react';\nimport Dialog from '@material-ui/core/Dialog';\nimport {\n  Button,\n  Checkbox,\n  DialogActions,\n  DialogTitle,\n  FormControl,\n  FormControlLabel,\n  FormGroup,\n} from '@material-ui/core';\nimport { IUser } from '../../../interfaces/user/user';\n\nexport interface IStampAssignationModal {\n  assignStudents: (studentIds: string[]) => void;\n  studentsList: IUser[];\n}\n\n/**\n * Generates stamp assignation modal\n */\nexport const useStampAssignationModal = () => {\n  const [stampAssignationModal, setOpen] = useState(false);\n\n  /**\n   * Opens modal\n   */\n  const openStampAssignationModal = useCallback(() => {\n    setOpen(true);\n  }, []);\n\n  /**\n   * Closes modal\n   */\n  const closeStampAssignationModal = useCallback(() => {\n    setOpen(false);\n  }, []);\n\n  /**\n   * Renders modal\n   * @param {IStampAssignationModal} props - Needed props to render the modal\n   * - assignStudents - Callback used when confirm button is clicked\n   * - studentsList - List of the current users that are students\n   */\n  const StampAssignationModal = (props: IStampAssignationModal) => {\n    const { studentsList, assignStudents } = props;\n    /**\n     * Creates the studentsStatus array and put all their values in false\n     */\n    const initStudentsArray = () => {\n      return studentsList.map((_) => false);\n    };\n\n    const [studentsStatus, setStudentsStatus] = useState(initStudentsArray());\n\n    const [selectionExists, setSelectionExists] = useState(false);\n\n    /**\n     * Handles the changes in modal's checkboxes\n     * @param event - Event that contains all the data\n     * related to the current changed checkbox\n     */\n    const handleChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n      let status = studentsStatus;\n\n      const clicked = event.target.id;\n      const clickedIndex = studentsList.findIndex(\n        (student) => student.id === clicked\n      );\n\n      studentsStatus[clickedIndex] = event.target.checked;\n\n      setStudentsStatus(status);\n      areStudentsSelected();\n    };\n\n    /**\n     * Is executed when assign button is clicked,\n     * closes the modal and updates assigned students\n     */\n    const assignStampToStudents = () => {\n      const assigned = studentsList\n        .filter((_, index) => {\n          return studentsStatus[index];\n        })\n        .map((student) => student.id);\n\n      setOpen(false);\n      assignStudents(assigned);\n    };\n\n    /**\n     * Checks if at least one checkbox is active.\n     */\n    const areStudentsSelected = () => {\n      const exists = !!studentsStatus.filter((student) => student).length;\n\n      setSelectionExists(exists);\n    };\n\n    return (\n      <div>\n        <Dialog\n          open={stampAssignationModal}\n          onClose={closeStampAssignationModal}\n          aria-labelledby=\"stamp-assignation-dialog\"\n          aria-describedby=\"stamp-assignation-dialog\"\n        >\n          <DialogTitle id=\"alert-dialog-title\">\n            {'Assign Stamp to:'}\n          </DialogTitle>\n          <div\n            style={{\n              padding: '0 20px 10px 20px',\n            }}\n          >\n            <FormControl component=\"fieldset\">\n              <FormGroup>\n                {studentsList.map((student) => (\n                  <FormControlLabel\n                    key={student.id}\n                    control={\n                      <Checkbox\n                        id={student.id}\n                        onChange={handleChange}\n                        name={student.id}\n                      />\n                    }\n                    label={student.name}\n                  />\n                ))}\n              </FormGroup>\n            </FormControl>\n          </div>\n          <DialogActions style={{ padding: '10px 20px 20px 20px' }}>\n            <Button\n              onClick={closeStampAssignationModal}\n              color=\"primary\"\n              variant=\"contained\"\n            >\n              Cancel\n            </Button>\n            <Button\n              component=\"span\"\n              color=\"default\"\n              variant=\"contained\"\n              onClick={assignStampToStudents}\n              disabled={!selectionExists}\n            >\n              Assign\n            </Button>\n          </DialogActions>\n        </Dialog>\n      </div>\n    );\n  };\n\n  return {\n    stampAssignationModal,\n    openStampAssignationModal,\n    closeStampAssignationModal,\n    StampAssignationModal,\n  };\n};\n","import { useState } from 'react';\n\nexport const useStampAssignedStudents = (studentIds: string[] = []) => {\n  const [stampAssignedStudents, updateStampAssignedStudents] = useState(\n    studentIds\n  );\n  return { stampAssignedStudents, updateStampAssignedStudents };\n};\n","import React, {\n  createContext,\n  MutableRefObject,\n  useCallback,\n  useState,\n} from 'react';\nimport { useText } from './hooks/useText';\nimport { useFontFamily } from './hooks/useFontFamily';\nimport { useShapeColor } from './hooks/useShapeColor';\nimport { useShape } from './hooks/useShape';\nimport { useWhiteboardClearModal } from './hooks/useWhiteboardClearModal';\nimport { usePointerEvents } from './hooks/usePointerEvents';\nimport { useFontColor } from './hooks/useFontColor';\nimport { useTextIsActive } from './hooks/useTextIsActive';\nimport { useShapeIsActive } from './hooks/useShapeIsActive';\nimport { useBrushIsActive } from './hooks/useBrushIsActive';\nimport { useEraseType } from './hooks/useEraseType';\nimport { useShapesAreSelectable } from './hooks/useShapesAreSelectable';\nimport { useShapesAreEvented } from './hooks/useShapesAreEvented';\nimport { DEFAULT_VALUES } from '../../config/toolbar-default-values';\nimport { useLineWidth } from './hooks/useLineWidth';\nimport { useFloodFill } from './hooks/useFloodFill';\nimport { useFloodFillIsActive } from './hooks/useFloodFillIsActive';\nimport { useLaserIsActive } from './hooks/useLaserIsActive';\nimport ICanvasActions from './canvas-actions/ICanvasActions';\nimport { IWhiteboardContext } from '../../interfaces/whiteboard-context/whiteboard-context';\nimport { IClearWhiteboardPermissions } from '../../interfaces/canvas-events/clear-whiteboard-permissions';\nimport { useClearIsActive } from './hooks/useClearIsActive';\nimport { usePointerPermissions } from './hooks/usePointerPermissions';\nimport { useLineWidthIsActive } from './hooks/lineWidthIsActive';\nimport { useBrushType } from './hooks/useBrushType';\nimport { canvasImagePopup } from './hooks/canvasImagePopup';\nimport { usePerfectShapeIsActive } from './hooks/perfectShapeIsActive';\nimport WhiteboardToggle from '../../components/WhiteboardToogle';\nimport { usePartialEraseIsActive } from './hooks/usePartialEraseIsActive';\nimport { useUploadFileModal } from './hooks/useUploadFileModal';\nimport { useSetUserInfoToDisplayModal } from './hooks/useSetUserInfoToDisplayModal';\nimport store from './redux/store';\nimport { getToolbarIsEnabled } from './redux/utils';\nimport { IPermissions } from '../../interfaces/permissions/permissions';\nimport { IBrushType } from '../../interfaces/brushes/brush-type';\nimport { usePointer } from './hooks/usePointer';\nimport { useBackgroundColor } from './hooks/useBackgroundColor';\nimport { useStampMode } from './hooks/useStampMode';\nimport { useStamp } from './hooks/useStamp';\nimport { useStampIsActive } from './hooks/useStampIsActive';\nimport { useStampAssignationModal } from './hooks/useStampAssignationModal';\nimport { useStampAssignedStudents } from './hooks/useStampAssignedStudents';\nimport { ICanvasObject } from '../../interfaces/objects/canvas-object';\nimport { useSharedEventSerializer } from './SharedEventSerializerProvider';\nimport { IUser } from '../../interfaces/user/user';\n\nexport const WhiteboardContext = createContext({} as IWhiteboardContext);\n\nexport const WhiteboardProvider = ({\n  children,\n  clearWhiteboardPermissions,\n  allToolbarIsEnabled,\n  activeCanvas,\n  userId,\n}: {\n  children: React.ReactNode;\n  clearWhiteboardPermissions: IClearWhiteboardPermissions;\n  allToolbarIsEnabled: boolean;\n  activeCanvas: MutableRefObject<string | null>;\n  userId?: string;\n}) => {\n  const { text, updateText } = useText();\n  const { fontColor, updateFontColor } = useFontColor();\n  const { fontFamily, updateFontFamily } = useFontFamily();\n  const { shapeColor, updateShapeColor } = useShapeColor();\n  const { shape, updateShape } = useShape();\n  const { eraseType, updateEraseType } = useEraseType();\n  const { lineWidth, updateLineWidth } = useLineWidth();\n  const { floodFill, updateFloodFill } = useFloodFill();\n  const { stamp, updateStamp } = useStamp();\n  const { stampMode, updateStampMode } = useStampMode();\n  const {\n    stampAssignedStudents,\n    updateStampAssignedStudents,\n  } = useStampAssignedStudents();\n  const { backgroundColor, updateBackgroundColor } = useBackgroundColor();\n  const { pointerEvents, setPointerEvents } = usePointerEvents();\n  const { imagePopupIsOpen, updateImagePopupIsOpen } = canvasImagePopup();\n  const { pointer, updatePointer } = usePointer();\n\n  const {\n    state: { eventSerializer, eventController },\n  } = useSharedEventSerializer();\n\n  const {\n    ClearWhiteboardModal,\n    openModal,\n    closeModal,\n  } = useWhiteboardClearModal();\n\n  const { textIsActive, updateTextIsActive } = useTextIsActive();\n  const { shapeIsActive, updateShapeIsActive } = useShapeIsActive();\n  const { brushIsActive, updateBrushIsActive } = useBrushIsActive();\n  const { clearIsActive, updateClearIsActive } = useClearIsActive();\n  const {\n    partialEraseIsActive,\n    updatePartialEraseIsActive,\n  } = usePartialEraseIsActive();\n  const { lineWidthIsActive, updateLineWidthIsActive } = useLineWidthIsActive();\n  const { brushType, updateBrushType } = useBrushType();\n  const {\n    perfectShapeIsActive,\n    updatePerfectShapeIsActive,\n  } = usePerfectShapeIsActive();\n  const { stampIsActive, updateStampIsActive } = useStampIsActive();\n\n  const {\n    shapesAreSelectable,\n    updateShapesAreSelectable,\n  } = useShapesAreSelectable();\n  const { shapesAreEvented, updateShapesAreEvented } = useShapesAreEvented();\n  const { floodFillIsActive, updateFloodFillIsActive } = useFloodFillIsActive();\n  const { laserIsActive, updateLaserIsActive } = useLaserIsActive();\n  const { pointerIsEnabled, setPointerIsEnabled } = usePointerPermissions();\n  const {\n    UploadFileModal,\n    openUploadFileModal,\n    closeUploadFileModal,\n  } = useUploadFileModal(eventSerializer, userId as string);\n  const {\n    StampAssignationModal,\n    openStampAssignationModal,\n  } = useStampAssignationModal();\n\n  const [displayUserInfo, setUserInfoToDisplay] = useState(\n    DEFAULT_VALUES.DISPLAY_USER_INFO_OPTION\n  );\n  const {\n    SetUserInfoToDisplayModal,\n    openSetUserInfoToDisplayModal,\n  } = useSetUserInfoToDisplayModal(setUserInfoToDisplay);\n\n  const [isDrawing, updateIsDrawing] = useState(DEFAULT_VALUES.IS_DRAWING);\n  const [selectedTool, updateSelectedTool] = useState(\n    DEFAULT_VALUES.SELECTED_TOOL\n  );\n\n  // Provisional (just for change value in Toolbar selectors) they can be modified in the future\n  const [penColor, updatePenColor] = useState(DEFAULT_VALUES.PEN_COLOR);\n  const [eraserIsActive, updateEraserIsActive] = useState(false);\n\n  // NOTE: Actions provided by canvas instance somewhere in the DOM.\n  // The canvas instance will be responsible for registering the actions\n  // fulfilling the ICanvasActions interface. Now there can only be one\n  // instance registered, but in the future we could add support for\n  // multiple instances using the instanceId to choose which one to\n  // apply action to.\n  const [canvasActions, updateCanvasActions] = useState<ICanvasActions>();\n  const [image, setImage] = useState<string | File>('');\n  const [isGif, setIsGif] = useState(false);\n  const [backgroundImage, setBackgroundImage] = useState<string | File>('');\n  const [isBackgroundImage, setIsBackgroundImage] = useState(false);\n  const [localImage, setLocalImage] = useState<string | File>('');\n  const [localBackground, setLocalBackground] = useState(false);\n  const [copiedItem, setCopiedItem] = useState<ICanvasObject | null>(null);\n  const [activeTool, setActiveTool] = useState<string | null>(null);\n\n  const [\n    backgroundImageIsPartialErasable,\n    setBackgroundImageIsPartialErasable,\n  ] = useState(false);\n\n  const users = store\n  .getState()\n  .usersState as IUser[]\n  \n  const studentsList = users && users.length > 0 ? users.filter((user) => user.role === 'student') : [];\n\n  const isLocalObject = (id: string, canvasId: string | undefined) => {\n    const object = id.split(':');\n\n    if (!object.length) {\n      throw new Error('Invalid ID');\n    }\n\n    return object[0] === canvasId;\n  };\n  const [eventedObjects, updateEventedObjects] = useState(true);\n\n  /**\n   * Opens ClearWhiteboardModal\n   */\n  const openClearWhiteboardModal = () => {\n    if (\n      allToolbarIsEnabled ||\n      (store.getState().permissionsState as IPermissions).clearWhiteboard\n    ) {\n      openModal();\n    }\n  };\n\n  /**\n   * Opens Stamp Assignation Modal\n   */\n  const openStampModal = () => {\n    if (allToolbarIsEnabled) {\n      openStampAssignationModal();\n    }\n  };\n\n  const fillColorAction = useCallback(\n    (color: string) => {\n      canvasActions?.fillColor(color);\n    },\n    [canvasActions]\n  );\n\n  const changeStrokeColorAction = useCallback(\n    (color: string) => {\n      canvasActions?.changeStrokeColor(color);\n    },\n    [canvasActions]\n  );\n\n  const changeBrushTypeAction = useCallback(\n    (type: IBrushType) => {\n      canvasActions?.changeBrushType(type);\n    },\n    [canvasActions]\n  );\n\n  const textColorAction = useCallback(\n    (color: string) => {\n      canvasActions?.textColor(color);\n    },\n    [canvasActions]\n  );\n\n  const findObjectById = useCallback(\n    (id: string) => {\n      if (!canvasActions) return undefined;\n\n      return canvasActions.findObjectById(id);\n    },\n    [canvasActions]\n  );\n\n  const isCursorObject = useCallback(\n    (object: ICanvasObject) => {\n      if (!canvasActions) return false;\n\n      return canvasActions.isCursorObject(object);\n    },\n    [canvasActions]\n  );\n\n  const clearWhiteboardActionClearMyself = useCallback(() => {\n    const toolbarIsEnabled = getToolbarIsEnabled(userId);\n\n    if (clearWhiteboardPermissions.allowClearMyself && toolbarIsEnabled) {\n      canvasActions?.clearWhiteboardClearMySelf();\n    }\n  }, [canvasActions, clearWhiteboardPermissions.allowClearMyself, userId]);\n\n  const clearWhiteboardAllowClearOthersAction = useCallback(\n    (userId) => {\n      if (clearWhiteboardPermissions.allowClearOthers) {\n        canvasActions?.clearWhiteboardAllowClearOthers(userId);\n      }\n    },\n    [canvasActions, clearWhiteboardPermissions]\n  );\n\n  const clearWhiteboardActionClearAll = useCallback(() => {\n    if (clearWhiteboardPermissions.allowClearAll) {\n      canvasActions?.clearWhiteboardClearAll();\n    }\n  }, [canvasActions, clearWhiteboardPermissions]);\n\n  const discardActiveObjectAction = useCallback(() => {\n    canvasActions?.discardActiveObject();\n  }, [canvasActions]);\n\n  const addShapeAction = useCallback(\n    (specific: string) => {\n      canvasActions?.addShape(specific);\n    },\n    [canvasActions]\n  );\n\n  const fillBackgroundColor = useCallback(\n    (color: string) => {\n      canvasActions?.fillBackgroundColor(color);\n    },\n    [canvasActions]\n  );\n\n  const setBackgroundColorInCanvas = useCallback(\n    (color: string) => {\n      canvasActions?.setBackgroundColorInCanvas(color);\n    },\n    [canvasActions]\n  );\n\n  const eraseObjectAction = useCallback(() => {\n    canvasActions?.eraseObject();\n  }, [canvasActions]);\n\n  const setCanvasSelectionAction = useCallback(\n    (selection: boolean) => {\n      canvasActions?.setCanvasSelection(selection);\n    },\n    [canvasActions]\n  );\n\n  const undoAction = useCallback(() => {\n    canvasActions?.undo();\n  }, [canvasActions]);\n\n  const redoAction = useCallback(() => {\n    canvasActions?.redo();\n  }, [canvasActions]);\n\n  const perfectShapeIsAvailable = () => {\n    const permissionsState = store.getState().permissionsState as IPermissions;\n    return (\n      allToolbarIsEnabled || permissionsState.shape || permissionsState.move\n    );\n  };\n\n  /**\n   * Returns boolean indicating if undo / redo feature is available.\n   */\n  /**\n   * List of available colors in toolbar\n   * */\n  const colorsList = [\n    'black',\n    'red',\n    'yellow',\n    'green',\n    'blue',\n    'purple',\n    'brown',\n  ];\n\n  const value = {\n    fontFamily,\n    fontColor,\n    updateFontFamily,\n    colorsList,\n    shape,\n    shapeColor,\n    updateShape,\n    text,\n    updateText,\n    openClearWhiteboardModal,\n    openStampModal,\n    pointerEvents,\n    eraseType,\n    updateEraseType,\n    textIsActive,\n    updateTextIsActive,\n    shapeIsActive,\n    updateShapeIsActive,\n    brushIsActive,\n    updateBrushIsActive,\n    clearIsActive,\n    updateClearIsActive,\n    updateFontColor,\n    lineWidth,\n    updateLineWidth,\n    floodFill,\n    updateFloodFill,\n    floodFillIsActive,\n    updateFloodFillIsActive,\n    eventedObjects,\n    updateEventedObjects,\n    // Just for control selectors' value they can be modified in the future\n    pointer,\n    updatePointer,\n    penColor,\n    updatePenColor,\n    stamp,\n    updateStamp,\n    setPointerEvents,\n    updateShapesAreSelectable,\n    updateShapesAreEvented,\n    closeModal,\n    updateShapeColor,\n    shapesAreSelectable,\n    shapesAreEvented,\n    canvasActions,\n    updateCanvasActions,\n    laserIsActive,\n    updateLaserIsActive,\n    lineWidthIsActive,\n    updateLineWidthIsActive,\n    perfectShapeIsActive,\n    updatePerfectShapeIsActive,\n    isLocalObject,\n    brushType,\n    updateBrushType,\n    // NOTE: Actions that will get invoked based on registered handler.\n    fillColor: fillColorAction,\n    textColor: textColorAction,\n    addShape: addShapeAction,\n    discardActiveObject: discardActiveObjectAction,\n    clearWhiteboard: clearWhiteboardActionClearMyself,\n    clearWhiteboardAllowClearOthers: clearWhiteboardAllowClearOthersAction,\n    clearWhiteboardClearAll: clearWhiteboardActionClearAll,\n    eraseObject: eraseObjectAction,\n    changeStrokeColor: changeStrokeColorAction,\n    changeBrushType: changeBrushTypeAction,\n    setCanvasSelection: setCanvasSelectionAction,\n    undo: undoAction,\n    redo: redoAction,\n    pointerIsEnabled,\n    setPointerIsEnabled,\n    allToolbarIsEnabled,\n    imagePopupIsOpen,\n    updateImagePopupIsOpen,\n    activeCanvas,\n    perfectShapeIsAvailable,\n    partialEraseIsActive,\n    updatePartialEraseIsActive,\n    openUploadFileModal,\n    closeUploadFileModal,\n    image,\n    setImage,\n    isGif,\n    setIsGif,\n    backgroundImage,\n    setBackgroundImage,\n    backgroundImageIsPartialErasable,\n    setBackgroundImageIsPartialErasable,\n    isBackgroundImage,\n    setIsBackgroundImage,\n    localImage,\n    setLocalImage,\n    eraserIsActive,\n    updateEraserIsActive,\n    localBackground,\n    setLocalBackground,\n    backgroundColor,\n    updateBackgroundColor,\n    fillBackgroundColor,\n    setBackgroundColorInCanvas,\n    copiedItem,\n    setCopiedItem,\n    stampMode,\n    updateStampMode,\n    stampIsActive,\n    updateStampIsActive,\n    stampAssignedStudents,\n    updateStampAssignedStudents,\n    openSetUserInfoToDisplayModal,\n    displayUserInfo,\n    isDrawing,\n    updateIsDrawing,\n    selectedTool,\n    updateSelectedTool,\n    isCursorObject,\n    findObjectById,\n    eventSerializer,\n    eventController,\n    activeTool,\n    setActiveTool\n  };\n\n  return (\n    <WhiteboardContext.Provider value={value}>\n      {/*: Should work for student and teacher */}\n      <button onClick={() => clearWhiteboardActionClearMyself()}>\n        Clear My self\n      </button>\n      {/*: Should work only for teacher */}\n      <button onClick={() => clearWhiteboardActionClearAll()}>Clear All</button>\n      {/*: Should work only for teacher */}\n      <button disabled onClick={() => clearWhiteboardAllowClearOthersAction('student')}>\n        Clear student\n      </button>\n      {(window.innerWidth <= 768 || window.innerHeight <= 768) &&\n      perfectShapeIsAvailable() ? (\n        <WhiteboardToggle\n          label=\"Perfect Shape Creation\"\n          state={perfectShapeIsActive}\n          onStateChange={(value: boolean) => {\n            if (perfectShapeIsAvailable()) {\n              updatePerfectShapeIsActive(value);\n            }\n          }}\n        />\n      ) : null}\n      <ClearWhiteboardModal\n        clearWhiteboard={clearWhiteboardActionClearMyself}\n      />\n\n      <UploadFileModal\n        setImage={setImage}\n        setIsGif={setIsGif}\n        setBackgroundImage={setBackgroundImage}\n        setBackgroundImageIsPartialErasable={\n          setBackgroundImageIsPartialErasable\n        }\n        isBackgroundImage={isBackgroundImage}\n        setIsBackgroundImage={setIsBackgroundImage}\n      />\n\n      <StampAssignationModal\n        studentsList={studentsList}\n        assignStudents={updateStampAssignedStudents}\n        />\n      <SetUserInfoToDisplayModal\n        \n        setSelection={setUserInfoToDisplay}\n        selection={displayUserInfo}\n      />\n      <SetUserInfoToDisplayModal\n        setSelection={setUserInfoToDisplay}\n        selection={displayUserInfo}\n      />\n      {children}\n    </WhiteboardContext.Provider>\n  );\n};\n","import { CSSProperties } from '@material-ui/core/styles/withStyles';\nimport React from 'react';\n\ninterface IToolbarSectionComponent {\n  children: React.ReactNode;\n}\n\n/**\n * Render a section inside of the Toolbar\n * @param children - content that the TollbarSection will have inside\n */\nfunction ToolbarSection({ children }: IToolbarSectionComponent) {\n  const toolbarSectionStyle: CSSProperties = {\n    width: '52px',\n    display: 'flex',\n    flexDirection: 'column',\n    border: 'solid 1px #d0d0d0',\n    backgroundColor: '#fff',\n    borderRadius: '8px',\n  };\n\n  return (\n    <div className=\"toolbar-section\" style={toolbarSectionStyle}>\n      {children}\n    </div>\n  );\n}\n\nexport default ToolbarSection;\n","import React from 'react';\nimport IToolbarButton from '../../../interfaces/toolbar/toolbar-button/toolbar-button';\nimport '../../../assets/style/toolbar-button.css';\nimport { CSSProperties } from '@material-ui/core/styles/withStyles';\n\n/**\n * Render each button that will be included in the toolbar\n * @param {ToolbarButtonModel} props - Props that the button\n * need to be rendered:\n * - id - id to identify the button\n * - title - title for the button to show in on hover\n * - iconSrc - src for the icon button\n * - iconName - alt for the icon button\n * - selected - flag to set the current selected button\n * - onClick - event to send to parent when the button is clicked\n */\nfunction ToolbarButton(props: IToolbarButton) {\n  const { id, title, iconSrc, iconName, active, enabled, onClick } = props;\n\n  const toolbarButtonStyle: CSSProperties = {\n    border: 'none',\n    width: '36px',\n    marginLeft: '2px',\n    backgroundColor: active ? '#d9d9d9' : '#fff',\n    borderRadius: '4px',\n    outline: 0,\n  };\n\n  return (\n    <button\n      key={id}\n      title={title}\n      style={toolbarButtonStyle}\n      className={[\n        'toolbar-button original',\n        active ? 'selected-button' : '',\n        !active ? 'unselected-button' : '',\n      ].join(' ')}\n      onClick={() => onClick(id)}\n      disabled={enabled === false}\n    >\n      <img src={iconSrc} alt={iconName} width=\"24px\" height=\"24px\" />\n    </button>\n  );\n}\n\nexport default ToolbarButton;\n","var img = \"data:image/svg+xml,%3csvg id='Capa_1' enable-background='new 0 0 409.294 409.294' height='512' viewBox='0 0 409.294 409.294' width='512' xmlns='http://www.w3.org/2000/svg'%3e%3cpath d='m116.915 263.118h175.412l28.516 58.471h64.407l-148.431-321.589h-64.398l-148.43 321.588h64.407zm87.705-193.356 62.252 134.885h-124.503z'/%3e%3cpath d='m0 350.824h409.294v58.471h-409.294z'/%3e%3c/svg%3e\";\n  export default img;","var img = \"data:image/svg+xml,%3c%3fxml version='1.0' encoding='iso-8859-1'%3f%3e%3c!-- Generator: Adobe Illustrator 19.0.0%2c SVG Export Plug-In . SVG Version: 6.00 Build 0) --%3e%3csvg version='1.1' id='Capa_1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' x='0px' y='0px' viewBox='0 0 461.192 461.192' style='enable-background:new 0 0 461.192 461.192%3b' xml:space='preserve'%3e%3cg%3e %3cg%3e %3cpath d='M389.833%2c296.806l-250.3-293.3c-3.6-4.2-9.9-4.7-14.1-1.1c-1.9%2c1.6-3.1%2c3.8-3.4%2c6.2l-53%2c382.1c-0.8%2c5.5%2c3.1%2c10.5%2c8.5%2c11.3 c2.6%2c0.4%2c5.3-0.3%2c7.4-1.9l101.9-77.6l38.6%2c131.5c1.6%2c5.3%2c7.1%2c8.3%2c12.4%2c6.8l55-16.2c5.3-1.6%2c8.3-7.1%2c6.8-12.4l-37.8-128.6 l119.6%2c9.7c5.5%2c0.4%2c10.3-3.7%2c10.8-9.2C392.433%2c301.406%2c391.633%2c298.806%2c389.833%2c296.806z M248.933%2c282.306 c-5.5-0.4-10.3%2c3.7-10.8%2c9.2c-0.1%2c1.2%2c0%2c2.4%2c0.4%2c3.6l39.1%2c133l-35.8%2c10.5l-39.9-135.8c-1.6-5.3-7.1-8.3-12.4-6.8 c-1.2%2c0.3-2.3%2c0.9-3.2%2c1.6l-94.2%2c71.7l46.7-336l220.2%2c257.9L248.933%2c282.306z'/%3e %3c/g%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3c/svg%3e\";\n  export default img;","var img = \"data:image/svg+xml,%3c%3fxml version='1.0' encoding='iso-8859-1'%3f%3e%3c!-- Generator: Adobe Illustrator 19.0.0%2c SVG Export Plug-In . SVG Version: 6.00 Build 0) --%3e%3csvg version='1.1' id='Layer_1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' x='0px' y='0px' viewBox='0 0 512 512' style='enable-background:new 0 0 512 512%3b' xml:space='preserve'%3e%3cg%3e %3cg%3e %3cpath d='M426.667%2c192c-7.875%2c0-15.26%2c2.146-21.604%2c5.885C402.677%2c176.594%2c384.573%2c160%2c362.667%2c160 c-10.417%2c0-19.99%2c3.771-27.427%2c10.052c-7.469-12.406-21.063-20.719-36.573-20.719c-7.76%2c0-15.052%2c2.083-21.333%2c5.729V42.667 C277.333%2c19.135%2c258.198%2c0%2c234.667%2c0S192%2c19.135%2c192%2c42.667v285.479c0%2c5.375-3.542%2c8.135-5.063%2c9.073s-5.615%2c2.865-10.375%2c0.469 l-68.5-34.25c-6.24-3.125-13.229-4.771-20.208-4.771c-24.917%2c0-45.187%2c20.271-45.187%2c45.188V352c0%2c2.958%2c1.229%2c5.781%2c3.385%2c7.802 l123.115%2c114.906C194.937%2c498.75%2c228.542%2c512%2c263.781%2c512h66.885c76.458%2c0%2c138.667-62.208%2c138.667-138.667V234.667 C469.333%2c211.135%2c450.198%2c192%2c426.667%2c192z M448%2c373.333c0%2c64.698-52.635%2c117.333-117.333%2c117.333h-66.885 c-29.813%2c0-58.25-11.208-80.052-31.563L64%2c347.365v-3.51C64%2c330.698%2c74.698%2c320%2c87.854%2c320c3.677%2c0%2c7.375%2c0.875%2c10.667%2c2.521 l68.5%2c34.25c9.99%2c5.01%2c21.635%2c4.458%2c31.135-1.396c9.5-5.875%2c15.177-16.052%2c15.177-27.229V42.667 c0-11.76%2c9.573-21.333%2c21.333-21.333c11.76%2c0%2c21.333%2c9.573%2c21.333%2c21.333v160c0%2c5.896%2c4.771%2c10.667%2c10.667%2c10.667 c5.896%2c0%2c10.667-4.771%2c10.667-10.667V192c0-11.76%2c9.573-21.333%2c21.333-21.333c11.76%2c0%2c21.333%2c9.573%2c21.333%2c21.333v10.667 c0%2c0.021%2c0%2c0.042%2c0%2c0.063v0.01c0.042%2c5.854%2c4.802%2c10.594%2c10.667%2c10.594c5.896%2c0%2c10.667-4.771%2c10.667-10.667V202.5 c0.083-11.677%2c9.646-21.167%2c21.333-21.167c11.76%2c0%2c21.333%2c9.573%2c21.333%2c21.333v32c0%2c5.896%2c4.771%2c10.667%2c10.667%2c10.667 s10.667-4.771%2c10.667-10.667c0-11.76%2c9.573-21.333%2c21.333-21.333S448%2c222.906%2c448%2c234.667V373.333z'/%3e %3c/g%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3c/svg%3e\";\n  export default img;","var img = \"data:image/svg+xml,%3c%3fxml version='1.0' encoding='iso-8859-1'%3f%3e%3c!-- Generator: Adobe Illustrator 19.0.0%2c SVG Export Plug-In . SVG Version: 6.00 Build 0) --%3e%3csvg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' version='1.1' id='Layer_1' x='0px' y='0px' viewBox='0 0 512 512' style='enable-background:new 0 0 512 512%3b' xml:space='preserve' width='512' height='512'%3e%3cpath d='M256%2c512c-11.046%2c0-20-8.954-20-20V327c0-11.046%2c8.954-20%2c20-20s20%2c8.954%2c20%2c20v165C276%2c503.046%2c267.046%2c512%2c256%2c512z M276%2c185V20c0-11.046-8.954-20-20-20s-20%2c8.954-20%2c20v165c0%2c11.046%2c8.954%2c20%2c20%2c20S276%2c196.046%2c276%2c185z M512%2c256 c0-11.046-8.954-20-20-20H326c-11.046%2c0-20%2c8.954-20%2c20s8.954%2c20%2c20%2c20h166C503.046%2c276%2c512%2c267.046%2c512%2c256z M205%2c256 c0-11.046-8.954-20-20-20H20c-11.046%2c0-20%2c8.954-20%2c20s8.954%2c20%2c20%2c20h165C196.046%2c276%2c205%2c267.046%2c205%2c256z M256%2c276 c11.046%2c0%2c20-8.954%2c20-20c0-11.046-8.954-20-20-20c-11.046%2c0-20%2c8.954-20%2c20C236%2c267.046%2c244.954%2c276%2c256%2c276z'/%3e%3c/svg%3e\";\n  export default img;","var img = \"data:image/svg+xml,%3c%3fxml version='1.0'%3f%3e%3csvg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' version='1.1' width='512px' height='512px' viewBox='0 0 16 16'%3e%3cg%3e%3cpath fill='%23FB5252' d='M8 4c-2.2 0-4 1.8-4 4s1.8 4 4 4 4-1.8 4-4-1.8-4-4-4z' data-original='%23444444' class='active-path' data-old_color='%23444444'/%3e%3cpath fill='%23FB5252' d='M8 1c3.9 0 7 3.1 7 7s-3.1 7-7 7-7-3.1-7-7 3.1-7 7-7zM8 0c-4.4 0-8 3.6-8 8s3.6 8 8 8 8-3.6 8-8-3.6-8-8-8v0z' data-original='%23444444' class='active-path' data-old_color='%23444444'/%3e%3c/g%3e %3c/svg%3e\";\n  export default img;","var img = \"data:image/svg+xml,%3c%3fxml version='1.0' encoding='iso-8859-1'%3f%3e%3c!-- Generator: Adobe Illustrator 19.0.0%2c SVG Export Plug-In . SVG Version: 6.00 Build 0) --%3e%3csvg version='1.1' id='Capa_1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' x='0px' y='0px' viewBox='0 0 368 368' style='enable-background:new 0 0 368 368%3b' xml:space='preserve'%3e%3cg%3e %3cg%3e %3cpath d='M365%2c177.751l-160-128c-2.408-1.92-5.712-2.288-8.472-0.968c-2.76%2c1.336-4.528%2c4.144-4.528%2c7.216v72H16 c-8.824%2c0-16%2c7.176-16%2c16v80c0%2c8.824%2c7.176%2c16%2c16%2c16h176v72c0%2c3.072%2c1.768%2c5.88%2c4.528%2c7.208c1.112%2c0.528%2c2.296%2c0.792%2c3.472%2c0.792 c1.784%2c0%2c3.552-0.6%2c5-1.752l160-128c1.896-1.52%2c3-3.816%2c3-6.248S366.896%2c179.271%2c365%2c177.751z M208%2c295.351v-63.352 c0-4.416-3.576-8-8-8H16l-0.016-80H16h184c4.424%2c0%2c8-3.584%2c8-8V72.647l139.192%2c111.352L208%2c295.351z'/%3e %3c/g%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3c/svg%3e\";\n  export default img;","var img = \"data:image/svg+xml,%3csvg height='427pt' viewBox='-40 0 427 427.00131' width='427pt' xmlns='http://www.w3.org/2000/svg'%3e%3cpath d='m232.398438 154.703125c-5.523438 0-10 4.476563-10 10v189c0 5.519531 4.476562 10 10 10 5.523437 0 10-4.480469 10-10v-189c0-5.523437-4.476563-10-10-10zm0 0'/%3e%3cpath d='m114.398438 154.703125c-5.523438 0-10 4.476563-10 10v189c0 5.519531 4.476562 10 10 10 5.523437 0 10-4.480469 10-10v-189c0-5.523437-4.476563-10-10-10zm0 0'/%3e%3cpath d='m28.398438 127.121094v246.378906c0 14.5625 5.339843 28.238281 14.667968 38.050781 9.285156 9.839844 22.207032 15.425781 35.730469 15.449219h189.203125c13.527344-.023438 26.449219-5.609375 35.730469-15.449219 9.328125-9.8125 14.667969-23.488281 14.667969-38.050781v-246.378906c18.542968-4.921875 30.558593-22.835938 28.078124-41.863282-2.484374-19.023437-18.691406-33.253906-37.878906-33.257812h-51.199218v-12.5c.058593-10.511719-4.097657-20.605469-11.539063-28.03125-7.441406-7.421875-17.550781-11.5546875-28.0625-11.46875h-88.796875c-10.511719-.0859375-20.621094 4.046875-28.0625 11.46875-7.441406 7.425781-11.597656 17.519531-11.539062 28.03125v12.5h-51.199219c-19.1875.003906-35.394531 14.234375-37.878907 33.257812-2.480468 19.027344 9.535157 36.941407 28.078126 41.863282zm239.601562 279.878906h-189.203125c-17.097656 0-30.398437-14.6875-30.398437-33.5v-245.5h250v245.5c0 18.8125-13.300782 33.5-30.398438 33.5zm-158.601562-367.5c-.066407-5.207031 1.980468-10.21875 5.675781-13.894531 3.691406-3.675781 8.714843-5.695313 13.925781-5.605469h88.796875c5.210937-.089844 10.234375 1.929688 13.925781 5.605469 3.695313 3.671875 5.742188 8.6875 5.675782 13.894531v12.5h-128zm-71.199219 32.5h270.398437c9.941406 0 18 8.058594 18 18s-8.058594 18-18 18h-270.398437c-9.941407 0-18-8.058594-18-18s8.058593-18 18-18zm0 0'/%3e%3cpath d='m173.398438 154.703125c-5.523438 0-10 4.476563-10 10v189c0 5.519531 4.476562 10 10 10 5.523437 0 10-4.480469 10-10v-189c0-5.523437-4.476563-10-10-10zm0 0'/%3e%3c/svg%3e\";\n  export default img;","var img = \"data:image/svg+xml,%3c%3fxml version='1.0' encoding='iso-8859-1'%3f%3e%3c!-- Generator: Adobe Illustrator 19.0.0%2c SVG Export Plug-In . SVG Version: 6.00 Build 0) --%3e%3csvg version='1.1' id='Capa_1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' x='0px' y='0px' viewBox='0 0 433.25 433.25' style='enable-background:new 0 0 433.25 433.25%3b' xml:space='preserve'%3e%3cg%3e %3cg%3e %3cpath d='M418.4%2c192.331c19.8-19.8%2c19.8-51.9%2c0-71.7l-0.1-0.1l-78.6-78.3c-19.8-19.8-51.9-19.7-71.8%2c0l-169.5%2c169.6l-54.2%2c54.1 c-19.8%2c19.7-19.8%2c51.8-0.1%2c71.6l48.3%2c48.3H10c-5.5%2c0-10%2c4.5-10%2c10s4.5%2c10%2c10%2c10h297.4c5.5%2c0%2c10-4.5%2c10-10s-4.5-10-10-10H225 l23.9-23.7L418.4%2c192.331z M196.7%2c385.831h-76.1l-62.3-62.4c-12-12-11.9-31.4%2c0-43.4l47.1-47l122.2%2c122L196.7%2c385.831z M119.6%2c218.931l162.5-162.5c12-12%2c31.5-12%2c43.5%2c0l78.6%2c78.4c12%2c12%2c12%2c31.4%2c0%2c43.5l-162.4%2c162.8L119.6%2c218.931z'/%3e %3c/g%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3c/svg%3e\";\n  export default img;","var img = \"data:image/svg+xml,%3csvg id='bold' enable-background='new 0 0 24 24' height='512' viewBox='0 0 24 24' width='512' xmlns='http://www.w3.org/2000/svg'%3e%3cpath d='m2.43 15.67 13.688-13.698c.141-.142.332-.222.531-.222h.001c.199 0 .39.079.53.22l4.85 4.85c.141.141.22.332.22.53 0 .199-.079.39-.22.531l-13.7 13.69z'/%3e%3cpath d='m22.568 5.943.493-.493c.605-.606.939-1.405.939-2.25 0-.864-.336-1.668-.937-2.258-1.202-1.214-3.315-1.213-4.514-.002l-.493.493z'/%3e%3cpath d='m2.024 16.678-1.99 6.348c-.083.266-.012.557.186.754.142.143.334.22.53.22.075 0 .15-.011.225-.034l6.347-1.99z'/%3e%3cpath d='m6.97 8.788c.192 0 .384-.073.53-.22l4.842-4.842c.259-.258.605-.36.944-.335l1.184-1.185c-1.024-.548-2.326-.403-3.189.459l-4.842 4.842c-.293.293-.293.768 0 1.061.147.146.338.22.531.22z'/%3e%3c/svg%3e\";\n  export default img;","var img = \"data:image/svg+xml,%3c%3fxml version='1.0' encoding='iso-8859-1'%3f%3e%3c!-- Generator: Adobe Illustrator 19.0.0%2c SVG Export Plug-In . SVG Version: 6.00 Build 0) --%3e%3csvg version='1.1' id='Capa_1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' x='0px' y='0px' viewBox='0 0 512 512' style='enable-background:new 0 0 512 512%3b' xml:space='preserve'%3e%3cg%3e %3cg%3e %3cpolygon points='51.2%2c353.28 0%2c512 158.72%2c460.8 '/%3e %3c/g%3e%3c/g%3e%3cg%3e %3cg%3e %3crect x='89.73' y='169.097' transform='matrix(0.7071 -0.7071 0.7071 0.7071 -95.8575 260.3719)' width='353.277' height='153.599'/%3e %3c/g%3e%3c/g%3e%3cg%3e %3cg%3e %3cpath d='M504.32%2c79.36L432.64%2c7.68c-10.24-10.24-25.6-10.24-35.84%2c0l-23.04%2c23.04l107.52%2c107.52l23.04-23.04 C514.56%2c104.96%2c514.56%2c89.6%2c504.32%2c79.36z'/%3e %3c/g%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3c/svg%3e\";\n  export default img;","var img = \"data:image/svg+xml,%3csvg height='464pt' viewBox='0 0 464 464' width='464pt' xmlns='http://www.w3.org/2000/svg'%3e%3cpath d='m25.945312 398.347656 39.421876 39.425782 113.519531-63.855469-89.085938-89.089844zm0 0'/%3e%3cpath d='m103.3125 250.339844c-1.671875-1.671875-3.984375-2.621094-6.34375-2.621094-4.945312 0-8.96875 4.023438-8.96875 8.964844 0 2.359375.953125 4.671875 2.625 6.34375l110.0625 110.066406c1.671875 1.671875 3.984375 2.625 6.34375 2.625 4.945312 0 8.96875-4.027344 8.96875-8.96875 0-2.359375-.953125-4.671875-2.625-6.34375zm0 0'/%3e%3cpath d='m2.625 448.40625c-1.671875 1.671875-2.625 3.984375-2.625 6.34375 0 4.941406 4.023438 8.96875 8.96875 8.96875 2.359375 0 4.671875-.953125 6.34375-2.625l25.375-25.375-12.6875-12.691406zm0 0'/%3e%3cpath d='m127.3125 226.339844c-1.671875-1.671875-3.984375-2.621094-6.34375-2.621094-4.945312 0-8.96875 4.023438-8.96875 8.964844 0 2.359375.953125 4.671875 2.625 6.34375l110.0625 110.066406c1.671875 1.671875 3.984375 2.625 6.34375 2.625 4.945312 0 8.96875-4.027344 8.96875-8.96875 0-2.359375-.953125-4.671875-2.625-6.34375zm0 0'/%3e%3cpath d='m319.3125 34.339844c-1.671875-1.671875-3.984375-2.621094-6.34375-2.621094-4.945312 0-8.96875 4.023438-8.96875 8.964844 0 2.359375.953125 4.671875 2.625 6.34375l110.0625 110.066406c1.671875 1.671875 3.984375 2.625 6.34375 2.625 4.945312 0 8.96875-4.027344 8.96875-8.96875 0-2.359375-.953125-4.671875-2.625-6.34375zm0 0'/%3e%3cpath d='m454.910156 49.941406-41.140625-41.144531c-11.601562-11.601563-31.800781-11.753906-43.554687-.3125l-27.445313 26.6875 85.765625 85.769531 26.6875-27.449218c5.65625-5.816407 8.777344-13.496094 8.777344-21.605469 0-8.296875-3.222656-16.082031-9.089844-21.945313zm0 0'/%3e%3cpath d='m148.070312 224.476562 91.167969 91.167969 130.824219-134.550781-87.4375-87.441406zm0 0'/%3e%3cpath d='m295.3125 58.339844c-1.671875-1.671875-3.984375-2.621094-6.34375-2.621094-4.945312 0-8.96875 4.023438-8.96875 8.964844 0 2.359375.953125 4.671875 2.625 6.34375l110.0625 110.066406c1.671875 1.671875 3.984375 2.625 6.34375 2.625 4.945312 0 8.96875-4.027344 8.96875-8.96875 0-2.359375-.953125-4.671875-2.625-6.34375zm0 0'/%3e%3c/svg%3e\";\n  export default img;","var img = \"data:image/svg+xml,%3csvg height='512' viewBox='0 0 192 192' width='512' xmlns='http://www.w3.org/2000/svg'%3e%3cpath d='m32.485 63.515h128v64h-128z' transform='matrix(.707 -.707 .707 .707 -39.279 96.201)'/%3e%3cpath d='m22.946 123.8-8.485 8.485a8 8 0 0 0 -2.332 6.089l.482 8.916-11.378 33.321a8.071 8.071 0 0 0 10.156 10.156l33.322-11.378 8.916.482a8.039 8.039 0 0 0 6.089-2.332l8.485-8.485z'/%3e%3cpath d='m189.823 36.118-33.941-33.941a8 8 0 0 0 -11.313 0l-19.8 19.8 45.255 45.253 19.8-19.8a8 8 0 0 0 -.001-11.312z'/%3e%3c/svg%3e\";\n  export default img;","var img = \"data:image/svg+xml,%3c%3fxml version='1.0' encoding='iso-8859-1'%3f%3e%3c!-- Generator: Adobe Illustrator 18.0.0%2c SVG Export Plug-In . SVG Version: 6.00 Build 0) --%3e%3c!DOCTYPE svg PUBLIC '-//W3C//DTD SVG 1.1//EN' 'http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd'%3e%3csvg version='1.1' id='Capa_1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' x='0px' y='0px' viewBox='0 0 324.985 324.985' style='enable-background:new 0 0 324.985 324.985%3b' xml:space='preserve'%3e%3cg%3e %3cpath d='M54.324%2c270.626c-12.33-12.332-26.508-21.168-39.921-24.881c-2.358-0.652-4.514-1.089-6.521-1.382l-1.348%2c1.348 c-0.003%2c0.003-0.007%2c0.006-0.01%2c0.009c-12.576%2c12.577-6.46%2c38.396%2c13.923%2c58.778c12.823%2c12.823%2c28.313%2c20.479%2c41.437%2c20.479 c7.057%2c0%2c13.054-2.268%2c17.344-6.557c0.004-0.004%2c0.008-0.009%2c0.012-0.013l1.345-1.345c-0.294-2.006-0.729-4.161-1.382-6.519 C75.491%2c297.133%2c66.655%2c282.956%2c54.324%2c270.626z'/%3e %3cpath d='M323.409%2c51.129c-2.901-10.481-9.62-21.375-18.918-30.672C284.11%2c0.073%2c258.29-6.045%2c245.712%2c6.534L21.175%2c231.071 c14.74%2c4.594%2c30.43%2c14.206%2c44.464%2c28.241c14.033%2c14.032%2c23.645%2c29.722%2c28.237%2c44.46L318.413%2c79.235 C324.866%2c72.783%2c326.641%2c62.801%2c323.409%2c51.129z'/%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3c/svg%3e\";\n  export default img;","var img = \"data:image/svg+xml,%3c%3fxml version='1.0' encoding='iso-8859-1'%3f%3e%3c!-- Generator: Adobe Illustrator 19.0.0%2c SVG Export Plug-In . SVG Version: 6.00 Build 0) --%3e%3csvg version='1.1' id='Capa_1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' x='0px' y='0px' viewBox='0 0 469.333 469.333' style='enable-background:new 0 0 469.333 469.333%3b' xml:space='preserve'%3e%3cg%3e %3cg%3e %3cg%3e %3cpath d='M401.781%2c0c-21.156%2c0-41.365%2c10.104-54.24%2c27.292l-78.906%2c112.302c-8.417%2c11.24-26.771%2c12.542-36.677%2c2.615 l-22.167-22.167c-8.625-8.625-20.094-13.375-32.292-13.375h-3c-12.198%2c0-23.667%2c4.75-32.292%2c13.375l-32.417%2c32.417 c-4.167%2c4.167-4.167%2c10.917%2c0%2c15.083l192%2c192c2.083%2c2.083%2c4.813%2c3.125%2c7.542%2c3.125c2.729%2c0%2c5.458-1.042%2c7.542-3.125 l32.417-32.417c8.625-8.625%2c13.375-20.094%2c13.375-32.292v-3c0-12.198-4.75-23.667-13.375-32.292l-22.167-22.167 c-4.531-4.531-7.125-10.802-7.125-17.208c0-7.615%2c3.635-14.896%2c9.469-19.271l112.833-79.302 c16.927-12.677%2c27.031-32.885%2c27.031-54.042C469.333%2c30.302%2c439.031%2c0%2c401.781%2c0z M405.333%2c85.333 C393.573%2c85.333%2c384%2c75.76%2c384%2c64c0-11.76%2c9.573-21.333%2c21.333-21.333S426.667%2c52.24%2c426.667%2c64 C426.667%2c75.76%2c417.094%2c85.333%2c405.333%2c85.333z'/%3e %3cpath d='M104.083%2c192c-4.167-4.167-10.917-4.167-15.083%2c0l-76.5%2c76.5C4.437%2c276.562%2c0%2c287.271%2c0%2c298.667 s4.438%2c22.104%2c12.5%2c30.167l16.385%2c16.396c3.354%2c3.365%2c8.573%2c4.104%2c12.719%2c1.781l37.604-20.885l-20.885%2c37.604 c-2.313%2c4.156-1.583%2c9.354%2c1.781%2c12.719l80.396%2c80.385c8.063%2c8.063%2c18.771%2c12.5%2c30.167%2c12.5s22.104-4.438%2c30.167-12.5l76.5-76.5 c4.167-4.167%2c4.167-10.917%2c0-15.083L104.083%2c192z'/%3e %3c/g%3e %3c/g%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3c/svg%3e\";\n  export default img;","var img = \"data:image/svg+xml,%3csvg id='Capa_1' enable-background='new 0 0 511.956 511.956' height='512' viewBox='0 0 511.956 511.956' width='512' xmlns='http://www.w3.org/2000/svg'%3e%3cg%3e%3cpath d='m483.801 64.782-42.866-42.856c-29.24-29.235-76.816-29.233-106.055 0-8.465 8.462-237.437 237.385-244.257 244.204-2.813 2.813-4.395 6.629-4.395 10.607 0 6.817 4.36 10.538 4.429 10.642l-31.966 31.96c-5.855 5.852-5.859 15.359 0 21.215 5.695 5.694 8.832 13.265 8.832 21.317 0 13.698-8.761 21.209-8.834 21.32-13.581 13.59-44.322 44.354-48.133 48.167-4.708 4.711-5.745 11.962-2.548 17.804l30.098 54.997c4.795 8.761 16.686 10.483 23.764 3.406l60.608-60.595c11.76-11.756 30.894-11.756 42.653 0 5.857 5.857 15.354 5.857 21.211 0l31.97-31.964c.135.088 3.922 4.432 10.644 4.432 3.838 0 7.677-1.464 10.605-4.393l84.445-84.427c2.476-2.475 159.231-159.197 159.794-159.76 29.318-29.309 29.322-76.761.001-106.076zm-170.402 234.021-106.513-106.49 43.358-43.349 106.513 106.49zm-258.586 173.395-15.095-27.582 29.583-29.604 21.356 21.351zm119.585-55.708c-18.8-11.097-42.387-11.096-61.188 0l-24.024-24.02c11.116-18.745 11.131-42.427 0-61.197l22.687-22.683c8.085 8.084 75.452 75.436 85.225 85.206zm54.558-33.262c-12.197-12.194-94.367-94.347-106.513-106.49l63.228-63.214 106.513 106.49zm233.634-233.583-84.617 84.599-106.513-106.491 84.631-84.613c17.544-17.539 46.089-17.539 63.633 0l42.866 42.856c17.59 17.589 17.592 46.059 0 63.649z'/%3e%3c/g%3e%3c/svg%3e\";\n  export default img;","var img = \"data:image/svg+xml,%3c%3fxml version='1.0' encoding='iso-8859-1'%3f%3e%3c!-- Generator: Adobe Illustrator 18.0.0%2c SVG Export Plug-In . SVG Version: 6.00 Build 0) --%3e%3c!DOCTYPE svg PUBLIC '-//W3C//DTD SVG 1.1//EN' 'http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd'%3e%3csvg version='1.1' id='Capa_1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' x='0px' y='0px' viewBox='0 0 181.213 181.213' style='enable-background:new 0 0 181.213 181.213%3b' xml:space='preserve'%3e%3cpath d='M144.744%2c57.682l-21.213-21.213L160%2c0l21.213%2c21.213L144.744%2c57.682z M35.673%2c124.326L0%2c160l21.213%2c21.213l35.673-35.674 L35.673%2c124.326z M119.05%2c83.376L97.836%2c62.163l-36.469%2c36.47l21.213%2c21.213L119.05%2c83.376z'/%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3c/svg%3e\";\n  export default img;","var img = \"data:image/svg+xml,%3c%3fxml version='1.0' encoding='iso-8859-1'%3f%3e%3c!-- Generator: Adobe Illustrator 19.0.0%2c SVG Export Plug-In . SVG Version: 6.00 Build 0) --%3e%3csvg version='1.1' id='Layer_1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' x='0px' y='0px' viewBox='0 0 512 512' style='enable-background:new 0 0 512 512%3b' xml:space='preserve'%3e%3cg%3e %3cg%3e %3cpath d='M256%2c0C115.03%2c0%2c0%2c115.05%2c0%2c256c0%2c140.97%2c115.05%2c256%2c256%2c256c140.97%2c0%2c256-115.05%2c256-256C512%2c115.03%2c396.95%2c0%2c256%2c0z M256%2c482C131.383%2c482%2c30%2c380.617%2c30%2c256S131.383%2c30%2c256%2c30s226%2c101.383%2c226%2c226S380.617%2c482%2c256%2c482z'/%3e %3c/g%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3c/svg%3e\";\n  export default img;","var img = \"data:image/svg+xml,%3c%3fxml version='1.0' encoding='iso-8859-1'%3f%3e%3c!-- Generator: Adobe Illustrator 19.0.0%2c SVG Export Plug-In . SVG Version: 6.00 Build 0) --%3e%3csvg version='1.1' id='Capa_1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' x='0px' y='0px' viewBox='0 0 512 512' style='enable-background:new 0 0 512 512%3b' xml:space='preserve'%3e%3cg%3e %3cg%3e %3cpath d='M497%2c51H15C6.716%2c51%2c0%2c57.716%2c0%2c66v380c0%2c8.284%2c6.716%2c15%2c15%2c15h482c8.284%2c0%2c15-6.716%2c15-15V66 C512%2c57.716%2c505.284%2c51%2c497%2c51z M482%2c431H30V81h452V431z'/%3e %3c/g%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3c/svg%3e\";\n  export default img;","var img = \"data:image/svg+xml,%3c%3fxml version='1.0' encoding='iso-8859-1'%3f%3e%3c!-- Generator: Adobe Illustrator 19.0.0%2c SVG Export Plug-In . SVG Version: 6.00 Build 0) --%3e%3csvg version='1.1' id='Capa_1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' x='0px' y='0px' viewBox='0 0 469.333 469.333' style='enable-background:new 0 0 469.333 469.333%3b' xml:space='preserve'%3e%3cg%3e %3cg%3e %3cpath d='M468.208%2c453.88l-224-448.453c-3.625-7.236-15.458-7.236-19.083%2c0l-224%2c448.453c-1.646%2c3.305-1.479%2c7.237%2c0.458%2c10.385 c1.958%2c3.149%2c5.396%2c5.068%2c9.083%2c5.068h448c3.688%2c0%2c7.125-1.919%2c9.083-5.068C469.688%2c461.117%2c469.854%2c457.186%2c468.208%2c453.88z M27.917%2c448l206.75-413.479L441.417%2c448H27.917z'/%3e %3c/g%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3c/svg%3e\";\n  export default img;","var img = \"data:image/svg+xml,%3c%3fxml version='1.0' encoding='iso-8859-1'%3f%3e%3c!-- Generator: Adobe Illustrator 19.0.0%2c SVG Export Plug-In . SVG Version: 6.00 Build 0) --%3e%3csvg version='1.1' id='Layer_1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' x='0px' y='0px' viewBox='0 0 511.995 511.995' style='enable-background:new 0 0 511.995 511.995%3b' xml:space='preserve'%3e%3cg%3e %3cg%3e %3cpath d='M507.807%2c200.272L262.474%2c12.859c-3.819-2.923-9.109-2.923-12.949%2c0L4.191%2c200.272c-3.627%2c2.773-5.077%2c7.509-3.648%2c11.84 l93.717%2c281.92c1.451%2c4.352%2c5.547%2c7.296%2c10.133%2c7.296h303.253c4.608%2c0%2c8.683-2.944%2c10.091-7.296l93.717-281.92 C512.885%2c207.803%2c511.413%2c203.046%2c507.807%2c200.272z M399.946%2c479.995H112.095L23.221%2c212.582L256.031%2c34.747l232.811%2c177.856 L399.946%2c479.995z'/%3e %3c/g%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3c/svg%3e\";\n  export default img;","var img = \"data:image/svg+xml,%3c%3fxml version='1.0' encoding='iso-8859-1'%3f%3e%3c!-- Generator: Adobe Illustrator 19.0.0%2c SVG Export Plug-In . SVG Version: 6.00 Build 0) --%3e%3csvg version='1.1' id='Capa_1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' x='0px' y='0px' viewBox='0 0 512 512' style='enable-background:new 0 0 512 512%3b' xml:space='preserve'%3e%3cg%3e %3cg%3e %3cpath d='M510.432%2c249.597L388.297%2c38.537c-2.096-3.631-5.967-5.378-10.159-5.378H133.861c-4.192%2c0-8.063%2c1.747-10.159%2c5.378 L1.567%2c249.841c-2.09%2c3.631-2.09%2c7.976%2c0%2c11.607l122.135%2c211.535c2.096%2c3.632%2c5.967%2c5.858%2c10.159%2c5.858h244.276 c4.192%2c0%2c8.063-2.288%2c10.159-5.919l122.135-211.569C512.523%2c257.722%2c512.523%2c253.228%2c510.432%2c249.597z M371.369%2c455.384H140.63 L25.27%2c256.003L140.63%2c56.616h230.738l115.36%2c199.387L371.369%2c455.384z'/%3e %3c/g%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3c/svg%3e\";\n  export default img;","var img = \"data:image/svg+xml,%3csvg height='511pt' viewBox='0 -10 511.98685 511' width='511pt' xmlns='http://www.w3.org/2000/svg'%3e%3cpath d='m114.59375 491.140625c-5.609375 0-11.179688-1.75-15.933594-5.1875-8.855468-6.417969-12.992187-17.449219-10.582031-28.09375l32.9375-145.089844-111.703125-97.960937c-8.210938-7.167969-11.347656-18.519532-7.976562-28.90625 3.371093-10.367188 12.542968-17.707032 23.402343-18.710938l147.796875-13.417968 58.433594-136.746094c4.308594-10.046875 14.121094-16.535156 25.023438-16.535156 10.902343 0 20.714843 6.488281 25.023437 16.511718l58.433594 136.769532 147.773437 13.417968c10.882813.980469 20.054688 8.34375 23.425782 18.710938 3.371093 10.367187.253906 21.738281-7.957032 28.90625l-111.703125 97.941406 32.9375 145.085938c2.414063 10.667968-1.726562 21.699218-10.578125 28.097656-8.832031 6.398437-20.609375 6.890625-29.910156 1.300781l-127.445312-76.160156-127.445313 76.203125c-4.308594 2.558594-9.109375 3.863281-13.953125 3.863281zm141.398438-112.875c4.84375 0 9.640624 1.300781 13.953124 3.859375l120.277344 71.9375-31.085937-136.941406c-2.21875-9.746094 1.089843-19.921875 8.621093-26.515625l105.472657-92.5-139.542969-12.671875c-10.046875-.917969-18.6875-7.234375-22.613281-16.492188l-55.082031-129.046875-55.148438 129.066407c-3.882812 9.195312-12.523438 15.511718-22.546875 16.429687l-139.5625 12.671875 105.46875 92.5c7.554687 6.613281 10.859375 16.769531 8.621094 26.539062l-31.0625 136.9375 120.277343-71.914062c4.308594-2.558594 9.109376-3.859375 13.953126-3.859375zm-84.585938-221.847656s0 .023437-.023438.042969zm169.128906-.0625.023438.042969c0-.023438 0-.023438-.023438-.042969zm0 0'/%3e%3c/svg%3e\";\n  export default img;","var img = \"data:image/svg+xml,%3csvg id='Capa_1' enable-background='new 0 0 511.072 511.072' height='512' viewBox='0 0 511.072 511.072' width='512' xmlns='http://www.w3.org/2000/svg'%3e%3cg id='Speech_Bubble_48_'%3e%3cg%3e%3cpath d='m74.39 480.536h-36.213l25.607-25.607c13.807-13.807 22.429-31.765 24.747-51.246-36.029-23.644-62.375-54.751-76.478-90.425-14.093-35.647-15.864-74.888-5.121-113.482 12.89-46.309 43.123-88.518 85.128-118.853 45.646-32.963 102.47-50.387 164.33-50.387 77.927 0 143.611 22.389 189.948 64.745 41.744 38.159 64.734 89.63 64.734 144.933 0 26.868-5.471 53.011-16.26 77.703-11.165 25.551-27.514 48.302-48.593 67.619-46.399 42.523-112.042 65-189.83 65-28.877 0-59.01-3.855-85.913-10.929-25.465 26.123-59.972 40.929-96.086 40.929zm182-420c-124.039 0-200.15 73.973-220.557 147.285-19.284 69.28 9.143 134.743 76.043 175.115l7.475 4.511-.23 8.727c-.456 17.274-4.574 33.912-11.945 48.952 17.949-6.073 34.236-17.083 46.99-32.151l6.342-7.493 9.405 2.813c26.393 7.894 57.104 12.241 86.477 12.241 154.372 0 224.682-93.473 224.682-180.322 0-46.776-19.524-90.384-54.976-122.79-40.713-37.216-99.397-56.888-169.706-56.888z'/%3e%3c/g%3e%3c/g%3e%3c/svg%3e\";\n  export default img;","var img = \"data:image/svg+xml,%3c%3fxml version='1.0' encoding='iso-8859-1'%3f%3e%3c!-- Generator: Adobe Illustrator 16.0.0%2c SVG Export Plug-In . SVG Version: 6.00 Build 0) --%3e%3c!DOCTYPE svg PUBLIC '-//W3C//DTD SVG 1.1//EN' 'http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd'%3e%3csvg version='1.1' id='Capa_1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' x='0px' y='0px' width='511.626px' height='511.626px' viewBox='0 0 511.626 511.626' style='enable-background:new 0 0 511.626 511.626%3b' xml:space='preserve'%3e%3cg%3e %3cpath d='M506.199%2c242.968l-73.09-73.089c-3.614-3.617-7.898-5.424-12.848-5.424c-4.948%2c0-9.229%2c1.807-12.847%2c5.424 c-3.613%2c3.619-5.424%2c7.902-5.424%2c12.85v36.547H292.355V109.641h36.549c4.948%2c0%2c9.232-1.809%2c12.847-5.424 c3.614-3.617%2c5.421-7.896%2c5.421-12.847c0-4.952-1.807-9.235-5.421-12.851L268.66%2c5.429c-3.613-3.616-7.895-5.424-12.847-5.424 c-4.952%2c0-9.232%2c1.809-12.85%2c5.424l-73.088%2c73.09c-3.618%2c3.619-5.424%2c7.902-5.424%2c12.851c0%2c4.946%2c1.807%2c9.229%2c5.424%2c12.847 c3.619%2c3.615%2c7.898%2c5.424%2c12.85%2c5.424h36.545v109.636H109.636v-36.547c0-4.952-1.809-9.234-5.426-12.85 c-3.619-3.617-7.902-5.424-12.85-5.424c-4.947%2c0-9.23%2c1.807-12.847%2c5.424L5.424%2c242.968C1.809%2c246.585%2c0%2c250.866%2c0%2c255.815 s1.809%2c9.233%2c5.424%2c12.847l73.089%2c73.087c3.617%2c3.613%2c7.897%2c5.431%2c12.847%2c5.431c4.952%2c0%2c9.234-1.817%2c12.85-5.431 c3.617-3.61%2c5.426-7.898%2c5.426-12.847v-36.549H219.27v109.636h-36.542c-4.952%2c0-9.235%2c1.811-12.851%2c5.424 c-3.617%2c3.617-5.424%2c7.898-5.424%2c12.847s1.807%2c9.233%2c5.424%2c12.854l73.089%2c73.084c3.621%2c3.614%2c7.902%2c5.424%2c12.851%2c5.424 c4.948%2c0%2c9.236-1.81%2c12.847-5.424l73.087-73.084c3.621-3.62%2c5.428-7.905%2c5.428-12.854s-1.807-9.229-5.428-12.847 c-3.614-3.613-7.898-5.424-12.847-5.424h-36.542V292.356h109.633v36.553c0%2c4.948%2c1.807%2c9.232%2c5.42%2c12.847 c3.621%2c3.613%2c7.905%2c5.428%2c12.854%2c5.428c4.944%2c0%2c9.226-1.814%2c12.847-5.428l73.087-73.091c3.617-3.617%2c5.424-7.901%2c5.424-12.85 S509.82%2c246.585%2c506.199%2c242.968z'/%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3c/svg%3e\";\n  export default img;","var img = \"data:image/svg+xml,%3c%3fxml version='1.0' encoding='iso-8859-1'%3f%3e%3c!-- Generator: Adobe Illustrator 19.0.0%2c SVG Export Plug-In . SVG Version: 6.00 Build 0) --%3e%3csvg version='1.1' id='Capa_1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' x='0px' y='0px' viewBox='0 0 477.867 477.867' style='enable-background:new 0 0 477.867 477.867%3b' xml:space='preserve'%3e%3cg%3e %3cg%3e %3cpath d='M426.667%2c68.267H51.2c-28.277%2c0-51.2%2c22.923-51.2%2c51.2V358.4c0%2c28.277%2c22.923%2c51.2%2c51.2%2c51.2h375.467 c28.277%2c0%2c51.2-22.923%2c51.2-51.2V119.467C477.867%2c91.19%2c454.944%2c68.267%2c426.667%2c68.267z M443.733%2c266.001L336.333%2c158.601 c-6.664-6.663-17.468-6.663-24.132%2c0L170.667%2c300.134l-56.201-56.201c-6.664-6.663-17.468-6.663-24.132%2c0l-56.201%2c56.201V119.467 c0-9.426%2c7.641-17.067%2c17.067-17.067h375.467c9.426%2c0%2c17.067%2c7.641%2c17.067%2c17.067V266.001z'/%3e %3c/g%3e%3c/g%3e%3cg%3e %3cg%3e %3ccircle cx='153.6' cy='187.733' r='51.2'/%3e %3c/g%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3c/svg%3e\";\n  export default img;","var img = \"data:image/svg+xml,%3c%3fxml version='1.0' encoding='iso-8859-1'%3f%3e%3c!-- Generator: Adobe Illustrator 19.0.0%2c SVG Export Plug-In . SVG Version: 6.00 Build 0) --%3e%3csvg version='1.1' id='Layer_1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' x='0px' y='0px' viewBox='0 0 512 512' style='enable-background:new 0 0 512 512%3b' xml:space='preserve'%3e%3cg%3e %3cg%3e %3cpath d='M333.187%2c237.405c32.761-23.893%2c54.095-62.561%2c54.095-106.123C387.282%2c58.893%2c328.389%2c0%2c256%2c0 S124.718%2c58.893%2c124.718%2c131.282c0%2c43.562%2c21.333%2c82.23%2c54.095%2c106.123C97.373%2c268.57%2c39.385%2c347.531%2c39.385%2c439.795 c0%2c39.814%2c32.391%2c72.205%2c72.205%2c72.205H400.41c39.814%2c0%2c72.205-32.391%2c72.205-72.205 C472.615%2c347.531%2c414.627%2c268.57%2c333.187%2c237.405z M164.103%2c131.282c0-50.672%2c41.225-91.897%2c91.897-91.897 s91.897%2c41.225%2c91.897%2c91.897S306.672%2c223.18%2c256%2c223.18S164.103%2c181.954%2c164.103%2c131.282z M400.41%2c472.615H111.59 c-18.097%2c0-32.82-14.723-32.82-32.821c0-97.726%2c79.504-177.231%2c177.231-177.231s177.231%2c79.504%2c177.231%2c177.231 C433.231%2c457.892%2c418.508%2c472.615%2c400.41%2c472.615z'/%3e %3c/g%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3c/svg%3e\";\n  export default img;","var img = \"data:image/svg+xml,%3c%3fxml version='1.0' encoding='iso-8859-1'%3f%3e%3c!-- Generator: Adobe Illustrator 18.1.1%2c SVG Export Plug-In . SVG Version: 6.00 Build 0) --%3e%3csvg version='1.1' id='Capa_1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' x='0px' y='0px' viewBox='0 0 26.676 26.676' style='enable-background:new 0 0 26.676 26.676%3b' xml:space='preserve'%3e%3cg%3e %3cpath d='M26.105%2c21.891c-0.229%2c0-0.439-0.131-0.529-0.346l0%2c0c-0.066-0.156-1.716-3.857-7.885-4.59 c-1.285-0.156-2.824-0.236-4.693-0.25v4.613c0%2c0.213-0.115%2c0.406-0.304%2c0.508c-0.188%2c0.098-0.413%2c0.084-0.588-0.033L0.254%2c13.815 C0.094%2c13.708%2c0%2c13.528%2c0%2c13.339c0-0.191%2c0.094-0.365%2c0.254-0.477l11.857-7.979c0.175-0.121%2c0.398-0.129%2c0.588-0.029 c0.19%2c0.102%2c0.303%2c0.295%2c0.303%2c0.502v4.293c2.578%2c0.336%2c13.674%2c2.33%2c13.674%2c11.674c0%2c0.271-0.191%2c0.508-0.459%2c0.562 C26.18%2c21.891%2c26.141%2c21.891%2c26.105%2c21.891z'/%3e %3cg%3e %3c/g%3e %3cg%3e %3c/g%3e %3cg%3e %3c/g%3e %3cg%3e %3c/g%3e %3cg%3e %3c/g%3e %3cg%3e %3c/g%3e %3cg%3e %3c/g%3e %3cg%3e %3c/g%3e %3cg%3e %3c/g%3e %3cg%3e %3c/g%3e %3cg%3e %3c/g%3e %3cg%3e %3c/g%3e %3cg%3e %3c/g%3e %3cg%3e %3c/g%3e %3cg%3e %3c/g%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3c/svg%3e\";\n  export default img;","var img = \"data:image/svg+xml,%3c%3fxml version='1.0' encoding='iso-8859-1'%3f%3e%3c!-- Generator: Adobe Illustrator 18.1.1%2c SVG Export Plug-In . SVG Version: 6.00 Build 0) --%3e%3csvg version='1.1' id='Capa_1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' x='0px' y='0px' viewBox='0 0 26.677 26.677' style='enable-background:new 0 0 26.677 26.677%3b' xml:space='preserve'%3e%3cg%3e %3cpath d='M0.462%2c21.883C0.192%2c21.826%2c0%2c21.59%2c0%2c21.32C0%2c11.97%2c11.1%2c9.98%2c13.675%2c9.644V5.355c0-0.211%2c0.117-0.406%2c0.306-0.504 c0.188-0.1%2c0.413-0.086%2c0.588%2c0.027l11.858%2c7.984c0.156%2c0.105%2c0.25%2c0.281%2c0.25%2c0.477c0%2c0.189-0.094%2c0.365-0.25%2c0.473l-11.854%2c7.983 c-0.176%2c0.115-0.402%2c0.127-0.59%2c0.029c-0.188-0.1-0.303-0.297-0.303-0.506v-4.617c-1.867%2c0.014-3.409%2c0.098-4.696%2c0.252 c-6.166%2c0.729-7.813%2c4.432-7.883%2c4.59l0%2c0c-0.093%2c0.213-0.302%2c0.35-0.526%2c0.35C0.538%2c21.892%2c0.497%2c21.89%2c0.462%2c21.883z'/%3e %3cg%3e %3c/g%3e %3cg%3e %3c/g%3e %3cg%3e %3c/g%3e %3cg%3e %3c/g%3e %3cg%3e %3c/g%3e %3cg%3e %3c/g%3e %3cg%3e %3c/g%3e %3cg%3e %3c/g%3e %3cg%3e %3c/g%3e %3cg%3e %3c/g%3e %3cg%3e %3c/g%3e %3cg%3e %3c/g%3e %3cg%3e %3c/g%3e %3cg%3e %3c/g%3e %3cg%3e %3c/g%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3c/svg%3e\";\n  export default img;","var img = \"data:image/svg+xml,%3c%3fxml version='1.0' encoding='iso-8859-1'%3f%3e%3c!-- Generator: Adobe Illustrator 19.0.0%2c SVG Export Plug-In . SVG Version: 6.00 Build 0) --%3e%3csvg version='1.1' id='Capa_1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' x='0px' y='0px' viewBox='0 0 298.667 298.667' style='enable-background:new 0 0 298.667 298.667%3b' xml:space='preserve'%3e%3cg%3e %3cg%3e %3cpolygon points='298.667%2c30.187 268.48%2c0 149.333%2c119.147 30.187%2c0 0%2c30.187 119.147%2c149.333 0%2c268.48 30.187%2c298.667 149.333%2c179.52 268.48%2c298.667 298.667%2c268.48 179.52%2c149.333 '/%3e %3c/g%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3c/svg%3e\";\n  export default img;","var img = \"data:image/svg+xml,%3csvg height='512pt' viewBox='0 -21 512 512' width='512pt' xmlns='http://www.w3.org/2000/svg'%3e%3cpath d='m346.667969 208h-16c-1.664063 0-3.265625-.789062-5.101563-3.15625l-19.242187-21.65625c-7.101563-7.957031-17.257813-12.519531-27.902344-12.519531h-44.84375c-10.644531 0-20.800781 4.5625-27.902344 12.519531l-20.074219 22.679688c-1.003906 1.320312-2.605468 2.132812-4.269531 2.132812h-16c-20.585937 0-37.332031 16.746094-37.332031 37.332031v101.335938c0 20.585937 16.746094 37.332031 37.332031 37.332031h181.335938c20.585937 0 37.332031-16.746094 37.332031-37.332031v-101.335938c0-20.585937-16.746094-37.332031-37.332031-37.332031zm-90.667969 138.667969c-29.398438 0-53.332031-23.9375-53.332031-53.335938 0-29.394531 23.933593-53.332031 53.332031-53.332031s53.332031 23.9375 53.332031 53.332031c0 29.398438-23.933593 53.335938-53.332031 53.335938zm0 0'/%3e%3cpath d='m448 0h-384c-35.285156 0-64 28.714844-64 64v341.332031c0 35.285157 28.714844 64 64 64h384c35.285156 0 64-28.714843 64-64v-341.332031c0-35.285156-28.714844-64-64-64zm0 426.667969h-384c-11.753906 0-21.332031-9.558594-21.332031-21.335938v-298.664062h426.664062v298.664062c0 11.777344-9.578125 21.335938-21.332031 21.335938zm0 0'/%3e%3c/svg%3e\";\n  export default img;","var img = \"data:image/svg+xml,%3csvg height='512pt' viewBox='-21 0 512 512' width='512pt' xmlns='http://www.w3.org/2000/svg'%3e%3cpath d='m389.332031 160c-44.09375 0-80-35.882812-80-80s35.90625-80 80-80c44.097657 0 80 35.882812 80 80s-35.902343 80-80 80zm0-128c-26.453125 0-48 21.523438-48 48s21.546875 48 48 48 48-21.523438 48-48-21.546875-48-48-48zm0 0'/%3e%3cpath d='m389.332031 512c-44.09375 0-80-35.882812-80-80s35.90625-80 80-80c44.097657 0 80 35.882812 80 80s-35.902343 80-80 80zm0-128c-26.453125 0-48 21.523438-48 48s21.546875 48 48 48 48-21.523438 48-48-21.546875-48-48-48zm0 0'/%3e%3cpath d='m80 336c-44.097656 0-80-35.882812-80-80s35.902344-80 80-80 80 35.882812 80 80-35.902344 80-80 80zm0-128c-26.453125 0-48 21.523438-48 48s21.546875 48 48 48 48-21.523438 48-48-21.546875-48-48-48zm0 0'/%3e%3cpath d='m135.703125 240.425781c-5.570313 0-10.988281-2.902343-13.910156-8.0625-4.375-7.679687-1.707031-17.453125 5.972656-21.824219l197.953125-112.855468c7.65625-4.414063 17.449219-1.726563 21.800781 5.976562 4.375 7.679688 1.707031 17.449219-5.972656 21.824219l-197.953125 112.851563c-2.496094 1.40625-5.203125 2.089843-7.890625 2.089843zm0 0'/%3e%3cpath d='m333.632812 416.425781c-2.6875 0-5.398437-.683593-7.894531-2.109375l-197.953125-112.855468c-7.679687-4.371094-10.34375-14.144532-5.972656-21.824219 4.351562-7.699219 14.125-10.367188 21.804688-5.972657l197.949218 112.851563c7.679688 4.375 10.347656 14.144531 5.976563 21.824219-2.945313 5.183594-8.363281 8.085937-13.910157 8.085937zm0 0'/%3e%3c/svg%3e\";\n  export default img;","var img = \"data:image/svg+xml,%3c%3fxml version='1.0' encoding='iso-8859-1'%3f%3e%3c!-- Generator: Adobe Illustrator 19.0.0%2c SVG Export Plug-In . SVG Version: 6.00 Build 0) --%3e%3csvg version='1.1' id='Capa_1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' x='0px' y='0px' viewBox='0 0 513.323 513.323' style='enable-background:new 0 0 513.323 513.323%3b' xml:space='preserve'%3e%3cg%3e %3cg%3e %3cpath d='M256.661%2c257.323c-135.275%2c0-245.333%2c110.059-245.333%2c245.333c0%2c5.888%2c4.779%2c10.667%2c10.667%2c10.667h469.333 c5.888%2c0%2c10.667-4.779%2c10.667-10.667C501.995%2c367.381%2c391.936%2c257.323%2c256.661%2c257.323z'/%3e %3c/g%3e%3c/g%3e%3cg%3e %3cg%3e %3ccircle cx='256.661' cy='117.333' r='117.333'/%3e %3c/g%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3c/svg%3e\";\n  export default img;","var img = \"data:image/svg+xml,%3c%3fxml version='1.0' encoding='iso-8859-1'%3f%3e%3c!-- Generator: Adobe Illustrator 19.0.0%2c SVG Export Plug-In . SVG Version: 6.00 Build 0) --%3e%3csvg version='1.1' id='Capa_1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' x='0px' y='0px' viewBox='0 0 490.667 490.667' style='enable-background:new 0 0 490.667 490.667%3b' xml:space='preserve'%3e%3cg%3e %3cg%3e %3ccircle cx='245.333' cy='160' r='74.667'/%3e %3c/g%3e%3c/g%3e%3cg%3e %3cg%3e %3ccircle cx='394.667' cy='224' r='53.333'/%3e %3c/g%3e%3c/g%3e%3cg%3e %3cg%3e %3ccircle cx='97.515' cy='224' r='53.333'/%3e %3c/g%3e%3c/g%3e%3cg%3e %3cg%3e %3cpath d='M245.333%2c256c-76.459%2c0-138.667%2c62.208-138.667%2c138.667c0%2c5.888%2c4.779%2c10.667%2c10.667%2c10.667h256 c5.888%2c0%2c10.667-4.779%2c10.667-10.667C384%2c318.208%2c321.792%2c256%2c245.333%2c256z'/%3e %3c/g%3e%3c/g%3e%3cg%3e %3cg%3e %3cpath d='M115.904%2c300.971c-6.528-1.387-13.163-2.304-19.904-2.304c-52.928%2c0-96%2c43.072-96%2c96c0%2c5.888%2c4.779%2c10.667%2c10.667%2c10.667 h76.629c-1.195-3.349-1.963-6.912-1.963-10.667C85.333%2c359.659%2c96.768%2c327.339%2c115.904%2c300.971z'/%3e %3c/g%3e%3c/g%3e%3cg%3e %3cg%3e %3cpath d='M394.667%2c298.667c-6.741%2c0-13.376%2c0.917-19.904%2c2.304c19.136%2c26.368%2c30.571%2c58.688%2c30.571%2c93.696 c0%2c3.755-0.768%2c7.317-1.963%2c10.667H480c5.888%2c0%2c10.667-4.779%2c10.667-10.667C490.667%2c341.739%2c447.595%2c298.667%2c394.667%2c298.667z'/%3e %3c/g%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3c/svg%3e\";\n  export default img;","var img = \"data:image/png;base64,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\";\n  export default img;","var img = \"data:image/png;base64,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\";\n  export default img;","var img = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAK8AAACmCAYAAACsnd+9AAAgAElEQVR4XuxdB3hURdd+t9f03ggpJCEQaui9V0GwARYEBBQVRGmCXVRAFOlKsXdFREFQukiV3gkJhEB6T7bvZud/ZjZz2SQbEpCW7+fy8CTZnTv1zJkzp7xHhHvPvRmoozMgqqP9vtftezOAe8R7jwjq7AzcI946u3T3On6PeGtJA7krVhNr6mUooiLhM+aJGuct79MvifH4Scgj6yFg4nM1lq9lN+4Vc5qBe5NaC3LIemceKfxiDcxJ+yGPbA2fZx9DwEsTrzl357sPIvptv0HRvDO03Tsi7IN37811Leb6eorcm9BazFZKryGkePNa2ABIAGhb90TsgS3Vzl3mgiUkZ/I8mJHGyosB+Ex4AfWWfXRvvmsx37Utcm8ya5ip9Omvk4K5n8OMS7CXE6IMKgQteB/+k12LA5enzSK5895h5elTBsCzZTfEHtp+b75rS5m1KHdvMmuYpOx355PMmVNgBphqhnJR+tN7xGhEfPupy/lLe/5FUrD4Q0a8tIAVgAJAU8ef956bNAP3JrOGicx9fxHJmDqRES8lXP64t+yFmEObXc5f1ptzSP6SbwEDgbxNFHTbfmWE3PIe8d4ksnVUc494a5jO/NVfkitjJsOMfIF4CZV7I1ohYOZEeI99vMocnmvZjVjTc6FKbAyRVoXi7z8DfafFvfm+R7w3dQZqUdmpsCZEf/m4UJJyYKVnPDxG34+wD6tqEZLve4goGkSjLL8YJV98DwsKGOHfI95aTPZ1FLnHeWsxWWeadialx/5mJbnooNDGwf/VpxEw/YUqc3i2fS8i9fOFyGZDyYafYAEgdSE25H6ymviNHyO8f2XKLGI6chJlRgOI1QaoZZD5+kPdtBGCXnv53lpVWqv/dxOSvXAZsVy6AruuFCKpDBJ3LSihXUtvezaxK9Ed3CFoG6j8qkIUEpDicv5Ox7YhxnP7mUxGy9L/lHivxXlThgwnurXfMdna+aGbRYEIqIe2g3v/PvB7auT/uzWrjr/8v5mItOemEd3WnbCeSYYN+YLAT4lDDHd4jHsC4SuWuJyPpDa9iH7/Zia3UrUXfeTX0B6ca92T6A5sYeX5I7tG+cy35pGin36D4cQ/wjsChw9uAntGKay4CEVkc3iNfBDBr8/6f7Nu1zoY/+cnIfuDRSTnpQUw46KguqJERYlJ1aob7NlFMKYdYXPkNXwUIr/7rMqcXBwxhkAkhmHLPhizTwjiQ/iSFfB5blxVsaFhO2I9kweRhxyW4lOsXaV7AzQuOV+lbFLnfkTdJhGGY6eg++sXVlYBLyj6dwPsBPKQYFhT01C69XdmJKFP63sXP4H51ELqq7tFzjXrTEqPOuRVLrNSriYLToCqXRNAKoFx11GYM44zgvZ8djLCli6oQGRpE6cSS1oGDL9uhQVZjPvSAvXmLEDgjMlVCPIEYgmBDWIfNUz5Jxg3lSMITZFZoey5HveR4q2/My5OiZYSpwL1EPjeRAS8PIWVzXp3Pilc8g1KM44weZuWCRz9HOp/6vqUyJ6/hOh37we0CqgSmyJo0vP/swzqf3ZgdOHTxk0iBStWwQo9IzYZPOA7dSJC3n+bjTv7/Q+J2NMLfmNHiU4iipiQAgXC4P/hNAS8eHXRzw8aTkp/+06wmPGNEDBpBsIWzqlKvOp4YjScFi53Dm5a1UhxGCCcm3IxQYkG8Fs4GQGTJgj1JncfTAq2rWP10Y3j0aIr4g7vqNJu9qLlJHfiQphwVjCo+E97FSHzHOP9X3vq7KCy531ErFk5CHWhqqKLlLN4Oclf/DkMSfuFi5a2bS/E7qtoWLj09CQiDw1G/rufwWw4Cyl84DF2OOqvvMrZkgePICXrvmVcjxMZJciAp55H+KrFVebwVHRLYkk+BEXjDhBLpdAf3Qn3Dv3RYPcfFcqerN+MmFKPCpuC1k19IRTRbSBPiIRbp/awFRSh8OPvoc87xb6j7aoRg8ZIqiqC9HuIlG78iRE476fKOwHaR3oAdjsgkUAeFoKgcq5e14m5ThHvlRdfJoaDR2E5loay4iwQ5MN36kyEvl9V13rx4SdI0Y9fChcsulDaVj3g+/RI+Ja7NF6Z8grJm/8RxFDBhlxIEQjtowOhbtoQgdNeEuYmdcyzpHj1UkETQAmDEpHf4+MQ8dWKqkTUdQAxHzgLj7FDIQ/wQ/bMafB4aCTq//RFhbKXp7xMcua/x8QK7jdBCZQ+lADpKUCghxUFwjiYjhmRaIwLFerKXrKc5L60GCbzaYEmaZ3cMYi2Qd+VN2gPReNISHzdUX/lsjq1/pU3W53p/Lmeg4lxyzrG/bjPAF0YryfGIuLLlVXGkXzfI8R8/BzKLuXDisuCukqKMKj7twFUChg2HoHF6XhXteyBuENbhbpyV39B/MaMFGW8Opvkv/0ZjEgR5GZKDN4PjURUJYJk4sqzL5LCpauh7tYZioRYFC6aD2WLroitdNSnPPw4KfjxK3bE0/9UnaZK7AHIxDDs3QNALxAyHTNtk/73SuyBmINX+0kLnWvXmxj2/lVhs9LPab30HV6/MrEnpIG+KFj/PQImTke9RXPrDA3USeI9jnBiwiWBcOgvjktQJDyfG4zwJRUvWPT7pD5DiFv3DrCkXELhisWM6Lmai17M5H7xILlm2JEBbd++kMdGQxFRH/4vPOtyMU837kB0J3dXJN6BwxC1/vsq5c937U9KdvxRQVXm0W0gGmxfX6HsEYBQAwYTFRAORZ8W0LZOhNTHE+bMTIhFIlgysmA6eBKm03vZBqRjCBg7CeErFwp1XXruBZK9hJ4gV9UQnNOqoluhLLkYViQJ3J2+SPXJdLN43D8M0b9WHUNdECnu+l13ulFboju1jy0MP1rlcIfmwSFw79sDfk+5jmpIfXI8KSsqRVlOPnR7/hTUTHRRqIHB9+2xCHp1Rq3Hf/nZKSR/6XyB89N6fIc9gcjvv6xSx7m2PYlun0PPyzlm8PNTEbb4/Qplk/sOJfmbfmF04tG2J7Td2kPmH4CAyRU3UPbcD4k1Lw8Qi2DJzkfk5x9XqOc4QogR6WwT8IfOl1vXAWiwYwMre2HUBFLy2TJGtFx2Zu2274XYPa4djCoTcO4nXxDdnj2QuKlRzwXDuN0EX+vFu90dY8fvxCkkb5GDYK7exiOheaQLNO1bw3/SM9X2P+fDpSTnxYWwlHMc7ltLb/3ah55E1E+fV3k3+/1FxJSUDFWzBPg/O7YqUbbvRUr3bBYIMui5yS4XMWXwMFK87nvhIkaJJWz1V/AdU9GJh/Yx7cVnWTl6Gsh8EiCSSyBrGgltqxYIfvuVWq3PIYBwUYqLCErEIGD5NPg98xSrI2f5pyTnlQUw5p9gc8kNKJpWPdDw34oiSHVrfb7/UKL74xcmgqjb9YLn8CHwn3hVK3K7aaRWk3O7O8XbO9uoA9GdchzVXH7zGDSchdVI3NzhV4kYKvfzbLMuhN70ubjgsKYBqoSO8B75EAKmTBJRAjIlp8B45BTMe4+BoBheE55GvWVVRRHKAXOmL4QRlxixhXy01KWYkTN/MSn4eg2sR6moY4f7s0MQvtR1FAW9tBXMXw0rcoQx0l9kiIIs1h8STzeoO7SEPCoCxGaroEJjG/yZl0jW8g8qzBHdLJ6VDC55n3xOsl/8ADr9CcZ5+cJ7PfQEIn+qenpUnsuU+x4ixb//JMjn7ARr0x2x+7fdMRq6Yw3XtCFyF39CMp6fBjOKBZGBTrrH4BFwH9gb/mOfrLHv6VNmkoL5n8OIDNYcFz0o4anb9oTITQvz5jOw4ZxwsaGaB+9JzyFsYcUjnvc38433SMmf26FsEofwTxZdsw+Zb88hIokEgTOnXrPc5RdfJkUffg8TLrJ+cCMIb5OeFvLYVlA0i0PkD19VqOt85wGk6O8NFeRrtSIegUumwddpjtKnvkJy35/NHOP5BZHWHzjzTYS8+3qV/qU9/QKhDkJSX19YMrNQ+u2nTORQIRDyxDhYj6dD1j4acTs21rgONa31jX5/xxquqcOXxk4keSsXCYvC1T5ew0cj8jvXEQyu6rz42FhS8vVKJnpw3wR6UdF07gd7fiGoPE3r9mzdG1IfdxBShgab1t72eUl/ZTYp/nE9LEmO/vDj/6qmIAQ+r45DyNtXCS3n/YUka+pUmJjf2tUoD88egxG1dV1FIh/4ICld/zMrx0UMqQurH/0+deQ4UvrFemgfGwBVyyYwnTyHwtVLWCt0I8lCm0HkrobH0L4Imf3abZ8r55O4Jjq6Zd9nvPI2EatVCJzpMIU6P1TdlLf0aigNl9HowkRXWpiaOnhx+FNE991mWHBJIAq5Oh4wGJnDC5Ph2veDPCYMEZ9X1dvWVP/N/P7io+OJLTsbxGoBpGIQqQwiqRTKqPqot6jiaUBVbUU/fiUYJRy6YcDvpVkI+eCdCnN6Jr4tsZ5OhSw2AqZze1mXvYc/hfDvVlWZ++TBw4l+3XfQDBkO9/69QUpKkPHSJMZ5lbSNhI6QN45B1HUwkZs5R3eUeOnOVsXEonjtH7CbLHB/eBCCX6t4tOZ8sopkj38HRlysYmb1nfqqYOJ1npSUPg+Qkj/XwHPkOER8UZUIL0+cTkzHT6KssASKxrGQ1wuGXWeEPDhA8CW4FZN8K+s8GdyU6DOOsSboBveIaYOGSfsrEOSlsZNI4cqFULbsBk37RJhOnIJlx1k0qmTocO7nScQQE5KEj/gJwLm2z6NjEPnN6jvGdWnHbnvjlydPJ3kL5kKKCNhwkV2e4k7847IfSX2HkuJNjtut826TIwqezw1B2JL5orxVnxMz9bpa95fgUqhp2Q1x/08idbPmLiB50z+BDWchQSz85jxdxVnobMsexJ6VD1XnFtC0bA5it4M670Su+7ba9T/bshvRHdruknjp3cO9/4Nw79MNAZNc68Vv5Ya9Y5z3wrAnSf73nwsEqY5KRHzKQZeTSB3HMydNKJfoHF3mKjM6gfKoRMj8vWHeew5WJyOGtv8jiP7jh9u+MW/HglXXRtbs+UTi6wO/p0dVGHfWu++TrJlTIQtuAs9HB7MTK+OtOUSiVCNgWvXAKSd9EoihXK3m3CZX6ykbd4A8LhzqxEQEzXjxjsz1bW80dexzJG/lEuF2L0MoAuZOQaCLcBo6ackDHySF63920gY4ppJbkLRdB8By6iJsuachC0iAolksPIYOhN/4mrURd5LYblfbyfc/Sop+/YapxzyfGAtlXAzMyamo/+nSatf+4kNPkKKfvmSaCeeIadpnSrzUhVMe2QxlF/KheqALotd8fdvp6JaLDTnvLyale/dB6u+H8I8des60Z6eQvKXzhZs/O4IGDUeD376rdgKSWnUjhn+3QxbeHLJgP1j2XoQZ5yFHMDwmDAP1nbWkXYaiXn2X+tnbRSh3Yztpz0wmRcupO2cWlM07QhoeAlXDOIS896bL+c6a8wHJnfEBLMgQND20IGUWCjSACBLYUQRS7tesadUNsf/eGTCVW7pjqO2e7l6qmvJ6fBw0rVqgeO0GlG6/GhXAPJ3gh4CFb1ZRwDsTw5XJ04ksJBgSrRuKNv0Jw6/74f5oT9T/pupt+W4kojvZp5wVnxHzmbOwG4xQhIcicOa0atf9dExbUpaUwrzsuL6ZFpYhAn7zXkDgtEmiS89NJsZ/DgNWGzxHDEbgrOrrcx53zsLlROymge/omoEKazNft4x4019+nWS+96Ygpyo84yCNC4XEww3S4EDYTSYYftkPc7kLnwx+0DzYB1E/1+4Iyl72CQmYMP6W9b82k/e/VibjnXkkfdY0+I56BqbDp2A49jfjuNSoEzx/MfymVIzKyPnkU+I/fnSt1iC5zxBS+udaJoa43SRNRa0avpFFSurSnxTt/IMNXIIQlCGdGQqoU4yiUywUTeKh27QDhpSDFTQJMgTCfeRQqJrGA2IxAl64c7bzGxl3XX7ndGxrUnruANzqt4Q1NZUBrSjhB58ZzyBkzls3RCt5q78keYtWwnBsV4W7it+0VxH6HyM8bqhDtVmg3GUrSfG6TbAX6yDxcmO+swakCM7R1PG7rFxu4vVxrzEqZkg946EZ0B4R98SC2kz3TSnDxTx6D+G+wx6d+iNmV8UIkOtp7GxCR8Kjormhia6zNrYN4s9V1EdfT723/MLGO5Mx43VSvG4L9Gd2Vwh5qdxZTrz8c23Ddog7s/eWbbDrnaz/9fJHAeKYbDUsMLAj/nrN8XyOsj5YRIq+/IlxXO7Rx7+jsrTWrREalZ76T2tbq5ezVnxKjFt3wXo5C+oOzV2G3dS0sDQaofDjH2HIPc4Gw31K6U/n0BduyWHeX936I277je/6mvp07/uKM3BSEU+k0V6AQgb94R2M+7oldoXPuFHwHVd7sJOM198l+W9+CQvOVvBNcdbRewwbhcjvq8IMXM+a1Ei8ye/MI7pZ1CkjTajX44XpiP3o+sNHMl6bTbLfekVwDKeTo0Q4tMO6QSSWwLDnGGypByFGGBR9EhHz5+13kLmeyaNlc1Z8SvR7D8JeWgpbaibMB09C3bM1xFo32O1lUESEVeuhdr1t3ery5wc+TCz/noE1+wTTNAhxb4iDrGMEvEc+zCKtr9UP6q+SPftVZlhydnqn7/B4Om2fQWjw52810l5N471mBec/XkUK5ywHST0kdITuHs9330d0DW5+1TV8IqAhMWSfEUKzPXsMQfTWu59IXY3n8pRZpHA+tRZK4TXjCUgDA1Gw+FPoUg5BrY6DvHU0zDtOwA4LfGeOQ8i7rnWrNS3S7fyebcZ9B6D/dBvEMd4oSyqEGeegad4FDY/svCa95FJ/lJfmQa9LEtbXWWRgLq19HkD0n2v+M+HWKPOeGfEkKfnWYcql/2lHfIaPRvR/8CZK6n4/Kdn2q7AeNDTbd8bYa5oqb+fi8bZyFy0nRCyG/3Ou1XFp458nxZ/8xhDTmaHlwcfh3qcnSv7chvyfv2C6bSn8mL7UgdtQPbbZnRhfTW2mjnqGmE+ch+1cJsRh7mh4uua7R8oDj5HiNV8Llz1nwlUiEB7jH67RB7qmfjl/X+0OyJz7EcmePg/WckuLAy8gFk1wrso7R0c9TXxDQhA6+9Uad9SVybNI9oJ3hA0hQyS8XhmNkNm1C3m5nsFdT9nMt+cSS3omTEeOw643QxroB1taFmyp+RD5aiBvGgVFaAhEIhGMB4/AdPhvZj6l88KifmPaQB4TgdL13wtxbs4YD1497oOiUTyIwQCJmwZlRcWQeHgBUhHKcvNhLSiE+VgyxGICTfe2sJXqIFJrEfHFnQ1Pz1n0MfGf+HSN60rn+lR4c2K7dBaKlm1BnXqo6OEILo2C7+tPIejNm4t06bJTuSs+I4Xf/AzjzmOw4ApbDFrQZ+J0NKgUKn32sbEk5+tv4AYJgt59rcaoAQrreWn8GGibd4JYroQioSHCV107IuF6iPB6y+Z+/Bkp+O5nwGgGyspAgzbFWhVU7RNRspxy1hThgukABfGDLLY+LOcuwIJ8xmXoAqlCmgFiCfSXDwl+GM5Ae+5tekAeUQ/63/ajjIXbu0MELcqQAQnCIfLQwlp8ii043Qxc8+I2dATUzRLqBMTp+cHDie18KiTenij5ZyObB1Vka3g9dj+C3ppZ4wagjljOSEE1raXLCimyN0VXkfh4onDjJpihgfvg7miyrqL/wYUXZ5Hsz36FrfAUm/CQyTNQb0FV+KPKnTjeuAXxHzHCpRN6TR2+md/nLVtFsucuhf1SCST1vSCPqwextydgs0Os1qDw86WMu3Ii5DFwXo8+BfPxs8wFk3MXHtRIic5Z5cePTh43xsvL0AB2nIeJXVp9oO7fA+Y9J2EocoCG8Pr4JUfTpT8a7Lz7NS+po58lht0HYS8yQNUyDlF//FQj0Wa9NZfkvfMFbObTkEe1hM/EMdd0FeA04LJiiqFF5TXKGXS4CEnD9gh+ZDBC35heofyJXg+Q/M1rmHc9taSFr/4CvmNGinKWrSL+ExxRq66eKzNeIcroBvC9w1iz51p1I6X/bgeNtJXGeUN/dh9kFD+hRQPYDqfDhDNC8CYdDBcDOJwSV+vxMTrHnlXGUKDv81B4Kv95vTTagQy5ZZ1DZh72JIwHjsJ04agQa1cZScd7/MSbKjP+F0ZwZdoskjPvHUjggeClH8Dv2avrnfPBIiKSyeA3sfrobue2L09+meQteE/QcGiCmsD/7SnwrQbW4JrEewAgHNSNch55QicEDeyNsPeuyrQnWHg3dVW0scn3qwY95r9M0K18N7nHYFK0dR1rgm48MaJAgfa8+jwAeVwU9H/vg0SthH73X+VugFGQt4+AYc8Wxo35w4mUExrnmvQnPY3ECGFSnyTSF4YLBwQZWYFgSJvHQiSToPTAFkGRT9+RB7WALfNwFdmZ9jOomojlWzlXlevOePk1kv/eN9Ajpfxi6ovA919H4NTaIVJmvPku0W/fDWV8DMKWLRDlfbya5Mz7BLoLB4SmfIYOR9Qv1Xsa0oIuueN+gHAdHdXXEYRCmRAOWWw4AwiwnDgP6/l/Bb2dMqYFmiYdrlLXheGjSVl2NlTNmyD0g/dqPD5u1wLkrf6C5Ly9CIbUQxWapIToft8jkIUGg9isUAQHIedNmgywGEqEQNmnNfR/rq1AvM7EyieUH/n0Jw1WpNhg1twS6A9tEcQMOhkOkSAMFlwW+sE5POXilS2OtJD2GpEnt2v+KOxqzszlDP6KbihFcBOoe3Ws1eUye+nHpPj3P2HctAmKZq0hj4uEceM+mIqvnnJ0HN4DhiJ6wy/XpBmXX/5bbibk8huPW+IqMz5J3Drm9eI01P9wXoW6qFdZ3ntUW2FkfqD+i15EQC2PkVu9CJnvzie5M5fBhAsVOCj9g/ZVmhgCmZcXbPkFMB3eCSmTT0sh8fSEpegsI8DKJs/KHJfPmVvfoZAEBaLks/WwIk0gSGeRwxWR8vqdOTvn5s3uQPhW5TVJHjSMFP/2PftYjgZwG9kL9WvQjOSu/Izkr/oahv1b2alCTxmugnXG1qAbwvulmTWmvHV9YWvbk5Ts2yJU7OqI5FxG4RmPxkWnK9STvXQFyXmWOjSfE27P/i/NROgdzL+bu/ILYk5JhiI6CiVrN0G3gUYTO7QFlaMFKI6vNDgcpozjjnStfYfCuOkILLgorKHzRYy/T7movE0MRBIxbDkFIPl6SMJ8QJQKmA9sE8Lv+abnofhcHuaVO28M577Rz1WIgHZ4N7i1bw3f52unwrpVzCBl+ChiS8uA1M8Hbr27wX9CVZQh3vaV6a8QW0YOrAV5KN7gQIB3pivuMqBUxMFtTL9aBRVUoypbTbLnLIX5wmHhkuHMbenvnHOoXMSgnerQl+h3b2Kv0HIqeCNgziwEzLgKG3qrJtS53tzlK4jh4HGYz5yHXWeCxMcd1rx82E9kg8AioEdW7ovjOPdhuSsUHo0gifCE5ehZ2JEPKaIgbxMOsac7IJNC6unN9LakzAZZUBCC33SohOjxaE3PgiU5FfZSHcTuapTll8CWlQsYbRB7uYHYbShLzYc4yAPWU5dYfzgHcnC0q4jpnIgpV6IzKmuQAGWzOEAuR1lhERSR9SHz9kTQW3dWX+5qXXM+WkryV30LaXgo5GGByP54YZUTj865ul1veA7pj4BpVTMsuar3mjLFqcjWxHThQAX8WP7CVTAMwHv8ZIR9skCUvXQ5Kd64DUXrHQDHtCyLoug2GFHbK4Jg3EriTX1yHLHnF6H09x8FYDl1ww7wmzQG2TMXwFLggNp3qL68Gf4tV4fRn7TPiqadYT12Ht4vjQIpKYUl7Qokfr5Qd2iFgGeq5qG43vHkLFpG7GIRYLKAWK0o2foPDFscmTK5yEHxhC3/JsGEy4IGgrfj8JN29J2OQ+HVGJbCk9D0ewDaNokIeuPmGgSud3zO5WkQKBXTaLQ47bMJBexr7pAlgzu0Dw9F5I9V8eOu1W6Nl6jz3e4jPGyH+3m64lS0U2UoEGA46QJQAqbcI+StOQh+rfaIjP9loqiJMn/N16wKuqiUEB2/N0DQopdQunMPitd8yT6T+TZiehVzed4I+pkjOjYU3o/0hq20BFF//FzjHP2X/vJ3LwwbRUq//wFWGISFlSMOVpytgHDJ+8jHxxmExCsOtsKz8J40FRRiypaTj4ivq+IW34y+1lQH5bRlFguCpl3N13G6YRtiOONAqeeMj25AGkDreX9/+FUDLfufiJe+TPG5Cr5dA1PSwQqYWJUvGs6yG5dhPEY/g+hPl98WAkh/dTYp+uxnmK4cZWOmhKvuOQjGLQdYIhQ51Rh0agbDrg2QR7aGplsb6DbuhDHjePkp4QHN/f0gUathy8qDJMAbkd9dHzeoaWFr+j519ARC9b2k0AhZZBCMuw6zvnMZkU6kNq4tbGcpaPb5q+Jbo45QtWsOW1o6LBevwHL+ABQN26Dhmf/m8F1Tfyt/nzpqAin4bBnrl6ZVT8T9u4Wtfd6nX5Ki736BfvN2SCMjoO7cBm4d2/8nXX+tiYqqlwq//gn67esZR3W+HVYeALf3uw14BA023B78hOShI4jxlx3sMCLIRhkscB86grFS3a9/oqz8ciaFP2zIcdjcm3WE5eghphGhE6EMbw63/l2Yqkzq5we/cdd2/6vtwlJvK7/x1RttXNWT+cqbxJxOgaVPwHjin3L9sAesFMXygccAnRHmc5dgKXchdRs9CCgxQPczzeVWBBHcYUceAt57DYEv3767xqmgZkSf6TC00Cf07TkIdMJBzl2+inDY1drOX3Xlak28vILUJ58muvW7YM47VYELOzdAK1X4JKBx/onrrv9GBkRRY3Kmz4cF6UzvSB+6uXwnToU1JRX6DfsgCfSFKesIZOXxdPxkkLjHgpQUQNqqIbz69YEsPEzIWXE9fclauJSIiQj+TjF3mW/OJWI3NWy5eRArFQh6vWb7fuU2KWZb6fptILYyqJrGoeSPn1hMoAhySOr7oCw1FzZcghEw8bQAACAASURBVDy0GaxXjgq4ZXTiKdCIpl9n1F/tOu3V9YyvtmXPdx1ACndsEMzbXr2HIvqva+tra1t35XI3RFzU4bjo619hKlfyO18y2GUnKhGeI+6vNTjyjXaev5dSDgvFLzr0yJIjDLLmkSg7l40yA03tFMZu86rYNrCdOw8bCqBu2QOaTokQERFCXaSkqm2/UoY9SXTf/wGpmx/85r7AVEZp4yaT0m+2QFRPDUXjOMiCA5hG4HocT3j7V155g+j2/QuZQgv9ho0woYR9xcA/YtrCmLSPnSTcgdxZphTLG8Dr+Ydum5oyfdZbJOed14QLu/djoxHxde1RPWs757TcDREvffHKjNeIYec+hgVgOZYKwARpRCgULRrBo38v5uNwPR250bJ0IxXMpkiJl2GDUVhAry4DYD1/melquWbBWVNCA0Cvx780Z8knxJqWBlt2AUxJFyALC4ZEKYctJxelm7bDhEJHjodBw6GoFwL9X7tYGi1OSNzAo2jYEYomMSAFhXDr1gEBLhAyXc1FztIVRPf3Luh/2AcLzgsupY56Q+H+5ADo1/8DU54j4yZfXPq7d4/70GDr77dlPWi7Fx59iui/2Q55j3jE3sJ2b2hAWXPnk8DpVWFJb5QA/8t7qU+MJyVf/gICO9PLchWde8vuEPu6w/TnAeZ2SM20Em8P2HSlUDaNhVu7NrXSJ6a9MIOUbtgG83mH3Z07mHsMHAZZkD9KVv7OQKH5wy+x/Ce/xPJbNoUgFcEDNhQzbilFDFRD28Cjf89aXV7SJs8g+QvmQNNnCERUnt+8FiJ4wmvcSOi374XxvEO1yf8zNZpfAyTkVk0d+1/mvaZ3cz5eRfyfvj45v6Y6/7PYQNHGmfw2uyqa9vU2fjPKJ/e6nxRv/rWK/C2DCiKmvktnzTBknrAW8HpmeI0+x7R8xhvvkOI1G2E5kQobrrD61dQ3deRQFCz6CiS/GN7Tx0B//CRKN66pos6idagRAdUD7WHYfBDWEoe1kZt7nS1M7PIY0hya3h0Q/tm15dPs+YtJ0dr1DJrVdiybheg41HsONR/3B+aOVbQfvs++UG1agZuxBneqjuvmvDkrVhP/cWOu+71bNUCaeLr0742MuJi83aQr7EWlMKUdqkDQdDG1XfojphY+sRkz3yYFS7+HvvgUtPVawpZ2utxHIwLax3pC/8suWAxn4Tl8NMrSMlC6e5NL4lXBDx5jhwEaNUo+WguKd6tCQ5QhBRZYhONdwTaa0YFOE9YSql5tEPHptSMo0l9+jRS+9w1zlne2yjk2TSQ0j/dE6VfUhyAF3iPHob4LvOJbtSa3q967hghvdMDn2vQmpfsdbouU+7j1e5Ap6PXlYSi0XkcoSgM0xrWPToY1sG4jSC69EIlQdiYbksb+MJ3czTzJqGeZ5sHuMB9NgiF5P1QhzUHSdTDhvGAV4w7rXGyQeydAHOIBy4l/KqAuOsulzn7CdEHkiIV2ZGdoExPh93z1kFZXnp9CChbPZw7tjigPh7hAk7FoRnSFWKOB4bddgLsEvhOfgv8d9oW40TWu7r06T7wn/ZsSU84xwVuLLyDXgDCZDxHwmTkSwe++Ue14Kb5t6V/bYfz7EJSdWkDTpgXMaekgpSUo2riGcTdNaDN4Tx6F0nWbUfT3+gpJ+xjR+TcFckogaRgMy5nzMCOnQhln3bjDMuYDVZe2MO88C2t5uBEzQrTpDk3PrtD/vR+eA3shoBr4V7qoqY+PI8VfrWD9U7foCnuBDkRvgXZIN8jDQ2FNz0T+sg8hD28Gj+H3IXTO/04S7TpNvDmfrCTZ0xfCXHRSIF5njQLnxp4jxiDi2+oh6KnGguKmlR7c6vAi6/MAxAoZuMsfvwSqWnaG9xOPgJTqkf7KNHbjd4T3+DObvfvEwbAXFDD8W/O+FOZy6XBId3BE7sTOubNbjyFosHWt6NLoiaT4069hQQGrz23gg5D6+EP3xRbIO0fBi+INX8N8euGxcUT/9d/QjuoO86nzKEvOgvuj/RC2eJ4o6/0FJHPqZEbcMvjDa/LoWoVq3WwueSvqq3PEm/HKW8SUlMQwfwuXfCPkL6OESvWe6l73wXY+A+ZyHTSFn7+Wf8L5XkOIcfNWEFhhgVFwsHcstjvj21bkQgINvJ8dz3S1hsPHoftmK7siqR/qBmVEPZSs28iARrRd2yH/gxWwIJetF9sMXQfAmpkH3TmH6oylj/WKg9jfA96PDUGZwYiiJT/DXHqKEbrj0hUEddcWkAYFME80eVR9lxnmOVFceOhxUvLTV4L4Qj20tL06oXj1GljSjzJsY+ulI+x7j6GPQh3bAEHvVX8S3Qpiu9l11inivTxpKjH8cxCWQ8nM4MD9YR0qLMCt11C49++Boh9+hdjbA8rYBghbUH0ExwWW5upb2KGHDMHQjugLkUQK/aZ9MOUeh0IdB5SJoegUg7LMXChbN4E0KBBFK36E51MPw5pFXR5pokAC4z+OSyONBKYWL2exRQ5v2FEgpCdQIwaeLz4Ac+oVaFomoODzn2GlUbfBQZB4KGEsd2BxiBYqWjuLNvae8QJCr4HWeL77IKLb9lu5KVkFWWgDGK8cZ5tQ2akjzLvOsAQ13AncfejjiPqlYl63m01gt7K+OkO8WUs+YTKp+bdDTEnPLzzczEt9FlRdWgF2AtOuE1AP6oDo36pPCE3TQBl/pF5OhYxLUo7n1m0gC9s2rDnANAN0kZm1zjsB9gID3CcMgjqxOXImzYW8a2OG62A6trOCGyM3iFT2/eB6V7qYVLvg9sBDsObkAXYbjLv/grpLf+YaadyzuYLvCDduMG1J3yGIuUaOuOx5H5Hsae8IXJ++yz37tIOGw3L2IkqS9jm0MjSGLjoE7o8MRMg7d4fa83oJvU4Qb/oHi4ju7z0QUffXX3cz/1buC8qPYTHCUYZLgpHC5+lJCP/4amZ054m5+OQ4UvL5GoihZRIpT5fFw9PphuD5jp2tc4p6LaFIjIPpl32Qd2sM8/bTbCNx/a2zYYIbJ7ifcGW9LoumUMfDZjjNiJ9qQ6ihxYIUwX/aoXkIBWBkjvCy0MaQhPtBERJere9rUrteRLd3s2CkoOOm9agatIbtfBqMyHL8jQhIQn0ADwniT91ez7PrJdI6rW2gSCymS0cgQgTKypP+qdwasRBnU7FDTqQPt2KpgxPQKMO1U1D6tFkkf94KJsfynUsJlROusyhC66TyKf2MEx+/bFGfApqtkr5b2arGEHSadoXl2CUYmAN2xff5YnD5lvaDakREkLFE37ROLi+7dR4Ie4kOZWn5UHRpDMuJszAnH0HwomUIcJG0OnvuQkLz25n3nYa5UmAnrZOPhTsw0b99JkxGuItcyzeLyG5VPXWC89JoZmczK/MhGPAAxHIFCtd+W8FBgwXvTZyOsErIPnQCsz9aRjJemFAhgNI5Rowj1XDiYT6piGKK/spE6sz5nReHWeIQDffx98Fw8CiKDm1nx7QrF9IKProtuoLojTCd2y9sREbUingQsxnSSC94PvkAjCdOo/Cnr+DW637EbP612vW78OBjpPBnB26Y84kgcOJGHWE+9Q+Tw7UduiN+951LgH2jxF0niHcvQLj5kw9U2bIj3OLjkfPVCgGRkA5G3boLGh5wjWaY1GkAKdm1ocJccW7NJ4JvEq7e4gTNj3/O4R1Aeo7LGRcxOJEwztuqO4jFCtOxE5AqglnuDec6eD2cw1LDBNV4yFuEQd2uNXKWvi9oDmifOJfmm41unoDXZlcbs3a2RReiO7xTGCttW0nj73rEw7L1NPyXTEPJmt9Rsn09NM3aIe5ozUB6N0pkt+q9u554aZKPy7OmCUcvVYepug+EsnljWLNzkff1aiHcRxXfDt7PjERANZYkigTE3Sb5Ue7QBVPzrJaJEs6m1spRxZyw6WJQDYI0vB7Ml45W0N/S77RNukDZKh7W7HzYc4tZREbJbzSd1NXHWdRQwh3yhgmwncmBJNoTskbRKFr3HSvs3qoX5PWDYdh/HIa0I0IF6vqJ0PbvjHrLPnS5hhdGjCaF335agfN6dLkP8thwFKxYArdBw2DacwJleaegSOyKuIM77npaqLwJ7voOUy+qzAVzKiCpa5p3gqpNC+gOnkDJwW2CfKht1Kbay0dK34dIwaafBBGDc1Y6Ae49hsB2OQe6pN21YhKU8HhsHOfcnKvSeim4nEgGWM5RTzQNxHCDFVkunffp+yoKpt0qDtZ/r0AU7wWpvzcKd6xnfXVL6AxFZCh067bBVH7Zom0pUA+KVjGQx9VH5Feu03kdgweh3mv8QunWZQBk9YJQ+NUqSOEBAjEk2gDIGwUjdv89saFWi389hS4MH0vyv1spWLO4zCYtD06k7oDswuUfDLc+7RD9lWtL2jEEETMyK6R/5f3QtO8Hw56NVeCVnI92Xtb5csiP/MoaBS5qcO7K1WRKhDG/Y2encVoHFYloLmaa6E9WvxFkUUEo3vq7IzTJrwkkYV6wHD4CG0oYNhiNohDDk8WwiRCMwPdechnqc67XfaR48+/CmGnOZmkjP5hO7XPEmLXoCuvhS5Al1kPcwWsDR1/Pmt2usnc957004SWSvewDtgCapp0hVihgOnCAQTDRBfDs1B92EYE8LgZRK1yrxi48OpYUfrNSEAkYRkDDNrCXmlmwJg0NsiFd0NfSya8sMlS3IHwCnQnYWeXGRQwWudF9ICzbqHrNgdRD2+CaDprCixIvJ3j6PVMDBjeFIiYMljOXGNw+xT5TtI2HPbMQxksHWXm3jv0Q+8/GKmuZ8dZ75PJrLwtqRd6m3CcBIg8JRDIFbOcuQdm33TX1x7eLGK+3nbueeHNXf0Uuj3mcLZLnoGEQlZWhdMNPAvqMW8tuEMmkcBvUF8EzqwYaZn+4mOS8OI/hgTmLCm6Dh4PYCUp//x5iaADoBc7LuTvliHSC+IWMfu4sEzurz/g7DrMyoPBvjLKcdFhRyLC87Bk5UPfpAMOfJ5kPLvMvRgwMSGLERa1gdpQIVjhuIKH10iNeAn/GaZkDTkxbWJPOMId2B+cOhM+0sQhxkdeMZvhx1pTQtjSd+kOiVaFkI9V1A36vzr5tIVvXS6DXKn/XEy/t/Ln2/Yh+z0YoAhJAsk3MMODQt4ZB4uYOsa8abkP6IPTD2VXGkzpyAin+YhnUHfpCFhsNa04OrLtPQ9W3NWzFJSj842eBM/E4MC4jOiPnaJp1QFlOKQuTdxYnnFVm/DJIiddr/ERIfX1Q/MsfoHgFtE7/J5+BXadD6c9fsQ1BQ/Fp0KizKotyW24Zc14455OAbxrqoqlo2xCGfVvgOfRxRLgw9dLE2QW/fsOqUnnFQ9bAH8YDNMoaUFH1nMGEhmf31Qk6qEzIdaLTF4Y+SYp/+Ryqhu0g9nKHeU8qrDgHpaYRZK0iGMaC9+jhCJg2qcp4kh94gpSs+RJShEAS6oeyKyWw4QKTHem1h16mpNHe0CX/CxVCYcWVKplsKBf0HD4KxkMnYExyZOzkBFZZBqafs/JDHoe2d1eYziQhZ9FcRrxKeDMYKW7edhYReJ30fbohqP6Vf8Y3C98onPtzWdmKi/Aa+gQifvmyyvgz31tAsl6ezDQiCur95h8Ec84x1kbQ4o9hPnUW9cqTmt9Mrng76qoTxHu2aTeiP7a9wqWNpxpQNe4AsZscsXurZh5PX/Ix0W3aBv36HwVzKfc+o3FkIvhAOaA5SH4JivdtFuD0ub8EJUy66MyUW67sv+pL4YAm5doGLk86VG+A1+jnQCwW6H/fDXOxa5gAfoRbdp2FGRfYaeIxYjQU9UOR/u5bFeRuulDM+d1SBmN5LjvmnRbSEpb0Q1C37onYAw6Aj8rPhUdHkdJvtsKONIihYmYUgny49X8QkkB/KOqF3VXwULUl/DpBvFRuo5zI1SWKOdQMGIoGLrBcz/YZQnR/rhX8HfikaBu0hjKxEcznzsN8mIbFqwHmwkh/OpAjZZHNoenaHtTPlgJ9OMu3CoRD1igUllMUU9YBceVsgJAxJ/M2KCsoYdD/lY0TnKMqfRrB75XnULp1J0rKE7EoveIhbxiC4j2bK4yXXTJbdqd+RzAc3ibEqmna9GYEbTudicbmimidfLzpr71D9PsOQSKXQ+ymZUlddOt2wYbL0HbsA2mgPzRtWyOgUmLs2hLRnSp31xNv6tiJJH/lIkFXySeKdpwf3cEz30TIu1U9o04gilD0bi5HUkKn7zBDR6f+KNPpoDvyN5TaOLg90gsi6hpjMsGUmgZ1iyZQ1quH7KnvMrgl56Nb27YX8zeQhQZB7O0FGhJv2rNZMFZQjugzZRbESiWKf9wAfZJDNeU82bwvbn0fQllBIQwHHMDTDrfKq5dE/g43kFDUSkvxKeESSX0ivGeMQsGcL+A94wmEzKk6D1RjI9GoEfq+I4ri8oTJJHfZArbpVMEJ0PTtBGIyQ9O8CfynVhW97hRx1tTuXU28HMC4sn3eIRcGQQQVk19DPlpWJTt89ryFJHPaJIYSWdEBxou5QTp7i1Gdsd97TyHg5SmiKy+/Roxnz0PbqiUMh0+g+OcvKljGaF2+z02BLS+foeCo4hvCrjeg8Os1LIM931S+T7/AZMmM6a+RrLlvVeH+lWVmzo2pvCwLagJDpuNiSNujGBN0rBwfmG8EWocMEXB/sj9KPv8Ryn6d0WBj1QR9l56ZTKwFBYj+4Qu23sn3PUKKf/+BzQEVRTxGDIAlPQOWsxcQd7juWNruWuLNnD2PZL0yTZA5eSgOXUwZ/KBokwCJlycD/AhZ+C78J1VM3pE+41WSM+dtgRvyBVc1boeyk8dhgx5y+i+hFQwnHJY1Zb3msKQdgUgbDc9hfVG8iubPdaDT0HY5R+SONlQeplxWGdgMZVnFMJfjNzDnnMDm0PRrh7L0LBT9RXElqsL0O5uLubeapk0faLq0Q+G8FcxFkqAEql69IdaqYd55AraCZOaczmTg1j1YRIn1SgYsR5MhiQpGfMrBKmua/trbJPetVyFvkAhFTBRKN/xQQSXHuTrtg/8b7yD4jVl3LV04c+O7tpOU6xaVw8bzI5t33KEXjYT/O+MBiRiBM6ZWGceVKbNIzvx3BCMAfZduAEow9D8F/3Dr0h+SAB8U/PiVcBnk8indIHbmpB4omHapvpVattQD2qJkww8VjB5ypsulju0OC1plyHouryt9G8GeZ2KealTjUYZiwQWSllEiDm5P9YLE0x2GpCQYf9sDeWww7BkGlJUWMVBqj1FDGAAfG1N+EUyn/mG/Sz0aoXGx60zqJ8PiifXyaSii2sKWQjMdOfTeckRC3ioc5n+3s3743kUZh+qk2EAh+HPfXw5d0r4KvrrO8i71Y2h4DSfqrA8XkewXp6MMRmg79QdEBEXl+A5cY6CMbAmZuwqGo45LFc3UaC93f5TBG17PPwWZjzdy3viIyb1ssd0S4PZIV+SvWixsBMdm8oOmV3tYLmVBn+Rwa6zMJdhFsDysh37n89JMlKz5C4ZUB3QsrYduEEXjJlC1bgzd1r2wXjrKQouooz3XsHjc9wjjtJbLNMFhkSCS0PebVwPhldR7MDH+tU7YcJzru7XpDbG/N3S/f8++8+jYBw3++fOuZWp3Pee9NG4SKVixUMA54PpNfqunfysT2kLTrRNUjeLgN74qCErWnAUke8YbsKMYHg+PgkgmRt43q4VLHq1D0aQzrMf3sfgF+tDPuB8CzbXh/8ZE2DIykTfvPQYSwrgbXeBHRqPoB6rFKBTmkhK2OrYdykp10Gc4uCJ9HHIprTsYFpbtElC17MY4KFRq6H+/mu6V1q1s3AFlJzOY031lLQZ3CBLDn1kFZYnhsBw8y6IjeN9aVkO8qU89T/S/74Ax29E3Tp1eDz3JQLRLNzlEG3VIc8SnH7lHvDWx/eq+Tx48nBSXuwQ6jt8wZr6laik6q2Iq87ZLQFlmMaRRQfDo0bUKYF3a89NJ/uK5rAllww4oO5MDYzlAHdfFSpiZdZ/AjVSIgghi2HAe8ojmUDZtBNO+kxB5q2A5vZdtJtq+tmlXGI/tqICS4+jX1WgOztm4doPmeaMhPrSM94TJkPr6omjVD8xix8s6OHgIRF4e0BeeFjzXnDeColE7WE/tZf1Qdx0Ay4EU6BkKpmPzVUe857r0I4adG4Wxcur06DME5hMpMJQDbKv8mqBR7vF7xHvDxNtnCCn5cy0kNHFIYCyMWQ7cWarionKdrfgU44PsshTfDr6TxqAyePOlcS+Q/BUfOThdx37Q/+NYOH4889WhRzG3WPkPG8VyEOvX7YaiYzysZ1NhzjsDz4HDoF9/iBE/V3E5x61xrkdlWO6CWHnsXOal7dJgUUWrRjD/u4/BSDk/TNsQ3gw6Ji5cfbg1juqQKaAg58q8PxTAhD5Nke+S8KhzuuGwI1jU+XG2ENIXFYhDY5y9R7w3SrwUg0D30wZIoyJhTaE6TQeOV2XEGbq42u6D4H5/vyo53qjokb9iYTlcv4PrMTfAxh2giAqHft0uGMtjvDgh+D8xFtbT56E/uEPAu6Vj4At+lYAceljnh1m7EjoyFHPn75yJw/l3vokqm4hptIPyvkTk/f4D26ycingfnY0l9Dsuv6sadYTYTYnYfa6tbFemziRFy3+GUZckqA5p/50NP/R3arSIuSfz3ijpAtnzF5L85V/BmpKGMuRU4Ra0Zor+ou3dEfq/9sPz+UdQb3HFiIIrk2eQggWrIVb7QBLpDcPJPawepX88pMHesBx1JL2mj0PlFQbFwDawrD8Oa3nYu0MUoBxNDrFcC/XQDrDnF0MkEjH111VTsQpSRTgsZgrbVJWzcVUU3wjOmghemqvS6Hfatj0gbxjDwEYUMdHMIla6chP0SBIqZzJ2VCLkjWNQvO5b5lmm6d0eUdWgkNOELbrv18OGXObnYUK6IOZwAqZtB7w9B0FOMPw3voq3/s279nhIHfscKV65hBED507OREAnXOHTCIb8UwhykaAwe+5HRPf3bkClgOVECvTn9rLZ5AOmxyyFaKJOMtx/gX5HxRHmc1A/Ecr4+tD98TfbQFQk8Hp2DMp0JtgKClBSftGi3JFmuYTNhpItv0EW0wr2pJMMAormerMhUzAPc65J1XSq9n2g2/MnIyBZUDNYMh3hRIwo/RtD0a0lTNuOQBYfBrFMAcOWXxignrNOVhmQAFlCJEq2rHP4RXS5D9E7q4JIp896k+S9M4edYNRCJ4sPQfHevwTidTADQNttIBpsX3/X0kTl7XBXd/RkUDwxZJ5mfXY+3pw7TQkiaOpMhL7/boWx5CxbSQp/WgtCE4/8e4rBQtECFL9A2aox7KV6mA+chCHbgSTOL1z8KJYHNYHHwM7si5IVa5mzOrVm0YR/ym7NYPiWXvTOQuoXD1Wn5hBJZbCcS4G8UQzMR0/BfrkU0MpgynTI63wM/LJI9atWXIC291CU6fUw7P5TIF5usODvced2Z/mcycZMtWeACZmsfp+hjyL6l2+qrOnFpyaQwlXLhJOCxutZoKvQJxrlEbRwJvwqGXtuPf+88RbuauK9MHIMKf5idQVoUM49OQeixBA4YTLLHl55Gs406UAMx3cLxMMgoboNgqJRDOwlxdB9uQ0GpAiLSL/XDBoGiY8PSv+hqaAiEPfbj6IzCR0JdbDhxgdVp96QeniC6PQssaC9sBBSP19Yky/Dmp4NWwb10c1n9To7r9O/qS6ZQO8I+QlqBmXHprClXYZ5P82T4fBSc1YN8ouqonkXmI7sFMQSxr079oPpn+MwlgNoh0x7FaEuHNJTn55ECj9eKBhpKvtZMGjYXkMQvXntXU0PdYrz0s4mdelPCnf+UeHmza1gnFv6PfsSwpZ+UGXiU4aOICW/UCyyq6IHVUVxkipDVoXIX7qIAfMXInDKJNHFMc+RwtUb4fF4Lxg27oY17wQk8IE0oj6LwPB8ZADLTSGSiGA+ehbWFEdITmU/XM5xaefof5/xEyGSyWHLyoYkwB+lG7ZCqnWDJNgfxr9oCoLLcBsyHBKZHPof9wqwU4pmXWE6ukMgQCUCoereGoZtu4UcyvUXf+wSgzfj3bkkf+YyWHBJcBByPg0o4rvvlHHwn3BrYfhvnMe6frNO7DSahZ4TrLP44LBYAT4vzkDYh3OqjCXnw0VEf/godF//AXO5Ip8bIfh0cH8FvhE8h4yAe5/uMB0/jdxlHzJipBxZDh/4TH8GoXNni457NSbqppHQ76Cc0BGKw0+Ea4XOaxt1gPfEJ+E//mqC6aRe9xOaolUc7Anz6T2UB8LvtRkIfWuW6NKzU0jx0u/Y5Yr7FHOti8MaF8a4NT8RqssGn/nWe6Tw429gyjgJhSYB4kA1dCn7Bd2w74svI+zD6gEJbzbR3az66gTxXnryWZLz+VLGNZSIhCyxPkwHHT6tdADqhLZoeMJ1KEv6jNcIdRc0g6I5XjUiaNwSoGwVCf22dRUuhSw6QZMAmz4DVid9KoM4HTUS6rgGSJ8+2aWPLq+/8uJwrzb3yEQo2zaFqmljBE6fLLo07nlStOJb1o7zQlB4U3lCFMouF8BS5MAyo3VoegyEVK5gYNfUjKzt0xPGI8kw5ByDJrwZGl066nI9k9r3IcY9NJEioGnWGZKwAJh2nYKt6DR1XEYz64U6QQd1TmygHc79aBm58sIEtohUJSSNDocpeb/gdEMXNnjhMpc5zrLmfEDyZnzCAh2dH6+eg6Bq0ggFH34mpEflFyU5xQ3zc2Mwp3RVWdBjl77wHDYEJD0HmbNfFYiXEjsnTq7f5ZY251OCy7K0PppRSB4fB/Ppc+wiyS9xlJPKmkfDlpwHa+kJ1i79r0IIg18FKYP52DnoT++Fqn5riKQiNg+0jFefIYj+s6rMmjHjTWI4dBTGzXvZ6cP1y3Qu6O9SqBGycil8x96cbJ83i6vWpp46seMuvzSLlK7fwnC8aIfpLVtUXwN9qoO4mOgwaRrCFs6rAR7ixQAAIABJREFUMh4aPZz71nKYKJcpfyixqD3joezSDOYj52BIOyRwPgdxUY7uxxB05OWQTtL4tpA1bejIY5x7Sijv3rAD46b6XXthSj5SgSM7GxQ4V+ayr/OFk36n8W0GZYeGMB1PglgqB1RilB7f7XAYhw/chg+G3WSEYe0eJrtetaw1gKJ3PNw6t0fQK9OrjP9814FEv2M9q4eq4spY9sx0x4mFEIhDvOH58ACELqgqdtWGgO5kmTpBvOda9yKWpExYik6yuaJwoPLOkSj+26EnVXo0ZIlO6q9e6nI8yf0eJPqN25kGQFKeCZPpcnsMATGaBMARV8cS9Rajin0ua3JRRYlQlOEKlN4J8Bw7GHa7HQXvv1vBSFGZeGnnnIMouZcYbVetjoM4xJ3le3NsoBh2WeMcm3Nx7tbJ6/KoASD6iBPEFYloAWXTGFiycmHYtxXeiV1Z9k+xVgX3Rx5A4IS7J8tTbTbFXU+89NJV9OtG6P52INpwjsOPPbbwcW0h9nOHplVLlxePjNdmE9223TD9cwSqnm2h3/Jr+SVHBTGC2TzRlFCVJ6Ny7Bk30dLIBq+xD8K4+QAsqQfg3u9BuA3qjYIffkHJjk3CvPO+ci7LEqh0agOJmwb6P6isbangE8zHxC+Pla11zv3jkSBuiT0Re9C1STj9ldkkY/Yrjg3jHQ95m1i4N4xDmdmM/C17YD+3z3FyeTaE58tjUX/6i3c9PTgT9V3f2ZyPV5K8BatgPueQ7fjDtQaUQDhAB9W/xu36q9pLC7Vo8Ru6s/rMIXrQ49SNGR7oI/NrwmRefpOXIpKFHNG/tU27oOGxnaIzvYcQw19r2UngNr4fUGZH5qolgkGFuW76NoM0yBPGEzuYXlfTqy1UCY2h27EL+g0Uf8yByk7N3QQ5TLtR2fnHWdypvHgenQYgZtcGl2NOGTiM5K3/nhGoHUHwfKgXPBrGgRA7zLkFyP5qI+z6M1BEtID/C2MQNunZu54e6hTx0s6e9m5ObAWZQiCk82JyGZL5LSAEQcteg9+EqrnLknsPJdQfQQYP5uPLj19aFzXxUsKCWISy9DzIYkIgDfRByd8bBOJVeCfAWnBCUJ15j58EQ9IF6Lb/Xn7xcRBd5Yw/6ubd4D1iCEo370TxX2ugSewJjwcGQCQRQ3/kJCgOG/OjpWmwLFZYi05X6BsF4ZPEhcByluYcvmpppOOlOAz+r09G0JsvVyG6nA8WkYyXJrLTigKuWDUqqMOCoQkJZr4ZVPlYeukS9Klp0ISHI+bLT+oU4dJ1qxMdPlYut3GCc77FO+9E5hXVdQBidrjmRBTilA+Yc3GuhqLv8qOY4u7acUlQofFj3HmjqJt2hl1ngD7loKCy43VwjAfmZNOmF9x6d0bp5n9Qss8ho8vVcRApZSzPhQgSlMEAO64wsD1V3+YwbTopOOHQOrj2gp82apqY0F8DZYtG1aboopET+r/WMZmZumCaIYM0IQJeHVtB6e/Llt5utTIRgkaLBNUygXdtZNHbVeauJ968pSvJhWfHwi08ESIPDUzHd1ZwOeTEx39SzYPvtFdd4nalPjWBlKyiOGe5Lj3VHJfBcMhbRcF6IRe2/BPlaqxwRkKSWH9oenRE/rIPhIBKOoH84qVAfdiRKlyy5GFNIG9QH/IG4bBeuILizVcxJPiGoL7CdqUCup+/KFdj+YFQz6+YRIiUSliOO1wsuf8F/RlaTai/M9FcHDWBwF6Goi8+ERyPENQUynaN4RZVHwpvbxBrGUhZGQvh9x375F1PC64u1Ldro9xwO/TGTHG1JD5eMGxeKxzNfEEdMp3jYXJmTEs0SjrkcjHSnnmBlHyxCSbDWUH5T9/jxM/Cg6LbQBZbH6btJ2A3ZEM7oDvsEEOsUUOb2Azp0yZV2EBcd6rt+yDMmw4zFEiVWwK0D3SGSCaBrbAAZenZKN3ryPTD++mQdWMgqucGS9ohgUCpE77v67MgDw5C6a59MGzaA3PeKcGZPmLJJ/B/rvq0rpmz5xKxUs0IM2P6C+W4aIC8+2DY3FRwqxeKiMXzRTkfLiVlRj2CZk2rc4RbZ8SGi6OeIfmfLa8A3MFv/qryHGdU1uTaAfoz8NmXEO7C34EO+uKI0aTo208rXAA58dJVVIY1YTBI+n+3QA4tFK3awVZYAmmIL4jJiNL924TNwkUYZr6NbgVz8r/lutkoqLo2hDUtB8YLBwTC5KKJHHFQ9I2Hrjx2jKvEFBSPTQSoO7eBIjyM+UGU7t6LkrUOHw3av9BFy6s433POkDHzDVL0w++QhAdCHh6O3M+WMbGDiTQRLSBPbASvmGiEvvO6KGfxx6TMYkbQS3UHaKTOXNhyV35G/MotP1Re5TIf57J0Id1iOsBuNMF8+VAFrymNZzwaF7mGP2KXwMjWhBIVJyZn3wlu2aLlPBu1h+VUKguepJ9zHwPnjD0SBMJW7uTjrNt1loFpXbwNGYKgHdIDqmbxyH19piAWUJFH3XcoRMQO45/0gpYFpWc8M+OyC2loIkNQj1r7tUtOmbPkE5Lz3ByGH+Ec8sRPFnrho4lY/Dq1hUSpgs1ogCzAD/5P1y2HHE7Adea4uPjkM6T48+UV0Mu5Y44EDVjQpPOFjv4eMnUmJP7+KN2xG8r64ai3dL4w3rTnppLiJT+yi5mKJvCz2aDt0hkyHy/ojxxF0dcrWVsqREOeWA/Ggw5uq+7QB+59uyPn1elMfFH5NGLaCf3evwROTt/jbocc/p+LCnyzyBRxkDYOhizQF8UbfhSCO5kTUHACRCoFdCkOREqG9xveDOoubVC/Gq0A1WXnvkUTCDoASfixyufkqnHDFz6PDYY6NARmsxUx18gQesNy3m16sc4QLzvuHx9HdF9tFeLRnOUezpWd5V9NSCN4jnwQUl8/BLz4XJWxXn7uJaLbsQ/S+iGwJadB0SyOEbkxKRlFv3zDiJcRTlAz2DKPMoOG9rEBDOapaNUaFiVBDQ+KFgkwHr7qrsg5nbMcTX/XKuJYqBCLpWvfC7KQIJj+PQ1jqkNjQR+HHAzIGrSG8TzNaQG4dx8Ezwfvg9+Eq95olenjdFRLYkw5VCFqg20UaQxUXeOgCA1C6dEzMB79G1L3KLgN6oL4rz+tU+tfecx1rvMUg0z/7yFYL2dCt8+R6bG6hw7OvdtAeD72MPzGPOFyrFm0voNHUfrjZ6waaj62l7sZcocbriJT1GsOab1AlmfYmbtSUYKLGlytVZmAaR08ISH9XZXYHbIgH5T8/lOVAE8FAqHo0gK6nX8wLuo9diLCVy6qdq0uPfsCyVn6UbkxgnN9dyjatIGmcQMovLxZpEdp6gWYLqbBI7EpIpd+VOfWvs4Tr/MAUoaNJLrvf2Xh5pWJmK6Mw2sK0HTtD48BPeE/tXrz5/mBDxLriWTYLlEofhqkSKOBO8Nw4m8n/W8gy5VGXRgrP87aDt4XbsVzvgxyFRkleDHUsMHACN9Zd+2QqwMZlq76kU6I/KEqaDRvP+/TL0nG6GksUxB/xAFNoG7fCJqoCMg0WojEYoCq3cSAyMMN9cbVLR+GazGn2ySh3Jpmzt8/jJT86oAqciYATrxctFC4N0DjkvPX5DbZi5aT0u27YFz7LyT1tBB5e8Bw1BEGzzkpRaopg579zeVZZ7mSQjcD7rCiRBAFnE3RvI/OJmAuLvC+0p/qmObwfHgogma/es0+J3UZQEp2bhCiRdTdBsCtU1uoQ0IgFotgy82HtbQU9d57s85z2v8pzksHk/X2+yTz1alVEvlx4nX+6V5LHK7Lk18m5tNJMP55lDnsUAgku8nG0nC6DXTglDGTrk8zSKP9WHpVw9G/mfnWr/dQ2O1A8RYHfBJ9uEeaszWPbgh1ww4wnNktcHZalm4ECjCdUFi9poSN+533SeH36xh4NZfzbfCEzzOj0GD51Xi+i1NfIaWnT6HJhroVn1YbVvc/sRvPNu5EdCd3VbGaMdkSMZB3joHhb4dPq9eT4xDx+Yprjjvz7TnEdOY8ir9dAwuKmKzK8MHUvtAMaA1Vo1gUrv6Zqeck8IPY04/5JDDtA6hoUQAzLALxcjnYmQMzYwi8YUWBQLyq2HZwf6CvS6Bs58W8PGUWKf5yPcstwUzQ/R6BPi0d8PeBR9OGkPt4wg4RdOcvouDLjVBCgeZI+p9Ya+d5qPMDynz3Q5L/5iqYynP7OmsbVGgAz8kPACIRij9bC0k9f3gM6oPgt2uHP5v10VJSsukvyN29oenQGoaTZ1D6zV/QPNQFpuNnYTmyk+GmyZrGQeLtiZLtvwuctrIvLzcwVPbHpalbVV07Q9uzK4JemVKr9TjhFU/MhQ7neofjfChMHu7wfag71GGhIGJAdy4FeV+vgQQFUECDwNXLEVjNpbU2XO5uLFOrybobO877lDZxBila9A3TEFAkRhto7JnjYSonnwSoujaF5fxFBkatbtUCofMd8PY38lB1nX7rftgyjkGZ0BGKuEjYDUbYzBbotzgcYeTlSOYU6ZEbC5x1r2K/hpDEhUHm4wn3li0R/GrVCAhXfbsy7VWi27AN+lO7Bb0w5eoM3bJpJ/j16AhFYABsIhFy1vwG476tjLjFPjFIzL/HeW9kvW/5O8lDRhDD2l0MCcZ82uE6SB9+KeKWLhF1iLz/YchjoqDfuQ/2olJoB3RxGXl8rU6nvzqbGP89DFlICNPVmpNTYDp9DmVHs1miP2rFkkdHMH2x7ewV5t8g8dACcjFkMRGI/MZ1itlrtUk3TfFXK5iKzpE1sz4kTUNhzy6CRCqDpHk0vBs1hFStgcWgR9GhYzBtPgxZdADcB/VA1Idzb3jD3vIFvMEG/icGlLVwGcl9ZwksOY6jlCv8uZM6vTDxY5zmQqPJrK24LKjS3AcNQ+Rv3/+nucj5aBmxFRTClHwO8qBQKP6vveuOj7LK2s+0d2pm0iaVFBJCKAkBAlK+UEREeltBP8FFWcuiu8jq4gos+qm77O4n6ooFFQVdYXHFihSlI0iiETChpJGQhPQ+M5le7v7unbzDpIBAAikw/8BM3nLPOc9733PPPec5EeFwms0gThdEvprLJtJcznY0ecb4fToaP6McDjnujLXoJKjvGANZfCyMWbkw7EmFLLkv/AYOgJjj4HI4YGtogLWqBvK4Poha82y7ZLtGbF3303qMUAULF5OGzRub7TDJEM/isjTLy9sH9c5RoKzjtIKBGzYC/vPntNmI8LpboY0blD33N2I89iNMe79h7O7UUO7ko2iErlqMyL+6AVn07F9I5fY9EAf6ISA5CZxMxnx80sR0Efb8yh5j45Zq6lGC5Y6ZSpw1tbBmXSyL52diPmvLu5SIzszioAQIqnSM7pRWVIgQD+ld/eE/bzYCH7rxOa7n5i0klu0nYLfSBtvuD28kJ7TQLr4bqv7xCFm+jP2c+8BjxHA6C6rpd0BM+8E7nRALRIBACGhUCH3y9z3Kxt4A7lGClSz/M2n88QRrrm09eoLtlHmDlfd9vTPIeHDwmxz8DhjXazBUk1MQ9d4bN0RHlW+9Q/TfHoDhK3eLKT6Bh46PD7Ep7poD32FDIJJxgFIJQ24+9PtT4RMdBp8ZE1F34AiI2QZ5ZC9IY6IRsaJ7FVRe7RvuhhjmagfVEcfn372I0B5qfOqim7IpjrWH4omm+Q0M/n70O19wSdvCikK1sO49DnG/cMhGDYVIKkPk2815gNs71vy5C4h5TzqEoWrY8/Jg9aKPkiKAtVl1U5vGInjZPEiDAkHsNjhUKphz82HdfwzyvhFwVtbDdJyW90dC8/jdiHuzY8fZXjmvx/k9FrxUWecmzyOWzDwI/ZUQCgSQ9IkG7A7odnzcKhmGBzKd5ShoNA/eA1tJGRr3ful5dQsRCenwWCiSB0Ho6wNIOIgUCoSuuHR8tmrjByRocXP34/yiR4mjoAgCTorG/V95yoj4haW7IXYEI92jDxMjvx4+FhEP3o+gxx4WlL7wd2JqaIA9+xxEVQ1Qjh/hjjPvPQhRoBZ9trmbBfb0T48XsvrtTUT7WzeVEa0yMGedQ+MXmz1ZYfxCjs/4csdpoyCfNgz6nZ812yXjoobCUXSCAZ8HGtvmHTsZ/gvvYb2MG17+AOL+vSFUSWHLKQXRm6CYmQJbVh7kyUkw7U2DpfaM54HgXQTePWBFpAnjoJ47CYY9h2BK28u6eMonz0bSN18yOcrXriPGujpIaMVFdDS03bD+rCMerB4P3raURMvgG5to+SlYqGuhTp4ER0k1zJUXKZv4hHKqJMawM3UuLLvSWZiNX/3TRR7t1N773xsFlI2x+NkVnoQdej4HLXwWzYb58AlYC911arw/K6U5E6Vm2ODO8eV34XxGTYHf4vmwZmah4fXPGIew4s6ZCJ01HcRs7lb9gTsCpJe6xk0JXqqMvIkziWlfOrh+UTBlpyHoiWdAiBP162htWy1kscNga+LcpTkHrgY9zJXuGZNDOCRJsTBnfOcG9cx7IRQIYfrqBKxNpCU8GL2T5JvtsjWxW5Jqi6fbEX8sv3jkG6owt2HYOARNnwIxJ0LIytYdP68nSLrqtW9a8Bb/7g+k9o1XmV1oSCr4gUchCQtD/botrGMOdSP4eHDAU6sglHJo+PhLmAtOsvJ41YKJaNxyiHXM5AaMAlFysKS3bhXFZ5Lx1+KBwM+y/CLR/T0aksQIiLW+cNTUw3GhGrIILZwFdXCFKuE/dwpi/vHCTWuzlg9Rj1UEbbxNy3BFGl8EPd52+Uz24PGE5uvSmU0VnAihnxLm7LRmCyhV/AiIA/zhNBlYB6GLi6p4ACaIIgMhTxnKdtNoha83zam3snkXhP/Ne2YWBQ+CcsQAyMNDIfHVQOTnB3tNNaw1dXDa7LBk5sCamQHFvKlI3La1lc0K171FjF/uBCcQQhrfB5FttDjoqrNne8bV48BbvfFfpOKvr8CVnwMSEA55UjziD7TNoMPch/HTif7QDg/rDWVApzVpzlodjEUn4ZM0FraMDNigc3NChA+BqdTtF7Mmhn1vg3RIAszHz8B47odmC7zLGYbOtHQ2pry/PgP7Q+rrC6FEAoFEDIFYDJfVxngX7I1G6E+fhaOhHpp5MxGz/KlWNstbsoxUr98CcVMFiHz0RPQ/1jb5XnvA0tXO7XHgPTd3Aan7fAvTs7LPEIgjQuF/79xWHTK9DZEzeCyhyeR01lQNGAXluJGw0nzeQzsYYPnNDXHgQMiS+sCwn7aOCmCUqaxgMnQQbOWZnh0xCmreHfCu8OBdCPeiLQiq2ROgSRwAEceBOFyMfonYHWx1KJLJIBC5C4LsQgFcAb6IbqNEverVN4ilvBx1xzNh2v+1m06K8hX/9glEvf1aj7Ovt916lHCVa14hFSuf99S0aabeDWdlLYjDCWGwP0tBjNn6QZsylzy5kjS8/xVcOgskvf1hP5/PEsXpwT63T4ckKgrSqHA2s5q+T4Pl5HnYay+yl1Ol8hdW08bYnBim1L3NyPE8C7bYwVAvmIc+L7jziitef4vY6bZ2eTVs9XUQymVQRkVApFIg7E+XXpxVrFtPXHUNjNHCbmpE9a6DcJxJdXMWwx8Bq59E+It/7lE27rHgzZ+/mIiUSug3vcO6tNNdNTrz8X4oY1B/5PeIevd1j0Ernv87EWnU0C57TFD15tvEll8Ep94A3e79gEQEzcQJiHqvdeXuhd/9kdS/sRn2JrIR/h6yJrpSemcateAXZlTpdDyK+x9B3EetKzmKNn1EXCWlcJVVAGo1xDGRiHr00mQgWctXEUmjEQqt1s36KBDAXFGFms/2wVF9it2LbrZcqhdxV3MBrmU8PeappHVn+k93Qj1rEizFhTBvP8BmTm8+BDcnQhx8fj3hkuQdxUuXEy40BCErWvuWLRVcve5tUvXRxzBX6iEf3Be67UfgP7wvNFMnQbdjDyzHD0LWfxS4hDgQkQjq0bdBu3RJu3Ve+MgyUv3udggSgxEwZjRkWnfTbKfdjrofTzLybN51CZi1ENFftc2wcy2A6UrntFuRXUWY3FF3ksbUvZD3HQlJ73BYvs2EBXnN6tqoQUUIhwuljFap7zeft5K//OV/ktCn3BlbV/opWPMSkXEcDKfOwGEwInDcGOj3HGR+s+be2YjowHzaomVPk7p/boAN9W5OtNF3wW9kMiQyOUzl5dAdTYcjL5356lQIKcKQgLKrkudK5e7s43qEUOcXPEz0WzZ4SmN4flx+N4tXMhWWX0gxPofbJkI9bSJEWj8EtUFIfS3GKd6wiYgodWhNDZwOB6Je6BifM++Pq4g5NR227wvgwDnP0BgTz6Q5kPppYPjpNMT0VVP4kyfcR+X1e/Bh9N60oUfYukf5vKUrnyPVa+gizf2hxuQrKLzTIVsK7V0iRBPS1Y/MbOYLex9fufZ14jA0gNhdEKtVCHnml12KawF+y3PK3t1EGjMyYMnIga20GiI/BUS+vizR3NxU7MncBSZzHA38wXfknbClUQb3Cg/fhCQyEQOLT90Cb0cYpSOvkXPHdKLfv8OTL0BBqUy+HfbyetjLfvbcypuEz+0PxsCJgmZ8Dz4jJkAzdwYc1TWsUpjmczsu1MCpN8JS5OYBY7Hd28bDd/a0a96mLX3/IyIoLQdcdrbQshvNICIxpAF+jO7fZbbCkJ2N+n/tBlDCZFBOmgPfpASIpFI0lpWhYePHrMSeRySHSEiCNXBWnvLMuvLEFBCnA/qzaQh6cAl6b1rfowDc7YWhSTb1e9wEH9RdoK2nNEsWgBAxRHIxK48xn86GbusmTyWvMiIZXHwYLPvOwoJ8D38tF50MV6GBtZDiZ3I55HANH8UALLY5oEyIRd3XnzAQh7+5AcGX2L273ANa8Je1hFRWQu6rgUDIan/Z4cTlgsPQiPrjGTAc2c3uQT80FdPvNzOg7NWLfa/POgvDJx81tbwC5ANo7oURjrJqRv7H7+bxTD+U30dG+1esfBwRa57r9jb3dgM7ciK8odcqf+llov94J8zHD0ASNQRcXASE/hq47E7Yz+bDVdsISb9eILV6mLNSPeBVJ4yBZv50WIuKYdi6n9H4E7sV0oEDYD6YCmMTQTQVhm1cjJsGRf8+cNpscOafh+HwNww4YZfosn4pJRQ+8TSxnsmFubwKdiEQNHEcOLWPh6fKpjOg/vjPMB6+CFz3omwSiyqI5FIGzNLPdsB56nv20FEXSdZvJKAzwVKe2SpPmZeBjlc1dhoGfnfp3cYbarwOuFm3fQopq43ToIN++2G2paqeNRFCsQT63Xth/6EEivtSYP3pLCy5aR6DUkOLpAMAqwuyO+IhCPSFvaAYxGqDOfN7qO6aA2d1PRpP0IQb90cQmoiw3y2CSCGF6Xwhaj/9Fs6y0ww42t88hpj337piHWbfdicx/uhmtmTsOimTEUiJnjmOxWodFhPqTpyCYc+XnrJ92bAJ0IwYDFlAoNvXraxC5buveUiu6c1pH2KxNsrTeqstXHBQQjFvLhSjRqBXG3SvHYClG36JK1b8DR/ZZW5Ytf5dUvf2v8ANiEPj1mPghvdiu1GO0mrYctPA3TYOyqGDYdi2jyV+81u0MsRBPm0oHBVVsB0vhDDMB84y2vu3goFJht5wogp2GD11Yz6LlyBho9tXLFn9AtGdykLDl1vdLWNXPovYNVee5ZU3awExfrXFQ4dKZ3Xf2Qugjo+DWCZl/dFsBgMMOQVwNOjABfpBER0BiVrNwG3XG1Cz9zs4zqZ6fF2euM87qd2bcNA72Z6LTIaoTzh8pk9E+JNLu6XtvWHRLQXImzqXWHalQT5lNGhbVtX8qSA6E8zf/shKZyRDRkMSGATjXnenSz5EJkEUxEOi4DhJORtqIQ6JgavCCG58PGh/Xu/oBF/0qHl6Ffr//18FVW9tIC6dDo5GMyp27wEnlWJQ6tUnvxQt+QPRrf8EFpQ2EfCFQLtoNhRhwRBKZWyr1+V0d+mhuQ2UnpT+39agZ3Fk2gnUm23dmw/Y7R+3/eHzKljsNzIJCcUZ3dL23Rq8lB2xctWzjMtAFp0MW+FxyBL/B9yAWAg4DvZzxbClFkLgL4W17lRThCAEQj9fyO8aCXteEYzHD3pmY9WQMfB78D5Uv7wBlqYSHx4AFMwBz/wZYm0gJFYHRE4HiJMwOqWI5565ZuNnDx1H9Ccoz5k7l1jg3x/aWeMgDw6CUCJlEQi2iCMETquN5TsYTuXAmLa3FXB5Y7bkRvM2Mp9YxL+B6LG+M+9F33YSrXT22/iaDdBZA88dP43UH9oJGe2F/uQTsGSdg273p24S6Tn3gTQ0wnowF5IhoXBWG2Ar+Qm0Z4V8xlBIE/rDkpEJwy53dIIalXaojD95UEBnxPr1r3oyw6h81DVQ37MY+uwcqCekQJ2YAKLTIegPrVsEXI0+8u95gDT85wPPTE9dFiFi4Pur0axXhEjKgYDAYTLBXFwG49FMOOrOejLcWpbwUyN6lxe1BHTLuDcf407uJk0kL6XbbgXekieeIfpte2Epc9eCcYiBC3o4UMPk41+hFJhSaCEKDIStJosB1XfRb+EzdhR0m7eh8aCb7lSCWEhHxEA+MhnW01nQ73cT5dEPn1AjRQQs0EExbyb8Ro6AlLIxPrSo3XqjBCn6I7sgDU2ArdwEOwqawn1xEMX7sTE4cmi3+fPM7fHeNQyccjesZ/NhKbpYb9fSwC1nYv47ryfqb2v/9zeI3Xr1vGlX86Bez2PbbYTrObiW187qM5xYvMJYLdnQvY+nfR1kE5JhOUB5c89DPjgFqttTYPhiH5yFlBDvgnvmTZkC2aB+qHvr1VaNAen1lVHJsAeooEjoC5/EgQhvYqrpCLnT4UcU82eAcGIYN38LglJP7jC9Pu+r8yQpLBk+dhg0sybBsP8ojBnfXXYY3vnDvCvE/0ZP5BCBQbjQrTDQbX3es7HDCO31y9N68m1TeeO2FEwz4x646vWwHqWbDu7NCO8iRxp9CHj2ATiNRlS8vMZz+sVbGJWjAAAFeElEQVTZNxiSuEgW31UNS0TA5IkI7sAy8/ynVhDK8EgjCbpj6TB/t4uNoSWaeOBRN8Z/6Z9gyzsH/e7Pmu0ONnnJF0N8TbKqE1PgctlhPvODx8/nj5VoopGkK7wF3o6YiX7pGuXPryH6fUdhzymFgK7Kq40gLLvKzS7uDWL6f82dsyFQqeCsrkXj0d3NXAJ6Lzni4XP/eJiPZ8JwNpXdnt+d4lImQxYXA0dlDRp3/QTF9KEYtOPTDjd0+d/WElhsMJWVoX7fMdjPn/DkJPCveF4vzK+/fTrMBzNgbWK55I/hAektA/1Nu2QZHCYjDB9+AgIdxOgHcZKW9riCauIo9HppTYfL9Et27Ki/d9uBV7/3IdE+tEhQu/59YikohL2qFi6XDcTmAGhE4MIFuHQmCJRyiDQ+MB84BAf0HgDzCzYe8Pxsy6p8gxIQuHA65NpgOHR1qDuZCUXKSMStXnFd9FX2wt+IubQSuu9/gP20+yGiN+IXVnyxJm90/gHjZ2TeveD/zmkHQOijgiQ6BOo7x6Lx5wwIlErIIsIhUvog+OmrS/nsKLB19HWuizE6epDtuV7JU6uIgSam5+VAPmYkjEfoq1kJAWSs0sG72pdfsYv8+0Ez9w4ow8LYSsklV6LXdTR44ar/Iw0//QxBVS2cJ4+wMXkDk59N29IDK/kJS4Z8yijYTp+Bz6zJCFt5ZUzr7dFrVzi3x4OXKrnm3Q9J3QcfQxzkD8upHEh6h0Ho5w/z/pOw1dGmJBGw4QKzB785IRmUgsCJY1iebMjqa4/pXqmRC596hjiKiqH/9N+eHAz+XO8ZuOX15CFDMLDi5E1hx5ay3zRC12z8iJhPZDCf1lFRCWteMSwZlAO3utUsxwNYPn4KQhfei6AOCI39EogrXllHjGnpsJ7JAyx2OPJLYUVFM6pT/uHiZ2Xa+8J36SJErut5lP2/pC/etbqS43rEMdXr3yP6/Ydh/JT2raiHIKY3RIFq2H7MZqVBfN0XD15hSAKGVZy+YQ945drXiO7zXRAG+MKeWwBDTvolt3tp2Ew9dwFiP99yw8bX1UBw0wmePXgcqf/5MMQRg+GTMhSyoEAYzxdDv30n68wjlsthOfozCMqhWvgQ+mx+74bq6EzMEOIqaADtJMS2jluEzvjBKPqORP/ctBs6tlvg7WQNFD68lNSkpUMWGw2/pEGQ+KhgralBPaXGj+sNkVAA87ETkA2IQ/T7b95wcOTeNYcYvv2CgZaPKtB/vZnbJfBH0IsrELL65ibcu+HG6WTsstuX/OMVYjiTBfXI4Qh/7BFB5V/WEoRooTt3DsZtX4NTKzDw5LFO080p+BGhXwQQKIMkPAiWQ6dgQhFza6hLE7x0OSLXvdRp4+sKNrzpfF5vpef9+iHicBH4JAyARCRB8PKlgpK1r5GqD7dBER2Kfl9v6zRwFPzq18SUmgkh7T0hF8J+JovlV1A/l25UDO7mCTUdBf5OM1BHCXCt1yl7ZyNpPJIKcGKo4vpCKBKyXg82F0HU6qc7XS8nQbuwBsBn/gzYcvKhzzjCwBu6+kWEvXj5TvDXqpPudl6nG6kzFVbw/BpiOZ0NSa9wSMVCSLVBXaYPW+64acR4eCe4sESQMtpLLhuKMZPQ78iem9pm3ni56RVxavZ9xFZeAVWfWMRv6TrEHJUvrSMVy5d6KkHktLfwE48gYPH9N73NeADf9Ioo/OebpG7zf8BF9ELCF//uUvo4P/M+Ytj+DbikgfB/4J52J8F35lvuety7Sxnregh4pdcsefMd0uvxR7ucPi4s/ROR9o255t7FVyp/dzyuyxmrOyrx1pg7RwO3wNs5er911w7QwC3wdoASb12iczRwC7ydo/dbd+0ADfwX+rS34U511lAAAAAASUVORK5CYII=\";\n  export default img;","import IBasicToolbarSection from '../../interfaces/toolbar/toolbar-section/basic-toolbar-section';\nimport textIcon from '../../assets/icons/toolbar/letter-a.svg';\nimport pointer from '../../assets/icons/toolbar/pointer.svg';\nimport hand from '../../assets/icons/toolbar/hand.svg';\nimport crosshair from '../../assets/icons/toolbar/crosshair.svg';\nimport laser from '../../assets/icons/toolbar/point.svg';\nimport right from '../../assets/icons/toolbar/right.svg';\nimport trash from '../../assets/icons/toolbar/trash.svg';\nimport eraser from '../../assets/icons/toolbar/eraser.svg';\nimport pen from '../../assets/icons/toolbar/pen.svg';\nimport pencil from '../../assets/icons/toolbar/pencil.svg';\nimport felt from '../../assets/icons/toolbar/felt.svg';\nimport crayon from '../../assets/icons/toolbar/crayon.svg';\nimport chalk from '../../assets/icons/toolbar/chalk.svg';\nimport paintBrush from '../../assets/icons/toolbar/paint-brush.svg';\nimport marker from '../../assets/icons/toolbar/marker.svg';\nimport dashedPen from '../../assets/icons/toolbar/dashed-pen.svg';\nimport circleShape from '../../assets/icons/toolbar/circle-shape.svg';\nimport rectangleShape from '../../assets/icons/toolbar/rectangle-shape.svg';\nimport triangleShape from '../../assets/icons/toolbar/triangle-shape.svg';\nimport pentagonShape from '../../assets/icons/toolbar/pentagon-shape.svg';\nimport hexagonShape from '../../assets/icons/toolbar/hexagon-shape.svg';\nimport starShape from '../../assets/icons/toolbar/star-shape.svg';\nimport chatBubbleShape from '../../assets/icons/toolbar/chat-bubble-shape.svg';\nimport move from '../../assets/icons/toolbar/move.svg';\nimport photo from '../../assets/icons/toolbar/photo.svg';\nimport avatar from '../../assets/icons/toolbar/avatar.svg';\nimport undo from '../../assets/icons/toolbar/undo.svg';\nimport redo from '../../assets/icons/toolbar/redo.svg';\nimport clear from '../../assets/icons/toolbar/clear.svg';\nimport screenshot from '../../assets/icons/toolbar/screenshot.svg';\nimport share from '../../assets/icons/toolbar/share.svg';\nimport studentStampMode from '../../assets/icons/toolbar/student-stamp-mode.svg';\nimport presentStampMode from '../../assets/icons/toolbar/present-stamp-mode.svg';\nimport goodStamp from '../../assets/icons/toolbar/good-stamp.png';\nimport wellDoneStamp from '../../assets/icons/toolbar/well-done-stamp.png';\nimport excellentStamp from '../../assets/icons/toolbar/excellent-stamp.png';\n\nimport FiberManualRecordRoundedIcon from '@material-ui/icons/FiberManualRecordRounded';\nimport FormatColorFillRoundedIcon from '@material-ui/icons/FormatColorFillRounded';\nimport PaletteIcon from '@material-ui/icons/Palette';\nimport BorderColorRoundedIcon from '@material-ui/icons/BorderColorRounded';\nimport FormatColorTextRoundedIcon from '@material-ui/icons/FormatColorTextRounded';\nimport IStyleOption from '../../interfaces/toolbar/toolbar-special-elements/style-option';\n\nconst colorPaletteOptions: IStyleOption[] = [\n  {\n    id: 'transparent',\n    value: 'transparent',\n    title: 'Transparent',\n    style: {\n      color: 'rgba(125, 125, 125, 0.3)',\n    },\n  },\n  {\n    id: 'white_color',\n    value: '#ffffff',\n    title: 'White',\n    style: {\n      color: '#ffffff',\n      backgroundColor: 'rgba(80, 80, 80, 0.3)',\n      borderRadius: '4px',\n    },\n  },\n  {\n    id: 'light_gray_color',\n    value: '#e6e6e6',\n    title: 'Light Gray',\n    style: {\n      color: '#e6e6e6',\n    },\n  },\n  {\n    id: 'dark_gray_color',\n    value: '#808080',\n    title: 'Dark Gray',\n    style: {\n      color: '#808080',\n    },\n  },\n  {\n    id: 'black_color',\n    value: '#000000',\n    title: 'Black',\n    style: {\n      color: '#000000',\n    },\n  },\n  {\n    id: 'red_color',\n    value: '#f8433f',\n    title: 'Red',\n    style: {\n      color: '#f8433f',\n    },\n  },\n  {\n    id: 'green_color',\n    value: '#5fe119',\n    title: 'Green',\n    style: {\n      color: '#5fe119',\n    },\n  },\n  {\n    id: 'blue_color',\n    value: '#347dfa',\n    title: 'Blue',\n    style: {\n      color: '#347dfa',\n    },\n  },\n  {\n    id: 'cyan_color',\n    value: '#44f9f9',\n    title: 'Cyan',\n    style: {\n      color: '#44f9f9',\n    },\n  },\n  {\n    id: 'magenta_color',\n    value: '#f289fe',\n    title: 'Magenta',\n    style: {\n      color: '#f289fe',\n    },\n  },\n  {\n    id: 'yellow_color',\n    value: '#fbe739',\n    title: 'Yellow',\n    style: {\n      color: '#fbe739',\n    },\n  },\n  {\n    id: 'orange_color',\n    value: '#fb823f',\n    title: 'Orange',\n    style: {\n      color: '#fb823f',\n    },\n  },\n  {\n    id: 'purple_color',\n    value: '#8880fc',\n    title: 'Purple',\n    style: {\n      color: '#8880fc',\n    },\n  },\n  {\n    id: 'violet_color',\n    value: '#0c7cfa',\n    title: 'Violet',\n    style: {\n      color: '#0c7cfa',\n    },\n  },\n];\n\nconst actionsSection: IBasicToolbarSection = {\n  // No one will be active\n  active: '',\n  elements: [\n    // ToolbarButton\n    {\n      id: 'add_image',\n      title: 'Add Image',\n      iconSrc: photo,\n      iconName: 'Add Image',\n    },\n    // ToolbarButton\n    {\n      id: 'undo',\n      title: 'Undo',\n      iconSrc: undo,\n      iconName: 'Undo Icon',\n    },\n    // ToolbarButton\n    {\n      id: 'redo',\n      title: 'Redo',\n      iconSrc: redo,\n      iconName: 'Redo Icon',\n    },\n    // ToolbarButton\n    {\n      id: 'clear_whiteboard',\n      title: 'Clear Whiteboard',\n      iconSrc: clear,\n      iconName: 'Clear Icon',\n    },\n    // ToolbarButton\n    {\n      id: 'whiteboard_screenshot',\n      title: 'Whiteboard Screenshot',\n      iconSrc: screenshot,\n      iconName: 'Screenshot Icon',\n    },\n    // ToolbarButton\n    {\n      id: 'share_whiteboard',\n      title: 'Share Whiteboard',\n      iconSrc: share,\n      iconName: 'Share Icon',\n    },\n    // ToolbarButton\n    {\n      id: 'set_user_info_to_display',\n      title: 'Set user info to display',\n      iconSrc: avatar,\n      iconName: 'Set user info to display',\n    },\n  ],\n};\n\nconst toolsSection: IBasicToolbarSection = {\n  active: null,\n  elements: [\n    // Pointers - ToolbarSelector\n    {\n      id: 'pointers',\n      options: [\n        {\n          id: 'arrow_pointer',\n          value: 'arrow',\n          title: 'Arrow Pointer',\n          iconSrc: pointer,\n          iconName: 'Arrow',\n        },\n        {\n          id: 'hand_pointer',\n          value: 'hand',\n          title: 'Hand Pointer',\n          iconSrc: hand,\n          iconName: 'Hand',\n        },\n        {\n          id: 'crosshair_pointer',\n          value: 'crosshair',\n          title: 'Crosshair Pointer',\n          iconSrc: crosshair,\n          iconName: 'Crosshair',\n        },\n      ],\n    },\n    // Laser pointer tool.\n    {\n      id: 'laser_pointer',\n      title: 'Laser Pointer',\n      iconSrc: laser,\n      iconName: 'Laser',\n    },\n    // Move - ToolbarButton\n    {\n      id: 'move_objects',\n      title: 'Move Objects',\n      iconSrc: move,\n      iconName: 'Move Icon',\n    },\n    // Erase - ToolbarSelector\n    {\n      id: 'erase_type',\n      options: [\n        {\n          id: 'object_erase',\n          value: 'object',\n          title: 'Erase Object',\n          iconSrc: trash,\n          iconName: 'Erase Object',\n        },\n        {\n          id: 'partial_erase',\n          value: 'partial',\n          title: 'Partial Erase',\n          iconSrc: eraser,\n          iconName: 'Spot Erase',\n        },\n      ],\n    },\n    // Line Type - ToolbarSelector - Color Palette\n    {\n      id: 'line_type',\n      options: [\n        {\n          id: 'pen_line',\n          value: 'pen',\n          title: 'Pen Line',\n          iconSrc: pen,\n          iconName: 'Pen',\n        },\n        {\n          id: 'pencil_line',\n          value: 'pencil',\n          title: 'Pencil Line',\n          iconSrc: pencil,\n          iconName: 'Pencil',\n        },\n        {\n          id: 'felt_line',\n          value: 'felt',\n          title: 'Felt Line',\n          iconSrc: felt,\n          iconName: 'Felt',\n        },\n        {\n          id: 'crayon_line',\n          value: 'crayon',\n          title: 'Crayon Line',\n          iconSrc: crayon,\n          iconName: 'Crayon',\n        },\n        {\n          id: 'chalk_line',\n          value: 'chalk',\n          title: 'Chalk Line',\n          iconSrc: chalk,\n          iconName: 'Chalk',\n        },\n        {\n          id: 'paintbrush_line',\n          value: 'paintbrush',\n          title: 'Paintbrush Line',\n          iconSrc: paintBrush,\n          iconName: 'Paintbrush',\n        },\n        {\n          id: 'marker_line',\n          value: 'marker',\n          title: 'Marker Line',\n          iconSrc: marker,\n          iconName: 'Marker',\n        },\n        {\n          id: 'dashed_line',\n          value: 'dashed',\n          title: 'Dashed Line',\n          iconSrc: dashedPen,\n          iconName: 'Dashed Pen',\n        },\n      ],\n      colorPaletteIcon: BorderColorRoundedIcon,\n    },\n    // Thickness - SpecialToolbarSelector\n    {\n      id: 'line_width',\n      icon: FiberManualRecordRoundedIcon,\n      styleOptions: [\n        {\n          id: 'thick_2px',\n          value: 2,\n          title: '2px',\n          style: {\n            fontSize: 4,\n          },\n        },\n        {\n          id: 'thick_4px',\n          value: 4,\n          title: '4px',\n          style: {\n            fontSize: 6,\n          },\n        },\n        {\n          id: 'thick_8px',\n          value: 8,\n          title: '8px',\n          style: {\n            fontSize: 14,\n          },\n        },\n        {\n          id: 'thick_12px',\n          value: 12,\n          title: '12px',\n          style: {\n            fontSize: 20,\n          },\n        },\n        {\n          id: 'thick_16px',\n          value: 16,\n          title: '16px',\n          style: {\n            fontSize: 26,\n          },\n        },\n      ],\n    },\n    // Flood Fill - SpecialToolbarSelector\n    {\n      id: 'flood_fill',\n      icon: FormatColorFillRoundedIcon,\n      styleOptions: colorPaletteOptions,\n    },\n    // Background Color - SpecialToolbarSelector\n    {\n      id: 'background_color',\n      icon: PaletteIcon,\n      styleOptions: colorPaletteOptions,\n    },\n    // Text - ToolbarSelector - Color Palette\n    {\n      id: 'add_text',\n      options: [\n        {\n          id: 'arial_font',\n          value: 'Arial',\n          title: 'Arial Font',\n          iconSrc: textIcon,\n          iconName: 'Arial',\n        },\n        {\n          id: 'crayon_font',\n          value: 'Crayon',\n          title: 'Crayon Font',\n          iconSrc: crayon,\n          iconName: 'Crayon',\n        },\n        {\n          id: 'chalkboard_font',\n          value: 'Chalkboard',\n          title: 'Chalk Font',\n          iconSrc: chalk,\n          iconName: 'Chalkboard',\n        },\n      ],\n      colorPaletteIcon: FormatColorTextRoundedIcon,\n    },\n    // Shapes - ToolbarSelector - Color Palette\n    {\n      id: 'add_shape',\n      options: [\n        {\n          id: 'circle_shape',\n          value: 'circle',\n          title: 'Circle Shape',\n          iconSrc: circleShape,\n          iconName: 'Circle',\n        },\n        {\n          id: 'rectangle_shape',\n          value: 'rectangle',\n          title: 'Rectangle Shape',\n          iconSrc: rectangleShape,\n          iconName: 'Rectangle',\n        },\n        {\n          id: 'triangle_shape',\n          value: 'triangle',\n          title: 'Triangle Shape',\n          iconSrc: triangleShape,\n          iconName: 'Triangle',\n        },\n        {\n          id: 'pentagon_shape',\n          value: 'pentagon',\n          title: 'Pentagon Shape',\n          iconSrc: pentagonShape,\n          iconName: 'Pentagon',\n        },\n        {\n          id: 'hexagon_shape',\n          value: 'hexagon',\n          title: 'Hexagon Shape',\n          iconSrc: hexagonShape,\n          iconName: 'Hexagon',\n        },\n        {\n          id: 'arrow_shape',\n          value: 'arrow',\n          title: 'Arrow',\n          iconSrc: right,\n          iconName: 'Arrow',\n        },\n        {\n          id: 'star_shape',\n          value: 'star',\n          title: 'Star Shape',\n          iconSrc: starShape,\n          iconName: 'Star',\n        },\n        {\n          id: 'chat_bubble_shape',\n          value: 'chatBubble',\n          title: 'Chat Bubble',\n          iconSrc: chatBubbleShape,\n          iconName: 'Chat Bubble',\n        },\n      ],\n    },\n    // Stamps - ToolbarSelector\n    {\n      id: 'add_stamp',\n      options: [\n        {\n          id: 'good_stamp',\n          value: 'good',\n          title: 'Good Stamp',\n          iconSrc: goodStamp,\n          iconName: 'Good Stamp',\n        },\n        {\n          id: 'well_done_stamp',\n          value: 'wellDone',\n          title: 'Well Done Stamp',\n          iconSrc: wellDoneStamp,\n          iconName: 'Well Done Stamp',\n        },\n        {\n          id: 'excellent_stamp',\n          value: 'excellent',\n          title: 'Excellent Stamp',\n          iconSrc: excellentStamp,\n          iconName: 'Excellent Stamp',\n        },\n      ],\n      secondOptions: [\n        {\n          id: 'student_stamp_mode',\n          value: 'student',\n          title: 'Student Stamp Mode',\n          iconSrc: studentStampMode,\n          iconName: 'Student Stamp Mode',\n        },\n        {\n          id: 'present_stamp_mode',\n          value: 'present',\n          title: 'Present Stamp Mode',\n          iconSrc: presentStampMode,\n          iconName: 'Present Stamp Mode',\n        },\n      ],\n    },\n  ],\n};\n\nexport { toolsSection, actionsSection, colorPaletteOptions };\n","import React, { CSSProperties } from 'react';\nimport '../../../assets/style/toolbar-button.css';\nimport ISpecialButton from '../../../interfaces/toolbar/toolbar-special-elements/special-button';\n\n/**\n * Render a button to use in the SpecialSelector\n * @param {ISpecialButton} props - Props needed to render the component:\n * - id - id that the button has\n * - title - title for the button\n * - Icon - Icon to use in the button\n * - style - style to set in that Icon\n * - selected - flag to set the button as selected or not\n * - onClick - Function to execute when the button is clicked\n */\nfunction SpecialButton(props: ISpecialButton) {\n  const { id, title, Icon, style, selected, onClick } = props;\n\n  /**\n   * Is executed when the button is clicked and sends an events to its parent\n   */\n  function handleClick() {\n    onClick(id);\n  }\n\n  const toolbarButtonStyle: CSSProperties = {\n    border: 'none',\n    width: '36px',\n    display: 'flex',\n    justifyContent: 'center',\n    alignItems: 'center',\n    backgroundColor: selected ? '#d9d9d9' : '#fff',\n    borderRadius: '4px',\n    outline: 0,\n  };\n\n  return (\n    <button\n      title={title}\n      style={toolbarButtonStyle}\n      className={[\n        'toolbar-button',\n        selected ? 'selected-button' : '',\n        !selected ? 'unselected-button' : '',\n      ].join(' ')}\n      onClick={handleClick}\n    >\n      <Icon style={style} />\n    </button>\n  );\n}\n\nexport default SpecialButton;\n","import React from 'react';\nimport { colorPaletteOptions } from '../toolbar-sections';\nimport SpecialButton from '../special-button/SpecialButton';\nimport { OverridableComponent } from '@material-ui/core/OverridableComponent';\nimport { SvgIconTypeMap } from '@material-ui/core';\nimport '../../../assets/style/color-palette.css';\nimport { CSSProperties } from '@material-ui/core/styles/withStyles';\n\ninterface IColorPalette {\n  Icon: OverridableComponent<SvgIconTypeMap<{}, 'svg'>>;\n  handleColorChange: (color: string) => void;\n  selectedColor: string;\n}\n\n/**\n * Render a color palette\n * @param {IColorPalette} props - Props needed to render the component:\n * - Icon - Icon to use in the color palette\n * - handleColorChange - Function to execute when the color changes\n * - selectedColor - Color to have selected in color palette\n */\nfunction ColorPalette(props: IColorPalette) {\n  const { Icon, handleColorChange, selectedColor } = props;\n\n  /**\n   * Executes the given funtion when the color changes\n   * @param {string} color - new color to set\n   */\n  function changeColor(color: string) {\n    handleColorChange(color);\n  }\n\n  const colorPaletteStyle: CSSProperties = {\n    display: \"grid\",\n    gridTemplateColumns: \"repeat(6, 1fr)\",\n    rowGap: \"2px\",\n    borderTop: \"solid 1px #c0c0c0\",\n    padding: \"4px 4px 4px 4px\",\n  }\n\n  return (\n    <div className=\"color-palette\" style={colorPaletteStyle}>\n      {colorPaletteOptions\n        .filter((_, index) => index)\n        .map((color) => {\n          return color.id ? (\n            <SpecialButton\n              key={color.id}\n              id={color.id}\n              title={color.title}\n              Icon={Icon}\n              style={color.style}\n              selected={selectedColor === color.style.color}\n              onClick={() => changeColor(color.style.color || '')}\n            />\n          ) : null;\n        })}\n    </div>\n  );\n}\n\nexport default ColorPalette;\n","import React, { useState, useRef, useEffect } from 'react';\nimport '../../../assets/style/toolbar-selector.css';\nimport IToolbarSelector from '../../../interfaces/toolbar/toolbar-selector/toolbar-selector';\nimport ArrowRightIcon from '@material-ui/icons/ArrowRight';\nimport ColorPalette from '../color-palette/ColorPalette';\nimport ToolbarButton from '../toolbar-button/ToolbarButton';\nimport IToolbarSelectorOption from '../../../interfaces/toolbar/toolbar-selector/toolbar-selector-option';\nimport { CSSProperties } from '@material-ui/core/styles/withStyles';\n\n/**\n * Render a ToolbarSelector\n * @param {IToolbarSelector} props - Props that the component need:\n * - id - id that the selector has in the Toolbar Section\n * - options - options to be displayed in the selector\n * - selected - flag that indicates if this selector is selected\n * - selectedValue - selected value setted by parent\n * - colorPalette (optional) - Contains the icon and onChangeColor method\n *   for the color palette (if required)\n * - onAction - event that is emitted to parent when action is triggered\n * - onClick - event that is emitted to parent when selector is clicked\n * - onChange - event that is emitted to parent when selector's value is changed\n */\nfunction ToolbarSelector(props: IToolbarSelector) {\n  const {\n    id,\n    options,\n    active,\n    selectedValue,\n    colorPalette,\n    onAction,\n    onClick,\n    onChange,\n    enabled\n  } = props;\n\n  const [selectedOption, setSelectedOption] = useState(\n    findOptionDefinedbyParent()\n  );\n  const [showOptions, setShowOptions] = useState(false);\n  const buttonRef = useRef<HTMLButtonElement>(null);\n\n  /**\n   * When selectedValue changes the value is found in all the available options\n   * to be setted like selected option\n   */\n  useEffect(() => {\n    const newValue = options.find((option) => option.value === selectedValue);\n\n    if (newValue) {\n      setSelectedOption(newValue);\n    }\n  }, [selectedValue, options]);\n\n  /**\n   * Finds the option that has the selectedValue defined by parent\n   */\n  function findOptionDefinedbyParent(): IToolbarSelectorOption {\n    return (\n      options.find((option) => option.value === selectedValue) || options[0]\n    );\n  }\n\n  /**\n   * Is executed when the selector is clicked and sends an event to its parent\n   */\n  function handleClick() {\n    onClick(id);\n    onAction(id, selectedOption.value);\n\n    if (showOptions) {\n      setShowOptions(false);\n    }\n  }\n\n  /**\n   * Is executed when the arrow is clicked\n   */\n  function handleArrowClick() {\n    onClick(id);\n\n    if (!showOptions) {\n      document.addEventListener('click', handleOutsideClick, false);\n    } else {\n      document.removeEventListener('click', handleOutsideClick, false);\n    }\n\n    setShowOptions(!showOptions);\n  }\n\n  /**\n   * Is executed when the selector changes its option\n   * @param {IToolbarSelectorOption} value - new value to set in selector\n   */\n  function handleSelect(option: IToolbarSelectorOption) {\n    setShowOptions(false);\n    onChange(id, option.value);\n    onAction(id, option.value);\n  }\n\n  /**\n   * Is executed when you click on the window to check if you are clicking on toolbar elements or not\n   * @param {MouseEvent} e - Mouse click event\n   */\n  function handleOutsideClick(e: Event) {\n    if (!buttonRef.current?.contains(e.target as Node) && !showOptions) {\n      setShowOptions(false);\n    }\n  }\n\n  /**\n   * Is executed when the color is changed (if color palette exists)\n   * @param {string} color - new color to set\n   */\n  function handleChangeColor(color: string) {\n    if (colorPalette) {\n      colorPalette.onChangeColor(id, color);\n    }\n\n    setShowOptions(false);\n  }\n\n  const selectorContainerStyle: CSSProperties = {\n    display: 'flex',\n    flexDirection: 'row',\n  };\n\n  const toolbarSelectorStyle: CSSProperties = {\n    display: 'flex',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    width: '100%',\n    height: '32px',\n    border: 'none',\n    paddingRight: 0,\n    backgroundColor: active ? '#d9d9d9' : '#fff',\n    borderRadius: '4px',\n    outline: 0,\n  };\n\n  const iconStyle: CSSProperties = {\n    width: '24px',\n    height: '24px',\n  };\n\n  const arrowStyle: CSSProperties = {\n    width: '20px',\n    height: '20px',\n  };\n\n  const optionsContainerStyle: CSSProperties = {\n    position: 'absolute',\n    margin: '0 0 8px 56px',\n    padding: '2px',\n    border: 'none',\n    backgroundColor: '#fff',\n    borderRadius: '4px',\n    zIndex: 2,\n  };\n\n  const optionsStyle: CSSProperties = {\n    display: 'grid',\n    rowGap: '2px',\n    padding: '2px 2px 4px 0',\n    gridAutoColumns: colorPalette\n      ? 'repeat(auto-fit, minmax(0, 36px))'\n      : 'repeat(6, auto)',\n  };\n\n  return (\n    <div className=\"selector-container\" style={selectorContainerStyle}>\n      <button\n        title={selectedOption.title}\n        ref={buttonRef}\n        style={toolbarSelectorStyle}\n        className={[\n          'toolbar-selector',\n          active ? 'selected' : '',\n          !active ? 'unselected' : '',\n        ].join(' ')}\n        onClick={handleClick}\n        disabled={enabled === false}\n      >\n        <img\n          className=\"icon\"\n          style={iconStyle}\n          src={selectedOption.iconSrc}\n          alt={selectedOption.iconName}\n        />\n        <ArrowRightIcon\n          className=\"arrow\"\n          onClick={handleArrowClick}\n          style={arrowStyle}\n        />\n      </button>\n      {showOptions && active ? (\n        <div className=\"options-container\" style={optionsContainerStyle}>\n          <div\n            style={optionsStyle}\n            className={[\n              'options',\n              colorPalette ? 'with-palette' : 'no-palette',\n            ].join(' ')}\n          >\n            {options\n              .filter((option) => {\n                return option.value !== selectedOption.value;\n              })\n              .map((option) => {\n                return (\n                  <ToolbarButton\n                    key={option.iconName}\n                    id={option.id}\n                    title={option.title}\n                    iconSrc={option.iconSrc}\n                    iconName={option.iconName}\n                    active={false}\n                    onClick={() => handleSelect(option)}\n                    enabled={option.enabled}\n                  />\n                );\n              })}\n          </div>\n          {colorPalette ? (\n            <ColorPalette\n              Icon={colorPalette.icon}\n              handleColorChange={handleChangeColor}\n              selectedColor={colorPalette.selectedColor}\n            />\n          ) : null}\n        </div>\n      ) : null}\n    </div>\n  );\n}\n\nexport default ToolbarSelector;\n","import React, { useState, useRef, useEffect, CSSProperties } from 'react';\nimport ArrowRightIcon from '@material-ui/icons/ArrowRight';\nimport SpecialButton from '../special-button/SpecialButton';\nimport '../../../assets/style/toolbar-selector.css';\nimport ISpecialSelector from '../../../interfaces/toolbar/toolbar-special-elements/toolbar-special-selector';\nimport IStyleOption from '../../../interfaces/toolbar/toolbar-special-elements/style-option';\n\n/**\n * Render an SpecialSelector that uses a stylizable Icon (Font like)\n * @param {ISpecialSelector} props - Props needed to render the component:\n * - id - id that the element has\n * - Icon - Icon to set in the options\n * - active - flag to set if the element is selected or not\n * - selectedValue - Selected value setted by parent\n * - styleOptions - Icon styles in the different options\n * - onClick - Function to execute when the element is clicked\n * - onChange - Function to execute when the value changes\n */\nfunction SpecialSelector(props: ISpecialSelector) {\n  const {\n    id,\n    Icon,\n    active,\n    selectedValue,\n    styleOptions,\n    onClick,\n    onChange,\n    enabled\n  } = props;\n\n  const [selectedOption, setSelectedOption] = useState(\n    findOptionDefinedByParent()\n  );\n  const [showOptions, setShowOptions] = useState(false);\n  const buttonRef = useRef<HTMLButtonElement>(null);\n\n  /**\n   * When selectedValue changes the value is found in all the available options\n   * to be setted like selected option\n   */\n  useEffect(() => {\n    const newValue = styleOptions.find(\n      (option) => option.value === selectedValue\n    );\n\n    if (newValue) {\n      setSelectedOption(newValue);\n    }\n  }, [selectedValue, styleOptions]);\n\n  /**\n   * Finds the option that has the selectedValue defined by parent\n   */\n  function findOptionDefinedByParent(): IStyleOption {\n    return (\n      styleOptions.find((option) => option.value === selectedValue) ||\n      styleOptions[0]\n    );\n  }\n\n  /**\n   * Is executed when the selector is clicked and sends an event to its parent\n   */\n  function handleClick() {\n    onClick(id);\n\n    if (showOptions) {\n      setShowOptions(false);\n    }\n  }\n\n  /**\n   * Is executed when the selector changes its value\n   * @param {string} value - new value to set in selector\n   */\n  function handleSelect(option: IStyleOption) {\n    onChange(id, option.value.toString());\n    setShowOptions(false);\n  }\n\n  /**\n   * Is executed when you click the arrow\n   */\n  function handleArrowClick() {\n    onClick(id);\n\n    if (!showOptions) {\n      document.addEventListener('click', handleOutsideClick, false);\n    } else {\n      document.removeEventListener('click', handleOutsideClick, false);\n    }\n\n    setShowOptions(!showOptions);\n  }\n\n  /**\n   * Is executed when you click on the window to check if you are clicking on toolbar elements or not\n   * @param {MouseEvent} e - Mouse click event\n   */\n  function handleOutsideClick(e: MouseEvent) {\n    if (!buttonRef.current?.contains(e.target as Node)) {\n      if (!showOptions) {\n        setShowOptions(false);\n      }\n    }\n  }\n\n  const selectorContainerStyle: CSSProperties = {\n    display: 'flex',\n    flexDirection: 'row',\n  };\n\n  const toolbarSelectorStyle: CSSProperties = {\n    display: 'flex',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    width: '100%',\n    height: '32px',\n    border: 'none',\n    paddingRight: 0,\n    backgroundColor: active ? '#d9d9d9' : '#fff',\n    borderRadius: '4px',\n    outline: 0,\n  };\n\n  const arrowStyle: CSSProperties = {\n    width: '20px',\n    height: '20px',\n  };\n\n  const optionsContainerStyle: CSSProperties = {\n    position: 'absolute',\n    margin: '0 0 8px 56px',\n    padding: '2px',\n    border: 'none',\n    backgroundColor: '#fff',\n    borderRadius: '4px',\n    zIndex: 2,\n  };\n\n  const optionsStyle: CSSProperties = {\n    display: 'grid',\n    rowGap: '2px',\n    padding: '2px 2px 4px 0',\n    gridAutoColumns: 'repeat(6, auto)',\n  };\n\n  const iconContainerStyle: CSSProperties = {\n    width: '100%',\n    display: 'flex',\n    alignContent: 'center',\n    justifyContent: 'center',\n  };\n\n  return (\n    <div className=\"selector-container\" style={selectorContainerStyle}>\n      <button\n        title={selectedOption.title}\n        ref={buttonRef}\n        style={toolbarSelectorStyle}\n        className={[\n          'toolbar-selector',\n          active ? 'selected' : '',\n          !active ? 'unselected' : '',\n        ].join(' ')}\n        onClick={handleClick}\n        disabled={enabled === false}\n      >\n        <div style={iconContainerStyle}>\n          <Icon style={selectedOption.style} />\n        </div>\n        <ArrowRightIcon onClick={handleArrowClick} style={arrowStyle} />\n      </button>\n      {showOptions && active ? (\n        <div className=\"options-container\" style={optionsContainerStyle}>\n          <div\n            className=\"options special-options no-palette\"\n            style={optionsStyle}\n          >\n            {styleOptions\n              .filter((option) => {\n                return option.value !== selectedOption.value;\n              })\n              .map((option) => {\n                return (\n                  <SpecialButton\n                    key={option.id}\n                    id={option.id}\n                    title={option.title}\n                    Icon={Icon}\n                    style={option.style}\n                    selected={false}\n                    onClick={() => handleSelect(option)}\n                  />\n                );\n              })}\n          </div>\n        </div>\n      ) : null}\n    </div>\n  );\n}\n\nexport default SpecialSelector;\n","export const ELEMENTS = {\n  ADD_IMAGE_ACTION: 'add_image',\n  UNDO_ACTION: 'undo',\n  REDO_ACTION: 'redo',\n  CLEAR_WHITEBOARD_ACTION: 'clear_whiteboard',\n  WHITEBOARD_SCREENSHOT_ACTION: 'whiteboard_screenshot',\n  SHARE_WHITEBOARD_ACTION: 'share_whiteboard',\n  POINTERS_TOOL: 'pointers',\n  MOVE_OBJECTS_TOOL: 'move_objects',\n  ERASE_TYPE_TOOL: 'erase_type',\n  LINE_TYPE_TOOL: 'line_type',\n  LINE_WIDTH_TOOL: 'line_width',\n  FLOOD_FILL_TOOL: 'flood_fill',\n  BACKGROUND_COLOR_TOOL: 'background_color',\n  ADD_TEXT_TOOL: 'add_text',\n  ADD_SHAPE_TOOL: 'add_shape',\n  ADD_STAMP_TOOL: 'add_stamp',\n  LASER_TOOL: 'laser_pointer',\n  SET_USER_INFO_TO_DISPLAY: 'set_user_info_to_display'\n};\n","import IBasicToolbarSelector from '../../interfaces/toolbar/toolbar-selector/basic-toolbar-selector';\nimport IBasicToolbarSection from '../../interfaces/toolbar/toolbar-section/basic-toolbar-section';\nimport IBasicToolbarButton from '../../interfaces/toolbar/toolbar-button/basic-toolbar-button';\nimport IBasicSpecialSelector from '../../interfaces/toolbar/toolbar-special-elements/basic-special-selector';\nimport { IPermissions } from '../../interfaces/permissions/permissions';\nimport IToolbarSelectorOption from '../../interfaces/toolbar/toolbar-selector/toolbar-selector-option';\n\n\n/**\n * Maps permissions to action tools.\n * @param actions Action tool options for canvas.\n * @param allToolbarIsEnabled Indicates if all tools are enabled for user.\n * @param serializerToolbarState Provided permissions for individual tools.\n */\nexport const mappedActionElements = (\n  actions: IBasicToolbarSection,\n  allToolbarIsEnabled: boolean,\n  serializerToolbarState: IPermissions\n) =>\n  actions.elements.map(\n    (\n      elmnt: IBasicToolbarButton | IBasicToolbarSelector | IBasicSpecialSelector\n    ) => {\n      switch (elmnt.id) {\n        case 'whiteboard_screenshot': {\n          const enabled =\n            allToolbarIsEnabled || serializerToolbarState.downloadCanvas;\n          return { ...elmnt, enabled };\n        }\n        case 'clear_whiteboard': {\n          const enabled =\n            allToolbarIsEnabled || serializerToolbarState.clearWhiteboard;\n          return { ...elmnt, enabled };\n        }\n        case 'add_image': {\n          const enabled =\n            allToolbarIsEnabled || serializerToolbarState.uploadImage;\n          return { ...elmnt, enabled };\n        }\n        case 'undo':\n        case 'redo': {\n          const enabled =\n            allToolbarIsEnabled || serializerToolbarState.undoRedo;\n          return { ...elmnt, enabled };\n        }\n        case 'set_user_info_to_display': {\n          const enabled = allToolbarIsEnabled || serializerToolbarState.shape;\n          return { ...elmnt, enabled };\n        }\n        default: {\n          return { ...elmnt, enabled: true };\n        }\n      }\n    }\n  );\n\n/**\n * Maps permissions to tools.\n * @param tools Tool options for canvas.\n * @param allToolbarIsEnabled Indicates if all tools are enabled for user.\n * @param serializerToolbarState Provided permissions for individual tools.\n */\nexport const mappedToolElements = (\n  tools: IBasicToolbarSection,\n  allToolbarIsEnabled: boolean,\n  serializerToolbarState: IPermissions\n) =>\n  tools.elements.map(\n    (\n      elmnt: IBasicToolbarButton | IBasicToolbarSelector | IBasicSpecialSelector\n    ) => {\n      switch (elmnt.id) {\n        case 'pointers': {\n          const available = true;\n          const enabled =\n            allToolbarIsEnabled || serializerToolbarState.cursorPointer;\n          return { ...elmnt, enabled, available };\n        }\n        case 'laser_pointer': {\n          const available = true;\n          const enabled = allToolbarIsEnabled || serializerToolbarState.pointer;\n          return { ...elmnt, enabled, available };\n        }\n        case 'move_objects': {\n          const available = true;\n          const enabled = allToolbarIsEnabled || serializerToolbarState.move;\n          return { ...elmnt, enabled, available };\n        }\n        case 'erase_type': {\n          const available = true;\n          const enabled =\n            allToolbarIsEnabled ||\n            serializerToolbarState.erase ||\n            serializerToolbarState.partialErase;\n\n          elmnt = {\n            ...elmnt,\n            options: (elmnt as IBasicToolbarSelector).options.map(\n              (option: IToolbarSelectorOption) => {\n                if (option.id === 'partial_erase') {\n                  return {\n                    ...option,\n                    enabled:\n                      allToolbarIsEnabled ||\n                      serializerToolbarState.partialErase,\n                    available,\n                  };\n                } else {\n                  return {\n                    ...option,\n                    enabled:\n                      allToolbarIsEnabled || serializerToolbarState.erase,\n                    available,\n                  };\n                }\n              }\n            ),\n          };\n\n          return { ...elmnt, enabled, available };\n        }\n        case 'line_type': {\n          const available = true;\n          const enabled = allToolbarIsEnabled || serializerToolbarState.pen;\n          return { ...elmnt, enabled, available };\n        }\n        case 'flood_fill': {\n          const available = true;\n          const enabled =\n            allToolbarIsEnabled || serializerToolbarState.floodFill;\n          return { ...elmnt, enabled, available };\n        }\n        case 'background_color': {\n          const available = true;\n          const enabled =\n            allToolbarIsEnabled || serializerToolbarState.backgroundColor;\n          return { ...elmnt, enabled, available };\n        }\n        case 'add_text': {\n          const available = true;\n          const enabled = allToolbarIsEnabled || serializerToolbarState.text;\n          return { ...elmnt, enabled, available };\n        }\n        case 'add_shape': {\n          const available = true;\n          const enabled = allToolbarIsEnabled || serializerToolbarState.shape;\n          return { ...elmnt, enabled, available };\n        }\n        case 'add_stamp': {\n          const available = allToolbarIsEnabled;\n          const enabled = allToolbarIsEnabled;\n          return { ...elmnt, enabled, available };\n        }\n        default: {\n          return { ...elmnt, enabled: true, available: true };\n        }\n      }\n    }\n  );\n","import React, { useState, useRef, useEffect } from 'react';\nimport '../../../assets/style/toolbar-selector.css';\nimport ArrowRightIcon from '@material-ui/icons/ArrowRight';\nimport ColorPalette from '../color-palette/ColorPalette';\nimport ToolbarButton from '../toolbar-button/ToolbarButton';\nimport IToolbarSelectorOption from '../../../interfaces/toolbar/toolbar-selector/toolbar-selector-option';\nimport { CSSProperties } from '@material-ui/core/styles/withStyles';\nimport { ISecondOptionSelector } from '../../../interfaces/toolbar/toolbar-second-option-selector/second-option-selector';\n\n/**\n * Render a ToolbarSecondOptionSelector\n * @param {ISecondOptionSelector} props - Props that the component need:\n * - id - id that the selector has in the Toolbar Section\n * - options - options to be displayed in the selector\n * - secondOptions - options to be displayed in the top of the selector\n * - selected - flag that indicates if this selector is selected\n * - selectedValue - selected value setted by parent\n * - selectedSecondValue - selected second value setted by parent\n * - colorPalette (optional) - Contains the icon and onChangeColor method\n *   for the color palette (if required)\n * - onAction - event that is emitted to parent when action is triggered\n * - onClick - event that is emitted to parent when selector is clicked\n * - onChange - event that is emitted to parent when selector's value is changed\n * - onSecondChange - event that is emitted to parent when selector's\n *   second value is changed\n */\nfunction SecondOptionSelector(props: ISecondOptionSelector) {\n  const {\n    id,\n    options,\n    secondOptions,\n    active,\n    selectedValue,\n    selectedSecondValue,\n    colorPalette,\n    onAction,\n    onClick,\n    onChange,\n    onSecondChange,\n    enabled,\n  } = props;\n\n  const [selectedOption, setSelectedOption] = useState(\n    findOptionDefinedbyParent()\n  );\n\n  const [selectedSecondOption, setSelectedSecondOption] = useState(\n    findSecondOptionDefinedbyParent()\n  );\n\n  const [showOptions, setShowOptions] = useState(false);\n  const buttonRef = useRef<HTMLButtonElement>(null);\n\n  /**\n   * When selectedValue changes the value is found in all the available options\n   * to be setted like selected option\n   */\n  useEffect(() => {\n    const newValue = options.find((option) => option.value === selectedValue);\n\n    if (newValue) {\n      setSelectedOption(newValue);\n    }\n  }, [selectedValue, options]);\n\n  /**\n   * When selectedSecondValue changes the value is found\n   * in all the available options to be setted like selected option\n   */\n  useEffect(() => {\n    const newValue = secondOptions.find(\n      (option) => option.value === selectedSecondValue\n    );\n\n    if (newValue) {\n      setSelectedSecondOption(newValue);\n    }\n  }, [selectedSecondValue, secondOptions]);\n\n  /**\n   * Finds the option that has the selectedValue defined by parent\n   */\n  function findOptionDefinedbyParent(): IToolbarSelectorOption {\n    return (\n      options.find((option) => option.value === selectedValue) || options[0]\n    );\n  }\n\n  /**\n   * Finds the option that has the selectedSecondValue defined by parent\n   */\n  function findSecondOptionDefinedbyParent(): IToolbarSelectorOption {\n    return (\n      secondOptions.find((option) => option.value === selectedSecondValue) ||\n      options[0]\n    );\n  }\n\n  /**\n   * Is executed when the selector is clicked and sends an event to its parent\n   */\n  function handleClick() {\n    onClick(id);\n    onAction(id, selectedOption.value);\n\n    if (showOptions) {\n      setShowOptions(false);\n    }\n  }\n\n  /**\n   * Is executed when the arrow is clicked\n   */\n  function handleArrowClick() {\n    onClick(id);\n\n    if (!showOptions) {\n      document.addEventListener('click', handleOutsideClick, false);\n    } else {\n      document.removeEventListener('click', handleOutsideClick, false);\n    }\n\n    setShowOptions(!showOptions);\n  }\n\n  /**\n   * Is executed when the selector changes its option\n   * @param {IToolbarSelectorOption} value - new value to set in selector\n   */\n  function handleSelect(option: IToolbarSelectorOption) {\n    setShowOptions(false);\n    onChange(id, option.value);\n    onAction(id, option.value);\n  }\n\n  /**\n   * Is executed when the selector changes its second option\n   * @param {IToolbarSelectorOption} value - new second value to set in selector\n   */\n  function handleSecondSelect(option: IToolbarSelectorOption) {\n    setShowOptions(false);\n    onSecondChange(id, option.value);\n  }\n\n  /**\n   * Is executed when you click on the window to check\n   * if you are clicking on toolbar elements or not\n   * @param {MouseEvent} e - Mouse click event\n   */\n  function handleOutsideClick(e: Event) {\n    if (!buttonRef.current?.contains(e.target as Node) && !showOptions) {\n      setShowOptions(false);\n    }\n  }\n\n  /**\n   * Is executed when the color is changed (if color palette exists)\n   * @param {string} color - new color to set\n   */\n  function handleChangeColor(color: string) {\n    if (colorPalette) {\n      colorPalette.onChangeColor(id, color);\n    }\n\n    setShowOptions(false);\n  }\n\n  const selectorContainerStyle: CSSProperties = {\n    display: 'flex',\n    flexDirection: 'row',\n    top: '100px',\n  };\n\n  const toolbarSelectorStyle: CSSProperties = {\n    display: 'flex',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    width: '100%',\n    height: '32px',\n    border: 'none',\n    paddingRight: 0,\n    backgroundColor: active ? '#d9d9d9' : '#fff',\n    borderRadius: '4px',\n    outline: 0,\n  };\n\n  const iconStyle: CSSProperties = {\n    width: '24px',\n    height: '24px',\n  };\n\n  const arrowStyle: CSSProperties = {\n    width: '20px',\n    height: '20px',\n  };\n\n  const optionsContainerStyle: CSSProperties = {\n    position: 'absolute',\n    margin: '0 0 8px 56px',\n    padding: '2px',\n    border: 'none',\n    backgroundColor: '#fff',\n    borderRadius: '4px',\n    zIndex: 2,\n  };\n\n  const optionsStyle: CSSProperties = {\n    display: 'grid',\n    rowGap: '2px',\n    padding: '2px 2px 4px 0',\n    gridAutoColumns: colorPalette\n      ? 'repeat(auto-fit, minmax(0, 36px))'\n      : 'repeat(6, auto)',\n  };\n\n  const secondOptionsStyle: CSSProperties = {\n    borderTop: 'solid 1px #c0c0c0',\n    display: 'grid',\n    rowGap: '2px',\n    padding: '2px 2px 4px 0',\n    gridAutoColumns: colorPalette\n      ? 'repeat(auto-fit, minmax(0, 36px))'\n      : 'repeat(6, auto)',\n  };\n\n  return (\n    <div className=\"selector-container\" style={selectorContainerStyle}>\n      <button\n        title={selectedOption.title}\n        ref={buttonRef}\n        style={toolbarSelectorStyle}\n        className={[\n          'toolbar-selector',\n          active ? 'selected' : '',\n          !active ? 'unselected' : '',\n        ].join(' ')}\n        disabled={enabled === false}\n      >\n        <img\n          className=\"icon\"\n          onClick={handleClick}\n          style={iconStyle}\n          src={selectedOption.iconSrc}\n          alt={selectedOption.iconName}\n        />\n        <ArrowRightIcon\n          className=\"arrow\"\n          onClick={handleArrowClick}\n          style={arrowStyle}\n        />\n      </button>\n      {showOptions && active ? (\n        <div className=\"options-container\" style={optionsContainerStyle}>\n          <div\n            style={optionsStyle}\n            className={[\n              'options',\n              colorPalette ? 'with-palette' : 'no-palette',\n            ].join(' ')}\n          >\n            {options\n              .filter((option) => {\n                return option.value !== selectedOption.value;\n              })\n              .map((option) => {\n                return (\n                  <ToolbarButton\n                    key={option.iconName}\n                    id={option.id}\n                    title={option.title}\n                    iconSrc={option.iconSrc}\n                    iconName={option.iconName}\n                    active={false}\n                    onClick={() => handleSelect(option)}\n                    enabled={option.enabled}\n                  />\n                );\n              })}\n          </div>\n          <div\n            style={secondOptionsStyle}\n            className={[\n              'options',\n              colorPalette ? 'with-palette' : 'no-palette',\n            ].join(' ')}\n          >\n            {secondOptions.map((option) => {\n              return (\n                <ToolbarButton\n                  key={option.iconName}\n                  id={option.id}\n                  title={option.title}\n                  iconSrc={option.iconSrc}\n                  iconName={option.iconName}\n                  active={option.id === selectedSecondOption.id}\n                  onClick={() => handleSecondSelect(option)}\n                  enabled={option.enabled}\n                />\n              );\n            })}\n          </div>\n          {colorPalette ? (\n            <ColorPalette\n              Icon={colorPalette.icon}\n              handleColorChange={handleChangeColor}\n              selectedColor={colorPalette.selectedColor}\n            />\n          ) : null}\n        </div>\n      ) : null}\n    </div>\n  );\n}\n\nexport default SecondOptionSelector;\n","import React, { useState, useContext, useEffect, useMemo } from 'react';\nimport { connect } from 'react-redux';\nimport ToolbarSection from './toolbar-section/ToolbarSection';\nimport '../../assets/style/toolbar.css';\nimport ToolbarButton from './toolbar-button/ToolbarButton';\nimport ToolbarSelector from './toolbar-selector/ToolbarSelector';\nimport IToolbarSelectorOption from '../../interfaces/toolbar/toolbar-selector/toolbar-selector-option';\nimport { toolsSection, actionsSection } from './toolbar-sections';\nimport SpecialSelector from './special-selector/SpecialSelector';\nimport { OverridableComponent } from '@material-ui/core/OverridableComponent';\nimport { SvgIconTypeMap } from '@material-ui/core';\nimport IStyleOptions from '../../interfaces/toolbar/toolbar-special-elements/style-option';\nimport IBasicToolbarSelector from '../../interfaces/toolbar/toolbar-selector/basic-toolbar-selector';\nimport IBasicToolbarButton from '../../interfaces/toolbar/toolbar-button/basic-toolbar-button';\nimport IColorPalette from '../../interfaces/toolbar/toolbar-selector/color-palette';\nimport IBasicSpecialSelector from '../../interfaces/toolbar/toolbar-special-elements/basic-special-selector';\nimport { WhiteboardContext } from '../../domain/whiteboard/WhiteboardContext';\nimport { ELEMENTS } from '../../config/toolbar-element-names';\nimport { CSSProperties } from '@material-ui/core/styles/withStyles';\nimport IBasicToolbarSection from '../../interfaces/toolbar/toolbar-section/basic-toolbar-section';\nimport { mappedActionElements, mappedToolElements } from './permissions-mapper';\nimport { IBrushType } from '../../interfaces/brushes/brush-type';\nimport { IPointerType } from '../../interfaces/pointers/pointer-type';\nimport { IPermissions } from '../../interfaces/permissions/permissions';\nimport { IBasicSecondOptionSelector } from '../../interfaces/toolbar/toolbar-second-option-selector/basic-second-option-selector';\nimport SecondOptionSelector from './second-option-selector/SecondOptionSelector';\nimport { IStampMode } from '../../interfaces/stamps/stamp-mode';\n\n// Toolbar Element Available Types\ntype ToolbarElementTypes =\n  | IBasicToolbarButton\n  | IBasicToolbarSelector\n  | IBasicSpecialSelector\n  | IBasicSecondOptionSelector;\n\n/**\n * Render the toolbar that will be used in the whiteboard\n */\nfunction Toolbar(props: {\n  toolbarIsEnabled?: (state: {\n    permissionsState: { [key: string]: boolean };\n  }) => boolean;\n  permissions: IPermissions;\n}) {\n  const [tools, setTools] = useState(toolsSection);\n  const [actions] = useState(actionsSection);\n\n  const {\n    fillColor,\n    textColor,\n    updateShape,\n    fontFamily,\n    fontColor,\n    updateFontFamily,\n    setPointerEvents,\n    textIsActive,\n    updateTextIsActive,\n    updateShapeIsActive,\n    updateBrushIsActive,\n    shape,\n    shapeColor,\n    eraseType,\n    updateEraseType,\n    discardActiveObject,\n    lineWidth,\n    updateLineWidth,\n    floodFill,\n    updateFloodFill,\n    updateFloodFillIsActive,\n    updateEventedObjects,\n    backgroundColor,\n    stampMode,\n    updateStampMode,\n    updateStampIsActive,\n    // Just for control selectors' value may be changed in the future\n    pointer,\n    updatePointer,\n    penColor,\n    changeStrokeColor,\n    changeBrushType,\n    stamp,\n    updateStamp,\n    updateShapesAreSelectable,\n    undo,\n    redo,\n    updateShapesAreEvented,\n    updateLaserIsActive,\n    pointerIsEnabled,\n    allToolbarIsEnabled,\n    updateLineWidthIsActive,\n    brushType,\n    updateImagePopupIsOpen,\n    openUploadFileModal,\n    openSetUserInfoToDisplayModal,\n    openClearWhiteboardModal,\n    updateEraserIsActive,\n    fillBackgroundColor,\n    updateSelectedTool,\n    setActiveTool,\n  } = useContext(WhiteboardContext);\n\n  const toolbarIsEnabled = props.toolbarIsEnabled;\n  const cursorPointerToolIsActive =\n    allToolbarIsEnabled || props.permissions.cursorPointer;\n  const pointerToolIsActive = allToolbarIsEnabled || props.permissions.pointer;\n  const moveToolIsActive = allToolbarIsEnabled || props.permissions.move;\n  const eraseToolIsActive =\n    allToolbarIsEnabled ||\n    props.permissions.erase ||\n    props.permissions.partialErase;\n  const penToolIsActive = allToolbarIsEnabled || props.permissions.pen;\n  const floodFillToolIsActive =\n    allToolbarIsEnabled || props.permissions.floodFill;\n  const textToolIsActive = allToolbarIsEnabled || props.permissions.text;\n  const shapeToolIsActive = allToolbarIsEnabled || props.permissions.shape;\n  const backgroundColorToolIsActive =\n    allToolbarIsEnabled || props.permissions.backgroundColor;\n\n  /**\n   * Is executed when a ToolbarButton is clicked in Tools section\n   * and set the new selected button for that section\n   * @param {number} index - index that the clicked button has in the array\n   */\n  function handleToolsElementClick(tool: string) {\n    if (tool === ELEMENTS.POINTERS_TOOL && !cursorPointerToolIsActive) {\n      return;\n    }\n\n    if (tool === ELEMENTS.LASER_TOOL && !pointerToolIsActive) {\n      return;\n    }\n\n    if (tool === ELEMENTS.MOVE_OBJECTS_TOOL && !moveToolIsActive) {\n      return;\n    }\n\n    if (tool === ELEMENTS.ERASE_TYPE_TOOL && !eraseToolIsActive) {\n      return;\n    }\n\n    if (tool === ELEMENTS.LINE_TYPE_TOOL && !penToolIsActive) {\n      return;\n    }\n\n    if (tool === ELEMENTS.FLOOD_FILL_TOOL && !floodFillToolIsActive) {\n      return;\n    }\n\n    if (tool === ELEMENTS.ADD_TEXT_TOOL && !textToolIsActive) {\n      return;\n    }\n\n    if (tool === ELEMENTS.ADD_SHAPE_TOOL && !shapeToolIsActive) {\n      return;\n    }\n\n    if (\n      tool === ELEMENTS.BACKGROUND_COLOR_TOOL &&\n      !backgroundColorToolIsActive\n    ) {\n      return;\n    }\n\n    /*\n      If you click on another button different than\n      the mentioned below the selected object will be deselected;\n      the cases mentioned below will be handled in WhiteboardContext.\n      The textIsActive validation was added here to fix\n      a text synchronization issue\n    */\n    if (\n      (tool !== ELEMENTS.ERASE_TYPE_TOOL &&\n        tool !== ELEMENTS.ADD_TEXT_TOOL &&\n        tool !== ELEMENTS.LINE_TYPE_TOOL &&\n        tool !== ELEMENTS.LINE_WIDTH_TOOL) ||\n      (textIsActive && tool !== ELEMENTS.ADD_TEXT_TOOL)\n    ) {\n      discardActiveObject();\n    }\n\n    /*\n      It is setted to true when you select Add Text Tool,\n      otherwise will be setted in false\n    */\n    updateTextIsActive(tool === ELEMENTS.ADD_TEXT_TOOL);\n\n    /*\n      It is setted to true when you select Add Shape Tool,\n      otherwise will be setted in false\n    */\n    updateShapeIsActive(tool === ELEMENTS.ADD_SHAPE_TOOL);\n\n    /**\n     * Indicates if brush / pencil / pen tool is active.\n     */\n    updateBrushIsActive(tool === ELEMENTS.LINE_TYPE_TOOL);\n\n    /**\n     * Indicates if flood-fill/paint bucket is active.\n     */\n    updateFloodFillIsActive(tool === ELEMENTS.FLOOD_FILL_TOOL);\n\n    /**\n     * Indicates if laser tool is active.\n     */\n    updateLaserIsActive(tool === ELEMENTS.LASER_TOOL);\n\n    /**\n     * Indicates if any eraser is active.\n     */\n    updateEraserIsActive(tool === ELEMENTS.ERASE_TYPE_TOOL);\n\n    /**\n     * Indicates if line width tool is active.\n     */\n    updateLineWidthIsActive(tool === ELEMENTS.LINE_WIDTH_TOOL);\n\n    /**\n     * Update selected tool\n     */\n    updateSelectedTool(tool)\n\n    /*\n      It is setted to false when you select Pointer Tool,\n      otherwise will be setted in true\n    */\n    setPointerEvents(tool !== ELEMENTS.POINTERS_TOOL);\n\n    /**\n     * Update selected tool\n     */\n    updateSelectedTool(tool)\n\n    updateEventedObjects(tool === ELEMENTS.MOVE_OBJECTS_TOOL);\n\n    if (tool === ELEMENTS.MOVE_OBJECTS_TOOL) {\n      updateShapesAreSelectable(true);\n    } else {\n      updateShapesAreSelectable(false);\n    }\n\n    updateShapesAreEvented(\n      tool === ELEMENTS.FLOOD_FILL_TOOL || tool === ELEMENTS.ERASE_TYPE_TOOL\n    );\n\n    // set the clicked tool like active style in Toolbar\n    if (allToolbarIsEnabled || toolbarIsEnabled) {\n      setTools({\n        active: tool,\n        elements: [...tools.elements],\n      });\n    }\n\n    setActiveTool(tool);\n  }\n\n  /**\n   * Is executed when a ToolbarButton is clicked in Actions section\n   * and set the new selected button for that section\n   * @param {number} index - index that the clicked button has in the array\n   */\n  function handleActionsElementClick(tool: string) {\n    discardActiveObject();\n\n    const teacherHasPermission = allToolbarIsEnabled;\n    const studentHasPermission = toolbarIsEnabled && props.permissions.undoRedo;\n\n    if (toolbarIsEnabled) {\n      switch (tool) {\n        case ELEMENTS.CLEAR_WHITEBOARD_ACTION:\n          openClearWhiteboardModal();\n          break;\n\n        case ELEMENTS.UNDO_ACTION:\n          if (teacherHasPermission || studentHasPermission) {\n            undo();\n          }\n          break;\n\n        case ELEMENTS.REDO_ACTION:\n          if (teacherHasPermission || studentHasPermission) {\n            redo();\n          }\n          break;\n        case ELEMENTS.WHITEBOARD_SCREENSHOT_ACTION:\n          updateImagePopupIsOpen(true);\n          break;\n        case ELEMENTS.ADD_IMAGE_ACTION:\n          if (\n            teacherHasPermission ||\n            (toolbarIsEnabled && props.permissions.uploadImage)\n          ) {\n            openUploadFileModal();\n          }\n          break;\n        case ELEMENTS.SET_USER_INFO_TO_DISPLAY:\n          if (\n            teacherHasPermission ||\n            (toolbarIsEnabled && props.permissions.uploadImage)\n          ) {\n            openSetUserInfoToDisplayModal();\n          }\n          break;\n      }\n    }\n  }\n\n  /**\n   * Is executed when a change value happens in a Tools ToolbarSelector\n   * @param {string} tool - index of the selector in ToolbarSection\n   * @param {string} value - new selected value\n   */\n  function handleToolSelectorChange(tool: string, option: string) {\n    switch (tool) {\n      case ELEMENTS.POINTERS_TOOL:\n        updatePointer(option as IPointerType);\n        break;\n\n      case ELEMENTS.LINE_TYPE_TOOL:\n        changeBrushType(option as IBrushType);\n        break;\n\n      case ELEMENTS.LINE_WIDTH_TOOL:\n        updateLineWidth(Number(option));\n        break;\n\n      case ELEMENTS.FLOOD_FILL_TOOL:\n        updateFloodFill(option);\n        break;\n\n      case ELEMENTS.BACKGROUND_COLOR_TOOL:\n        fillBackgroundColor(option);\n        break;\n\n      case ELEMENTS.ADD_TEXT_TOOL:\n        updateFontFamily(option);\n        break;\n\n      case ELEMENTS.ADD_SHAPE_TOOL:\n        updateShape(option);\n        break;\n\n      case ELEMENTS.ADD_STAMP_TOOL:\n        updateStamp(option);\n        break;\n    }\n  }\n\n  /**\n   * Is executed when a change value happens in\n   * a Tools ToolbarSecondOptionSelector in its second option\n   * @param {string} tool - index of the selector in ToolbarSection\n   * @param {string} value - new selected value\n   */\n  function handleToolSecondSelectorChange(tool: string, option: string) {\n    switch (tool) {\n      case ELEMENTS.ADD_STAMP_TOOL:\n        updateStampMode(option as IStampMode);\n        break;\n    }\n  }\n\n  /**\n   * Is executed when the action of the element is triggered\n   * @param {number} index - index that the element has in the ToolbarSection\n   * @param {string} specific (optional) - specific value/option to use\n   */\n  function handleToolsElementAction(tool: string, specific: string) {\n    updateEraseType(null);\n\n    switch (tool) {\n      case ELEMENTS.ERASE_TYPE_TOOL:\n        updateEraseType(specific);\n        break;\n\n      case ELEMENTS.ADD_TEXT_TOOL:\n        updateFontFamily(specific);\n        break;\n\n      case ELEMENTS.ADD_SHAPE_TOOL:\n        updateShape(specific);\n        break;\n\n      case ELEMENTS.ADD_STAMP_TOOL:\n        updateStampIsActive(true);\n        updateStamp(specific);\n    }\n  }\n\n  /**\n   * Is executed when a color was picked in elements with color palette\n   * @param {number} index - index that the element has in ToolbarSection\n   * @param {string} color - new color to set in the element\n   */\n  function changeColor(tool: string, color: string) {\n    switch (tool) {\n      case ELEMENTS.LINE_TYPE_TOOL:\n        changeStrokeColor(color);\n        break;\n\n      case ELEMENTS.ADD_TEXT_TOOL:\n        textColor(color);\n        break;\n\n      case ELEMENTS.ADD_SHAPE_TOOL:\n        fillColor(color);\n        break;\n    }\n  }\n\n  /**\n   * Set the props to create a new ColorPalette with the given icon\n   * @param {OverridableComponent<SvgIconTypeMap<{}, 'svg'>>}\n   * colorPaletteIcon - Icon to set in the color palette\n   */\n  function setColorPalette(\n    tool: IBasicToolbarSelector\n  ): IColorPalette | undefined {\n    let selected = '';\n\n    if (!tool.colorPaletteIcon) {\n      return undefined;\n    }\n\n    switch (tool.id) {\n      case ELEMENTS.LINE_TYPE_TOOL:\n        selected = penColor;\n        break;\n\n      case ELEMENTS.ADD_TEXT_TOOL:\n        selected = fontColor;\n        break;\n\n      case ELEMENTS.ADD_SHAPE_TOOL:\n        selected = shapeColor;\n        break;\n\n      default:\n        selected = '';\n        break;\n    }\n\n    return {\n      icon: tool.colorPaletteIcon,\n      selectedColor: selected,\n      onChangeColor: changeColor,\n    };\n  }\n\n  /**\n   * Set the parent's definedOptionName in the given tool\n   * @param {string} tool - Tool to set the definedOption\n   */\n  function setSelectedOptionSelector(\n    tool: string,\n    props?: IBasicToolbarSelector\n  ): string | number | null {\n    switch (tool) {\n      case ELEMENTS.POINTERS_TOOL:\n        return pointer;\n\n      case ELEMENTS.ERASE_TYPE_TOOL: {\n        let allowed = props?.options.filter((options: any) => options.enabled);\n\n        if (\n          allowed?.length === 1 &&\n          eraseType &&\n          allowed[0].value !== eraseType\n        ) {\n          updateEraseType(allowed[0].value);\n          return allowed[0].value;\n        }\n\n        return eraseType;\n      }\n\n      case ELEMENTS.LINE_TYPE_TOOL:\n        return brushType;\n\n      case ELEMENTS.LINE_WIDTH_TOOL:\n        return lineWidth;\n\n      case ELEMENTS.FLOOD_FILL_TOOL:\n        return floodFill;\n\n      case ELEMENTS.BACKGROUND_COLOR_TOOL:\n        return backgroundColor;\n\n      case ELEMENTS.ADD_TEXT_TOOL:\n        return fontFamily;\n\n      case ELEMENTS.ADD_SHAPE_TOOL:\n        return shape;\n\n      case ELEMENTS.ADD_STAMP_TOOL:\n        return stamp;\n\n      default:\n        return '';\n    }\n  }\n\n  /**\n   * Set the parent's definedSecondOptionName in the given tool\n   * @param {string} tool - Tool to set the definedSecondOption\n   */\n  function setSelectedSecondOptionSelector(tool: string) {\n    switch (tool) {\n      case ELEMENTS.ADD_STAMP_TOOL:\n        return stampMode;\n      default:\n        return null;\n    }\n  }\n\n  /**\n   * If a permission element is active in Toolbar, when the permission\n   * will be revoked the active tool will change to the first one (pointers)\n   */\n  useEffect(() => {\n    if (\n      !toolbarIsEnabled &&\n      tools.active !== ELEMENTS.ADD_TEXT_TOOL &&\n      tools.active !== ELEMENTS.ADD_STAMP_TOOL\n    ) {\n      setTools({\n        active: ELEMENTS.POINTERS_TOOL,\n        elements: [...tools.elements],\n      });\n    }\n    // If tools.elements and tools.active are added an infinite loop happens\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [toolbarIsEnabled]);\n\n  /**\n   * Indicates active tool.\n   */\n  const getActiveTool = useMemo((): string => tools.active as string, [tools]);\n\n  /**\n   * Returns tool elements.\n   */\n  const getToolElements = useMemo(\n    (): IBasicToolbarSection['elements'] => [...tools.elements],\n    [tools]\n  );\n\n  /**\n   * Sets pointer tool as active for teacher user\n   */\n  useEffect(() => {\n    if (allToolbarIsEnabled) {\n      setTools({\n        active: ELEMENTS.POINTERS_TOOL,\n        elements: getToolElements,\n      });\n\n      setPointerEvents(false);\n    }\n    // If getToolElements and tools.active are added an infinite loop happens\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [allToolbarIsEnabled, setPointerEvents]);\n\n  /**\n   * Checks if any tool permission is set to true. If not, and tool is selected,\n   * default pointer is automatically selected.\n   */\n  useEffect(() => {\n    if (allToolbarIsEnabled) {\n      return;\n    }\n\n    if (!props.permissions.pointer && getActiveTool === ELEMENTS.LASER_TOOL) {\n      setTools({\n        active: null,\n        elements: getToolElements,\n      });\n    }\n\n    if (\n      !props.permissions.move &&\n      getActiveTool === ELEMENTS.MOVE_OBJECTS_TOOL\n    ) {\n      setTools({\n        active: null,\n        elements: getToolElements,\n      });\n    }\n\n    if (\n      !props.permissions.erase && !props.permissions.partialErase &&\n      getActiveTool === ELEMENTS.ERASE_TYPE_TOOL\n    ) {\n      setTools({\n        active: null,\n        elements: getToolElements,\n      });\n    }\n\n    if (!props.permissions.erase && props.permissions.partialErase) {\n      updateEraseType('partial');\n    } else if (props.permissions.erase && !props.permissions.partialErase) {\n      updateEraseType('object');\n    } else {\n      updateEraseType(null);\n    }\n\n    if (!props.permissions.pen && getActiveTool === ELEMENTS.LINE_TYPE_TOOL) {\n      setTools({\n        active: null,\n        elements: getToolElements,\n      });\n    }\n\n    if (\n      !props.permissions.floodFill &&\n      getActiveTool === ELEMENTS.FLOOD_FILL_TOOL\n    ) {\n      setTools({\n        active: null,\n        elements: getToolElements,\n      });\n    }\n\n    if (!props.permissions.text && getActiveTool === ELEMENTS.ADD_TEXT_TOOL) {\n      setTools({\n        active: null,\n        elements: getToolElements,\n      });\n    }\n\n    if (!props.permissions.shape && getActiveTool === ELEMENTS.ADD_SHAPE_TOOL) {\n      setTools({\n        active: null,\n        elements: getToolElements,\n      });\n    }\n\n    if (\n      !props.permissions.cursorPointer &&\n      getActiveTool === ELEMENTS.POINTERS_TOOL\n    ) {\n      setTools({\n        active: null,\n        elements: getToolElements,\n      });\n    }\n\n    if (\n      !props.permissions.backgroundColor &&\n      getActiveTool === ELEMENTS.BACKGROUND_COLOR_TOOL\n    ) {\n      setTools({\n        active: ELEMENTS.POINTERS_TOOL,\n        elements: getToolElements,\n      });\n    }\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [\n    pointerIsEnabled,\n    getActiveTool,\n    getToolElements,\n    allToolbarIsEnabled,\n    props.permissions,\n    updateEraseType,\n  ]);\n\n  const toolbarContainerStyle: CSSProperties = {\n    display: 'flex',\n    flexDirection: 'column',\n    alignItems: 'center',\n    width: '120px',\n  };\n\n  const toolbarStyle: CSSProperties = {\n    display: 'flex',\n    flexDirection: 'column',\n    marginTop: '16px',\n    borderRadius: '8px',\n  };\n\n  const actionElements = mappedActionElements(\n    actions,\n    allToolbarIsEnabled,\n    props.permissions\n  );\n\n  const toolElements = mappedToolElements(\n    tools,\n    allToolbarIsEnabled,\n    props.permissions\n  );\n\n  return (\n    <div style={toolbarContainerStyle}>\n      <div style={toolbarStyle}>\n        <ToolbarSection>\n          {toolElements\n            .filter((tool) => {\n              return tool.available;\n            })\n            .map(\n              (\n                tool:\n                  | IBasicToolbarButton\n                  | IBasicToolbarSelector\n                  | IBasicSpecialSelector\n                  | IBasicSecondOptionSelector\n              ) =>\n                determineIfIsToolbarButton(tool)\n                  ? createToolbarButton(\n                      tool.id,\n                      tool.title,\n                      tool.iconSrc,\n                      tool.iconName,\n                      tools.active === tool.id,\n                      handleToolsElementClick,\n                      tool.enabled\n                    )\n                  : determineIfIsToolbarSelector(tool)\n                  ? createToolbarSelector(\n                      tool.id,\n                      tool.options,\n                      tools.active === tool.id,\n                      handleToolsElementClick,\n                      handleToolSelectorChange,\n                      handleToolsElementAction,\n                      setSelectedOptionSelector(tool.id, tool),\n                      setColorPalette(tool),\n                      tool.enabled\n                    )\n                  : determineIfIsSpecialSelector(tool)\n                  ? createSpecialSelector(\n                      tool.id,\n                      tool.icon,\n                      tools.active === tool.id,\n                      setSelectedOptionSelector(tool.id),\n                      tool.styleOptions,\n                      handleToolsElementClick,\n                      handleToolSelectorChange,\n                      tool.enabled\n                    )\n                  : determineIfIsToolbarSecondOptionSelector(tool)\n                  ? createToolbarSecondOptionSelector(\n                      tool.id,\n                      tool.options,\n                      tool.secondOptions,\n                      tools.active === tool.id,\n                      handleToolsElementClick,\n                      handleToolSelectorChange,\n                      handleToolSecondSelectorChange,\n                      handleToolsElementAction,\n                      setSelectedOptionSelector(tool.id, tool),\n                      setSelectedSecondOptionSelector(tool.id),\n                      setColorPalette(tool),\n                      tool.enabled\n                    )\n                  : null\n            )}\n        </ToolbarSection>\n\n        <ToolbarSection>\n          {actionElements.map((action) =>\n            determineIfIsToolbarButton(action)\n              ? createToolbarButton(\n                  action.id,\n                  action.title,\n                  action.iconSrc,\n                  action.iconName,\n                  actions.active === action.id,\n                  handleActionsElementClick,\n                  action.enabled\n                )\n              : null\n          )}\n        </ToolbarSection>\n      </div>\n    </div>\n  );\n}\n\n/**\n * Creates a ToolbarButton\n * @param {string} id - id of the button\n * @param {string} iconSrc - src for the icon of the button\n * @param {string} iconName - alt for the icon of the button\n * @param {boolean} active - flag to set this button like active\n * @param {(index: number) => void} onClick - function to execute when button is clicked\n */\nfunction createToolbarButton(\n  id: string,\n  title: string,\n  iconSrc: string,\n  iconName: string,\n  active: boolean,\n  onClick: (tool: string) => void,\n  enabled?: boolean | undefined\n): JSX.Element {\n  return (\n    <ToolbarButton\n      key={id}\n      id={id}\n      title={title}\n      iconSrc={iconSrc}\n      iconName={iconName}\n      active={active}\n      enabled={enabled === false ? false : true}\n      onClick={onClick}\n    />\n  );\n}\n\n/**\n * Creates a ToolbarSelector\n * @param {string} id - id of the selector\n * @param {IToolbarSelectorOption[]} options - options that the selector\n * will have\n * @param {boolean} active - flag to set this selector like active\n * @param {(index: number) => void} onClick - function to execute\n * when selector is clicked\n * @param {(value: string) => void} onChange - function to execute\n * when selector's value changes\n * @param {(index: number) => void} onAction - function to execute when\n * the action of this element is triggered\n * @param {string} definedOptionName - selected option name defined by parent\n * @param {IColorPalette} colorPalette (optional) - Describes\n * the color palette to use\n */\nfunction createToolbarSelector(\n  id: string,\n  options: IToolbarSelectorOption[],\n  active: boolean,\n  onClick: (tool: string) => void,\n  onChange: (tool: string, value: string) => void,\n  onAction: (tool: string, value: string) => void,\n  selectedValue: string | number | null,\n  colorPalette?: IColorPalette,\n  enabled?: boolean\n): JSX.Element {\n  return (\n    <ToolbarSelector\n      key={id}\n      id={id}\n      options={options}\n      active={active}\n      selectedValue={selectedValue as string}\n      colorPalette={colorPalette}\n      onAction={onAction as any}\n      onClick={onClick}\n      onChange={onChange}\n      enabled={enabled === false ? false : true}\n    />\n  );\n}\n\n/**\n * Creates a ToolbarSecondOptionSelector\n * @param {string} id - id of the selector\n * @param {IToolbarSelectorOption[]} options - options that the selector\n * will have\n * @param {IToolbarSelectorOption[]} secondOptions - options that the selector\n * will have in the second options array\n * @param {boolean} active - flag to set this selector like active\n * @param {(index: number) => void} onClick - function to execute\n * when selector is clicked\n * @param {(value: string) => void} onChange - function to execute\n * when selector's value changes\n * @param {(value: string) => void} onSecondChange - function to execute\n * when selector's second value changes\n * @param {(index: number) => void} onAction - function to execute when\n * the action of this element is triggered\n * @param {string} definedOptionName - selected option name defined by parent\n * @param {string} definedSecondOptionName - selected second option\n * name defined by parent\n * @param {IColorPalette} colorPalette (optional) - Describes\n * the color palette to use\n */\nfunction createToolbarSecondOptionSelector(\n  id: string,\n  options: IToolbarSelectorOption[],\n  secondOptions: IToolbarSelectorOption[],\n  active: boolean,\n  onClick: (tool: string) => void,\n  onChange: (tool: string, value: string) => void,\n  onSecondChange: (tool: string, value: string) => void,\n  onAction: (tool: string, value: string) => void,\n  selectedValue: string | number | null,\n  selectedSecondValue: string | number | null,\n  colorPalette?: IColorPalette,\n  enabled?: boolean\n): JSX.Element {\n  return (\n    <SecondOptionSelector\n      key={id}\n      id={id}\n      options={options}\n      secondOptions={secondOptions}\n      active={active}\n      selectedSecondValue={selectedSecondValue as string}\n      selectedValue={selectedValue as string}\n      colorPalette={colorPalette}\n      onAction={onAction as any}\n      onClick={onClick}\n      onChange={onChange}\n      onSecondChange={onSecondChange}\n      enabled={enabled === false ? false : true}\n    />\n  );\n}\n\n/**\n * Create an SpecialToolbarSelector\n * @param {string} id - id of the selector\n * @param {OverridableComponent<SvgIconTypeMap<{}, 'svg'>>} Icon - Icon\n * that the selector will have\n * @param {boolean} selected - flag to set this selector like selected\n * @param {IStyleOptions[]} styleOptions - Options for the special selector\n * @param {(index: number) => void} onClick - Function to execute when\n * selector is clicked\n * @param {(value: string) => void} onChange - Function to execute when\n * selector's value is changed\n */\nfunction createSpecialSelector(\n  id: string,\n  Icon: OverridableComponent<SvgIconTypeMap<{}, 'svg'>>,\n  active: boolean,\n  selectedValue: string | number | null,\n  styleOptions: IStyleOptions[],\n  onClick: (tool: string) => void,\n  onChange: (tool: string, value: string) => void,\n  enabled: boolean | undefined\n): JSX.Element {\n  return (\n    <SpecialSelector\n      key={id}\n      id={id}\n      Icon={Icon}\n      active={active}\n      selectedValue={selectedValue as string}\n      styleOptions={styleOptions}\n      onClick={onClick}\n      onChange={onChange}\n      enabled={enabled}\n    />\n  );\n}\n\n/**\n * Validate if the given object has ToolbarButton Props\n * @param {ToolbarElementTypes} toBeDetermined - Object to validate\n */\nfunction determineIfIsToolbarButton(\n  toBeDetermined: ToolbarElementTypes\n): toBeDetermined is IBasicToolbarButton {\n  return !!(toBeDetermined as IBasicToolbarButton).iconSrc;\n}\n\n/**\n * Validate if the given object has ToolbarSelector Props\n * @param {ToolbarElementTypes} toBeDetermined - Object to validate\n */\nfunction determineIfIsToolbarSelector(\n  toBeDetermined: ToolbarElementTypes\n): toBeDetermined is IBasicToolbarSelector {\n  return (\n    !!(toBeDetermined as IBasicToolbarSelector).options &&\n    !(toBeDetermined as IBasicSecondOptionSelector).secondOptions\n  );\n}\n\n/**\n * Validate if the given object has SpecialToolbarSelector Props\n * @param {ToolbarElementTypes} toBeDetermined - Object to validate\n */\nfunction determineIfIsSpecialSelector(\n  toBeDetermined: ToolbarElementTypes\n): toBeDetermined is IBasicSpecialSelector {\n  return !!(toBeDetermined as IBasicSpecialSelector).icon;\n}\n\n/**\n * Validate if the given object has ToolbarSecondOptionSelector Props\n * @param {ToolbarElementTypes} toBeDetermined - Object to validate\n */\nfunction determineIfIsToolbarSecondOptionSelector(\n  toBeDetermined: ToolbarElementTypes\n): toBeDetermined is IBasicToolbarSelector {\n  return (\n    !!(toBeDetermined as IBasicToolbarSelector).options &&\n    !!(toBeDetermined as IBasicSecondOptionSelector).secondOptions\n  );\n}\n\n/**\n * Maps state to props.\n * @param state Redux state\n * @param ownProps Own properties\n */\nconst mapStateToProps = (\n  state: { permissionsState: IPermissions },\n  ownProps: { toolbarIsEnabled?: boolean }\n) => ({\n  ...ownProps,\n  permissions: state.permissionsState,\n  toolbarIsEnabled: (state: {\n    permissionsState: { [key: string]: boolean };\n  }) => {\n    for (const key in state.permissionsState) {\n      if (state.permissionsState[key] === true) {\n        return true;\n      }\n    }\n\n    return false;\n  },\n});\n\nexport default connect(mapStateToProps)(Toolbar);\n","var img = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABYAAAAQCAMAAAAlM38UAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAABFFBMVEUAAAACAgJhYWFfX19gYGBoaGhOTk5paWlHR0dpaWkAAAA7OztxcXEtLS0BAQElJSVZWVkBAQEmJiZQUFABAQEqKipLVVjp6en////Ly8vo6Oj+/v78/Py2tra7u7vl5eX7+/uysrKzs7Pu7u79/f25ubm1tbX6+vr4+Pjf39+kpKSgoKD29vaLi4uhoaGampqYmJiTk5OKioqIiIiGhoZ1dXV6enrOzs7k5OSurq7b29vV1dXJycnCwsLGxsawsLBycnKSkpLS0tLx8fFzc3OlpaWbm5uWlpaXl5d0dHRra2vPz8/FxcW+vr7Dw8PExMR5eXmxsbHIyMjAwMDBwcF9fX2oqKidnZ2vr6+tra2srKx2dnYsMTL3AAAAFnRSTlMAAfb28/T28vb4BfL60gXO8wTO9gPQbFIrtAAAAAFiS0dEGJtphR4AAAAJcEhZcwAAAMgAAADIAGP6560AAAAHdElNRQfkCBUWCDDgHXo+AAAAEGNhTnYAAAAgAAAAIAAAAAAAAAAAYrnu+gAAANRJREFUGNNjYIACMTiAiTACMZO4BBRIwsUZGJilpGXAgtKycmJwtSzyChBRCUUlBbhqVmUZFYioqpq6BkyYTVNCQ0FBQV1FQktbQUeTHWwAA4eunp6+gaGRsYmpmbmKBScDAxdQnNtS2cra3MZWzs7ewdHJmQdiHa+Lq5u+m4G7h4Gnl72BNysDAx/IDH4fH19bWz9/Gyf7gEBdAQYGQbDJQnJBfra2tsEhQfahYcIwUQah8IjIyMioSEt7+2hmBgYRiCiDqBhyaMBEUQF2QS6swkiKAYB3HfR2SqOqAAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDIwLTA4LTIxVDIyOjA4OjQ1KzAwOjAwO/5qbgAAACV0RVh0ZGF0ZTptb2RpZnkAMjAyMC0wOC0yMVQyMjowODo0NSswMDowMEqj0tIAAAAASUVORK5CYII=\";\n  export default img;","import { TypedShape } from '../../../interfaces/shapes/shapes';\nimport { ITextOptions } from 'fabric/fabric-impl';\nimport { ICanvasBrush } from '../../../interfaces/brushes/canvas-brush';\nimport { ICoordinate } from '../../../interfaces/brushes/coordinate';\nimport { PenBrush } from '../brushes/classes/penBrush';\n\n/**\n * Check if the given object is a free drawing object\n * @param {fabric.Object} object - object to check\n */\nexport const isFreeDrawing = (object: fabric.Object) => {\n  return object.strokeLineCap === 'round';\n};\n\nexport const isSpecialFreeDrawing = (object: fabric.Object) => {\n  return (\n    (object?.type === 'group' && (object as ICanvasBrush).basePath) ||\n    (object?.type === 'image' && (object as ICanvasBrush).basePath)\n  );\n};\n\n/**\n * Check if the given object is a shape\n * @param {fabric.Object} object - object to check\n */\nexport const isShape = (object: fabric.Object) => {\n  if (\n    (object?.get('type') === 'path' || isSpecialFreeDrawing(object)) &&\n    object.name\n  ) {\n    return true;\n  }\n\n  return object?.fill && !(object as fabric.TextOptions).text;\n};\n\n/**\n * Check if the given object is a text object\n * @param {fabric.Object} object - object to check\n */\nexport const isText = (object: fabric.Object) => {\n  return (object as ITextOptions).text;\n};\n\n/**\n * Check if the given object is an empty shape\n * @param {fabric.Object} object - object to check\n */\n// eslint-disable-next-line react-hooks/exhaustive-deps\nexport const isEmptyShape = (object: TypedShape) => {\n  return isShape(object) && object.shapeType === 'shape';\n};\n\n/**\n * Get the bigger difference\n * between startPoint.x - point.x and startPoint.y - point.y\n * @param {Point} point - Point to find the difference with startPoint\n */\nexport const getBiggerDifference = (\n  point: fabric.Point,\n  startPoint: fabric.Point\n) => {\n  return Math.abs(point.x - startPoint.x) > Math.abs(point.y - startPoint.y)\n    ? point.x - startPoint.x\n    : point.y - startPoint.y;\n};\n\nexport const setScaledPoint = (\n  shape: any,\n  original: any,\n  point: ICoordinate\n) => {\n  return {\n    x: (point.x * Number(shape.width) * Number(shape.scaleX)) / original.width,\n    y:\n      (point.y * Number(shape.height) * Number(shape.scaleY)) / original.height,\n  };\n};\n\nexport const penPointsMapping = (\n  points: any[],\n  brush: any,\n  min: number,\n  max: number\n) =>\n  points.map((point) => ({\n    x: point.x,\n    y: point.y,\n    width: (brush as PenBrush).getRandomInt(min, max),\n  }));\n","export const STATES_LIMIT = 50;\nexport const CANVAS_OBJECT_PROPS = [\n  'strokeUniform',\n  'id',\n  'selectable',\n  'evented',\n  'shapeType',\n  'joinedIds',\n  'isPartialErased',\n  'basePath',\n  'backgroundImageEditable',\n  'name',\n];\n","import { useReducer } from 'react';\nimport { TypedShape } from '../../../interfaces/shapes/shapes';\nimport { TypedGroup } from '../../../interfaces/shapes/group';\nimport { ICanvasObject } from '../../../interfaces/objects/canvas-object';\nimport { IUndoRedoEvent } from '../../../interfaces/canvas-events/undo-redo-event';\nimport {\n  STATES_LIMIT,\n  CANVAS_OBJECT_PROPS,\n} from '../../../config/undo-redo-values';\n\nexport const UNDO = 'CANVAS_UNDO';\nexport const REDO = 'CANVAS_REDO';\nexport const SET = 'CANVAS_SET';\nexport const SET_GROUP = 'CANVAS_SET_GROUP';\nexport const UPDATE_OTHER = 'CANVAS_UPDATE_OTHER';\nexport const SET_OTHER = 'CANVAS_SET_OTHER';\nexport const SET_BACKGROUND = 'CANVAS_SET_BACKGROUND';\n\n/**\n * Model for storing the canvas history for undo/redo functionality.\n * States stored as stringified objects, since fabric requires it when\n * reloading state.\n */\nexport interface CanvasHistoryState {\n  /**\n   * Stringified objects of all states.\n   */\n  states: string[];\n\n  /**\n   * Objects created on another canvas.\n   */\n  otherObjects: string;\n\n  /**\n   * Indicates action being taken, such as undo or redo.\n   */\n  actionType: string | null;\n\n  /**\n   * Indicates the index of the active state.\n   */\n  activeStateIndex: number | null;\n\n  /**\n   * Active state.\n   */\n  activeState: string | null;\n\n  /**\n   * List of events\n   */\n  events: IUndoRedoEvent[];\n\n  /**\n   * Current event chosen, used for undo and redo events.\n   */\n  eventIndex: number;\n\n  /**\n   * Used for group manipulation.\n   */\n  activeObjects: ICanvasObject[];\n\n  /**\n   * Stores background state in order to rerender if needed.\n   */\n  backgrounds: (string | fabric.Image | null)[];\n}\n\n/**\n * Dispatch action used by reducer for canvas history.\n */\nexport interface CanvasAction {\n  /**\n   * Type of action, such as undo, redo, set, modify.\n   */\n  type: string;\n\n  /**\n   * Array of fabric objects.\n   */\n  payload?: fabric.Object [];\n\n  /**\n   * ID of canvas.\n   */\n  canvasId?: string;\n\n  /**\n   * Event to be added to list.\n   */\n  event?: IUndoRedoEvent;\n\n  /**\n   * Payload of objects from other canvas.\n   */\n  otherPayload?: fabric.Object;\n\n  /**\n   * Event ID. Used to determine if an event is grouped.\n   */\n  eventId?: string | undefined;\n\n  /**\n   * Canvas background payload\n   */\n  background?: fabric.Image;\n}\n\n/**\n * Canvas history default state.\n */\nconst defaultState: CanvasHistoryState = {\n  states: [],\n  otherObjects: '',\n  actionType: null,\n  activeStateIndex: null,\n  activeState: null,\n  events: [],\n  eventIndex: -1,\n  activeObjects: [], // This is a work in progress, does not work.\n  backgrounds: [],\n};\n\n/**\n * Stringifies objects into proper format to store in state\n * and render to canvas.\n * @param payload\n */\nconst objectStringifier = (payload: (fabric.Object | TypedShape)[]): string => {\n  let formatted: string[] = [];\n\n  if (payload) {\n    formatted = payload.map((object: fabric.Object | TypedShape) =>\n      object.toJSON(CANVAS_OBJECT_PROPS)\n    );\n  }\n\n  return JSON.stringify({ objects: formatted });\n};\n\n/**\n * Determine if an object belongs to local canvas.\n * @param id Object ID\n * @param canvasId Canvas ID\n */\nconst isLocalObject = (id: string, canvasId: string): boolean => {\n  if (!id) {\n    return false;\n  }\n\n  const object = id.split(':');\n\n  if (!object.length) {\n    throw new Error('Invalid ID');\n  }\n\n  return object[0] === canvasId;\n};\n\n/**\n * Determines new event index on undo.\n * @param newIndex New umodified event index.\n * @param eventId Event ID\n * @param events List of events\n */\nconst determineNewIndex = (newIndex: number, eventId: string, events: any) => {\n  let i = newIndex;\n\n  for (i; i >= 0; i--) {\n    if (events[i].eventId !== eventId) {\n      return i;\n    }\n  }\n\n  return -1;\n};\n\n/**\n * Determines new event index on redo.\n * @param newIndex New umodified event index.\n * @param eventId Event ID\n * @param events List of events\n */\nconst determineNewRedoIndex = (\n  newIndex: number,\n  eventId: string,\n  events: any\n) => {\n  let i = newIndex;\n\n  for (i; i < events.length; i++) {\n    if (events[i].eventId !== eventId) {\n      return i - 1;\n    }\n  }\n\n  return events.length - 1;\n};\n\nconst limitValidator = (\n  list: IUndoRedoEvent[] | string[],\n  limit: number\n): (string | IUndoRedoEvent)[] => {\n  const cloned = [...list];\n\n  if (list.length > limit) {\n    cloned.shift();\n  }\n\n  return cloned;\n};\n\nconst filterById = (\n  canvasId: string,\n  objects: ICanvasObject[] | undefined,\n  isLocal: boolean\n) => {\n  return objects?.filter((object: ICanvasObject) =>\n    isLocal\n      ? object.id && isLocalObject(object.id, canvasId)\n      : object.id && !isLocalObject(object.id, canvasId)\n  ) as [fabric.Object | TypedShape];\n};\n\n/**\n * Removes future states if a new state has\n * been created after an undo.\n */\nconst spliceStates = (\n  activeStateIndex: number | null,\n  statesList: string[]\n): string[] => {\n  let states = [...statesList];\n\n  if (activeStateIndex !== null && activeStateIndex + 1 < states.length) {\n    states.splice(activeStateIndex + 1, 9e9);\n  } else if (activeStateIndex === null) {\n    states = [];\n  }\n\n  return states;\n};\n\nconst spliceBackgroundStates = (\n  activeStateIndex: number | null,\n  backgroundStates: any[]\n): string[] => {\n  let states = [...backgroundStates];\n\n  if (activeStateIndex !== null && activeStateIndex + 1 < states.length) {\n    states.splice(activeStateIndex + 1, 9e9);\n  } else if (activeStateIndex === null) {\n    states = [];\n  }\n\n  return states;\n};\n\n/**\n * Removes future events if a new event has\n * been created after an undo.\n */\nconst spliceEvents = (\n  eventIndex: number,\n  eventsList: IUndoRedoEvent[]\n): IUndoRedoEvent[] => {\n  // Removes future events if a new event has been created after an undo.\n  let events = [...eventsList];\n\n  if (eventIndex >= 0 && eventIndex + 1 < events.length) {\n    events.splice(eventIndex + 1, 9e9);\n  } else if (eventIndex < 0) {\n    events = [];\n  }\n\n  return events;\n};\n\n/**\n * History state reducer.\n * @param state Canvas state.\n * @param action Action\n */\nconst reducer = (\n  state: CanvasHistoryState = defaultState,\n  action: CanvasAction\n): CanvasHistoryState => {\n  switch (action.type) {\n    // Sets state when new object is created.\n    case SET: {\n      if (!action.background) {\n        if (\n          !action.event ||\n          (action.event.type === 'removed' && state.activeStateIndex === null) ||\n          (action.event.type !== 'backgroundColorChanged' &&\n            !action.payload?.length &&\n            !state.states.length)\n        ) {\n          return state;\n        }\n      }\n\n      let states = [...state.states];\n      let events = [...state.events];\n\n      const selfItems = filterById(\n        action.canvasId as string,\n        action.payload,\n        true\n      );\n      const otherObjects = filterById(\n        action.canvasId as string,\n        action.payload,\n        false\n      );\n\n      const currentState = objectStringifier(([\n        ...selfItems,\n        ...otherObjects,\n      ] as unknown) as [fabric.Object | TypedShape]);\n\n      states = spliceStates(state.activeStateIndex, state.states);\n      let backgrounds = spliceBackgroundStates(state.activeStateIndex, state.backgrounds);\n\n      // Formats and creates new state.\n      const mappedSelfState = objectStringifier(selfItems);\n      states = limitValidator(\n        [...states, mappedSelfState],\n        STATES_LIMIT\n      ) as string[];\n\n      let stateItems = {\n        ...state,\n        states,\n        actionType: SET,\n        activeStateIndex: states.length - 1,\n        activeState: currentState,\n        otherObjects: objectStringifier(otherObjects),\n      };\n\n      events = spliceEvents(state.eventIndex, events);\n      events = limitValidator(events, STATES_LIMIT) as IUndoRedoEvent[];\n\n      if (action.event && !Array.isArray(action.event)) {\n        events = [...events, action.event];\n        stateItems = {\n          ...stateItems,\n          events,\n          eventIndex: events.length - 1,\n          backgrounds: [ ...backgrounds, action.background || null ],\n        };\n      } else if (action.event && Array.isArray(action.event)) {\n        events = [...events, ...action.event];\n        stateItems = {\n          ...stateItems,\n          events,\n          eventIndex: events.length - 1,\n          backgrounds: [ ...backgrounds, action.background || null ],\n        };\n      }\n\n      return stateItems;\n    }\n\n    case SET_GROUP: {\n      let states = [...state.states];\n      let events = [...state.events];\n\n      let selfItems = action.payload?.filter(\n        (object: TypedShape | TypedGroup) => {\n          if ((object as TypedGroup)._objects) {\n            return object;\n          }\n\n          return isLocalObject(object.id as string, action.canvasId as string);\n        }\n      ) as [fabric.Object | TypedShape];\n\n      selfItems = selfItems.map((o: TypedShape | TypedGroup) => {\n        if (o.toObject) {\n          return o.toObject(['id', 'selectable']);\n        }\n\n        return o;\n      }) as [TypedShape | TypedGroup];\n\n      let otherObjects = action.payload?.filter(\n        (object: TypedShape | TypedGroup) => {\n          return (\n            !isLocalObject(object.id as string, action.canvasId as string) &&\n            !(object as TypedGroup)._objects\n          );\n        }\n      ) as [fabric.Object | TypedShape];\n\n      otherObjects = otherObjects.map((o: TypedShape | TypedGroup) => {\n        if (o.toObject) {\n          return o.toObject(['id', 'selectable']);\n        }\n\n        return o;\n      }) as [TypedShape | TypedGroup];\n\n      const currentState = JSON.stringify({\n        objects: ([...selfItems, ...otherObjects] as unknown) as [\n          fabric.Object | TypedShape\n        ],\n      });\n\n      states = spliceStates(state.activeStateIndex, state.states);\n\n      // Formats and creates new state.\n      const mappedSelfState = JSON.stringify({ objects: selfItems });\n      states = limitValidator(\n        [...states, mappedSelfState],\n        STATES_LIMIT\n      ) as string[];\n\n      let newEvent = { ...action.event, selfState: mappedSelfState };\n\n      let stateItems = {\n        ...state,\n        states,\n        actionType: SET,\n        activeStateIndex: states.length - 1,\n        activeState: currentState,\n        otherObjects: JSON.stringify({ objects: otherObjects }),\n      };\n\n      events = spliceEvents(state.eventIndex, state.events);\n      events = limitValidator(events, STATES_LIMIT) as IUndoRedoEvent[];\n\n      if (Array.isArray(action.event)) {\n        events = [...events, ...action.event];\n      } else {\n        events = [...events, newEvent] as IUndoRedoEvent[];\n      }\n\n      stateItems = {\n        ...stateItems,\n        events,\n        eventIndex: events.length - 1,\n      };\n\n      return stateItems;\n    }\n\n    // Steps back to previous state.\n    case UNDO: {\n      if (\n        state.activeStateIndex === null ||\n        (state.activeStateIndex === 0 && state.states.length === STATES_LIMIT)\n      ) {\n        return state;\n      }\n\n      let eventIndex = state.eventIndex - 1;\n\n      if (\n        state.events[state.eventIndex] &&\n        state.events[state.eventIndex].eventId\n      ) {\n        // This is a grouped event action, determine previous\n        // event index prior to grouped event.\n        eventIndex = determineNewIndex(\n          state.eventIndex - 1,\n          state.events[state.eventIndex - 1].eventId as string,\n          state.events\n        );\n      }\n\n      let activeStateIndex =\n        state.activeStateIndex !== null && state.activeStateIndex >= 1\n          ? state.activeStateIndex - 1\n          : null;\n\n      if (activeStateIndex === null && state.states.length === STATES_LIMIT) {\n        activeStateIndex = 0;\n        eventIndex = 0;\n      }\n\n      const activeSelfState =\n        activeStateIndex !== null && activeStateIndex >= 0\n          ? state.states[activeStateIndex]\n          : JSON.stringify({ objects: [] });\n\n      const activeSelfStateObjects = JSON.parse(activeSelfState).objects;\n      const otherStateObjects = JSON.parse(state.otherObjects as string)\n        .objects;\n      const activeState = JSON.stringify({\n        objects: [...activeSelfStateObjects, ...otherStateObjects],\n      });\n\n      const newState = {\n        ...state,\n        actionType: UNDO,\n        activeStateIndex,\n        activeState,\n        eventIndex,\n      };\n\n      return newState;\n    }\n\n    // Steps forward to more recent state.\n    case REDO: {\n      // If no future states, return current state.\n      if (\n        state.activeStateIndex !== null &&\n        state.activeStateIndex + 1 === state.states.length\n      ) {\n        return state;\n      }\n\n      if (!state.events.length) {\n        return state;\n      }\n\n      let eventIndex = state.eventIndex + 1;\n      if (\n        state.events[state.eventIndex + 1] &&\n        state.events[state.eventIndex + 1].eventId\n      ) {\n        // This is a grouped event action, determine previous\n        // event index prior to grouped event.\n        eventIndex = determineNewRedoIndex(\n          state.eventIndex + 1,\n          state.events[state.eventIndex + 1].eventId as string,\n          state.events\n        );\n      }\n\n      const activeStateIndex =\n        state.activeStateIndex !== null\n          ? (state.activeStateIndex as number) + 1\n          : 0;\n\n      const activeSelfState =\n        activeStateIndex !== null && activeStateIndex >= 0\n          ? state.states[activeStateIndex]\n          : JSON.stringify({ objects: [] });\n\n      const activeSelfStateObjects = JSON.parse(activeSelfState).objects;\n      const otherStateObjects = JSON.parse(state.otherObjects as string)\n        .objects;\n      const activeState = JSON.stringify({\n        objects: [...activeSelfStateObjects, ...otherStateObjects],\n      });\n\n      return {\n        ...state,\n        actionType: REDO,\n        activeStateIndex,\n        activeState,\n        eventIndex,\n      };\n    }\n\n    // Creates a new current state if a new event has been received by serializer from a non local canvas.\n    case SET_OTHER: {\n      if (!action.payload) {\n        return state;\n      }\n\n      const selfItems = action.payload?.filter(\n        (object: ICanvasObject) =>\n          object.id && isLocalObject(object.id, action.canvasId as string)\n      ) as [fabric.Object | TypedShape];\n      const otherObjects = action.payload?.filter(\n        (object: ICanvasObject) =>\n          object.id && !isLocalObject(object.id, action.canvasId as string)\n      ) as [fabric.Object | TypedShape];\n      const currentState = objectStringifier([...selfItems, ...otherObjects]);\n\n      return {\n        ...state,\n        actionType: SET_OTHER,\n        activeState: currentState,\n        otherObjects: objectStringifier(otherObjects),\n      };\n    }\n\n    // Retuns default state.\n    default: {\n      return defaultState;\n    }\n  }\n};\n\n/**\n * Reducer hook.\n */\nexport const useUndoRedo = () => {\n  const [state, dispatch] = useReducer(reducer, defaultState);\n\n  return { state, dispatch };\n};\n","import { fabric } from 'fabric';\nimport { ICanvasDrawingEvent } from '../../../interfaces/canvas-events/canvas-drawing-event';\nimport { ICanvasFreeDrawingBrush } from '../../../interfaces/free-drawing/canvas-free-drawing-brush';\nimport { ICanvasObject } from '../../../interfaces/objects/canvas-object';\nimport { TypedPolygon, TypedShape } from '../../../interfaces/shapes/shapes';\nimport { v4 as uuidv4 } from 'uuid';\nimport { ICanvasMouseEvent } from '../../../interfaces/canvas-events/canvas-mouse-event';\nimport { CANVAS_OBJECT_PROPS } from '../../../config/undo-redo-values';\nimport { IPathTarget } from '../../../interfaces/canvas-events/path-target';\nimport { TypedGroup } from '../../../interfaces/shapes/group';\nimport { CanvasAction, SET } from '../reducers/undo-redo';\nimport { IUndoRedoEvent } from '../../../interfaces/canvas-events/undo-redo-event';\nimport { ObjectEvent } from '../event-serializer/PaintEventSerializer';\nimport { PaintEventSerializer } from '../../../poc/whiteboard/event-serializer/PaintEventSerializer';\nimport { IImageOptions, Pattern, Point } from 'fabric/fabric-impl';\nimport { ICanvasBrush } from '../../../interfaces/brushes/canvas-brush';\nimport { IUndoRedoSingleEvent } from '../../../interfaces/canvas-events/undo-redo-single-event';\n\n/**\n * Class that handles all partial erasure methods.\n */\nexport class PartialErase {\n  /**\n   * User ID\n   */\n  private id: string;\n\n  /**\n   * Permanent canvas.\n   */\n  private canvas: fabric.Canvas;\n\n  /**\n   * Temporary canvas will erasing will take place.\n   */\n  private tempCanvas: fabric.Canvas;\n\n  /**\n   * Raw canvas will erasing will take place.\n   */\n  private rawCanvas: HTMLCanvasElement;\n\n  /**\n   * Eraser width.\n   */\n  private lineWidth: number;\n\n  /**\n   * Eraser cursor.\n   */\n  private eraseObjectCursor: string;\n\n  /**\n   * Indicates if all tools in toolbar are enabled. Typically\n   * true for teachers.\n   */\n  private allToolbarIsEnabled: boolean;\n\n  /**\n   * Indicates if partial eraser is active.\n   */\n  private partialEraseIsActive: boolean;\n\n  /**\n   * Dispatcher for undo / redo functionality\n   */\n  private undoRedoDispatch: React.Dispatch<CanvasAction>;\n\n  /**\n   * Indicates if eraser is active.\n   */\n  private active: boolean;\n\n  /**\n   * Event synchronizer methods.\n   */\n  public eventSerializer: PaintEventSerializer;\n\n  /**\n   * Mouse coordinates.\n   */\n  public coordinates: { x: number; y: number }[];\n\n  /**\n   * Indicates if user has permission to do a partial erase action.\n   */\n  public hasPermission: boolean;\n\n  /**\n   * Indicates if canvas has an erasable background owned to user.\n   */\n  public hasBackground: boolean;\n\n  /**\n   * background Id\n   */\n  public backgroundId: string | null;\n\n  /**\n   * Temporary background canvas\n   */\n  private bgRawCanvas: any;\n\n  /**\n   * Indicates if user has owned objects in board\n   */\n  private hasSelfObjects: boolean;\n\n  /**\n   * Indicates if user has permissison for images and owns background\n   */\n  private hasBgPermission: boolean;\n\n  /**\n   * Canvas background image fabric.js object.\n   */\n  private backgroundImage: ICanvasObject | null;\n\n  /** @ignore */\n  constructor(\n    id: string,\n    canvas: fabric.Canvas,\n    lineWidth: number,\n    eraseObjectCursor: string,\n    allToolbarIsEnabled: boolean,\n    partialEraseIsActive: boolean,\n    hasPermission: boolean,\n    eventSerializer: PaintEventSerializer,\n    undoRedoDispatch: React.Dispatch<CanvasAction>\n  ) {\n    this.eventSerializer = eventSerializer;\n    this.coordinates = [];\n    this.id = id;\n    this.canvas = canvas;\n    this.rawCanvas = document.createElement('canvas');\n    this.rawCanvas.style.cssText = 'position: absolute; z-index: 3;';\n    this.undoRedoDispatch = undoRedoDispatch;\n    this.active = false;\n    this.hasBackground = canvas.backgroundImage ? true : false;\n    this.backgroundId = null;\n    this.bgRawCanvas = null;\n    this.hasSelfObjects = false;\n    this.hasBgPermission = this.hasBackground ? this.isOwned(id, (canvas.backgroundImage as unknown as ICanvasObject).id as string) : false;\n    this.backgroundImage = this.hasBackground ? this.canvas.backgroundImage as ICanvasObject : null;\n\n    if (this.hasBackground && this.hasBgPermission) {\n      this.backgroundId = this.backgroundImage?.id as string;\n      this.generateBackground();\n\n      this.canvas.on('background:modified', (e) => {\n       \n        if (!e || !(e as unknown as ICanvasObject).id) {\n          this.generateBackground(null);\n          return;\n        }\n\n        // @ts-ignore\n        const src = (e as unknown as fabric.Image)?.getElement ? e : null;\n        this.generateBackground(src);\n      });\n    }\n\n    this.canvas\n      .getElement()\n      .parentNode?.insertBefore(this.rawCanvas, this.canvas.getElement());\n\n    this.tempCanvas = new fabric.Canvas(this.rawCanvas, {\n      width: canvas.getWidth(),\n      height: canvas.getHeight(),\n    });\n\n    this.lineWidth = lineWidth;\n    this.eraseObjectCursor = eraseObjectCursor;\n    this.allToolbarIsEnabled = allToolbarIsEnabled;\n    this.partialEraseIsActive = partialEraseIsActive;\n    this.hasPermission = hasPermission;\n\n    this.moveSelfToTemp();\n    this.tempCanvas.on('path:created', this.pathCreated);\n  }\n\n  private generateBackground = (src?: any) => {\n    if (this.bgRawCanvas) {\n      this.bgRawCanvas.remove();\n      this.bgRawCanvas = null;\n    }\n\n    if (!this.bgRawCanvas) {\n      this.bgRawCanvas = document.createElement('canvas');\n      this.bgRawCanvas.width = this.canvas.width;\n      this.bgRawCanvas.height = this.canvas.height;\n      this.bgRawCanvas.style.position = 'absolute';\n    }\n\n    if (!src) {\n      this.canvas.getElement().before(this.bgRawCanvas);\n    } else {\n      this.tempCanvas.getElement().before(this.bgRawCanvas);\n    }\n\n    let background = new Image();\n\n    if (!src && (this.canvas.backgroundImage as fabric.Image)?.getElement) {\n      this.hasBackground = true;\n      background.src = (this.canvas.backgroundImage as fabric.Image)?.getElement().currentSrc;\n    } else if (src && src.getElement) {\n      this.hasBackground = true;\n      background.src = src.getElement().currentSrc;\n    } else {\n      this.hasBackground = false;\n      return;\n    }\n\n    background.onload = () => {\n      const ctx = this.bgRawCanvas.getContext('2d');\n      let width;\n      let height;\n\n      if (!src) {\n        // @ts-ignore  - linter ignoring backgroundImage type and optional chaining.\n        width = background.width * this.canvas.backgroundImage?.scaleX;\n        // @ts-ignore  - linter ignoring backgroundImage type and optional chaining.\n        height = background.height * this.canvas.backgroundImage?.scaleY;\n      } else {\n        width = background.width * src.scaleX;\n        height = background.height * src.scaleY;\n      }\n\n      ctx.drawImage(background, 0, 0, width, height);\n\n      this.canvas.backgroundImage = '';\n      this.canvas.renderAll();\n    }\n  }\n\n  /**\n   * Initiates erasing availability.\n   */\n  public init = () => {\n    this.tempCanvas.freeDrawingBrush = new fabric.PencilBrush();\n    (this.tempCanvas\n      .freeDrawingBrush as ICanvasFreeDrawingBrush).canvas = this.tempCanvas;\n    this.tempCanvas.freeDrawingBrush.color = 'rgba(0,0,0,0)';\n    this.tempCanvas.freeDrawingBrush.width = this.lineWidth;\n    this.tempCanvas.freeDrawingCursor = `url(\"${this.eraseObjectCursor}\"), auto`;\n    this.tempCanvas.isDrawingMode =\n      this.allToolbarIsEnabled ||\n      this.hasPermission ||\n      this.partialEraseIsActive;\n\n    this.tempCanvas.on('mouse:move', (e: ICanvasMouseEvent) => {\n      if ((e.e as MouseEvent).buttons) {\n        if (!this.active) {\n          this.active = true;\n          this.moveSelfToTemp();\n        }\n        this.coordinates.push(e.absolutePointer as Point);\n        this.buildTempEraseLine();\n      } else {\n        this.active = false;\n        this.coordinates = [];\n      }\n    });\n  };\n\n  /**\n   * Erases pixes along specified path\n   */\n  public buildTempEraseLine = () => {\n    let rawContext = this.rawCanvas.getContext('2d');\n    let i = 1;\n    let bgContext;\n\n    if (rawContext) {\n      rawContext.globalCompositeOperation = 'destination-out';\n      rawContext.lineCap = 'round';\n      rawContext.strokeStyle = `rgba(0,0,0,1)`;\n      rawContext.lineWidth = this.lineWidth;\n      rawContext.beginPath();\n      rawContext.moveTo(this.coordinates[0].x, this.coordinates[0].y);\n\n      if (this.hasBackground && this.hasBgPermission) {\n        bgContext = this.bgRawCanvas.getContext('2d');\n        bgContext.globalCompositeOperation = 'destination-out';\n        bgContext.lineCap = 'round';\n        bgContext.strokeStyle = `rgba(0,0,0,1)`;\n        bgContext.lineWidth = this.lineWidth;\n        bgContext.beginPath();\n        bgContext.moveTo(this.coordinates[0].x, this.coordinates[0].y);\n      }\n\n      for (i; i < this.coordinates.length; i++) {\n        rawContext.lineTo(this.coordinates[i - 1].x, this.coordinates[i - 1].y);\n        rawContext.strokeStyle = `rgba(0,0,0,1)`;\n        rawContext.stroke();\n        rawContext.beginPath();\n        rawContext.moveTo(this.coordinates[i].x, this.coordinates[i].y);\n\n        if (this.hasBackground && this.hasBgPermission) {\n          bgContext.lineTo(this.coordinates[i - 1].x, this.coordinates[i - 1].y);\n          bgContext.strokeStyle = `rgba(0,0,0,1)`;\n          bgContext.stroke();\n          bgContext.beginPath();\n          bgContext.moveTo(this.coordinates[i].x, this.coordinates[i].y);\n        }\n\n        // Remove most rendered points. Leave a segment of rendered points\n        // for a smoother path.\n        if (this.coordinates.length > 4) {\n          this.coordinates.shift();\n        }\n      }\n    }\n  };\n\n  /**\n   * Moves owned objects to temporary canvas for partial erasing.\n   */\n  private moveSelfToTemp = () => {\n    let objects: ICanvasObject[] = [];\n\n    this.canvas.getObjects().forEach((o: ICanvasObject) => {\n      if (this.isOwned(this.id, o.id as string)) {\n        this.hasSelfObjects = true;\n        this.tempCanvas.add(o);\n        objects.push(o);\n        o.set({ isActiveErase: true });\n        this.canvas.remove(o);\n      }\n    });\n\n    this.canvas.renderAll();\n    this.tempCanvas.renderAll();\n  };\n\n  private loadFromJSON = (\n    objects: ICanvasObject[],\n    backgroundColor?: string | Pattern | undefined\n  ): Promise<void> =>\n    new Promise((resolve) => {\n      let mapped = JSON.stringify({ objects: objects.map((o: ICanvasObject) => ({ ...o, fromJSON: true })) });\n      this.canvas.loadFromJSON(mapped, () => {\n        if (backgroundColor) {\n          this.canvas.backgroundColor = backgroundColor;\n        }\n\n        resolve();\n      });\n    });\n\n  /**\n   * Group self owned objects\n   */\n  private groupObjects = () => {\n    this.canvas\n      .getObjects()\n      .forEach((o: TypedShape | TypedPolygon | TypedGroup | IPathTarget) => {\n        if (this.isOwned(this.id, o.id as string)) {\n          (o as TypedShape).set({ selectable: true, evented: true });\n\n          if ((o as TypedGroup)._objects && !(o as ICanvasBrush).basePath) {\n            (o as TypedGroup).toActiveSelection();\n            this.canvas.discardActiveObject();\n          }\n        }\n      });\n  }\n\n  private backgroundToPermanent = async (): Promise<void> => {\n    return new Promise((resolve) => {\n      const dataURL = this.bgRawCanvas.toDataURL();\n\n      fabric.Image.fromURL(dataURL, (image) => {\n        this.bgRawCanvas.remove();\n        this.canvas.setBackgroundImage(image, this.canvas.renderAll.bind(this.canvas), {\n          id: this.backgroundId\n        } as IImageOptions);\n        resolve();\n      });\n    });\n  }\n\n  /**\n   * Moves objects from temporary canvas to permanent canvas.\n   */\n  private moveSelfToPermanent = async (id?: string | null, destroy?: boolean) => {\n    const backgroundColor: string | Pattern | undefined = this.canvas\n      .backgroundColor;\n    const partiallyErased = this.tempCanvas\n      .getObjects()\n      .filter(\n        (o: TypedShape | IPathTarget) => (o as IPathTarget).isPartialErased\n      );\n\n    this.tempCanvas\n      .setActiveObject(new fabric.Group(partiallyErased))\n      .renderAll();\n\n    let group = this.tempCanvas.getActiveObjects()[0];\n\n    let objects = this.tempCanvas\n      .getObjects()\n      .filter(\n        (o: TypedShape | IPathTarget) => !(o as IPathTarget).isPartialErased\n      );\n\n    objects = objects.map((o: TypedShape | IPathTarget) => {\n      return o.toJSON(CANVAS_OBJECT_PROPS);\n    });\n\n    let foreignObjects = this.canvas\n      .getObjects()\n      .map((o: TypedShape | IPathTarget) => {\n        return o.toJSON(CANVAS_OBJECT_PROPS);\n      });\n\n    objects = [...objects, ...foreignObjects];\n\n    await this.loadFromJSON(objects, backgroundColor);\n\n    this.groupObjects();\n    this.canvas.renderAll();\n\n    if (this.tempCanvas.getContext()) {\n      this.tempCanvas.clear();\n    }\n\n    if (this.hasBackground && this.hasBgPermission && destroy) {\n      await this.backgroundToPermanent();\n      return;\n    }\n\n\n    if (this.hasBackground && this.hasBgPermission && !destroy) {\n      const bgImage = this.bgRawCanvas.toDataURL();\n\n      const payload: ObjectEvent = {\n        type: 'backgroundImage',\n        target: { src: bgImage },\n        id: `${this.id}:${uuidv4()}`,\n      };\n\n      this.eventSerializer.push('added', payload);\n    }\n\n    if (this.hasSelfObjects && (!(this.hasBackground && this.hasBgPermission) || (this.hasBackground && this.hasBgPermission && !destroy))) {\n      group.cloneAsImage((image: TypedShape) => {\n        image.set({\n          top: group.top,\n          left: group.left,\n          id: id || this.generateId(),\n        });\n\n        this.canvas.add(image);\n        image.bringToFront();\n        this.canvas.renderAll();\n        image.bringToFront();\n      });\n    }\n  };\n\n  /**\n   * Destroys temporary canvas.\n   */\n  public destroy = () => {\n    if (this.tempCanvas.getObjects().length) {\n      this.moveSelfToPermanent();\n    }\n\n    if (this.hasBackground && this.hasBgPermission) {\n      this.moveSelfToTemp();\n      this.moveSelfToPermanent(null, true);\n    }\n\n    this.canvas.off('background:modified');\n    this.tempCanvas.off('mouse:move');\n    this.tempCanvas.dispose();\n    this.canvas.getElement().parentNode?.removeChild(this.rawCanvas);\n  };\n\n  /**\n   *\n   * @param selfId Onwer ID\n   * @param objectId Object ID\n   */\n  private isOwned = (selfId: string, objectId: string) => {\n    return objectId?.split(':')[0] === selfId;\n  };\n\n  /**\n   * Generate ID for joined objects.\n   */\n  private generateId = () => {\n    return `${this.id}:${uuidv4()}`;\n  };\n\n  /**\n   * Checks when path is created and merges erase path with existing objects if erased.\n   * @param e Canvas event.\n   */\n  private pathCreated = (e: ICanvasDrawingEvent) => {\n    if (e.path) {\n      let partiallyErased: fabric.Object[] = [];\n      e.path.stroke = '#ffffff';\n      e.path.strokeUniform = true;\n      e.path.globalCompositeOperation = 'destination-out';\n      e.path.evented = false;\n      e.path.selectable = false;\n      e.path.isPartialErased = true;\n      e.path?.bringToFront();\n      e.path.id = this.generateId();\n      e.path.isErasePath = true;\n\n      let joinedIds: string[] = [];\n\n      let objectsToErase = this.tempCanvas.getObjects().length > 1;\n\n      if (objectsToErase) {\n        this.tempCanvas.forEachObject((obj: ICanvasObject) => {\n          const intersect = obj.intersectsWithObject(\n            (e.path as unknown) as TypedShape,\n            true,\n            true\n          );\n\n          if (intersect) {\n            obj.set({\n              isPartialErased: true,\n            });\n\n            joinedIds.push(obj.id as string);\n            partiallyErased.push(obj);\n            this.tempCanvas.remove(obj);\n\n            if (obj.id) {\n              this.eventSerializer.push('removed', { id: obj.id as string });\n            }\n          }\n        });\n      }\n\n      this.tempCanvas\n        .setActiveObject(new fabric.Group(partiallyErased))\n        .renderAll();\n\n      let group = this.tempCanvas.getActiveObjects()[0];\n\n      let id = this.generateId();\n\n      group.cloneAsImage((image: ICanvasObject) => {\n        image.set({\n          top: group.top,\n          left: group.left,\n          id,\n          isPartialErased: true,\n          joinedIds,\n        });\n\n        this.tempCanvas.add(image);\n\n        let payload: ObjectEvent = {\n          id: id as string,\n          type: 'image',\n          target: image.toJSON(CANVAS_OBJECT_PROPS) as ICanvasObject,\n        };\n\n        this.updateState(payload);\n        this.eventSerializer.push('added', payload);\n      });\n\n      if (this.hasBackground && this.hasBgPermission) {\n        const payloadBg = {\n          id: this.backgroundId,\n          target: {\n            strategy: 'allowClearMyself',\n            isBackgroundImage: true,\n          },\n        };\n\n        this.eventSerializer.push('removed', payloadBg as ObjectEvent);\n      }\n\n      this.tempCanvas.renderAll();\n      this.moveSelfToPermanent(id);\n    }\n  };\n\n  /**\n   * Updates undo / redo state.\n   * @param eventPayload Event to store in state\n   */\n  private updateState = (eventPayload: ObjectEvent) => {\n    let payload = [\n      ...this.canvas.getObjects()\n    ];\n\n    let tempCanvasObjects = this.tempCanvas.getObjects();\n    let nonErasePathObjects = tempCanvasObjects.filter((path: any) => !path.isErasePath);\n\n    // @ts-ignore\n    if (nonErasePathObjects.length > 1 || (nonErasePathObjects.length === 1 && nonErasePathObjects[0].joinedIds?.length)) {\n      payload = [\n        ...payload,\n        ...this.tempCanvas.getObjects(),\n      ];\n    }\n\n    const eventData = { event: eventPayload, type: 'added' };\n\n    let statePayload = {\n      type: SET,\n      payload,\n      canvasId: this.id,\n      event: (eventData as unknown) as IUndoRedoEvent,\n    };\n\n    if (this.hasBackground && this.hasBgPermission) {\n      const bgImage = this.bgRawCanvas.toDataURL();\n      let background = {\n        ...(this.backgroundImage?.toJSON(CANVAS_OBJECT_PROPS)),\n        backgroundImageEditable: true,\n        src: bgImage,\n        scaleX: 1,\n        scaleY: 1,\n      }\n\n      // @ts-ignore - linter ignoring optinonal props.\n      statePayload = { ...statePayload, background: background } as CanvasAction;\n    };\n\n    this.undoRedoDispatch(statePayload);\n  };\n}\n","import { useContext } from 'react';\nimport { ICanvasObject } from '../../../interfaces/objects/canvas-object';\nimport {\n  ObjectType,\n  ObjectEvent,\n} from '../event-serializer/PaintEventSerializer';\nimport { useSharedEventSerializer } from '../SharedEventSerializerProvider';\nimport { WhiteboardContext } from '../WhiteboardContext';\n\n/**\n * Handles the logic for penColor and lineWidth synchronization actions\n * @param {string} userId - User that is generating that action.\n */\nexport const useSynchronization = (userId: string) => {\n  // Getting context variables\n  const { isLocalObject, lineWidth } = useContext(WhiteboardContext);\n\n  // Getting event serializer for synchronize objects\n  const {\n    state: { eventSerializer },\n  } = useSharedEventSerializer();\n\n  /**\n   * Changes stroke property in the given object on remote whiteboards\n   * @param {ICanvasObject} obj - Object to change stroke property\n   */\n  const changePenColorSync = (obj: ICanvasObject) => {\n    const type = obj.name ? 'shape' : (obj.get('type') as ObjectType);\n\n    if (obj.id && isLocalObject(obj.id, userId) && type !== 'textbox') {\n      const target = { stroke: obj.stroke };\n      const payload: ObjectEvent = {\n        type,\n        target: target as ICanvasObject,\n        id: obj.id,\n      };\n\n      eventSerializer?.push('colorChanged', payload);\n    }\n  };\n\n  /**\n   * Changes strokeWidth property in the given object on remote whiteboards\n   * @param {ICanvasObject} obj - Object to change strokeWidth property\n   */\n  const changeLineWidthSync = (obj: ICanvasObject) => {\n    const validTypes: string[] = [\n      'rect',\n      'ellipse',\n      'triangle',\n      'polygon',\n      'path',\n    ];\n\n    const type: ObjectType = obj.get('type') as ObjectType;\n\n    if (obj.id && isLocalObject(obj.id, userId) && validTypes.includes(type)) {\n      const target = { strokeWidth: lineWidth };\n      const payload: ObjectEvent = {\n        type,\n        target: target as ICanvasObject,\n        id: obj.id,\n      };\n\n      eventSerializer?.push('lineWidthChanged', payload);\n    }\n  };\n\n  return { changePenColorSync, changeLineWidthSync };\n};\n","export const arrowPoints = {\n  width: 409.7,\n  height: 442.88,\n  points: [\n    { x: 421.9738757134825, y: 196.70987572491168 },\n    { x: 407.834244000769, y: 182.57032008693906 },\n    { x: 393.6965767313491, y: 168.43272888169088 },\n    { x: 379.5532381284964, y: 154.2894663735229 },\n    { x: 365.40595304038783, y: 140.14225740133242 },\n    { x: 351.2610887107064, y: 125.99746917454468 },\n    { x: 337.1172549228348, y: 111.85371148402207 },\n    { x: 322.9809654786668, y: 97.71749809661272 },\n    { x: 308.8364247089637, y: 83.57303342806244 },\n    { x: 294.6966087783445, y: 69.43329357317529 },\n    { x: 280.556463690546, y: 55.29322456287976 },\n    { x: 266.4130104285422, y: 41.14984739617767 },\n    { x: 252.27004129672144, y: 27.006954357053974 },\n    { x: 238.12715231015684, y: 12.864141462755187 },\n    { x: 221.73327159660136, y: 1.7943556067127502 },\n    { x: 201.98765029925104, y: 0.8819208342432976 },\n    { x: 184.76336655467318, y: 10.522035200681886 },\n    { x: 170.6169234698962, y: 24.66572185617592 },\n    { x: 157.1707406203281, y: 39.39562030153163 },\n    { x: 152.1761683067966, y: 58.48239694830658 },\n    { x: 157.73223488307931, y: 77.39550980068184 },\n    { x: 171.3497992734909, y: 92.00906856441497 },\n    { x: 185.4679651524176, y: 106.17516528992958 },\n    { x: 199.59272975975088, y: 120.347883146381 },\n    { x: 213.70418688480066, y: 134.50724834195447 },\n    { x: 227.82442238538243, y: 148.67542171544173 },\n    { x: 241.93876921284198, y: 162.83768642389774 },\n    { x: 233.39069804231917, y: 167.591 },\n    { x: 213.38645805880773, y: 167.591 },\n    { x: 193.38905990862938, y: 167.591 },\n    { x: 173.38208895078844, y: 167.591 },\n    { x: 153.38458133482396, y: 167.591 },\n    { x: 133.38125050962466, y: 167.59100000000004 },\n    { x: 113.37586071430738, y: 167.59100000000004 },\n    { x: 93.37465416730595, y: 167.591 },\n    { x: 73.38768441373348, y: 167.591 },\n    { x: 53.387280811495344, y: 167.591 },\n    { x: 33.63303642826434, y: 169.68605985145925 },\n    { x: 18.51895599365234, y: 182.28913134098053 },\n    { x: 12.372561812400816, y: 201.07911378954537 },\n    { x: 12.274999999999999, y: 221.07070913640035 },\n    { x: 12.276495982707477, y: 241.0644963197885 },\n    { x: 17.127776158085673, y: 260.2501860621179 },\n    { x: 31.18638092001411, y: 274.06183482968606 },\n    { x: 50.720750152467254, y: 277.22200000000004 },\n    { x: 70.7141005194683, y: 277.222 },\n    { x: 90.72161658474974, y: 277.222 },\n    { x: 110.70876839256088, y: 277.222 },\n    { x: 130.716672736133, y: 277.222 },\n    { x: 150.71832817961504, y: 277.222 },\n    { x: 170.72021991037508, y: 277.222 },\n    { x: 190.71707079039047, y: 277.222 },\n    { x: 210.7091339298326, y: 277.222 },\n    { x: 230.71120149462502, y: 277.222 },\n    { x: 243.8167084987862, y: 280.0774962990549 },\n    { x: 229.6681667499704, y: 294.22705286222657 },\n    { x: 215.53794676402978, y: 308.3582863483813 },\n    { x: 201.38783952799452, y: 322.50940851105815 },\n    { x: 187.24370325181624, y: 336.6545592856065 },\n    { x: 173.11038573271037, y: 350.7888905270994 },\n    { x: 159.25517314008786, y: 365.19942042932695 },\n    { x: 152.29518253289166, y: 383.6584934377894 },\n    { x: 155.8699758360833, y: 403.07445355249195 },\n    { x: 168.57564705138816, y: 418.3949065276878 },\n    { x: 182.71504121772946, y: 432.53496107393505 },\n    { x: 199.3530383869624, y: 443.22724196312856 },\n    { x: 219.1261336062327, y: 443.7639935536729 },\n    { x: 236.31893487834932, y: 434.04106512165066 },\n    { x: 250.46171011601945, y: 419.89828988398045 },\n    { x: 264.6033995572355, y: 405.7566004427645 },\n    { x: 278.749956050992, y: 391.610043949008 },\n    { x: 292.8842537918091, y: 377.4757462081909 },\n    { x: 307.0307897683178, y: 363.3292102316822 },\n    { x: 321.1708154795949, y: 349.18918452040504 },\n    { x: 335.3157892573792, y: 335.04421074262075 },\n    { x: 349.45608972413214, y: 320.90391027586793 },\n    { x: 363.5948150653568, y: 306.7651849346432 },\n    { x: 377.73431046475946, y: 292.62568953524055 },\n    { x: 391.8783071010856, y: 278.4816928989144 },\n    { x: 406.0258785346708, y: 264.33412146532913 },\n    { x: 420.1633574971687, y: 250.19664250283128 },\n    { x: 430.951238835671, y: 233.63153430165625 },\n    { x: 431.6657546847659, y: 213.84641971198667 },\n    { x: 421.9738757134825, y: 196.70987572491168 },\n  ],\n};\n","export const chatBubblePoints = {\n  width: 57.8,\n  height: 54.89,\n  points: [\n    { x: 28.994134901184065, y: 1.5000005203770215 },\n    { x: 24.02293495910987, y: 1.881462248758995 },\n    { x: 19.15398595866561, y: 3.0369586675697935 },\n    { x: 14.546191261615604, y: 4.954578796998248 },\n    { x: 10.319471606761219, y: 7.612212537485175 },\n    { x: 6.6222734375000005, y: 10.961753173828125 },\n    { x: 3.6055360175669198, y: 14.934741375013255 },\n    { x: 1.4255310640633108, y: 19.42610849818867 },\n    { x: 0.221607127904892, y: 24.26999852667004 },\n    { x: 0.06617632238194346, y: 29.268214196446355 },\n    { x: 0.9642016839683056, y: 34.16619486873597 },\n    { x: 2.8740643526874488, y: 38.789025381422604 },\n    { x: 4.661655247729271, y: 43.21404043416027 },\n    { x: 3.860898216810077, y: 48.152899327498865 },\n    { x: 2.3446923969350753, y: 52.90612037773896 },\n    { x: 0.678076171875, y: 56.3929557800293 },\n    { x: 5.561442984312773, y: 55.358433207810855 },\n    { x: 10.350618209838867, y: 53.92590129518509 },\n    { x: 14.962283277511597, y: 51.98562750965357 },\n    { x: 19.224313720703122, y: 49.38665698242187 },\n    { x: 23.323874755859375, y: 46.545966796875 },\n    { x: 22.48035281944275, y: 49.62853184270858 },\n    { x: 19.863082893446087, y: 52.171369962498545 },\n    { x: 24.75338335044682, y: 53.219091020390394 },\n    { x: 29.725170469846578, y: 53.492029379465265 },\n    { x: 34.71159083023667, y: 52.9958375900751 },\n    { x: 39.53047682521864, y: 51.732707707284135 },\n    { x: 44.09345343918726, y: 49.7052069342687 },\n    { x: 48.256199218127875, y: 46.94104332049319 },\n    { x: 51.86833558678627, y: 43.49042568352073 },\n    { x: 54.777149542551484, y: 39.42385560672555 },\n    { x: 56.81909304512665, y: 34.86778670204163 },\n    { x: 57.86827092170715, y: 29.994253430068493 },\n    { x: 57.86827092170715, y: 25.005746569931507 },\n    { x: 56.81909304512665, y: 20.13221329795837 },\n    { x: 54.777149542551484, y: 15.576144393274443 },\n    { x: 51.86833558678627, y: 11.509574316479265 },\n    { x: 48.256199218127875, y: 8.05895667950681 },\n    { x: 44.11210594773293, y: 5.305014874376356 },\n    { x: 39.54078412567033, y: 3.2708974327664326 },\n    { x: 34.71159083023667, y: 2.004162409924902 },\n    { x: 29.736831470962148, y: 1.5082292954869772 },\n    { x: 28.994134901184065, y: 1.5000005203770215 },\n  ],\n};\n","export const circlePoints = {\n  width: 150,\n  height: 150,\n  points: [\n    { x: 25.00000017462085, y: 100.00528573909124 },\n    { x: 25.636429849646447, y: 109.97749890318029 },\n    { x: 27.570196097576627, y: 119.77371717937444 },\n    { x: 30.81108232763654, y: 129.23586360559528 },\n    { x: 35.304912541823796, y: 138.15959359471424 },\n    { x: 40.963657659767705, y: 146.38894309518247 },\n    { x: 47.67879809078295, y: 153.793234593948 },\n    { x: 55.30526322922924, y: 160.23995468235603 },\n    { x: 63.724046663264744, y: 165.6437013477312 },\n    { x: 72.76157143060118, y: 169.8970667574918 },\n    { x: 82.28578329067204, y: 172.9321716604216 },\n    { x: 92.11016809604189, y: 174.67587300851966 },\n    { x: 102.10249670349185, y: 175.08496775602467 },\n    { x: 112.04079496433224, y: 174.1350509519644 },\n    { x: 121.76779313849693, y: 171.84167893854243 },\n    { x: 131.10330518065894, y: 168.2653366041124 },\n    { x: 139.89760522081494, y: 163.50755528430878 },\n    { x: 147.98595535293686, y: 157.64192206048997 },\n    { x: 155.2208767049297, y: 150.75306469717898 },\n    { x: 161.4797434876873, y: 142.95682291448023 },\n    { x: 166.64363641064108, y: 134.4040757502707 },\n    { x: 170.62442786717304, y: 125.24597939223392 },\n    { x: 173.35658269457406, y: 115.62301432731437 },\n    { x: 174.7810495440151, y: 105.73489646899199 },\n    { x: 174.8860046307982, y: 95.74847413090808 },\n    { x: 173.69992508647556, y: 85.81910347729814 },\n    { x: 171.20630903168603, y: 76.13950500798435 },\n    { x: 167.42851336020976, y: 66.89780169468465 },\n    { x: 162.43048969190568, y: 58.255955637783494 },\n    { x: 156.30103812859488, y: 50.352368702482984 },\n    { x: 149.18208551803218, y: 43.34293712948776 },\n    { x: 141.2016169578692, y: 37.3277576040534 },\n    { x: 132.4966135998693, y: 32.401058704734034 },\n    { x: 123.24596598041353, y: 28.66139203699905 },\n    { x: 113.56522890732776, y: 26.16591591711899 },\n    { x: 103.6404140198556, y: 24.983983492396366 },\n    { x: 93.65896336094012, y: 25.152866554538242 },\n    { x: 83.78380018220925, y: 26.6789124879745 },\n    { x: 74.20446534056283, y: 29.527731519177898 },\n    { x: 65.07405456795824, y: 33.62476480087308 },\n    { x: 56.575798756442985, y: 38.848828131731246 },\n    { x: 48.830820789114334, y: 45.164031351420284 },\n    { x: 41.995269842157484, y: 52.45426635407685 },\n    { x: 36.18598988532143, y: 60.59469592652174 },\n    { x: 31.51383912819957, y: 69.42692860399555 },\n    { x: 28.05841870775809, y: 78.79515252727538 },\n    { x: 25.87663273797711, y: 88.55665500485973 },\n    { x: 25.014729813698672, y: 98.51064773213142 },\n    { x: 25.00000017462085, y: 100.00528573909124 },\n  ],\n};\n","export const pentagonPoints = {\n  width: 522,\n  height: 504,\n  points: [\n    { x: 507.8011960423737, y: 200.2778580096662 },\n    { x: 491.9078298727004, y: 188.13664860317317 },\n    { x: 476.0138907104923, y: 175.99500147805722 },\n    { x: 460.11940520115274, y: 163.85293698918957 },\n    { x: 444.2257668573088, y: 151.71151966427541 },\n    { x: 428.34202301872676, y: 139.57766091814665 },\n    { x: 412.4470258096253, y: 127.43520553323488 },\n    { x: 396.55538939056237, y: 115.29531751229084 },\n    { x: 380.6574348961103, y: 103.15060300742104 },\n    { x: 364.7599629992823, y: 91.00625716698323 },\n    { x: 348.86918667315746, y: 78.86702618548316 },\n    { x: 332.97900226389646, y: 66.72824737921883 },\n    { x: 317.0897337077497, y: 54.59016820853372 },\n    { x: 301.1924557467687, y: 42.445970518947405 },\n    { x: 285.3035494165589, y: 30.308168058740474 },\n    { x: 269.4019036860832, y: 18.1606337566638 },\n    { x: 251.79320603285356, y: 11.535458191871658 },\n    { x: 235.72866721517497, y: 23.40291567632373 },\n    { x: 219.83740057722287, y: 35.542471733311956 },\n    { x: 203.94255384731434, y: 47.6847626715393 },\n    { x: 188.04916757445395, y: 59.82593794664125 },\n    { x: 172.14937639767624, y: 71.97200601549686 },\n    { x: 156.26879955147473, y: 84.10339599427685 },\n    { x: 140.37452079867583, y: 96.24525304701739 },\n    { x: 124.47426703095749, y: 108.3916744954231 },\n    { x: 108.58744274732841, y: 120.5278369771503 },\n    { x: 92.69419479130197, y: 132.66890659012992 },\n    { x: 76.80051076545193, y: 144.81030932281539 },\n    { x: 60.89627501275762, y: 156.95977266403776 },\n    { x: 45.00979196358155, y: 169.0956744720965 },\n    { x: 29.11898047049977, y: 181.23488283768967 },\n    { x: 13.228853952519852, y: 193.37356794142858 },\n    { x: 0.06634181785582313, y: 207.59067606665195 },\n    { x: 5.405765620498154, y: 226.7572231690178 },\n    { x: 11.710743336122466, y: 245.72389215744903 },\n    { x: 18.02320640802399, y: 264.7130786362147 },\n    { x: 24.33264358978908, y: 283.69316261546294 },\n    { x: 30.639874387349014, y: 302.66660933748875 },\n    { x: 36.94950832128808, y: 321.64728518771983 },\n    { x: 43.259139091773804, y: 340.62795152163295 },\n    { x: 49.56856188414678, y: 359.60799221463196 },\n    { x: 55.8767584352309, y: 378.58434412177405 },\n    { x: 62.18517984085267, y: 397.5613724375854 },\n    { x: 68.49344428085351, y: 416.53792856854386 },\n    { x: 74.80322109612584, y: 435.51903423519525 },\n    { x: 81.11501912159686, y: 454.50622011759435 },\n    { x: 87.42268580432705, y: 473.4809780718107 },\n    { x: 93.72995078043824, y: 492.45452760994436 },\n    { x: 109.38489205549473, y: 501.33600000000007 },\n    { x: 129.38371961597474, y: 501.336 },\n    { x: 149.38086167990534, y: 501.336 },\n    { x: 169.3755812416216, y: 501.33600000000007 },\n    { x: 189.37961735888572, y: 501.33599999999996 },\n    { x: 209.38956876966006, y: 501.33600000000007 },\n    { x: 229.37588938679278, y: 501.336 },\n    { x: 249.3828723629661, y: 501.336 },\n    { x: 269.3831326773589, y: 501.336 },\n    { x: 289.3797804217004, y: 501.336 },\n    { x: 309.3818003365699, y: 501.33600000000007 },\n    { x: 329.3753487106103, y: 501.336 },\n    { x: 349.3746966608359, y: 501.336 },\n    { x: 369.3894485963515, y: 501.336 },\n    { x: 389.3843105093677, y: 501.336 },\n    { x: 409.3748213854348, y: 501.1946713643074 },\n    { x: 420.42980582725437, y: 486.05680656850336 },\n    { x: 426.7354374420477, y: 467.0881705169594 },\n    { x: 433.04836816544247, y: 448.09757724637416 },\n    { x: 439.35377279803265, y: 429.1296240039548 },\n    { x: 445.66421456404305, y: 410.14651802879916 },\n    { x: 451.974614130164, y: 391.16353899958546 },\n    { x: 458.2812599308958, y: 372.19185206826774 },\n    { x: 464.59159976729006, y: 353.2090527183497 },\n    { x: 470.89837925522437, y: 334.2369636284467 },\n    { x: 477.21141244307495, y: 315.2460621237161 },\n    { x: 483.51761041601424, y: 296.27572235045136 },\n    { x: 489.82689195601426, y: 277.2961065736255 },\n    { x: 496.13558496334576, y: 258.3182612240419 },\n    { x: 502.4431862625602, y: 239.3436999568809 },\n    { x: 508.7516021582006, y: 220.36668821622618 },\n    { x: 507.8011960423737, y: 200.2778580096662 },\n  ],\n};\n","export const starPoints = {\n  width: 75,\n  height: 70,\n  points: [\n    { x: 202.0042825708389, y: 222.002251578331 },\n    { x: 206.42223926341532, y: 224.3250095502138 },\n    { x: 210.8549991417136, y: 226.65555035475828 },\n    { x: 215.28421833498427, y: 228.9842296303322 },\n    { x: 219.699290717721, y: 231.305471165061 },\n    { x: 224.1280550422091, y: 233.63391129159743 },\n    { x: 224.92861398417875, y: 230.96513178614342 },\n    { x: 224.08416665770483, y: 226.04119515932535 },\n    { x: 223.2396919414997, y: 221.1170988241434 },\n    { x: 222.39560266258334, y: 216.19524995748208 },\n    { x: 221.54926333815231, y: 211.26028117063828 },\n    { x: 222.35851978375018, y: 206.87623288415372 },\n    { x: 225.94411674485914, y: 203.3811194171477 },\n    { x: 229.5300924459696, y: 199.885636767745 },\n    { x: 233.10771115948842, y: 196.3983002151267 },\n    { x: 236.6852117071897, y: 192.91107884638012 },\n    { x: 239.72848390933876, y: 189.59345035569368 },\n    { x: 234.78581205359103, y: 188.8753470376879 },\n    { x: 229.84152344046908, y: 188.1570088267196 },\n    { x: 224.88457853300824, y: 187.43683182749595 },\n    { x: 219.9355072758221, y: 186.71779876308165 },\n    { x: 214.98857183513044, y: 185.9990760038942 },\n    { x: 212.0965861465335, y: 182.4576966664195 },\n    { x: 209.88221614063625, y: 177.97094151666852 },\n    { x: 207.67138940095901, y: 173.49136573076248 },\n    { x: 205.45567671551834, y: 169.00189004454296 },\n    { x: 203.24696819051354, y: 164.52660618390888 },\n    { x: 201.02795549821107, y: 163.9695559741929 },\n    { x: 198.81865710765123, y: 168.4460350200534 },\n    { x: 196.60369899892805, y: 172.93398178339004 },\n    { x: 194.396996120275, y: 177.40520180461465 },\n    { x: 192.17867817864845, y: 181.89995625932235 },\n    { x: 189.6201565826237, y: 185.91063600437343 },\n    { x: 184.6694154815674, y: 186.6299116744995 },\n    { x: 179.72284731325553, y: 187.34858107398145 },\n    { x: 174.78229687320396, y: 188.0663761790015 },\n    { x: 169.8243741925396, y: 188.78669523543678 },\n    { x: 164.89353265690804, y: 189.50307976806164 },\n    { x: 166.86758581024222, y: 192.47516163754278 },\n    { x: 170.45074926941098, y: 195.96790301267805 },\n    { x: 174.02547242438794, y: 199.45241707694532 },\n    { x: 177.60461429538393, y: 202.94123834975622 },\n    { x: 181.1895504986793, y: 206.435707733348 },\n    { x: 182.5565917007029, y: 210.64304491846264 },\n    { x: 181.71034999139235, y: 215.5774445156697 },\n    { x: 180.86547606253626, y: 220.50386864292622 },\n    { x: 180.02164519318939, y: 225.42421073432266 },\n    { x: 179.1758219487928, y: 230.3561702803243 },\n    { x: 179.32576893770695, y: 233.92106546556948 },\n    { x: 183.7360639747698, y: 231.602335638972 },\n    { x: 188.17058121379813, y: 229.27087089516573 },\n    { x: 192.5895601910504, y: 226.94757545312518 },\n    { x: 197.0139216079712, y: 224.62145017242432 },\n    { x: 201.44201542319357, y: 222.29336256875098 },\n    { x: 202.0042825708389, y: 222.002251578331 },\n  ],\n};\n","export const trianglePoints = {\n  width: 521,\n  height: 445,\n  points: [\n    { x: 507.51842996361853, y: 427.38971660222114 },\n    { x: 497.2283761023697, y: 410.23961157986446 },\n    { x: 486.94453159531827, y: 393.0998554903747 },\n    { x: 476.6523464277816, y: 375.9461982877123 },\n    { x: 466.35888181967414, y: 358.79040868220204 },\n    { x: 456.07318758446866, y: 341.64756970971337 },\n    { x: 445.7779504769482, y: 324.48882593588723 },\n    { x: 435.4925327836444, y: 307.34644786697805 },\n    { x: 425.20549157951496, y: 290.20136394428624 },\n    { x: 414.9134088536809, y: 273.0478774779467 },\n    { x: 404.61993730067223, y: 255.89207629759076 },\n    { x: 394.33657592584365, y: 238.75312542918854 },\n    { x: 384.0383144999824, y: 221.5893411203112 },\n    { x: 373.7519350994537, y: 204.4453602046017 },\n    { x: 363.4595539954304, y: 187.2913764408378 },\n    { x: 353.1677823529126, y: 170.13840844715307 },\n    { x: 342.87801486197964, y: 152.98878070908071 },\n    { x: 332.5949490122489, y: 135.85032238294627 },\n    { x: 322.30663234764245, y: 118.7031126909021 },\n    { x: 312.0090246808833, y: 101.54041798149746 },\n    { x: 301.71783586605824, y: 84.38842136816466 },\n    { x: 291.43547574400486, y: 67.25113925587203 },\n    { x: 281.02637661382715, y: 50.16155991697311 },\n    { x: 264.98206050868583, y: 38.829463653087615 },\n    { x: 245.3264288107058, y: 39.38557426536083 },\n    { x: 229.95931520655563, y: 51.63146766471863 },\n    { x: 219.65479462597102, y: 68.7657618013584 },\n    { x: 209.36403914313757, y: 85.9171124677131 },\n    { x: 199.07610252535105, y: 103.0637650005848 },\n    { x: 188.78539834872367, y: 120.21503015613976 },\n    { x: 178.49425531960955, y: 137.36702673640937 },\n    { x: 168.20494947925354, y: 154.51596131907493 },\n    { x: 157.91532220507804, y: 171.6654316276319 },\n    { x: 147.62592545257993, y: 188.81451773134296 },\n    { x: 137.33540538802743, y: 205.96547603180238 },\n    { x: 127.04864104013645, y: 223.11017477108834 },\n    { x: 116.7570975010253, y: 240.26283887158178 },\n    { x: 106.46670665242613, y: 257.4135818109696 },\n    { x: 96.17329633882483, y: 274.5693572188835 },\n    { x: 85.87897803575913, y: 291.72664595064725 },\n    { x: 75.58909328460167, y: 308.87654538979757 },\n    { x: 65.30291998850878, y: 326.02025903749643 },\n    { x: 55.01314351270461, y: 343.1699780167616 },\n    { x: 44.72900511818216, y: 360.3103001437442 },\n    { x: 34.43375816853326, y: 377.4691366280729 },\n    { x: 24.145089986690646, y: 394.61700844087807 },\n    { x: 13.854883272662757, y: 411.767444487676 },\n    { x: 3.6089069967176917, y: 428.9365619514846 },\n    { x: 0.41115631340432457, y: 448.3277470276654 },\n    { x: 9.515116414632487, y: 465.7568636295907 },\n    { x: 27.2388375612485, y: 474.2406814480908 },\n    { x: 47.22301495708959, y: 474.47399999999993 },\n    { x: 67.2245469012414, y: 474.47399999999993 },\n    { x: 87.22604122611317, y: 474.474 },\n    { x: 107.23405137573945, y: 474.474 },\n    { x: 127.23344428991126, y: 474.474 },\n    { x: 147.2252162362622, y: 474.474 },\n    { x: 167.23162004072637, y: 474.47400000000005 },\n    { x: 187.22538636647676, y: 474.474 },\n    { x: 207.22643859162386, y: 474.474 },\n    { x: 227.22777574459548, y: 474.474 },\n    { x: 247.23187295153176, y: 474.474 },\n    { x: 267.23639391772156, y: 474.474 },\n    { x: 287.22302055568883, y: 474.474 },\n    { x: 307.22915051059437, y: 474.47399999999993 },\n    { x: 327.2337843787738, y: 474.474 },\n    { x: 347.22522718570195, y: 474.47400000000005 },\n    { x: 367.2343636938018, y: 474.47400000000005 },\n    { x: 387.23739300430094, y: 474.474 },\n    { x: 407.23121040011796, y: 474.474 },\n    { x: 427.2316594949386, y: 474.474 },\n    { x: 447.22396214027225, y: 474.474 },\n    { x: 467.2224343721759, y: 474.474 },\n    { x: 487.1909668553422, y: 473.84900319218264 },\n    { x: 504.17219042655097, y: 463.9789213027395 },\n    { x: 511.8923586242521, y: 445.89373775921393 },\n    { x: 507.51842996361853, y: 427.38971660222114 },\n  ],\n};\n","export const hexagonPoints = {\n  width: 498,\n  height: 449,\n  points: [\n    { x: 477.0385042309761, y: 219.197214176178 },\n    { x: 464.54073804583345, y: 197.5534408485994 },\n    { x: 452.03621964155946, y: 175.89797395129224 },\n    { x: 439.5355722941756, y: 154.24921099424364 },\n    { x: 427.0337372215895, y: 132.59839112120903 },\n    { x: 414.5334686991638, y: 110.9502842175225 },\n    { x: 402.03543755766003, y: 89.30605203551053 },\n    { x: 389.53642602094914, y: 67.66012199395149 },\n    { x: 376.9377712247167, y: 46.056114800177745 },\n    { x: 358.03308920027314, y: 30.20908491733111 },\n    { x: 333.56960429349436, y: 26.384999999999998 },\n    { x: 308.5738289041083, y: 26.384999999999994 },\n    { x: 283.56958640165976, y: 26.384999999999998 },\n    { x: 258.57325187097064, y: 26.384999999999994 },\n    { x: 233.5613009832561, y: 26.384999999999998 },\n    { x: 208.5635327905414, y: 26.384999999999998 },\n    { x: 183.57581097699563, y: 26.384999999999998 },\n    { x: 158.57574118011468, y: 26.384999999999998 },\n    { x: 133.64621555020395, y: 27.385090767890446 },\n    { x: 111.90037256220343, y: 39.06804784751101 },\n    { x: 98.03903688447018, y: 59.75081266036712 },\n    { x: 85.53593509218345, y: 81.40514572728705 },\n    { x: 73.03369676950534, y: 103.05798333661508 },\n    { x: 60.538241037519334, y: 124.69907406262219 },\n    { x: 48.031210128078236, y: 146.36021203387168 },\n    { x: 35.529528761611445, y: 168.01208504133496 },\n    { x: 23.037440879688887, y: 189.64734293096234 },\n    { x: 10.53070762874076, y: 211.30796538244294 },\n    { x: 0.6241068694591521, y: 234.06169519260013 },\n    { x: 3.40267030787468, y: 258.5863450381928 },\n    { x: 15.56874075994402, y: 280.4169513967128 },\n    { x: 28.067794709831478, y: 302.0661780808717 },\n    { x: 40.56386719239743, y: 323.7102406572387 },\n    { x: 53.06616776792341, y: 345.36509072175016 },\n    { x: 65.56238759599321, y: 367.0094085107297 },\n    { x: 78.06316868116906, y: 388.66162671276857 },\n    { x: 90.56065381834803, y: 410.3081361047158 },\n    { x: 103.05990609788941, y: 431.9577063095646 },\n    { x: 119.8278481526375, y: 450.10579344367983 },\n    { x: 143.62350993873224, y: 456.629 },\n    { x: 168.60895211048194, y: 456.62899999999996 },\n    { x: 193.6264299288797, y: 456.62899999999996 },\n    { x: 218.6145376434326, y: 456.629 },\n    { x: 243.61326288406553, y: 456.629 },\n    { x: 268.61117299123157, y: 456.629 },\n    { x: 293.6099290861439, y: 456.629 },\n    { x: 318.6115614615553, y: 456.629 },\n    { x: 343.605513631111, y: 456.4807334315512 },\n    { x: 366.69353883993625, y: 447.7276704297364 },\n    { x: 382.05686117774246, y: 428.30387218479177 },\n    { x: 394.5590087902622, y: 406.65082645180007 },\n    { x: 407.05531468021866, y: 385.0078982673884 },\n    { x: 419.5583723168204, y: 363.3532764217419 },\n    { x: 432.0589214846382, y: 341.7029991088093 },\n    { x: 444.56180838366555, y: 320.0486729714379 },\n    { x: 457.05701396014285, y: 298.4076504706594 },\n    { x: 469.560999802785, y: 276.75142102218604 },\n    { x: 481.04452877807614, y: 254.6063047133386 },\n    { x: 481.49120727348327, y: 229.9433287306852 },\n    { x: 477.0385042309761, y: 219.197214176178 },\n  ],\n};\n","export const rectanglePoints = {\n  width: 570,\n  height: 570,\n  points: [\n    { x: 550.1819286310673, y: 0 },\n    { x: 510.17886327090093, y: 0 },\n    { x: 470.1923963260574, y: 0 },\n    { x: 430.1860753634669, y: 0 },\n    { x: 390.1866554616305, y: 0 },\n    { x: 350.18589939402545, y: 0 },\n    { x: 310.1870155697501, y: 0 },\n    { x: 270.19051883964613, y: 0 },\n    { x: 230.1865324914566, y: 0 },\n    { x: 190.18218159238188, y: 0 },\n    { x: 150.177307127197, y: 0 },\n    { x: 110.17800366618492, y: 0 },\n    { x: 70.17849627851362, y: 0 },\n    { x: 30.189766268011184, y: 0 },\n    { x: 0.027047559211612678, y: 17.950331560423017 },\n    { x: 0, y: 57.95281293778269 },\n    { x: 0, y: 97.96260045371133 },\n    { x: 0, y: 137.95982361339765 },\n    { x: 0, y: 177.9494657277377 },\n    { x: 0, y: 217.95780474383434 },\n    { x: 0, y: 257.9560660776088 },\n    { x: 0, y: 297.94940238780464 },\n    { x: 0, y: 337.9471934038103 },\n    { x: 0, y: 377.9467170903882 },\n    { x: 0, y: 417.9587851524873 },\n    { x: 0, y: 457.9606405474507 },\n    { x: 0, y: 497.9513559803095 },\n    { x: 0, y: 537.9511564168674 },\n    { x: 16.942758919159882, y: 569.0527339356187 },\n    { x: 56.93594807187008, y: 569.16 },\n    { x: 96.9267443984798, y: 569.16 },\n    { x: 136.92787287515526, y: 569.16 },\n    { x: 176.9384976789578, y: 569.16 },\n    { x: 216.94243548037036, y: 569.1600000000001 },\n    { x: 256.92739832783803, y: 569.16 },\n    { x: 296.92914783752246, y: 569.16 },\n    { x: 336.9440719624174, y: 569.16 },\n    { x: 376.9371405488048, y: 569.16 },\n    { x: 416.932490977139, y: 569.16 },\n    { x: 456.93521887537156, y: 569.16 },\n    { x: 496.94347369957484, y: 569.1599999999999 },\n    { x: 536.9408124548013, y: 569.16 },\n    { x: 568.9183467255737, y: 553.2242735804413 },\n    { x: 569.16, y: 513.2425290499529 },\n    { x: 569.16, y: 473.24622153490276 },\n    { x: 569.16, y: 433.24062786941073 },\n    { x: 569.16, y: 393.24200865435233 },\n    { x: 569.16, y: 353.24378286565826 },\n    { x: 569.16, y: 313.24880131550015 },\n    { x: 569.16, y: 273.2512690674656 },\n    { x: 569.16, y: 233.24365037636133 },\n    { x: 569.16, y: 193.2337934273525 },\n    { x: 569.16, y: 153.23471518568243 },\n    { x: 569.16, y: 113.23513957809081 },\n    { x: 569.16, y: 73.2322690743899 },\n    { x: 569.16, y: 33.249391241743695 },\n    { x: 550.1819286310673, y: 0 },\n  ],\n};\n","import { arrowPoints } from './arrowPoints';\nimport { chatBubblePoints } from './chatBubblePoints';\nimport { circlePoints } from './circlePoints';\nimport { pentagonPoints } from './pentagonPoints';\nimport { starPoints } from './starPoints';\nimport { trianglePoints } from './trianglePoints';\nimport { hexagonPoints } from './hexagonPoints';\nimport { rectanglePoints } from './rectanglePoints';\n\nexport const shapePoints = {\n  arrow: arrowPoints,\n  chatBubble: chatBubblePoints,\n  circle: circlePoints,\n  pentagon: pentagonPoints,\n  star: starPoints,\n  triangle: trianglePoints,\n  hexagon: hexagonPoints,\n  rectangle: rectanglePoints,\n};\n","import { fabric } from 'fabric';\nimport tinycolor from 'tinycolor2';\nimport { ICoordinate } from '../../../../interfaces/brushes/coordinate';\nimport { IClearRect } from '../../../../interfaces/brushes/clear-rects';\nimport { v4 as uuidv4 } from 'uuid';\nimport { ICanvasBrush } from '../../../../interfaces/brushes/canvas-brush';\n\ninterface IClearRectDimensions {\n  width: number;\n  height: number;\n}\n\ntype IBrushStyle = 'chalk' | 'crayon';\n\nexport class ChalkBrush extends fabric.PencilBrush {\n  /**\n   * Canvas to print the path\n   */\n  private canvas: fabric.Canvas;\n\n  /**\n   * Temporal canvas for draw the path and convert it in image\n   */\n  private tempCanvas: fabric.Canvas;\n\n  /**\n   * Context for original canvas\n   */\n  private ctx: CanvasRenderingContext2D;\n\n  /**\n   * Context for temporal canvas\n   */\n  private tempContext: CanvasRenderingContext2D;\n\n  /**\n   * User that will draw\n   */\n  private userId: string;\n\n  /**\n   * Flag to know if is possible draw or not.\n   * When mouse pressed the value is true and when released is false.\n   */\n  private isDrawing: boolean;\n\n  /**\n   * Last registered point in the mouse move event\n   */\n  private lastPoint: ICoordinate;\n\n  /**\n   * Registered points to follow them and create the path\n   */\n  private points: ICoordinate[];\n\n  /**\n   * Registered clear rects used to create the chalk/crayon effect\n   */\n  private clearRects: IClearRect[];\n\n  /**\n   * Style of the brush (chalk/crayon)\n   */\n  private style: IBrushStyle;\n\n  /**\n   * Brightness in path stroke\n   */\n  private brightness: number;\n\n  /**\n   * Dimensions for the generated clear rects\n   */\n  private clearRectDimensions: IClearRectDimensions;\n\n  /**\n   * Class Constructor\n   * @param {fabric.Canvas} canvas - Canvas to print the path\n   * @param {string} userId - Id of the user that will draw\n   * @param {IBrushStyle} style - Style for the brush (chalk/crayon)\n   */\n  constructor(canvas: fabric.Canvas, userId: string, style: IBrushStyle) {\n    super();\n    this.canvas = canvas;\n    this.userId = userId;\n    this.style = style;\n    this.brightness = style === 'chalk' ? 20 : 0;\n    this.clearRectDimensions =\n      style === 'chalk' ? { width: 3, height: 1 } : { width: 1, height: 1 };\n\n    // Temporal canvas creation\n    this.tempCanvas = new fabric.Canvas(document.createElement('canvas'));\n    this.tempCanvas.setWidth(canvas.getWidth() * 2);\n    this.tempCanvas.setHeight(canvas.getHeight() * 2);\n\n    // Contexts creations\n    this.ctx = this.canvas.getContext();\n    this.tempContext = this.tempCanvas.getContext();\n\n    // Drawing variables initialization\n    this.isDrawing = false;\n    this.lastPoint = { x: 0, y: 0 };\n    this.points = [];\n    this.clearRects = [];\n  }\n\n  /**\n   * Method used to draw in both contexts, save the points for the path\n   * and save clear rects to generate the chalk/crayon path\n   * @param {ICoordinate} point - Next point to continue drawing and register\n   */\n  private draw(point: ICoordinate) {\n    // Saving current point\n    this.points.push(point);\n\n    // Starting line in temporal canvas\n    this.tempContext.beginPath();\n    this.tempContext.moveTo(this.lastPoint.x, this.lastPoint.y);\n    this.tempContext.lineTo(point.x, point.y);\n    this.tempContext.stroke();\n\n    // Starting line in original canvas\n    this.ctx.beginPath();\n    this.ctx.moveTo(this.lastPoint.x, this.lastPoint.y);\n    this.ctx.lineTo(point.x, point.y);\n    this.ctx.stroke();\n\n    // Chalk Effect\n    const clearRectsInPoint = this.createClearRects(\n      point,\n      this.lastPoint,\n      this.width\n    );\n\n    clearRectsInPoint.forEach((rect) => {\n      this.tempContext.clearRect(\n        rect.originPoint.x,\n        rect.originPoint.y,\n        rect.width,\n        rect.height\n      );\n\n      this.ctx.clearRect(\n        rect.originPoint.x,\n        rect.originPoint.y,\n        rect.width,\n        rect.height\n      );\n\n      this.clearRects.push(rect);\n    });\n\n    this.lastPoint = point;\n  }\n\n  /**\n   * Creates a new chalk path based on the given parameters\n   * @param {string} id - Id for the path\n   * @param {ICoordinate[]} points - Points to follow and construct the path\n   * @param {number} width - Width that the path will have\n   * @param {string} color - Color that the path will have\n   * @param {IClearRect[]} clearRects - Clear rects to generate\n   * the chalk/crayon effect\n   */\n  public async createChalkPath(\n    id: string,\n    points: ICoordinate[],\n    width: number,\n    color: string,\n    clearRects: IClearRect[]\n  ): Promise<ICanvasBrush> {\n    try {\n      let imagePath;\n      const line = super\n        .convertPointsToSVGPath(\n          points.map((point) => {\n            return new fabric.Point(point.x, point.y);\n          })\n        )\n        .join('');\n\n      let group = [\n        new fabric.Path(line, {\n          fill: 'transparent',\n          stroke: tinycolor(color)\n            .brighten(this.brightness + 5)\n            .toHexString(),\n          strokeWidth: width,\n          strokeLineJoin: 'round',\n          strokeLineCap: 'round',\n          strokeUniform: true,\n        }),\n        ...clearRects.map((rect: IClearRect) => {\n          return new fabric.Rect({\n            left: rect.originPoint.x,\n            top: rect.originPoint.y,\n            width: rect.width * 0.9,\n            height: rect.height * 0.9,\n            fill: 'red',\n            stroke: 'red',\n            strokeWidth: 0,\n            globalCompositeOperation: 'destination-out',\n          });\n        }),\n      ];\n\n      /*\n        Adding a middle line to could close the path\n        and flood-fill works properly\n      */\n      if (width === 2) {\n        group.push(\n          new fabric.Path(line, {\n            fill: 'transparent',\n            stroke: tinycolor(color)\n              .brighten(this.brightness + 5)\n              .toHexString(),\n            strokeWidth: 1,\n            strokeLineJoin: 'round',\n            strokeLineCap: 'round',\n            strokeUniform: true,\n          })\n        );\n      }\n\n      const path = new fabric.Group(group);\n\n      const top = path.top;\n      const left = path.left;\n\n      path.set({\n        top: 0,\n        left: 0,\n      });\n\n      this.tempCanvas.add(path);\n      path.addWithUpdate();\n      this.tempCanvas.renderAll();\n\n      this.tempCanvas.setWidth(Number(path.width));\n      this.tempCanvas.setHeight(Number(path.height));\n\n      const tempData = this.tempCanvas.toDataURL();\n\n      const imagePromise = new Promise((resolve, reject) => {\n        try {\n          fabric.Image.fromURL(tempData, (image) => {\n            ((image as unknown) as ICanvasBrush).set({\n              id: id,\n              top: top,\n              left: left,\n              basePath: {\n                type: this.style,\n                points: points,\n                stroke: color,\n                strokeWidth: width,\n                imageData: image.getSrc(),\n              },\n            });\n\n            this.tempCanvas.clear();\n            this.tempCanvas.remove();\n\n            resolve(image);\n          });\n        } catch (e) {\n          reject(e);\n        }\n      });\n\n      await imagePromise\n        .then((response) => {\n          imagePath = response;\n        })\n        .catch((e) => {\n          throw e;\n        });\n\n      if (!imagePath) throw new Error('Path Image not retrieved');\n      return imagePath;\n    } catch (e) {\n      throw e;\n    }\n  }\n\n  /**\n   * Creates the clear rects to generate the chalk effect\n   * @param {ICoordinate[]} points - Points to follow in the path\n   * @param {number} width - Width that the path will have\n   */\n  public createChalkEffect(points: ICoordinate[], width: number) {\n    let clearRects: IClearRect[] = [];\n    let lastPoint: ICoordinate;\n\n    points?.forEach((point) => {\n      if (!lastPoint) {\n        lastPoint = point;\n      } else {\n        clearRects.push(...this.createClearRects(point, lastPoint, width));\n        lastPoint = point;\n      }\n    });\n\n    return clearRects;\n  }\n\n  /**\n   * Mouse Down Event, starts drawing in canvas\n   * @param {ICoordinate} e - Mouse pointer coordinate\n   */\n  public onMouseDown(e: ICoordinate) {\n    this.isDrawing = true;\n    this.lastPoint = e;\n\n    this.initializeContextProperties();\n\n    this.points.push(e);\n    this.draw({ x: e.x + 1, y: e.y + 1 });\n  }\n\n  /**\n   * Mouse Move Event, continue drawing in canvas\n   * @param {ICoordinate} e - Mouse pointer coordinate\n   */\n  public onMouseMove(e: ICoordinate) {\n    if (!this.isDrawing) return;\n\n    this.draw(e);\n  }\n\n  /**\n   * Mouse Up Event, finishes canvas drawing\n   */\n  public onMouseUp() {\n    this.isDrawing = false;\n\n    return new Promise<void>((resolve) => {\n      try {\n        this.createChalkPath(\n          `${this.userId}:${uuidv4()}`,\n          this.points,\n          this.width,\n          this.color,\n          this.clearRects\n        ).then((response) => {\n          if (response) {\n            this.canvas.add(response);\n            this.canvas.renderAll();\n          }\n\n          this.points = [];\n          this.clearRects = [];\n          resolve();\n        });\n      } catch (error) {\n        console.warn(error);\n      }\n    });\n  }\n\n  /**\n   * Creates the random clear rects to be used in chalk/crayon effect\n   * @param {ICoordinate} point - Current Point\n   * @param {ICoordinate} lastPoint - Last registered point\n   * @param {number} width - Width thath the path will have\n   */\n  private createClearRects(\n    point: ICoordinate,\n    lastPoint: ICoordinate,\n    width: number\n  ) {\n    let clearRects = [];\n    const length = Math.round(\n      Math.sqrt(\n        Math.pow(point.x - lastPoint.x, 2) + Math.pow(point.y - lastPoint.y, 2)\n      ) /\n        (5 / width)\n    );\n\n    const unit: ICoordinate = {\n      x: (point.x - lastPoint.x) / length,\n      y: (point.y - lastPoint.y) / length,\n    };\n\n    for (let i = 0; i < length; i += 1) {\n      const current: ICoordinate = {\n        x: lastPoint.x + i * unit.x,\n        y: lastPoint.y + i * unit.y,\n      };\n\n      const random: ICoordinate = {\n        x: current.x + (Math.random() - 0.5) * width * 1.2,\n        y: current.y + (Math.random() - 0.5) * width * 1.2,\n      };\n\n      const generatedRect: IClearRect = {\n        originPoint: random,\n        width: this.clearRectDimensions.width,\n        height: this.clearRectDimensions.height,\n      };\n\n      clearRects.push(generatedRect);\n    }\n\n    return clearRects;\n  }\n\n  /**\n   * Initialize the properties related with the drawing to create\n   * like color and width in both canvases\n   */\n  private initializeContextProperties() {\n    this.tempContext.lineWidth = this.width;\n    this.tempContext.lineCap = 'round';\n    this.tempContext.lineJoin = 'round';\n    this.tempContext.strokeStyle = tinycolor(this.color)\n      .brighten(this.brightness)\n      .toHexString();\n\n    this.ctx.lineWidth = this.width;\n    this.ctx.lineCap = 'round';\n    this.ctx.lineJoin = 'round';\n    this.ctx.strokeStyle = tinycolor(this.color)\n      .brighten(this.brightness)\n      .toHexString();\n  }\n}\n","import { fabric } from 'fabric';\nimport { Canvas } from 'fabric/fabric-impl';\nimport { ICoordinate } from '../../../../interfaces/brushes/coordinate';\nimport { v4 as uuidv4 } from 'uuid';\nimport { ICanvasBrush } from '../../../../interfaces/brushes/canvas-brush';\n\ntype IMarkerStyle = 'marker' | 'felt';\n\nexport class MarkerBrush extends fabric.PencilBrush {\n  /**\n   * Canvas to print the lines\n   */\n  private canvas: Canvas;\n\n  /**\n   * Id of the user that draw the line\n   */\n  private userId: string;\n\n  /**\n   * Context of the given Canvas\n   */\n  private ctx: CanvasRenderingContext2D;\n\n  /**\n   * Flag to know when is possible draw in the Canvas,\n   * when mouse is pressed the value is true and false when is released.\n   */\n  private isDrawing: boolean = false;\n\n  /**\n   * Last registered point\n   */\n  private lastPoint: { x: number; y: number } | null = null;\n\n  /**\n   * All the registered points\n   */\n  private points: { x: number; y: number }[] = [];\n\n  /**\n   * Style for the brush, it could be marker or felt\n   */\n  private style: IMarkerStyle;\n\n  /**\n   * Class constructor\n   * @param {Canvas} canvas - Canvas to print the lines\n   * @param {string} userId - Id of the user that will draw\n   */\n  constructor(canvas: Canvas, userId: string, style: IMarkerStyle) {\n    super();\n    this.userId = userId;\n    this.canvas = canvas;\n    this.ctx = this.canvas.getContext();\n    this.style = style;\n  }\n\n  /**\n   * Mouse Down Event, starts to draw in the canvas\n   * @param {ICoordinate} e - Event Coordinate value\n   */\n  public onMouseDown(e: ICoordinate) {\n    this.isDrawing = true;\n    this.lastPoint = { x: e.x, y: e.y };\n    this.points.push(e, e);\n  }\n\n  /**\n   * Mouse Move Event, detects mouse movement to set the position of each point\n   * @param {ICoordinate} e - Event Coordinate value\n   */\n  public onMouseMove(e: ICoordinate) {\n    if (!this.isDrawing || !this.lastPoint) return;\n\n    this.points.push(e);\n    this.ctx.beginPath();\n\n    this.ctx.lineJoin = this.ctx.lineCap = 'round';\n    this.ctx.strokeStyle = this.color;\n    this.ctx.lineWidth = this.style === 'marker' ? this.width / 5 : this.width;\n    this.createContextLines(e);\n\n    this.lastPoint = { x: e.x, y: e.y };\n    this.ctx.globalAlpha = 1;\n  }\n\n  /**\n   * Mouse Up Event, finish drawing in canvas\n   * and creates the new path with the given points\n   */\n  public onMouseUp() {\n    this.isDrawing = false;\n\n    let path;\n    path = this.createMarkerPath(\n      `${this.userId}:${uuidv4()}`,\n      this.points,\n      this.width,\n      this.color\n    );\n\n    this.points = [];\n\n    this.canvas.add(path);\n    this.canvas.requestRenderAll();\n    path.setCoords();\n  }\n\n  /**\n   * Add a new line in context drawing (path no created)\n   * @param {number} alpha - line opacity\n   * @param {ICoordinate} start - line start point\n   * @param {ICoordinate} end - line end point\n   */\n  private addContextLine(alpha: number, start: ICoordinate, end: ICoordinate) {\n    this.ctx.globalAlpha = alpha;\n    this.ctx.moveTo(start.x, start.y);\n    this.ctx.lineTo(end.x, end.y);\n    this.ctx.stroke();\n  }\n\n  /**\n   * Creates a new Path with a given opacity\n   * and a position respect the main line\n   * @param {number} opacity - Opacity for the Path\n   * @param {ICoordinate[]} points - Points to follow to create the new line\n   * @param {string} color - Stroke color to set in the line\n   * @param {number} width - Stroke width to set in the line\n   * @param {number} difference - points position difference\n   * respect the given points\n   */\n  private addSVGLine(\n    opacity: number,\n    points: ICoordinate[],\n    color: string,\n    width: number,\n    difference: number\n  ) {\n    return new fabric.Path(\n      super\n        .convertPointsToSVGPath(\n          points.map((point) => {\n            return new fabric.Point(point.x + difference, point.y + difference);\n          })\n        )\n        .join(''),\n      {\n        fill: 'transparent',\n        stroke: color,\n        strokeWidth: width,\n        opacity: opacity,\n        strokeLineJoin: 'round',\n        strokeLineCap: 'round',\n        strokeUniform: true,\n      }\n    );\n  }\n\n  /**\n   * Creates a new Marker/Felt Brush Path with the given parameters\n   * @param {string} id - Id to set in the new path object\n   * @param {ICoordinate[]} points - Points to follow and draw the path object\n   * @param {number} width - General width that the draw\n   * will have (lineWidth value)\n   * @param {string} color - Path Color\n   */\n  public createMarkerPath(\n    id: string,\n    points: ICoordinate[],\n    width: number,\n    color: string\n  ) {\n    let markerPath;\n\n    if (this.style === 'marker') {\n      const singleWidth = width / (width < 4 ? 2 : 5);\n      markerPath = new fabric.Group([\n        this.addSVGLine(1, points, color, singleWidth, -width / 8),\n        this.addSVGLine(0.8, points, color, singleWidth, -width / 4),\n        this.addSVGLine(0.6, points, color, singleWidth, 0),\n        this.addSVGLine(0.4, points, color, singleWidth, width / 4),\n        this.addSVGLine(0.2, points, color, singleWidth, width / 8),\n      ]);\n    } else {\n      markerPath = new fabric.Group([\n        this.addSVGLine(0.6, points, color, width, width / 5),\n        this.addSVGLine(0.8, points, color, width, 0),\n      ]);\n    }\n\n    (markerPath as ICanvasBrush).set({\n      id: id,\n      basePath: {\n        type: this.style,\n        points: points,\n        stroke: color,\n        strokeWidth: width,\n      },\n    });\n\n    return markerPath;\n  }\n\n  /**\n   * Creates the context lines\n   * @param {ICoordinate} e - Coordinates of current point\n   */\n  private createContextLines(e: ICoordinate) {\n    if (!this.lastPoint) return;\n\n    if (this.style === 'marker') {\n      this.addContextLine(\n        1,\n        {\n          x: this.lastPoint.x - this.width / 8,\n          y: this.lastPoint.y - this.width / 8,\n        },\n        { x: e.x - this.width / 8, y: e.y - this.width / 8 }\n      );\n\n      this.addContextLine(\n        0.8,\n        {\n          x: this.lastPoint.x - this.width / 4,\n          y: this.lastPoint.y - this.width / 4,\n        },\n        { x: e.x - this.width / 4, y: e.y - this.width / 4 }\n      );\n\n      this.addContextLine(\n        0.6,\n        {\n          x: this.lastPoint.x,\n          y: this.lastPoint.y,\n        },\n        { x: e.x, y: e.y }\n      );\n\n      this.addContextLine(\n        0.4,\n        {\n          x: this.lastPoint.x + this.width / 4,\n          y: this.lastPoint.y + this.width / 4,\n        },\n        { x: e.x + this.width / 4, y: e.y + this.width / 4 }\n      );\n\n      this.addContextLine(\n        0.2,\n        {\n          x: this.lastPoint.x + this.width / 8,\n          y: this.lastPoint.y + this.width / 8,\n        },\n        { x: e.x + this.width / 8, y: e.y + this.width / 8 }\n      );\n    } else {\n      this.addContextLine(\n        0.8,\n        {\n          x: this.lastPoint.x,\n          y: this.lastPoint.y,\n        },\n        { x: e.x, y: e.y }\n      );\n\n      this.addContextLine(\n        0.6,\n        {\n          x: this.lastPoint.x + this.width / 6,\n          y: this.lastPoint.y + this.width / 6,\n        },\n        { x: e.x + this.width / 6, y: e.y + this.width / 6 }\n      );\n    }\n  }\n}\n","import tinycolor from 'tinycolor2';\nimport { fabric } from 'fabric';\nimport { ICoordinate } from '../../../../interfaces/brushes/coordinate';\nimport { ICanvasBrush } from '../../../../interfaces/brushes/canvas-brush';\nimport { v4 as uuidv4 } from 'uuid';\nimport { IBristle } from '../../../../interfaces/brushes/bristle';\n\nexport class PaintBrush extends fabric.PencilBrush {\n  /**\n   * Canvas to draw\n   */\n  private canvas: fabric.Canvas;\n\n  /**\n   * Context for the given canvas\n   */\n  private ctx: CanvasRenderingContext2D;\n\n  /**\n   * Id of the user that will draw\n   */\n  private userId: string;\n\n  /**\n   * Brightness variation factor,\n   * path colors variation is proportional to this number\n   */\n  private varyBrightness: number = 10;\n\n  // Drawing state\n\n  /**\n   * Latest registered point\n   */\n  private latestPoint: ICoordinate;\n\n  /**\n   * Points to use to create the path\n   */\n  private points: ICoordinate[] = [];\n\n  /**\n   * Points registered for each brush's bristle,\n   * when a new line will be created\n   */\n  private brushPoints: ICoordinate[][] = [];\n\n  /**\n   * Flag to know if is possible draw o not\n   * true: mouse clicked, false: mouse released\n   */\n  private isDrawing: boolean = false;\n\n  /**\n   * Current registered angle in the drawing path\n   */\n  private currentAngle: number;\n\n  /**\n   * Brush state in this drawing,\n   * contains properties necessaries to create variations in the drawing path\n   */\n  private currentBrush: IBristle[] = this.makeBrush(this.color, this.width);\n\n  /**\n   * Class Constructor\n   * @param {fabric.Canvas} canvas - Canvas to draw\n   * @param {string} userId - User that will draw\n   */\n  constructor(canvas: fabric.Canvas, userId: string) {\n    super();\n    this.canvas = canvas;\n    this.ctx = this.canvas.getContext();\n    this.userId = userId;\n    this.latestPoint = { x: 0, y: 0 };\n    this.currentAngle = 0;\n  }\n\n  /**\n   * Creates a color variation of the given color\n   * @param {string} color - Color to create a variation\n   */\n  private varyColor(color: string) {\n    const amount = Math.round(Math.random() * 2 * this.varyBrightness);\n    const newColor = tinycolor(color);\n    const varied =\n      amount > this.varyBrightness\n        ? newColor.brighten(amount - this.varyBrightness)\n        : newColor.darken(amount);\n\n    return varied.toHexString();\n  }\n\n  /**\n   * Create a brush state to use in the current drawing,\n   * set the properties to make this drawing different\n   * @param {string} color - Path original stroke color\n   * @param {number} size - Path original stroke width\n   */\n  public makeBrush(color: string, size: number) {\n    let bristleCount = Math.round(size / 3);\n    const brush: IBristle[] = [];\n    const gap = size / bristleCount;\n\n    for (let i = 0; i < bristleCount; i += 1) {\n      const distance =\n        i === 0 ? 0 : gap * i + (Math.random() * gap) / 2 - gap / 2;\n      brush.push({\n        distance,\n        thickness: Math.random() * 2 + 2,\n        color: this.varyColor(color),\n      });\n\n      if (this.brushPoints) {\n        this.brushPoints.push([]);\n      }\n    }\n\n    return brush;\n  }\n\n  // Geometry\n\n  /**\n   * Set a new point based in the angle drawing\n   * @param {number} distance - Distance of this bristle\n   * respect the original point\n   * @param {number} angle - Angle in which the draw is made.\n   * @param {ICoordinate} origin - Origin point\n   */\n  private rotatePoint(distance: number, angle: number, origin: ICoordinate) {\n    return {\n      x: origin.x + distance * Math.cos(angle),\n      y: origin.y + distance * Math.sin(angle),\n    };\n  }\n\n  /**\n   * Get bearing of origin and destination points\n   * @param {ICoordinate} origin - Origin Point\n   * @param {ICoordinate} destination - Destination Point\n   */\n  private getBearing(origin: ICoordinate, destination: ICoordinate) {\n    return (\n      (Math.atan2(destination.y - origin.y, destination.x - origin.x) -\n        Math.PI / 2) %\n      (Math.PI * 2)\n    );\n  }\n\n  /**\n   * Set a new angle based in origin and destination points\n   * and the current angle\n   * @param {ICoordinate} origin - Origin Point\n   * @param {ICoordinate} destination - Destination Point\n   * @param {number} oldAngle - Current Angle\n   */\n  private getNewAngle(\n    origin: ICoordinate,\n    destination: ICoordinate,\n    oldAngle: number\n  ) {\n    const bearing = this.getBearing(origin, destination);\n    if (typeof oldAngle === 'undefined') {\n      return bearing;\n    }\n\n    return oldAngle - this.angleDiff(oldAngle, bearing);\n  }\n\n  /**\n   * Get the difference between two angles\n   * @param {number} angleA - first angle\n   * @param {number} angleB - second angle\n   */\n  private angleDiff(angleA: number, angleB: number) {\n    const twoPi = Math.PI * 2;\n    const diff =\n      ((angleA - (angleB > 0 ? angleB : angleB + twoPi) + Math.PI) % twoPi) -\n      Math.PI;\n    return diff < -Math.PI ? diff + twoPi : diff;\n  }\n\n  // Drawing Functions\n\n  /**\n   * Draw path for a bristle of the brush\n   * Technically bristle is a path and brush the group of these paths\n   * @param {ICoordinate} origin - Origin point\n   * @param {ICoordinate} destination - Destination Point\n   * @param {IBristle} bristle - Configuration like color and width\n   * of this bristle\n   * @param {ICoordinate} controlPoint - Control Point for make\n   * a quadratic curve\n   */\n  private strokeBristle(\n    origin: ICoordinate,\n    destination: ICoordinate,\n    bristle: IBristle,\n    controlPoint: ICoordinate,\n    bristleNumber: number\n  ) {\n    this.ctx.beginPath();\n    this.ctx.moveTo(origin.x, origin.y);\n\n    this.brushPoints[bristleNumber].push(origin);\n\n    this.ctx.strokeStyle = bristle.color;\n    this.ctx.lineWidth = bristle.thickness;\n    this.ctx.lineCap = 'round';\n    this.ctx.lineJoin = 'round';\n    this.ctx.shadowColor = bristle.color;\n    this.ctx.shadowBlur = bristle.thickness / 2;\n\n    this.ctx.quadraticCurveTo(\n      controlPoint.x,\n      controlPoint.y,\n      destination.x,\n      destination.y\n    );\n\n    this.ctx.lineTo(destination.x, destination.y);\n\n    if (this.brushPoints[bristleNumber]) {\n      this.brushPoints[bristleNumber].push(destination);\n    }\n\n    this.ctx.stroke();\n\n    this.ctx.shadowColor = 'rgba(0, 0, 0, 0)';\n    this.ctx.shadowBlur = 0;\n  }\n\n  /**\n   * Draw each brush's bristle\n   * @param {IBristle[]} bristles - Bristles of the Brush\n   * @param {ICoordinate} origin - Origin Point\n   * @param {ICoordinate} destination - DEstination Point\n   * @param {number} oldAngle - Angle in the previous point\n   * @param {number} newAngle - Angle in the current point\n   */\n  private drawStroke(\n    bristles: IBristle[],\n    origin: ICoordinate,\n    destination: ICoordinate,\n    oldAngle: number,\n    newAngle: number\n  ) {\n    bristles.forEach((bristle, index) => {\n      this.ctx.beginPath();\n\n      let bristleOrigin = this.rotatePoint(\n        bristle.distance - this.width / 2,\n        oldAngle,\n        origin\n      );\n\n      let bristleDestination = this.rotatePoint(\n        bristle.distance - this.width / 2,\n        newAngle,\n        destination\n      );\n\n      const controlPoint = this.rotatePoint(\n        bristle.distance - this.width / 2,\n        newAngle,\n        origin\n      );\n\n      bristleDestination = this.rotatePoint(\n        bristle.distance - this.width / 2,\n        newAngle,\n        destination\n      );\n\n      this.strokeBristle(\n        bristleOrigin,\n        bristleDestination,\n        bristle,\n        controlPoint,\n        index\n      );\n    });\n  }\n\n  /**\n   * Keep doing the drawing in canvas\n   * @param {ICoordinate} newPoint - New point to continue drawing\n   */\n  private continueStroke(newPoint: ICoordinate) {\n    const newAngle = this.getNewAngle(\n      this.latestPoint,\n      newPoint,\n      this.currentAngle\n    );\n\n    this.drawStroke(\n      this.currentBrush,\n      this.latestPoint,\n      newPoint,\n      this.currentAngle,\n      newAngle\n    );\n\n    this.currentAngle = newAngle % (Math.PI * 2);\n    this.latestPoint = newPoint;\n    this.points.push(newPoint);\n  }\n\n  /**\n   * Start to draw in canvas\n   * @param {ICoordinate} point - Point in which the drawing starts\n   */\n  private startStroke(point: ICoordinate) {\n    this.currentAngle = 0;\n    this.currentBrush = this.makeBrush(this.color, this.width);\n    this.isDrawing = true;\n    this.latestPoint = point;\n    this.points.push(point);\n  }\n\n  // Mouse Events\n\n  /**\n   * Mouse Down Event, starts drawing in canvas\n   * @param {ICoordinate} e - Event coordinate value\n   */\n  public onMouseDown(e: ICoordinate) {\n    if (this.isDrawing) return;\n\n    this.startStroke(e);\n  }\n\n  /**\n   * Mouse Move Event, continues with drawing\n   * @param {ICoordinate} e - Event coordinate value\n   */\n  public onMouseMove(e: ICoordinate) {\n    if (!this.isDrawing) return;\n\n    this.continueStroke(e);\n  }\n\n  /**\n   * Mouse Up Event, finishes drawing\n   */\n  public onMouseUp() {\n    if (!this.isDrawing) return;\n\n    this.createNewPaintBrushPath(`${this.userId}:${uuidv4()}`);\n  }\n\n  /**\n   * Creates a new path based on previous properties\n   * and a new modification on it\n   * @param {string} id - Id for the path object\n   * @param {ICoordinate[]} points - Points to follow in path creation\n   * @param {number} width - Path general width\n   * @param {string} color - Path general color\n   * @param {IBristle[]} bristles - Brush's bristles for this path\n   */\n  public modifyPaintBrushPath(\n    id: string,\n    points: ICoordinate[],\n    width: number,\n    color: string,\n    bristles: IBristle[]\n  ) {\n    let paintBrushPath = new fabric.Group(\n      bristles.map((bristle) => {\n        let newPoints: ICoordinate[] = [];\n        let currentAngle = 0;\n        let latestPoint = points[0];\n\n        if (points.length === 1) {\n          return this.addSVGLine(\n            [points[0], points[0]],\n            bristle.thickness,\n            bristle.color\n          );\n        }\n\n        points.forEach((point) => {\n          const newAngle = this.getNewAngle(latestPoint, point, currentAngle);\n\n          const bristleOrigin = this.rotatePoint(\n            bristle.distance - width / 2,\n            currentAngle,\n            latestPoint\n          );\n\n          const bristleDestination = this.rotatePoint(\n            bristle.distance - width / 2,\n            newAngle,\n            point\n          );\n\n          newPoints.push(bristleOrigin, bristleDestination);\n\n          currentAngle = newAngle % (Math.PI * 2);\n          latestPoint = point;\n        });\n\n        return this.addSVGLine(newPoints, bristle.thickness, bristle.color);\n      })\n    );\n\n    (paintBrushPath as ICanvasBrush).set({\n      id: id,\n      basePath: {\n        type: 'paintbrush',\n        points: points,\n        stroke: color,\n        strokeWidth: width,\n        bristles: bristles,\n      },\n    });\n\n    return paintBrushPath;\n  }\n\n  /**\n   * Create the path for the current brush's bristle\n   * @param {ICoordinate[]} points - Points to follow in path creation\n   * @param {number} width - Width of current bristle\n   * @param {string} color - Color of current bristle\n   */\n  private addSVGLine(points: ICoordinate[], width: number, color: string) {\n    return new fabric.Path(\n      super\n        .convertPointsToSVGPath(\n          points.map((point) => {\n            return new fabric.Point(point.x, point.y);\n          })\n        )\n        .join(''),\n      {\n        fill: 'transparent',\n        stroke: color,\n        shadow: new fabric.Shadow({\n          affectStroke: true,\n          nonScaling: true,\n          color: color,\n          blur: width / 2,\n        }),\n        strokeWidth: width,\n        strokeLineJoin: 'round',\n        strokeLineCap: 'round',\n        strokeUniform: true,\n      }\n    );\n  }\n\n  /**\n   * Creates a new paintbrush path from mouse events\n   * @param {string} id - Id to set in the path\n   */\n  private createNewPaintBrushPath(id: string) {\n    if (this.points.length === 1) {\n      this.brushPoints.forEach((bristle) => {\n        bristle.push(this.points[0], this.points[0]);\n      });\n    }\n\n    let paintBrushPath = new fabric.Group(\n      this.currentBrush.map((bristle, index) => {\n        return this.addSVGLine(\n          this.brushPoints[index],\n          bristle.thickness,\n          bristle.color\n        );\n      })\n    );\n\n    (paintBrushPath as ICanvasBrush).set({\n      id: id,\n      basePath: {\n        type: 'paintbrush',\n        points: this.points,\n        stroke: this.color,\n        strokeWidth: this.width,\n        bristles: this.currentBrush,\n      },\n    });\n\n    this.isDrawing = false;\n    this.points = [];\n    this.brushPoints = [];\n\n    this.canvas.add(paintBrushPath);\n    paintBrushPath.addWithUpdate();\n    this.canvas.renderAll();\n  }\n}\n","import { fabric } from 'fabric';\nimport { Canvas } from 'fabric/fabric-impl';\nimport { ICanvasBrush } from '../../../../interfaces/brushes/canvas-brush';\nimport { v4 as uuidv4 } from 'uuid';\nimport { IPenPoint } from '../../../../interfaces/brushes/pen-point';\nimport { ICoordinate } from '../../../../interfaces/brushes/coordinate';\n\nexport class PenBrush extends fabric.PencilBrush {\n  /**\n   * Canvas to draw\n   */\n  private canvas: Canvas;\n\n  /**\n   * userId of the user\n   */\n  private userId: string;\n\n  /**\n   * State to know if currently is possible draw in the given canvas,\n   * basically used to avoid draw in the canvas in a mouse move event\n   * when mouse down is not happening\n   */\n  private isDrawing: boolean = false;\n\n  /**\n   * Array to store the points to draw the paths that will conform\n   * the final group of paths with their respective width\n   */\n  private points: IPenPoint[] = [];\n\n  /**\n   * Class Constructor\n   * @param {Canvas} canvas - Canvas to draw\n   * @param {string} userId - userId of the current user\n   */\n  constructor(canvas: Canvas, userId: string) {\n    super();\n    this.userId = userId;\n    this.canvas = canvas;\n  }\n\n  /**\n   * Returns a random int from a given min value to a given max value,\n   * basically is used here to set a different width in each path generated\n   * @param {number} min - Random Number minimum value\n   * @param {number} max - Random NUmber maximum value\n   */\n  public getRandomInt(min: number, max: number) {\n    return Math.floor(Math.random() * (max - min + 1)) + min;\n  }\n\n  /**\n   * Sets minimum and maximum values to set valid widths\n   * for a pen line with the given linewidth\n   * @param {number} lineWidth - stroke width for the line\n   */\n  public setMinMaxWidth(lineWidth: number) {\n    if (lineWidth < 4) {\n      return {\n        min: 2,\n        max: 3,\n      };\n    }\n\n    return {\n      min: lineWidth / 2,\n      max: lineWidth,\n    };\n  }\n\n  /**\n   * Mouse Down Event, starts to draw in the canvas\n   * @param {ICoordinate} e - Event Coordinate value\n   */\n  public onMouseDown(e: ICoordinate) {\n    const { min, max } = this.setMinMaxWidth(this.width);\n    this.isDrawing = true;\n    this.points.push(\n      {\n        x: e.x,\n        y: e.y,\n        width: this.getRandomInt(min, max),\n      },\n      {\n        x: e.x,\n        y: e.y,\n        width: this.getRandomInt(min, max),\n      }\n    );\n  }\n\n  /**\n   * Mouse Move Event, detects mouse movement to set the position of each point\n   * @param {ICoordinate} e - Event Coordinate value\n   */\n  public onMouseMove(e: ICoordinate) {\n    if (!this.isDrawing) return;\n\n    const { min, max } = this.setMinMaxWidth(this.width);\n    const ctx = this.canvas.getContext();\n    this.points.push({\n      x: e.x,\n      y: e.y,\n      width: this.getRandomInt(min, max),\n    });\n\n    for (let i = 1; i < this.points.length; i++) {\n      ctx.beginPath();\n      ctx.lineJoin = 'round';\n      ctx.lineCap = 'round';\n      ctx.moveTo(this.points[i - 1].x, this.points[i - 1].y);\n      ctx.lineWidth = this.points[i].width;\n      ctx.strokeStyle = this.color;\n      ctx.lineTo(this.points[i].x, this.points[i].y);\n      ctx.stroke();\n    }\n  }\n\n  /**\n   * Mouse Up Event, finish drawing in canvas\n   * and creates the new path with the given points\n   */\n  public onMouseUp() {\n    this.isDrawing = false;\n\n    let path: ICanvasBrush = this.createPenPath(\n      `${this.userId}:${uuidv4()}`,\n      this.points,\n      this.width,\n      this.color\n    );\n\n    this.canvas.add(path);\n    this.canvas.requestRenderAll();\n    path.setCoords();\n\n    this.points.length = 0;\n  }\n\n  /**\n   * Creates a new Pen Brush Path with the given parameters\n   * @param {string} id - Id to set in the new path object\n   * @param {IPenPoint[]} points - Points to follow and draw the new path object\n   * @param {number} width - General width that the draw\n   * will have (lineWidth value)\n   * @param {string} color - Path Color\n   */\n  public createPenPath(\n    id: string,\n    points: { x: number; y: number; width: number }[],\n    width: number,\n    color: string\n  ) {\n    let paths: fabric.Path[] = [];\n    let penPath: ICanvasBrush;\n\n    points.forEach((point, index) => {\n      if (!index) return;\n\n      paths.push(\n        new fabric.Path(\n          super\n            .convertPointsToSVGPath([\n              {\n                x: points[index - 1].x,\n                y: points[index - 1].y,\n              },\n              {\n                x: point.x,\n                y: point.y,\n              },\n            ])\n            .join(''),\n          {\n            strokeWidth: point.width,\n            stroke: color,\n            strokeLineCap: 'round',\n            strokeLineJoin: 'round',\n            strokeUniform: true,\n          }\n        )\n      );\n    });\n\n    penPath = new fabric.Group(paths);\n    penPath.set({\n      id: id,\n      basePath: {\n        type: 'pen',\n        points: [...points],\n        stroke: color,\n        strokeWidth: width,\n      },\n    });\n\n    return penPath;\n  }\n}\n","import { IObjectOptions } from 'fabric/fabric-impl';\nimport { IUndoRedoEvent } from '../../../../interfaces/canvas-events/undo-redo-event';\nimport { ICanvasObject } from '../../../../interfaces/objects/canvas-object';\nimport { TypedGroup } from '../../../../interfaces/shapes/group';\nimport { TypedShape } from '../../../../interfaces/shapes/shapes';\nimport { CanvasAction, SET_GROUP } from '../../reducers/undo-redo';\n\n/**\n * Applies Undo/Redo for brush type changes in groups of objects\n * @param {fabric.Canvas} canvas - Canvas in which the objects are\n * @param {string} userId - User that does the action\n * @param {(action: CanvasAction) => void} undoRedoDispatch - Dispatcher\n * to save the events and could make undo/redo over them\n */\nexport const changeBrushTypeUndoRedoGroup = (\n  canvas: fabric.Canvas,\n  userId: string,\n  undoRedoDispatch: (action: CanvasAction) => void\n) => {\n  const obj = canvas.getActiveObject() as ICanvasObject;\n  const type = obj?.get('type');\n\n  if (!obj || type !== 'activeSelection') return;\n\n  const activeIds: string[] = canvas\n    ?.getActiveObject()\n    // @ts-ignore - Typings are out of date, getObjects is the correct method to get objects in group.\n    .getObjects()\n    .map((o: TypedShape) => o.id);\n\n  const payload = {\n    type,\n    svg: true,\n    target: null,\n    id: `${userId}:group`,\n  };\n\n  const event = { event: payload, type: 'activeSelection', activeIds };\n\n  let filtered = canvas?.getObjects().filter((o: IObjectOptions) => {\n    return !o.group;\n  });\n\n  let active: TypedGroup = canvas?.getActiveObject() as TypedGroup;\n  active?.set({ id: `${userId}:group` });\n\n  undoRedoDispatch({\n    type: SET_GROUP,\n    payload: [...(filtered as any[]), active],\n    canvasId: userId,\n    event: (event as unknown) as IUndoRedoEvent,\n  });\n};\n","import { fabric } from 'fabric';\nimport { PencilBrush } from 'fabric/fabric-impl';\nimport { shapePoints } from '../../../../assets/shapes-points';\nimport { IBrushType } from '../../../../interfaces/brushes/brush-type';\nimport { ICanvasBrush } from '../../../../interfaces/brushes/canvas-brush';\nimport { ICanvasPathBrush } from '../../../../interfaces/brushes/canvas-path-brush';\nimport { ICoordinate } from '../../../../interfaces/brushes/coordinate';\nimport { IShapePointsIndex } from '../../../../interfaces/brushes/shape-points-index';\nimport { IUndoRedoEvent } from '../../../../interfaces/canvas-events/undo-redo-event';\nimport { ICanvasObject } from '../../../../interfaces/objects/canvas-object';\nimport { TypedShape } from '../../../../interfaces/shapes/shapes';\nimport { ChalkBrush } from '../../brushes/classes/chalkBrush';\nimport { MarkerBrush } from '../../brushes/classes/markerBrush';\nimport { PaintBrush } from '../../brushes/classes/paintBrush';\nimport { PenBrush } from '../../brushes/classes/penBrush';\nimport {\n  ObjectEvent,\n  PaintEventSerializer,\n} from '../../event-serializer/PaintEventSerializer';\nimport { CanvasAction, SET } from '../../reducers/undo-redo';\nimport { isEmptyShape } from '../../utils/shapes';\nimport { changeBrushTypeUndoRedoGroup } from './changeBrushTypeUndoRedoGroup';\n\n/**\n * Changes brushType value and if one or more objects are selected\n * also changes their brush style\n * @param {fabric.Canvas} canvas - Canvas in which the objects to change are\n * @param {string} userId - User that will do changes in objects\n * @param {PaintEventSerializer} eventSerializer - Serializer to synchronize\n * changes in the other canvases\n * @param {IBrushType} type - Brush type to change\n * @param {(action: CanvasAction) => void} undoRedoDispatch - Dispatcher\n * to save brush type changes and could make undo/redo over them\n */\nexport const changeBrushTypeAction = async (\n  canvas: fabric.Canvas,\n  userId: string,\n  eventSerializer: PaintEventSerializer,\n  updateBrushType: (type: IBrushType) => void,\n  type: IBrushType,\n  undoRedoDispatch: (action: CanvasAction) => void\n) => {\n  let newActives: ICanvasObject[] = [];\n  let activeObjects: ICanvasObject[] = [];\n\n  /**\n   * Checks if the given object is really flood-filled\n   * @param {ICanvasObject} object - Object to check its fill property\n   */\n  const isFloodFilled = (object: ICanvasObject) => {\n    return (\n      object.fill &&\n      object.fill !== 'transparent' &&\n      object.fill !== 'rgb(0,0,0)'\n    );\n  };\n\n  // Updating brush type\n  updateBrushType(type);\n\n  if (!canvas) return;\n\n  // Getting the current active objects\n  const selection = canvas?.getActiveObject();\n\n  // Saving activeObjects\n  if (selection?.type === 'activeSelection') {\n    activeObjects = (selection as fabric.ActiveSelection)._objects;\n  } else {\n    activeObjects = canvas.getActiveObjects();\n  }\n\n  if (!activeObjects) return;\n\n  canvas.discardActiveObject();\n\n  // Iterating over activeObjects\n  for (const object of activeObjects) {\n    if (\n      (object as ICanvasBrush).basePath &&\n      canvas &&\n      userId &&\n      !isFloodFilled(object)\n    ) {\n      let brush: PencilBrush | PenBrush | MarkerBrush | PaintBrush | ChalkBrush;\n      let newPath;\n      let id = (object as ICanvasObject).id;\n      const basePath = (object as ICanvasBrush).basePath;\n      let points = (basePath?.points as ICoordinate[]).map(\n        (point: ICoordinate) => {\n          return new fabric.Point(point.x, point.y);\n        }\n      );\n\n      if (isEmptyShape(object as TypedShape)) {\n        const original = shapePoints[object.name as keyof IShapePointsIndex];\n        points = original.points.map((point: ICoordinate) => {\n          let scaleX = (point.x / original.width) * Number(object.width);\n          let scaleY = (point.y / original.height) * Number(object.height);\n          return new fabric.Point(scaleX, scaleY);\n        });\n      }\n\n      switch (type) {\n        case 'dashed':\n        case 'pencil':\n          brush = new fabric.PencilBrush();\n          newPath = brush.createPath(\n            brush.convertPointsToSVGPath(points).join('')\n          );\n\n          (newPath as unknown as ICanvasPathBrush).set({\n            stroke: basePath?.stroke,\n            strokeWidth: basePath?.strokeWidth,\n            strokeUniform: true,\n            strokeDashArray:\n              type === 'dashed' ? [Number(basePath?.strokeWidth) * 2] : [],\n            basePath: {\n              type: type,\n              points: points || [],\n              stroke: String(basePath?.stroke),\n              strokeWidth: Number(basePath?.strokeWidth),\n            },\n          });\n          break;\n\n        case 'pen':\n          brush = new PenBrush(canvas, userId);\n          const { min, max } = (brush as PenBrush).setMinMaxWidth(\n            Number(basePath?.strokeWidth)\n          );\n\n          const penPoints = points.map((point) => {\n            return {\n              x: point.x,\n              y: point.y,\n              width: (brush as PenBrush).getRandomInt(min, max),\n            };\n          });\n\n          newPath = (brush as PenBrush).createPenPath(\n            String((object as ICanvasObject).id),\n            penPoints,\n            Number(basePath?.strokeWidth),\n            String(basePath?.stroke)\n          );\n          break;\n\n        case 'marker':\n        case 'felt':\n          brush = new MarkerBrush(canvas, userId, type);\n\n          newPath = (brush as MarkerBrush).createMarkerPath(\n            String((object as ICanvasObject).id),\n            points,\n            Number(basePath?.strokeWidth),\n            String(basePath?.stroke)\n          );\n          break;\n\n        case 'paintbrush':\n          brush = new PaintBrush(canvas, userId);\n\n          const bristles = (brush as PaintBrush).makeBrush(\n            String(basePath?.stroke),\n            Number(basePath?.strokeWidth)\n          );\n\n          newPath = (brush as PaintBrush).modifyPaintBrushPath(\n            String((object as ICanvasObject).id),\n            points,\n            Number(basePath?.strokeWidth),\n            String(basePath?.stroke),\n            bristles\n          );\n          break;\n\n        case 'chalk':\n        case 'crayon':\n          brush = new ChalkBrush(canvas, userId, type);\n\n          const clearRects = (brush as ChalkBrush).createChalkEffect(\n            points,\n            Number(basePath?.strokeWidth)\n          );\n\n          await (brush as ChalkBrush)\n            .createChalkPath(\n              String((object as ICanvasObject).id),\n              points,\n              Number(basePath?.strokeWidth),\n              String(basePath?.stroke),\n              clearRects\n            )\n            .then((image) => {\n              newPath = image;\n            })\n            .catch((error) => {\n              console.warn(error);\n            });\n          break;\n      }\n\n      if (!newPath) return;\n\n      (newPath as unknown as ICanvasObject).set({\n        top: object.top,\n        left: object.left,\n        angle: object.angle,\n        scaleX: object.scaleX,\n        scaleY: object.scaleY,\n        flipX: object.flipX,\n        flipY: object.flipY,\n      });\n\n      // Removing id to don't be detected and remove event wouldn't be sent\n      delete (object as ICanvasObject).id;\n      delete (newPath as ICanvasObject).id;\n\n      canvas.remove(object);\n      canvas.add(newPath as ICanvasObject);\n\n      (newPath as ICanvasObject).set({\n        id: id,\n      });\n\n      // Pushing new object to select it after creation\n      newActives.push(newPath as ICanvasObject);\n\n      const payload = {\n        id: String((newPath as ICanvasObject).id),\n        type: newPath.type,\n        target: {\n          top: newPath.top,\n          left: newPath.left,\n          basePath: (newPath as ICanvasBrush).basePath,\n        },\n      } as ObjectEvent;\n\n      eventSerializer?.push('brushTypeChanged', payload);\n\n      if (activeObjects.length === 1) {\n        const event = { event: payload, type: 'brushTypeChanged' };\n\n        // Dispatching Brush Type Change in Custom Paths\n        undoRedoDispatch({\n          type: SET,\n          payload: canvas?.getObjects() as TypedShape[],\n          canvasId: userId,\n          event: (event as unknown) as IUndoRedoEvent,\n        });\n      }\n    }\n  }\n\n  if (newActives.length === 1) {\n    canvas?.setActiveObject(newActives[0]);\n  } else if (newActives.length >= 2) {\n    const activesGroup = new fabric.ActiveSelection(newActives);\n    canvas?.setActiveObject(activesGroup);\n  }\n\n  canvas?.renderAll();\n  changeBrushTypeUndoRedoGroup(canvas, userId, undoRedoDispatch);\n};\n","import { fabric } from 'fabric';\nimport { TypedShape, TypedPolygon } from '../../../interfaces/shapes/shapes';\n\n// filled shape default values\nconst filledShape = {\n  stroke: 'none',\n  strokeWidth: 0,\n};\n\n// empty shape default values\nconst emptyShape = {\n  strokeWidth: 2,\n  fill: 'transparent',\n};\n\n/**\n * Creates Rectangle Shape\n * @param width With of shape\n * @param height Height of shape\n * @param color Color of shape\n * @param filled Flag to set a shape filled or not\n */\nexport const rectangle = (\n  width: number,\n  height: number,\n  color: string,\n  filled: boolean,\n  thickness: number,\n  dashed: boolean\n) => {\n  const shape = new fabric.Rect({\n    width: width,\n    height: height,\n    selectable: false,\n    evented: false,\n    stroke: filled ? filledShape.stroke : color,\n    strokeWidth: thickness,\n    fill: filled ? color : emptyShape.fill,\n    strokeUniform: true,\n    strokeDashArray: dashed ? [thickness * 2] : [],\n    strokeLineCap: dashed ? 'round' : 'butt',\n    strokeLineJoin: dashed ? 'round' : 'butt',\n    padding: 15,\n  });\n\n  return fabric.util.object.extend(shape, {\n    shapeType: 'shape',\n    mimicBackground: true,\n  });\n};\n\n/**\n * Creates Triangle Shape\n * @param width With of shape\n * @param height Height of shape\n * @param color Color of shape\n * @param filled Flag to set a shape filled or not\n */\nexport const triangle = (\n  width: number,\n  height: number,\n  color: string,\n  filled: boolean,\n  thickness: number,\n  dashed: boolean\n) => {\n  const shape = new fabric.Triangle({\n    width: width,\n    height: height,\n    stroke: filled ? filledShape.stroke : color,\n    strokeWidth: thickness,\n    fill: filled ? color : emptyShape.fill,\n    selectable: false,\n    evented: false,\n    padding: 15,\n    strokeUniform: true,\n    strokeDashArray: dashed ? [thickness * 2] : [],\n    strokeMiterLimit: 50,\n    strokeLineCap: dashed ? 'round' : 'butt',\n    strokeLineJoin: dashed ? 'round' : 'miter',\n  });\n\n  return fabric.util.object.extend(shape, {\n    shapeType: 'shape',\n    mimicBackground: true,\n  });\n};\n\n/**\n * Creates Circle Shape\n * @param width With of shape\n * @param height Height of shape\n * @param color Color of shape\n * @param filled Flag to set a shape filled or not\n */\nexport const circle = (\n  width: number,\n  height: number,\n  color: string,\n  filled: boolean,\n  thickness: number,\n  dashed: boolean\n) => {\n  const shape = new fabric.Ellipse({\n    rx: width,\n    ry: height,\n    stroke: filled ? filledShape.stroke : color,\n    strokeWidth: thickness,\n    fill: filled ? color : emptyShape.fill,\n    selectable: false,\n    evented: false,\n    strokeUniform: true,\n    strokeDashArray: dashed ? [thickness * 2] : [],\n    strokeLineCap: dashed ? 'round' : 'butt',\n    strokeLineJoin: dashed ? 'round' : 'butt',\n    padding: 15,\n  });\n\n  return fabric.util.object.extend(shape, {\n    shapeType: 'shape',\n    mimicBackground: true,\n  });\n};\n\n/**\n * Creates pentagon shape.\n * @param color Color of shape\n * @param filled Flag to set a shape filled or not\n */\nexport const pentagon = (\n  color: string,\n  filled: boolean,\n  thickness: number,\n  dashed: boolean\n): TypedShape => {\n  let shape = new fabric.Polygon([\n    { x: 200, y: 0 },\n    { x: 250, y: 42 },\n    { x: 230, y: 100 },\n    { x: 170, y: 100 },\n    { x: 150, y: 42 },\n  ]);\n\n  shape = fabric.util.object.extend(shape, {\n    shapeType: 'shape',\n    mimicBackground: true,\n  });\n\n  return shape.set({\n    scaleX: 0.02,\n    scaleY: 0.02,\n    stroke: filled ? filledShape.stroke : color,\n    strokeWidth: thickness,\n    fill: filled ? color : emptyShape.fill,\n    selectable: false,\n    evented: false,\n    strokeUniform: true,\n    strokeDashArray: dashed ? [thickness * 2] : [],\n    padding: 15,\n    strokeMiterLimit: 50,\n    strokeLineCap: dashed ? 'round' : 'butt',\n    strokeLineJoin: dashed ? 'round' : 'miter',\n  });\n};\n\n/**\n * Creates pentagon shape.\n * @param color Color of shape\n * @param filled Flag to set a shape filled or not\n */\nexport const hexagon = (\n  color: string,\n  filled: boolean,\n  thickness: number,\n  dashed: boolean\n): TypedPolygon => {\n  let shape = new fabric.Polygon([\n    { x: 125, y: 0 },\n    { x: 275, y: 0 },\n    { x: 350, y: 175 },\n    { x: 275, y: 350 },\n    { x: 125, y: 350 },\n    { x: 50, y: 175 },\n  ]);\n\n  shape = fabric.util.object.extend(shape, {\n    shapeType: 'shape',\n    scaleX: 0.02,\n    scaleY: 0.02,\n    stroke: filled ? filledShape.stroke : color,\n    strokeWidth: thickness,\n    fill: filled ? color : emptyShape.fill,\n    selectable: false,\n    evented: false,\n    strokeUniform: true,\n    strokeDashArray: dashed ? [thickness * 2] : [],\n    padding: 15,\n    strokeMiterLimit: 50,\n    strokeLineCap: dashed ? 'round' : 'butt',\n    strokeLineJoin: dashed ? 'round' : 'miter',\n  });\n\n  return shape;\n};\n\n/**\n * Method to create a shape.\n * @param path Shape to be created path\n * @param width Width of shape\n * @param height Height of shape\n * @param color Color of shape.\n * @param filled Flag to set a shape filled or not\n */\nexport const generic = (\n  path: string,\n  width: number,\n  height: number,\n  color: string,\n  filled: boolean,\n  thickness: number,\n  dashed: boolean\n): TypedShape => {\n  let shape = new fabric.Path(path);\n  const scaleX = 1 / (Number(shape.width) / width);\n  const scaleY = 1 / (Number(shape.height) / height);\n\n  fabric.util.object.extend(shape, {\n    shapeType: 'shape',\n    mimicBackground: true,\n  });\n\n  return shape.set({\n    scaleX,\n    scaleY,\n    stroke: filled ? filledShape.stroke : color,\n    strokeWidth: thickness,\n    fill: filled ? color : emptyShape.fill,\n    selectable: false,\n    evented: false,\n    strokeUniform: true,\n    strokeDashArray: dashed ? [thickness * 2] : [],\n    padding: 15,\n    strokeMiterLimit: 50,\n    strokeLineCap: dashed ? 'round' : 'butt',\n    strokeLineJoin: dashed ? 'round' : 'miter',\n  });\n};\n\n/**\n * Creates a star shape.\n * @param width Width of shape\n * @param height Height of shape\n * @param color Color of shape\n * @param filled Flag to set a shape filled or not\n */\nexport const star = (\n  width: number,\n  height: number,\n  color: string,\n  filled: boolean,\n  thickness: number,\n  dashed: boolean\n): TypedShape => {\n  const path: string = `\n    M 202.000 222.000 \\\n    L 225.511 234.361 \\\n    L 221.021 208.180 \\\n    L 240.042 189.639 \\\n    L 213.756 185.820 \\\n    L 202.000 162.000 \\\n    L 190.244 185.820 \\\n    L 163.958 189.639 \\\n    L 182.979 208.180 \\\n    L 178.489 234.361 \\\n    L 202.000 222.000 \\\n    z\n  `;\n  return generic(path, width, height, color, filled, thickness, dashed);\n};\n\n/**\n * Creates an arrow shape.\n * @param width Width of shape\n * @param height Height of shape\n * @param color Color of shape\n * @param filled Flag to set a shape filled or not\n */\nexport const arrow = (\n  width: number,\n  height: number,\n  color: string,\n  filled: boolean,\n  thickness: number,\n  dashed: boolean\n): TypedShape => {\n  const path: string = `\n    M421.976,196.712L236.111,10.848C228.884,3.615,220.219,0,210.131,0c-9.9,0-18.464,3.615-25.697,10.848L163.023,32.26\n    c-7.234,6.853-10.85,15.418-10.85,25.697c0,10.277,3.616,18.842,10.85,25.697l83.653,83.937H45.677\n    c-9.895,0-17.937,3.568-24.123,10.707s-9.279,15.752-9.279,25.837v36.546c0,10.088,3.094,18.698,9.279,25.837\n    s14.228,10.704,24.123,10.704h200.995L163.02,360.88c-7.234,7.228-10.85,15.89-10.85,25.981c0,10.089,3.616,18.75,10.85,25.978\n    l21.411,21.412c7.426,7.043,15.99,10.564,25.697,10.564c9.899,0,18.562-3.521,25.981-10.564l185.864-185.864\n    c7.043-7.043,10.567-15.701,10.567-25.981C432.54,211.939,429.016,203.37,421.976,196.712z\n  `;\n\n  return generic(path, width, height, color, filled, thickness, dashed);\n};\n\n/**\n * Creates a chat bubble shape\n * @param width Width of shape\n * @param height Height of shape\n * @param color Color of shape\n * @param filled Flag to set a shape filled or not\n */\nexport const chat = (\n  width: number,\n  height: number,\n  color: string,\n  filled: boolean,\n  thickness: number,\n  dashed: boolean\n): TypedShape => {\n  const path: string = `\n    M29,1.5c-16.016,0-29,11.641-29,26c0,5.292,1.768,10.211,4.796,14.318\n    C4.398,46.563,3.254,53.246,0,56.5c0,0,9.943-1.395,16.677-5.462c0.007,0.003,0.015,0.006,0.022,0.009\n    c2.764-1.801,5.532-3.656,6.105-4.126c0.3-0.421,0.879-0.548,1.33-0.277c0.296,0.178,0.483,0.503,0.489,0.848\n    c0.01,0.622-0.005,0.784-5.585,4.421C22.146,52.933,25.498,53.5,29,53.5c16.016,0,29-11.641,29-26S45.016,1.5,29,1.5z\n  `;\n\n  return generic(path, width, height, color, filled, thickness, dashed);\n};\n\n/**\n * Creates laser pointer shape, used for pointer tool.\n */\nexport const laserPointer = () => {\n  const path: string = `\n    M256, 361.5h-67.421875c-1.1875-4.195312-2.855469-8.1875-4.945313-11.914062l47.679688-47.683594c5.859375-5.855469,\n    5.859375-15.351563.003906-21.210938-5.859375-5.855468-15.355468-5.859375-21.214844-.003906l-47.6875,\n    47.683594c-3.722656-2.09375-7.71875-3.761719-11.910156-4.945313v-308.425781c0-8.285156-6.71875-15-15-15-8.285156,\n    0-15, 6.714844-15 15v308.425781c-4.195312, 1.1875-8.191406, 2.851563-11.917968, 4.945313l-47.6875-47.683594c-5.855469-5.859375-15.351563-5.859375-21.210938,\n    0-5.859375, 5.855469-5.859375, 15.351562, 0, 21.210938l47.683594, 47.6875c-2.09375, 3.726562-3.761719, 7.71875-4.945313, 11.914062h-67.425781c-8.285156,\n    0-15 6.714844-15, 15s6.714844, 15, 15, 15h67.425781c1.183594, 4.195312, 2.851563, 8.1875, 4.945313, 11.914062l-47.683594, 47.6875c-5.859375, 5.855469-5.859375,\n    15.355469, 0, 21.210938, 2.929688, 2.929688, 6.765625, 4.394531, 10.605469, 4.394531, 3.839843, 0, 7.679687-1.464843, 10.605469-4.394531l47.6875-47.683594c3.726562,\n    2.09375, 7.722656, 3.761719, 11.917968, 4.945313v67.425781c0, 8.285156, 6.714844, 15, 15, 15, 8.28125, 0, 15-6.714844, 15-15v-67.425781c4.191406-1.1875,\n    8.1875-2.851563, 11.910156-4.945313l47.6875, 47.683594c2.929688, 2.929688, 6.765626, 4.394531, 10.605469, 4.394531, 3.839844, 0, 7.679688-1.464843, 10.605469-4.394531,\n    5.859375-5.855469, 5.859375-15.351562, 0-21.210938l-47.683594-47.683593c2.09375-3.726563, 3.761719-7.722657, 4.949219-11.917969h67.421875c8.285156, 0, 15-6.714844,\n    15-15s-6.714844-15-15-15zm0, 0\n  `;\n  let shape = new fabric.Path(path);\n\n  fabric.util.object.extend(shape, {\n    shapeType: 'shape',\n    mimicBackground: true,\n  });\n\n  return shape.set({\n    scaleX: 0.1,\n    scaleY: 0.1,\n    flipY: true,\n    angle: -50,\n  });\n};\n\nexport const brush = () => {\n  const shape = new fabric.PatternBrush();\n  return shape;\n};\n","import { useCallback } from 'react';\nimport { shapePoints } from '../../../assets/shapes-points';\nimport { IBrushType } from '../../../interfaces/brushes/brush-type';\nimport { IShapePointsIndex } from '../../../interfaces/brushes/shape-points-index';\nimport { ISpecialShapeSelectorPropsType } from '../../../interfaces/canvas-events/special-shape-selector';\nimport { TypedShape } from '../../../interfaces/shapes/shapes';\nimport { ChalkBrush } from '../brushes/classes/chalkBrush';\nimport { MarkerBrush } from '../brushes/classes/markerBrush';\nimport { PaintBrush } from '../brushes/classes/paintBrush';\nimport { PenBrush } from '../brushes/classes/penBrush';\nimport * as shapes from '../shapes/shapes';\n\ninterface IProps {\n  brushType: IBrushType;\n  lineWidth: number;\n  penColor: string;\n  shape: string;\n  shapeColor: string;\n  canvas?: fabric.Canvas;\n};\n\n/**\n * Selects shape\n * @param props Shape properties\n * @param specific Specified shape.\n */\nexport const shapeSelector = (props: IProps, specific: keyof typeof shapes | string): TypedShape => {\n  const { brushType, lineWidth, penColor, shape, shapeColor } = props;\n  const value: keyof typeof shapes | string = (specific || shape as string) === 'chatBubble' ? 'chat' : specific || shape;\n\n  switch (value) {\n    case 'rectangle':\n    case 'circle':\n    case 'triangle':\n    case 'star':\n    case 'arrow':\n    case 'chat':\n      return shapes[value](\n        2,\n        2,\n        penColor,\n        false,\n        lineWidth,\n        brushType === 'dashed'\n      );\n    case 'pentagon':\n    case 'hexagon':\n      return shapes[value](\n        penColor,\n        false,\n        lineWidth,\n        brushType === 'dashed'\n      );\n    case 'filledRectangle':\n    case 'filledCircle':\n    case 'filledArrow':\n    case 'filledStar':\n    case 'filledChatBubble': {\n      const key: 'rectangle' | 'circle' | 'arrow' | 'star' | 'chat'=\n        value.replace('filled', '').toLowerCase() as 'rectangle' | 'circle' | 'arrow' | 'star' | 'chat';\n\n      return shapes[key](\n        2,\n        2,\n        shapeColor,\n        true,\n        0,\n        brushType === 'dashed'\n      );\n    }\n    case 'filledTriangle':\n      return shapes.triangle(\n        2,\n        4,\n        shapeColor,\n        true,\n        0,\n        brushType === 'dashed'\n      );\n    case 'filledPentagon':\n    case 'filledHexagon': {\n      const key = value === 'filledPentagon' ? 'pentagon' : 'hexagon';\n      return shapes[key](shapeColor, true, 0, brushType === 'dashed');\n    }\n    default:\n      return shapes.circle(\n        2,\n        2,\n        penColor,\n        false,\n        lineWidth,\n        brushType === 'dashed'\n      );\n  }\n};\n\n/**\n * Selects shape.\n * @param props Shape properties\n */\nexport function useShapeSelector(props: IProps) {\n  const { brushType, lineWidth, penColor, shape, shapeColor } = props;\n  const value = useCallback(\n    (specific: keyof typeof shapes | string): TypedShape => {\n\n      const value: keyof typeof shapes | string = (specific || shape as string) === 'chatBubble' ? 'chat' : specific || shape;\n\n      switch (value) {\n        case 'rectangle':\n        case 'circle':\n        case 'triangle':\n        case 'star':\n        case 'arrow':\n        case 'chat':\n          return shapes[value](\n            2,\n            2,\n            penColor,\n            false,\n            lineWidth,\n            brushType === 'dashed'\n          );\n        case 'pentagon':\n        case 'hexagon':\n          return shapes[value](\n            penColor,\n            false,\n            lineWidth,\n            brushType === 'dashed'\n          );\n        case 'filledRectangle':\n        case 'filledCircle':\n        case 'filledArrow':\n        case 'filledStar':\n        case 'filledChatBubble': {\n          const key: 'rectangle' | 'circle' | 'arrow' | 'star' | 'chat'=\n            value.replace('filled', '').toLowerCase() as 'rectangle' | 'circle' | 'arrow' | 'star' | 'chat';\n\n          return shapes[key](\n            2,\n            2,\n            shapeColor,\n            true,\n            0,\n            brushType === 'dashed'\n          );\n        }\n        case 'filledTriangle':\n          return shapes.triangle(\n            2,\n            4,\n            shapeColor,\n            true,\n            0,\n            brushType === 'dashed'\n          );\n        case 'filledPentagon':\n        case 'filledHexagon': {\n          const key = value === 'filledPentagon' ? 'pentagon' : 'hexagon';\n          return shapes[key](shapeColor, true, 0, brushType === 'dashed');\n        }\n        default:\n          return shapes.circle(\n            2,\n            2,\n            penColor,\n            false,\n            lineWidth,\n            brushType === 'dashed'\n          );\n      }\n    },\n    [\n      brushType, lineWidth, penColor, shape, shapeColor\n    ]\n  );\n\n  return value;\n}\n\n/**\n * Selects special (filled) shape.\n * @param userId User Id\n */\nexport function useSpecialShapeSelector(userId: string) {\n  const value = useCallback(async (useProps: ISpecialShapeSelectorPropsType) => {\n    const { canvas, shape, brushType, lineWidth, penColor } = useProps;\n    const original = shapePoints[shape as keyof IShapePointsIndex];\n    let brush: PenBrush | MarkerBrush | PaintBrush | ChalkBrush;\n    let newShape;\n\n    if (!canvas) {\n      return;\n    }\n\n    switch (brushType) {\n      case 'pen':\n        brush = new PenBrush(canvas, userId);\n\n        const { min, max } = brush.setMinMaxWidth(lineWidth);\n        const penPoints = original.points.map((point) => {\n          return {\n            x: point.x,\n            y: point.y,\n            width: (brush as PenBrush).getRandomInt(min, max),\n          };\n        });\n\n        newShape = brush.createPenPath(\n          'provisional',\n          penPoints,\n          lineWidth,\n          penColor\n        );\n        break;\n\n      case 'marker':\n      case 'felt':\n        brush = new MarkerBrush(canvas, userId, brushType);\n        newShape = brush.createMarkerPath(\n          'provisional',\n          original.points,\n          lineWidth,\n          penColor\n        );\n        break;\n\n      case 'paintbrush':\n        brush = new PaintBrush(canvas, userId);\n        const bristles = brush.makeBrush(penColor, lineWidth);\n        newShape = brush.modifyPaintBrushPath(\n          'provisional',\n          original.points,\n          lineWidth,\n          penColor,\n          bristles\n        );\n        break;\n\n      case 'chalk':\n      case 'crayon':\n        brush = new ChalkBrush(canvas, userId, brushType);\n        const clearRects = brush.createChalkEffect(\n          original.points,\n          lineWidth\n        );\n\n        try {\n          newShape = await brush.createChalkPath(\n              'provisional',\n              original.points,\n              lineWidth,\n              penColor,\n              clearRects\n            );\n          break;\n        } catch(e) {\n          return;\n        }\n      }\n\n    if (!newShape) return;\n\n    const scaleX = Number(newShape.width) / 2;\n    const scaleY = Number(newShape.width) / 2;\n\n    newShape.set({\n      scaleX: 1 / scaleX,\n      scaleY: 1 / scaleY,\n    });\n\n    return newShape;\n  }, [userId]);\n\n  return value;\n}\n  ","import { fabric } from 'fabric';\nimport { Point } from 'fabric/fabric-impl';\n\n/**\n * Dimensions model. Indicates an object with\n * height and width.\n */\nexport interface Dimensions {\n  width: number;\n  height: number;\n}\n\n/**\n * Gets length from one point to another.\n * @param x1 Coordinate starts.\n * @param x2 Coordinate ends.\n */\nexport const getLength = (x1: number, x2: number): number => Math.abs(x1 - x2);\n\n/**\n *\n * @param shape Fabric shape. Either rectangle or triangle.\n * @param start Start coordinates.\n * @param end End coordinates.\n */\nexport const setSize = (\n  shape: fabric.Rect | fabric.Triangle,\n  start: Point,\n  end: Point,\n  isNormalBrush: boolean\n): Dimensions => {\n  const width = getLength(end.x, start.x);\n  const height = getLength(end.y, start.y);\n\n  if (isNormalBrush) {\n    shape.set({ width, height });\n  } else {\n    const scaleX = Number(shape.width) / width;\n    const scaleY = Number(shape.height) / height;\n\n    shape.set({\n      scaleX: 1 / scaleX,\n      scaleY: 1 / scaleY,\n    });\n  }\n\n  return { width, height };\n};\n\n/**\n * Sets circle size and returns dimensions.\n * @param shape Fabric ellipse\n * @param start Start coordinates.\n * @param end End coordinates.\n */\nexport const setCircleSize = (\n  shape: fabric.Ellipse,\n  start: Point,\n  end: Point,\n  isNormalBrush: boolean\n): Dimensions => {\n  const rx = getLength(end.x, start.x) / 2;\n  const ry = getLength(end.y, start.y) / 2;\n\n  if (isNormalBrush) {\n    shape.set({ rx, ry });\n  } else {\n    const scaleX = Number(shape.width) / rx;\n    const scaleY = Number(shape.height) / ry;\n\n    shape.set({\n      scaleX: (1 / scaleX) * 2,\n      scaleY: (1 / scaleY) * 2,\n    });\n  }\n\n  return { width: rx * 2, height: ry * 2 };\n};\n\n/**\n * Sets custom shape size and returns dimensions.\n * @param shape Custom shape.\n * @param start Start coordinates.\n * @param end End coordinates.\n */\nexport const setPathSize = (\n  shape: fabric.Object,\n  start: Point,\n  end: Point\n): Dimensions => {\n  const width = getLength(end.x, start.x) / 2;\n  const height = getLength(end.y, start.y) / 2;\n  const scaleX = 2 / (Number(shape.width) / width);\n  const scaleY = 2 / (Number(shape.height) / height);\n\n  shape.set({ scaleX, scaleY });\n  return { width, height };\n};\n","import { useCallback } from \"react\";\nimport { IBrushType } from \"../../../interfaces/brushes/brush-type\";\nimport { TypedShape } from \"../../../interfaces/shapes/shapes\";\nimport { CanvasAction } from \"../reducers/undo-redo\";\nimport { setCircleSize, setSize, setPathSize } from \"../utils/scaling\";\n\n/**\n * Mouse Move event handler\n * @param shape Shape that was added to canvas.\n * @param coordsStart Coordinates of initial click on canvas.\n * @param isCircle Indicates if shape added is a circle.\n */\nexport function useMouseMove() {\n  const value = useCallback((\n    shape: fabric.Object | fabric.Rect | fabric.Ellipse,\n    coordsStart: fabric.Point,\n    specific?: string,\n    canvas?: fabric.Canvas,\n    brushType?: IBrushType,\n  ): void => {\n    const mouseMove = (e: fabric.IEvent): void => {\n      if (!e.pointer || !canvas) return;\n\n      canvas.selection = false;\n\n      if (specific === 'filledCircle' || specific === 'circle') {\n        setCircleSize(\n          shape as fabric.Ellipse,\n          coordsStart,\n          e.pointer,\n          brushType === 'pencil' || brushType === 'dashed'\n        );\n      } else if (\n        specific === 'filledRectangle' ||\n        specific === 'filledTriangle' ||\n        specific === 'rectangle' ||\n        specific === 'triangle'\n      ) {\n        setSize(\n          shape,\n          coordsStart,\n          e.pointer,\n          brushType === 'pencil' || brushType === 'dashed'\n        );\n      } else {\n        setPathSize(shape, coordsStart, e.pointer);\n      }\n\n      let anchor = { ...coordsStart, originX: 'left', originY: 'top' };\n\n      if (e.pointer && coordsStart.x > e.pointer.x) {\n        anchor = { ...anchor, originX: 'right' };\n      }\n\n      if (e.pointer && coordsStart.y > e.pointer.y) {\n        anchor = { ...anchor, originY: 'bottom' };\n      }\n\n      shape.set(anchor);\n      canvas.renderAll();\n    }\n\n    canvas?.on('mouse:move', mouseMove);\n  }, []);\n\n  return value;\n}\n\n/**\n * Mouse up event handler\n * @param dispatch React dispatch method\n */\nexport function useMouseUp(dispatch: React.Dispatch<CanvasAction>) {\n  const value = useCallback((\n    shape: fabric.Object | fabric.Rect | fabric.Ellipse,\n    coordsStart: fabric.Point,\n    specific?: string,\n    canvas?: fabric.Canvas,\n    brushType?: IBrushType,\n  ): void => {\n    canvas?.on('mouse:up', (e: fabric.IEvent): void => {\n      if (!e.pointer) return;\n\n      let size;\n\n      if (specific === 'filledCircle' || specific === 'circle') {\n        size = setCircleSize(\n          shape as fabric.Ellipse,\n          coordsStart,\n          e.pointer,\n          brushType === 'pencil' || brushType === 'dashed'\n        );\n      } else if (\n        specific === 'filledRectangle' ||\n        specific === 'filledTriangle' ||\n        specific === 'rectangle' ||\n        specific === 'triangle'\n      ) {\n        size = setSize(\n          shape,\n          coordsStart,\n          e.pointer,\n          brushType === 'pencil' || brushType === 'dashed'\n        );\n      } else {\n        size = setPathSize(shape, coordsStart, e.pointer);\n      }\n\n      if (size.width <= 2 && size.height <= 2) {\n        canvas.remove(shape);\n      } else {\n        shape.setCoords();\n        canvas.renderAll();\n\n        dispatch({ type: 'CANVAS_SET', payload: canvas.getObjects() });\n      }\n    });\n  }, [dispatch])\n\n  return value;\n}\n\nexport const useMouseDown = (\n  canvas: fabric.Canvas,\n  shapeSelector: (args: string) => fabric.Object | TypedShape,\n  clearOnMouseEvent: (click: (arg: fabric.IEvent) => void) => void,\n  mouseMove: (...args: Array<any>) => void,\n  mouseUp: (...args: Array<any>) => void,\n  brushType: string,\n  shapeColor: string\n) => (useCallback(\n  (specific: string, color?: string): void => {\n    const click = (e: fabric.IEvent): void => {\n      if (e.target || !e.pointer) {\n        return;\n      }\n\n      let shape;\n      shape = shapeSelector(specific);\n\n      if (e.pointer) {\n        (shape as unknown as TypedShape).set({\n          top: e.pointer.y,\n          left: e.pointer.x,\n          shapeType: 'shape',\n          name: specific,\n          strokeUniform: true,\n        });\n      }\n\n      // fill and type properties just can be resetted if is an filled shape\n      if (shape.fill !== 'transparent') {\n        shape.set({\n          shapeType: 'filledShape',\n          fill: color || shapeColor,\n        });\n      }\n\n      clearOnMouseEvent(click);\n      // @ts-ignore\n      mouseMove(shape, e.pointer, specific, canvas, brushType);\n      // @ts-ignore\n      mouseUp(shape, e.pointer, specific);\n      canvas.add(shape);\n    };\n\n    canvas?.on('mouse:down', click);\n  },\n  [canvas, clearOnMouseEvent, mouseMove, mouseUp, shapeColor, shapeSelector, brushType]\n));\n","import store from '../redux/store';\n\n/**\n * Cancels shape creation\n * @param canvas Fabric canvas\n */\nexport const cancelShapeCreation = (canvas: fabric.Canvas) => {\n  return () => {\n    if (store.getState().canvasBoardState.resize) {\n      store.dispatch({ type: 'SET_FALSE' });\n    }\n\n    let shape = store.getState().canvasBoardState.shape;\n\n    if (!shape?.id || shape?.id === 'provisional') {\n      canvas?.remove(shape);\n      store.dispatch({ type: 'SET_SHAPE_NULL' });\n    }\n  };\n};\n\n/**\n * Return the movement hability in the current target shape\n * @param {IEvent} event - current event, necessary to know\n * which is the current target shape\n */\nexport const allowMovementInShape = (event: fabric.IEvent) => {\n  if (event.target) {\n    event.target.set({\n      lockMovementX: false,\n      lockMovementY: false,\n    });\n  }\n};\n","import { IBrushType } from '../../../../interfaces/brushes/brush-type';\nimport { ISpecialShapeSelectorPropsType } from '../../../../interfaces/canvas-events/special-shape-selector';\nimport { TypedShape } from '../../../../interfaces/shapes/shapes';\nimport store from '../../redux/store';\nimport { cancelShapeCreation, allowMovementInShape } from '../objectHandlers';\n\n/**\n * Mouse down event handler\n * @param canvas Fabric canvas\n * @param brushType Brush type\n * @param shapeSelector Shape selector method\n * @param shapeToAdd Indicates shape to add\n * @param specialShapeSelector Method to select special shape\n * @param lineWidth Line width\n * @param penColor Pen / brush color\n */\nexport const mouseDownAction = (\n  canvas: fabric.Canvas,\n  brushType: IBrushType,\n  shapeSelector: (arg1: string) => any,\n  shapeToAdd: string,\n  specialShapeSelector: (arg1: ISpecialShapeSelectorPropsType) => any,\n  lineWidth: number,\n  penColor: string\n) => async (e: fabric.IEvent) => {\n  if (store.getState().canvasBoardState.resize) {\n    return;\n  }\n\n  // Locking movement to avoid shapes moving\n  if (e.target) {\n    e.target.set({\n      lockMovementX: true,\n      lockMovementY: true,\n    });\n  }\n\n  if (brushType === 'pencil' || brushType === 'dashed') {\n    let shape = shapeSelector(shapeToAdd);\n    store.dispatch({ type: 'SET_SHAPE', payload: shape });\n  } else {\n    let shape = (await specialShapeSelector({\n      canvas,\n      shape: shapeToAdd,\n      brushType,\n      lineWidth,\n      penColor,\n    })) as TypedShape;\n    store.dispatch({ type: 'SET_SHAPE', payload: shape });\n  }\n\n  let shape = store.getState().canvasBoardState.shape;\n\n  if (!shape) return;\n\n  if (e.pointer) {\n    shape.set({\n      top: e.pointer.y,\n      left: e.pointer.x,\n      shapeType: 'shape',\n      name: shapeToAdd,\n      strokeUniform: true,\n    });\n\n    // startPoint = e.pointer;\n    store.dispatch({ type: 'SET_START_POINT', payload: e.pointer });\n  }\n\n  canvas?.add(shape);\n  store.dispatch({ type: 'SET_TRUE' });\n\n  /*\n    Canceling shapes creation in object:scaling\n    and object:rotating events\n  */\n  canvas?.on({\n    'object:scaling': cancelShapeCreation(canvas),\n    'object:rotating': cancelShapeCreation(canvas),\n  });\n\n  /*\n    When the shape was resized or rotated\n    the shape's movement is allowed\n  */\n  canvas?.on({\n    'object:scaled': allowMovementInShape,\n    'object:rotated': allowMovementInShape,\n  });\n};\n","export const convertSVGPathInPoints = (path: fabric.Path) => {\n  return path\n    .toSVG()\n    .split('\"')\n    .find((element: string) => element.startsWith('M'))\n    ?.split(/ ([MQL] [\\d+ .]+)/gm)\n    .map((element: string) => element.trim())\n    .map((value: string, index: number, array: string[]) => {\n      const parts = (value || array[index - 1]).split(' ');\n      return {\n        x: Number(parts[1]),\n        y: Number(parts[2]),\n      };\n    });\n};\n","import { ICanvasPathBrush } from '../../../../interfaces/brushes/canvas-path-brush';\nimport { ICoordinate } from '../../../../interfaces/brushes/coordinate';\nimport { convertSVGPathInPoints } from './convertSVGPathInPoints';\nimport { ICanvasObject } from '../../../../interfaces/objects/canvas-object';\n\n/**\n * Creates basePath property in pencil and dashed line styles\n * @param {ICanvasPathBrush} object - Line to set the property.\n */\nexport const setBasePathInNormalBrushes = (object: ICanvasPathBrush) => {\n  // Getting point from SVG data in object\n  const points: ICoordinate[] | undefined = convertSVGPathInPoints(\n    (object as unknown as ICanvasObject) as fabric.Path\n  );\n\n  // Setting properties of base Path and adding them in current object\n  (object as ICanvasPathBrush).set({\n    basePath: {\n      type: object.strokeDashArray?.length ? 'dashed' : 'pencil',\n      points: points || [],\n      stroke: String(object.stroke),\n      strokeWidth: Number(object.strokeWidth),\n    },\n  });\n};\n","import { Group } from \"fabric/fabric-impl\";\nimport { ICanvasBrush } from \"../../../interfaces/brushes/canvas-brush\";\nimport { ICanvasPathBrush } from \"../../../interfaces/brushes/canvas-path-brush\";\nimport { ICoordinate } from \"../../../interfaces/brushes/coordinate\";\nimport { TypedShape } from \"../../../interfaces/shapes/shapes\";\nimport { PaintBrush } from \"../brushes/classes/paintBrush\";\nimport { setCircleSize, setSize, setPathSize } from \"../utils/scaling\";\nimport { getBiggerDifference } from \"../utils/shapes\";\n\n\n/**\n * Sets shape size\n * @param shape Shape \n * @param e fabric event\n * @param perfectShapeIsActive Indicates if perfect shape is enabled\n * @param startPoint Start point coordinates\n * @param shapeToAdd Type of shape to add\n * @param brushType Brush type\n * @param canvas Fabric canvas\n * @param userId User id.\n */\nexport const setShapeSize = (\n  shape: TypedShape,\n  e: fabric.IEvent,\n  perfectShapeIsActive: boolean,\n  startPoint: fabric.Point,\n  shapeToAdd: string,\n  brushType: string,\n  canvas: fabric.Canvas,\n  userId: string,\n) => {\n  if (!e.pointer) return;\n\n  let pointer: fabric.Point = e.pointer;\n  let biggerDifference: number = 0;\n  let newSize;\n\n  if (perfectShapeIsActive) {\n    biggerDifference = getBiggerDifference(pointer, startPoint);\n\n    pointer.x = startPoint.x + biggerDifference;\n    pointer.y = startPoint.y + biggerDifference;\n  } else {\n    pointer = e.pointer;\n  }\n\n  if (shapeToAdd === 'circle') {\n    newSize = setCircleSize(\n      shape as fabric.Ellipse,\n      startPoint,\n      pointer,\n      brushType === 'pencil' || brushType === 'dashed'\n    );\n  } else if (shapeToAdd === 'rectangle' || shapeToAdd === 'triangle') {\n    newSize = setSize(\n      shape,\n      startPoint,\n      pointer,\n      brushType === 'pencil' || brushType === 'dashed'\n    );\n  } else {\n    newSize = setPathSize(shape, startPoint, pointer);\n  }\n\n  if (brushType === 'marker' || brushType === 'felt') {\n    (shape as Group).forEachObject((line) => {\n      line.set({\n        top: Number(line.top) / Number(shape.scaleY),\n        left: Number(line.left) / Number(shape.scaleX),\n      });\n    });\n\n    shape.set({\n      top: startPoint.y,\n      left: startPoint.x,\n    });\n\n    (shape as Group).addWithUpdate();\n    canvas?.renderAll();\n  }\n\n  if (brushType === 'paintbrush' && canvas && userId) {\n    const brush = new PaintBrush(canvas, userId);\n    const newPoints = ((shape as ICanvasPathBrush).basePath\n      ?.points as ICoordinate[]).map((point) => {\n        return {\n          x: point.x * Number(shape.scaleX),\n          y: point.y * Number(shape.scaleY),\n        };\n      });\n\n    const newPath = brush.modifyPaintBrushPath(\n      String(shape.id),\n      newPoints,\n      Number((shape as ICanvasPathBrush).basePath?.strokeWidth),\n      String((shape as ICanvasPathBrush).basePath?.stroke),\n      (shape as ICanvasBrush).basePath?.bristles || []\n    );\n\n    newPath.set({\n      top: startPoint.y,\n      left: startPoint.x,\n    });\n\n    (shape as ICanvasPathBrush).set({ ...newPath });\n    (shape as Group).addWithUpdate();\n    canvas.renderAll();\n  }\n\n  return newSize;\n};\n\n/**\n * Mouse move event handler.\n * @param canvas Canvas\n * @param setShapeSize Set shape size method\n * @param setShapeInProgress Set shape in progress method\n * @param shapeToAdd Sets shape to add\n * @param shape Indicates shape\n * @param resize Indicates if shape is being resized\n * @param startPoint Start point coordinates\n */\nexport const mouseMoveMain = (\n  canvas: fabric.Canvas,\n  setShapeSize: <T>(...args: T[]) => void,\n  setShapeInProgress: <T>(...args: T[]) => void,\n  shapeToAdd: string,\n  shape: fabric.Object | TypedShape,\n  resize: boolean,\n  startPoint: fabric.Point\n) => {\n\n  return canvas?.on('mouse:move', (e: fabric.IEvent) => {\n    if (!shapeToAdd || !shape || !resize) {\n      return;\n    }\n\n    canvas.selection = false;\n    // @ts-ignore\n    setShapeSize(shape, e);\n\n    let anchor = { ...startPoint, originX: 'left', originY: 'top' };\n\n    if (startPoint && e.pointer && startPoint.x > e.pointer.x) {\n      anchor = { ...anchor, originX: 'right' };\n    }\n\n    if (startPoint && e.pointer && startPoint.y > e.pointer.y) {\n      anchor = { ...anchor, originY: 'bottom' };\n    }\n\n    shape.set(anchor);\n    canvas.renderAll();\n\n    setShapeInProgress({\n      shape: shape,\n      startPoint: startPoint,\n    });\n  });\n}\n","export const requiredPencilDashedProps = [\n  'id',\n  'height',\n  'width',\n  'left',\n  'top',\n  'scaleX',\n  'scaleY',\n  'originX',\n  'originY',\n  'basePath',\n];\n\nexport const requiredProps = [\n  'id',\n  'height',\n  'width',\n  'left',\n  'top',\n  'strokeWidth',\n  'stroke',\n  'fill',\n  'name',\n  'scaleX',\n  'scaleY',\n  'strokeUniform',\n  'originX',\n  'originY',\n  'strokeMiterLimit',\n  'strokeLineJoin',\n  'strokeDashArray',\n  'strokeLineCap',\n  'strokeLineJoin',\n];\n\nexport const requiredEllipseProps = [\n  'id',\n  'ry',\n  'rx',\n  'left',\n  'top',\n  'strokeWidth',\n  'stroke',\n  'fill',\n  'strokeUniform',\n  'originY',\n  'originX',\n  'strokeDashArray',\n  'strokeLineCap',\n  'strokeLineJoin',\n];","import { v4 as uuidv4 } from 'uuid';\nimport { shapePoints } from '../../../../assets/shapes-points';\nimport { ICanvasBrush } from '../../../../interfaces/brushes/canvas-brush';\nimport { ICanvasShapeBrush } from '../../../../interfaces/brushes/canvas-shape-brush';\nimport { ICoordinate } from '../../../../interfaces/brushes/coordinate';\nimport { IShapePointsIndex } from '../../../../interfaces/brushes/shape-points-index';\nimport { IShapeInProgress } from '../../../../interfaces/canvas-events/shape-in-progress';\nimport { IUndoRedoEvent } from '../../../../interfaces/canvas-events/undo-redo-event';\nimport { ICanvasObject } from '../../../../interfaces/objects/canvas-object';\nimport { TypedShape } from '../../../../interfaces/shapes/shapes';\nimport { PaintEventSerializer } from '../../../../poc/whiteboard/event-serializer/PaintEventSerializer';\nimport { ChalkBrush } from '../../brushes/classes/chalkBrush';\nimport { MarkerBrush } from '../../brushes/classes/markerBrush';\nimport { PaintBrush } from '../../brushes/classes/paintBrush';\nimport { PenBrush } from '../../brushes/classes/penBrush';\nimport { setBasePathInNormalBrushes } from '../../brushes/utils/setBasePathInNormalBrushes';\nimport { ObjectEvent } from '../../event-serializer/PaintEventSerializer';\nimport { CanvasAction, SET } from '../../reducers/undo-redo';\nimport store from '../../redux/store';\nimport { setShapeSize } from '../shapeActionUtils';\nimport {\n  requiredEllipseProps,\n  requiredPencilDashedProps,\n  requiredProps,\n} from '../shapeProps';\n\n/**\n * Mouse up event handler\n * @param canvas Fabric canvas\n * @param userId User ID\n * @param perfectShapeIsActive Indicates if perfect shape is active\n * @param shapeToAdd Shape to add\n * @param brushType Brush type\n * @param lineWidth Line width\n * @param penColor Pen, brush, or stroke color\n * @param setShapeInProgress Method to set shape in progress\n * @param eventSerializer Paint event serializer\n * @param dispatch Dispatch method for undo redo state.\n */\nexport const mouseUpAction = (\n  canvas: fabric.Canvas,\n  userId: string,\n  perfectShapeIsActive: boolean,\n  shapeToAdd: string,\n  brushType: string,\n  lineWidth: number,\n  penColor: string,\n  setShapeInProgress: React.Dispatch<\n    React.SetStateAction<IShapeInProgress | null | undefined>\n  >,\n  eventSerializer: PaintEventSerializer,\n  dispatch: (action: CanvasAction) => void\n) => async (e: fabric.IEvent) => {\n  let shape = store.getState().canvasBoardState.shape;\n  if (!shape || !store.getState().canvasBoardState.resize) {\n    return;\n  }\n\n  let startPoint = store.getState().canvasBoardState.startPoint;\n\n  const size = setShapeSize(\n    shape,\n    e,\n    perfectShapeIsActive,\n    startPoint,\n    shapeToAdd,\n    brushType,\n    canvas,\n    userId\n  );\n  const id = `${userId}:${uuidv4()}`;\n  store.dispatch({ type: 'SET_FALSE' });\n\n  if (size && size.width <= 2 && size.height <= 2) {\n    canvas.remove(shape);\n  } else {\n    if (brushType === 'pencil' || brushType === 'dashed') {\n      shape.set({ id });\n      shape.setCoords();\n\n      /*\n      Setting the recent created shape like evented\n      to can be resized and rotated\n      */\n      shape.set({\n        strokeDashArray:\n          brushType === 'dashed' ? [Number(shape.strokeWidth) * 2] : [],\n        evented: true,\n        hoverCursor: 'default',\n        lockUniScaling: perfectShapeIsActive,\n      });\n\n      setBasePathInNormalBrushes(shape as ICanvasShapeBrush);\n\n      canvas.setActiveObject(shape);\n      canvas.renderAll();\n    } else {\n      canvas.remove(shape);\n\n      if (userId) {\n        let brush: PenBrush | MarkerBrush | PaintBrush | ChalkBrush;\n        let newPath;\n        const shapeName = String(shape.name);\n\n        const setScaledPoint = (point: ICoordinate) => {\n          return {\n            x:\n              (point.x * Number(shape.width) * Number(shape.scaleX)) /\n              original.width,\n            y:\n              (point.y * Number(shape.height) * Number(shape.scaleY)) /\n              original.height,\n          };\n        };\n\n        const original = shapePoints[shapeName as keyof IShapePointsIndex];\n\n        const points: ICoordinate[] = original.points.map((point) => {\n          return setScaledPoint(point);\n        });\n\n        switch (brushType) {\n          case 'pen':\n            brush = new PenBrush(canvas, userId);\n            const { min, max } = brush.setMinMaxWidth(lineWidth);\n            const penPoints = points.map((point) => {\n              return {\n                x: point.x,\n                y: point.y,\n                width: (brush as PenBrush).getRandomInt(min, max),\n              };\n            });\n\n            newPath = (brush as PenBrush).createPenPath(\n              String((shape as ICanvasObject).id),\n              penPoints,\n              lineWidth,\n              penColor\n            );\n            break;\n\n          case 'marker':\n          case 'felt':\n            brush = new MarkerBrush(canvas, userId, brushType);\n\n            newPath = (brush as MarkerBrush).createMarkerPath(\n              String((shape as ICanvasObject).id),\n              points,\n              lineWidth,\n              penColor\n            );\n            break;\n\n          case 'paintbrush':\n            brush = new PaintBrush(canvas, userId);\n\n            const bristles = (brush as PaintBrush).makeBrush(\n              penColor,\n              lineWidth\n            );\n\n            newPath = (brush as PaintBrush).modifyPaintBrushPath(\n              String((shape as ICanvasObject).id),\n              points,\n              lineWidth,\n              penColor,\n              bristles\n            );\n            break;\n\n          case 'chalk':\n          case 'crayon':\n            brush = new ChalkBrush(canvas, userId, brushType);\n\n            const clearRects = (brush as ChalkBrush).createChalkEffect(\n              points,\n              lineWidth\n            );\n\n            await (brush as ChalkBrush)\n              .createChalkPath(\n                String((shape as ICanvasObject).id),\n                points,\n                lineWidth,\n                penColor,\n                clearRects\n              )\n              .then((image: ICanvasBrush) => {\n                newPath = image;\n              })\n              .catch((error: string) => {\n                console.warn(error);\n              });\n            break;\n        }\n\n        if (!newPath) return;\n\n        ((newPath as ICanvasObject) as ICanvasShapeBrush).set({\n          id: id,\n          name: shapeName,\n          shapeType: 'shape',\n          top: shape.top,\n          left: shape.left,\n          angle: shape.angle,\n          flipX: shape.flipX,\n          flipY: shape.flipY,\n          originX: shape.originX,\n          originY: shape.originY,\n          evented: true,\n          hoverCursor: 'default',\n          lockUniScaling: perfectShapeIsActive,\n        });\n\n        canvas.remove(shape);\n        shape = newPath as TypedShape;\n        canvas.add(newPath);\n\n        canvas.setActiveObject(newPath);\n        canvas.renderAll();\n      }\n    }\n\n    setShapeInProgress(null);\n\n    if (brushType !== 'pencil' && brushType !== 'dashed') {\n      let type = shape.type;\n      let payload = {};\n      let target = {\n        type,\n        id,\n      };\n\n      const requiredProps = requiredPencilDashedProps;\n\n      requiredProps.forEach((prop: string) => {\n        if (shape && (shape as any)[prop]) {\n          target = { ...target, [prop]: (shape as any)[prop] };\n        }\n      });\n\n      payload = {\n        type,\n        target,\n        id,\n      };\n\n      eventSerializer?.push('added', payload as ObjectEvent);\n\n      const event = {\n        event: payload,\n        type: 'added',\n      } as IUndoRedoEvent;\n\n      dispatch({\n        type: SET,\n        payload: (canvas?.getObjects() as unknown) as TypedShape[],\n        canvasId: userId,\n        event,\n      });\n    } else {\n      let type = shape.type;\n      let payload = {};\n      let target = {\n        type,\n        id,\n      };\n\n      if (type !== 'ellipse') {\n        requiredProps.forEach((prop: string) => {\n          if (shape && (shape as any)[prop]) {\n            target = { ...target, [prop]: (shape as any)[prop] };\n          }\n        });\n\n        payload = {\n          type,\n          target,\n          id,\n        };\n      } else {\n        requiredEllipseProps.forEach((prop: string) => {\n          if (shape && (shape as any)[prop]) {\n            target = { ...target, [prop]: (shape as any)[prop] };\n          }\n        });\n\n        payload = {\n          type,\n          target,\n          id,\n        };\n      }\n\n      eventSerializer?.push('added', payload as ObjectEvent);\n\n      const event = { event: payload, type: 'added' } as IUndoRedoEvent;\n\n      dispatch({\n        type: SET,\n        payload: (canvas?.getObjects() as unknown) as TypedShape[],\n        canvasId: userId,\n        event,\n      });\n    }\n\n    store.dispatch({ type: 'SET_SHAPE_NULL' });\n  }\n};\n","import { IShapeInProgress } from '../../../../interfaces/canvas-events/shape-in-progress';\nimport {\n  ObjectEvent,\n  PaintEventSerializer,\n} from '../../event-serializer/PaintEventSerializer';\nimport store from '../../redux/store';\nimport { setShapeSize } from '../shapeActionUtils';\n\n/**\n * Mouse move handler\n * @param canvas Fabric canvas\n * @param userId User ID\n * @param perfectShapeIsActive Indicates if perfect shape is active\n * @param shapeToAdd Indicates shape to add\n * @param brushType Brush type\n * @param setShapeInProgress Method to set shape in progress\n * @param eventSerializer Paint event serializer\n */\nexport const mouseMoveAction = (\n  canvas: fabric.Canvas,\n  userId: string,\n  perfectShapeIsActive: boolean,\n  shapeToAdd: string,\n  brushType: string,\n  setShapeInProgress: React.Dispatch<\n    React.SetStateAction<IShapeInProgress | null | undefined>\n  >,\n  eventSerializer: PaintEventSerializer\n) => (e: fabric.IEvent) => {\n  let shape = store.getState().canvasBoardState.shape;\n\n  if (!shapeToAdd || !shape || !store.getState().canvasBoardState.resize) {\n    return;\n  }\n\n  canvas.selection = false;\n  let startPoint = store.getState().canvasBoardState.startPoint;\n  setShapeSize(\n    shape,\n    e,\n    perfectShapeIsActive,\n    startPoint,\n    shapeToAdd,\n    brushType,\n    canvas,\n    userId\n  );\n\n  let anchor = { ...startPoint, originX: 'left', originY: 'top' };\n\n  if (startPoint && e.pointer && startPoint.x > e.pointer.x) {\n    anchor = { ...anchor, originX: 'right' };\n  }\n\n  if (startPoint && e.pointer && startPoint.y > e.pointer.y) {\n    anchor = { ...anchor, originY: 'bottom' };\n  }\n\n  shape.set(anchor);\n  canvas.renderAll();\n  setShapeInProgress({\n    shape: shape,\n    startPoint: startPoint,\n  });\n\n  let type = shape.type;\n  let target = {\n    type: shape.name,\n    shape,\n  };\n\n  let payload = {\n    type,\n    target,\n    id: userId,\n  } as ObjectEvent;\n\n  eventSerializer?.push('moving', payload);\n};\n","import { ICanvasBrush } from '../../../../interfaces/brushes/canvas-brush';\nimport { PaintBrush } from '../classes/paintBrush';\nimport { fabric } from 'fabric';\nimport { ChalkBrush } from '../classes/chalkBrush';\n\n/**\n * Logic for change line color in special brushes\n * @param {fabric.Canvas} canvas - Canvas to draw\n * @param {string} userId - User that is drawing\n * @param {ICanvasBrush} object - Path to change color\n * @param {string} color - New color to set in path\n */\nexport const changeLineColorInSpecialBrushes = async (\n  canvas: fabric.Canvas,\n  userId: string,\n  object: ICanvasBrush,\n  color: string\n) => {\n  let brush: PaintBrush | ChalkBrush;\n  const basePath = (object as ICanvasBrush).basePath;\n  const brushType = (object as ICanvasBrush).basePath?.type;\n\n  switch (brushType) {\n    case 'paintbrush':\n      brush = new PaintBrush(canvas, userId);\n      const newBrush = brush.makeBrush(color, Number(basePath?.strokeWidth));\n\n      object._objects.forEach((line, index) => {\n        line.set({\n          stroke: newBrush[index].color,\n          shadow: new fabric.Shadow({\n            affectStroke: true,\n            nonScaling: true,\n            color: color,\n            blur: Number(line.strokeWidth) / 2,\n          }),\n        });\n      });\n\n      object.set({\n        basePath: {\n          type: basePath?.type || 'pen',\n          points: basePath?.points || [],\n          stroke: color,\n          strokeWidth: Number(basePath?.strokeWidth),\n          bristles: newBrush,\n        },\n      });\n      break;\n\n    case 'chalk':\n    case 'crayon':\n      brush = new ChalkBrush(canvas, userId, brushType);\n      const newClearRects = brush.createChalkEffect(\n        basePath?.points || [],\n        Number(basePath?.strokeWidth)\n      );\n\n      await brush\n        .createChalkPath(\n          String(object.id),\n          basePath?.points || [],\n          Number(basePath?.strokeWidth),\n          color,\n          newClearRects\n        )\n        .then((newObject) => {\n          const id = object.id;\n\n          newObject.set({\n            angle: object.angle,\n            top: object.top,\n            left: object.left,\n            flipX: object.flipX,\n            flipY: object.flipY,\n          });\n\n          // Id's are deleted to avoid add and remove event serializing\n          delete object.id;\n          delete newObject.id;\n\n          canvas.remove(object);\n          canvas.add(newObject);\n          canvas.setActiveObject(newObject);\n          canvas.renderAll();\n\n          object = newObject;\n\n          // Id is resetted to could synchronize object\n          object.set({\n            id: id,\n          });\n        });\n      break;\n\n    default:\n      object._objects?.forEach((line) => {\n        line.set('stroke', color);\n      });\n\n      object.set({\n        basePath: {\n          type: brushType || 'pen',\n          points: basePath?.points || [],\n          stroke: color,\n          strokeWidth: Number(basePath?.strokeWidth),\n        },\n      });\n      break;\n  }\n\n  return object;\n};\n","import { useCallback } from 'react';\nimport { fabric } from 'fabric';\nimport { ICanvasBrush } from '../../../interfaces/brushes/canvas-brush';\nimport { ICanvasPathBrush } from '../../../interfaces/brushes/canvas-path-brush';\nimport { IUndoRedoEvent } from '../../../interfaces/canvas-events/undo-redo-event';\nimport { ICanvasObject } from '../../../interfaces/objects/canvas-object';\nimport { TypedGroup } from '../../../interfaces/shapes/group';\nimport { TypedShape } from '../../../interfaces/shapes/shapes';\nimport { changeLineColorInSpecialBrushes } from '../brushes/actions/changeLineColorInSpecialBrushes';\nimport {\n  ObjectEvent,\n  ObjectType,\n  PaintEventSerializer,\n} from '../event-serializer/PaintEventSerializer';\nimport { CanvasAction, SET, SET_GROUP } from '../reducers/undo-redo';\nimport { isShape, isFreeDrawing } from '../utils/shapes';\n\n/**\n * Changes the penColor value and if one or more objects are selected\n * also changes the stroke color in free drawing and empty shape objects\n * @param canvas Fabric canvas\n * @param userId User ID\n * @param eventSerializer Paint event serializer\n * @param updatePenColor Update pen color method\n * @param dispatch Dispatch\n * @param changePenColorSync Change pen color method.\n */\nexport const useChangeStrokeColor = (\n  canvas: fabric.Canvas,\n  userId: string,\n  eventSerializer: PaintEventSerializer,\n  updatePenColor: (color: string) => void,\n  dispatch: React.Dispatch<CanvasAction>,\n  changePenColorSync: (arg1: ICanvasObject) => void\n) =>\n  useCallback(\n    (color: string): void => {\n      /**\n       * Changes stroke color in current active objects\n       */\n      const changeColor = async () => {\n        let newActives: TypedShape[] = [];\n        let activeObjects: TypedShape[] = [];\n\n        if (!canvas) return;\n\n        const selection = canvas.getActiveObject();\n\n        if (selection?.type === 'activeSelection') {\n          activeObjects = (selection as fabric.ActiveSelection)._objects;\n        } else {\n          activeObjects = canvas.getActiveObjects();\n        }\n\n        if (!activeObjects) return;\n\n        canvas.discardActiveObject();\n\n        for (const object of activeObjects) {\n          if (\n            ((isShape(object) && object.shapeType === 'shape') ||\n              isFreeDrawing(object)) &&\n            color !== object.stroke\n          ) {\n            (object as ICanvasPathBrush).set('stroke', color);\n            newActives.push(object);\n            changePenColorSync(object as ICanvasObject);\n          }\n\n          // Updating basePath\n          if (isFreeDrawing(object)) {\n            const basePath = (object as ICanvasPathBrush).basePath;\n            (object as ICanvasPathBrush).set({\n              basePath: {\n                type: basePath?.type,\n                points: basePath?.points,\n                stroke: color,\n                strokeWidth: basePath?.strokeWidth,\n              },\n            });\n          }\n\n          // Color Change in Special Brushes\n          if (\n            ((object.type === 'group' && (object as ICanvasBrush).basePath) ||\n              (object.type === 'image' && (object as ICanvasBrush).basePath)) &&\n            canvas &&\n            userId\n          ) {\n            await changeLineColorInSpecialBrushes(\n              canvas,\n              userId,\n              object as ICanvasBrush,\n              color\n            )\n              .then((newObject) => {\n                const basePath = (newObject as ICanvasBrush).basePath;\n\n                const payload: ObjectEvent = {\n                  type:\n                    basePath?.type === 'chalk' || basePath?.type === 'crayon'\n                      ? 'image'\n                      : 'group',\n                  target: {\n                    stroke: basePath?.stroke,\n                    bristles: basePath?.bristles,\n                  } as ICanvasObject,\n                  id: String(newObject.id),\n                };\n\n                eventSerializer?.push('colorChanged', payload);\n                newActives.push(newObject as TypedShape);\n              })\n              .catch((e) => {\n                console.warn(e);\n              });\n          }\n        }\n\n        if (newActives.length === 1) {\n          canvas?.setActiveObject(newActives[0]);\n        } else if (newActives.length >= 2) {\n          const activesGroup = new fabric.ActiveSelection(newActives);\n          canvas?.setActiveObject(activesGroup);\n        }\n\n        updatePenColor(color);\n\n        const obj = canvas?.getActiveObject() as any;\n        if (!obj) return;\n\n        const type = obj?.get('type');\n\n        if (type === 'textbox') return;\n\n        if (obj?.type !== 'activeSelection') {\n          let stroke = type === 'path' ? obj?.stroke : obj?.basePath?.stroke;\n\n          const payload = {\n            type,\n            target: { stroke: stroke },\n            id: obj?.id,\n          };\n\n          const event = { event: payload, type: 'colorChanged' };\n\n          dispatch({\n            type: SET,\n            payload: canvas?.getObjects() as TypedShape[],\n            canvasId: userId,\n            event: (event as unknown) as IUndoRedoEvent,\n          });\n        } else {\n          const activeIds: string[] = canvas\n            ?.getActiveObject()\n            // @ts-ignore - Typings are out of date, getObjects is the correct method to get objects in group.\n            .getObjects()\n            .map((o: TypedShape) => o.id);\n          const payload = {\n            type,\n            svg: true,\n            target: null,\n            id: `${userId}:group`,\n          };\n\n          const event = { event: payload, type: 'activeSelection', activeIds };\n\n          let filtered = canvas?.getObjects().filter((o: any) => {\n            return !o.group;\n          });\n\n          let active: TypedGroup = canvas?.getActiveObject() as TypedGroup;\n          active?.set({ id: `${userId}:group` });\n\n          dispatch({\n            type: SET_GROUP,\n            payload: [...(filtered as any[]), active],\n            canvasId: userId,\n            event: (event as unknown) as IUndoRedoEvent,\n          });\n        }\n\n        canvas?.renderAll();\n      };\n\n      changeColor();\n    },\n    // If changePenColorSync is added performance is affected\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    [canvas, updatePenColor, userId, eventSerializer, dispatch]\n  );\n\n/**\n * Updates text color.\n * @param canvas Fabric canvas\n * @param userId User id\n * @param updateFontColor updates font color method\n * @param eventSerializer Paint event serializer\n * @param dispatch Undo redo dispatch method.\n */\nexport const useTextColor = (\n  canvas: fabric.Canvas,\n  userId: string,\n  updateFontColor: (color: string) => void,\n  eventSerializer: PaintEventSerializer,\n  dispatch: React.Dispatch<CanvasAction>\n) =>\n  useCallback(\n    (color: string) => {\n      updateFontColor(color);\n      if (\n        canvas?.getActiveObject() &&\n        (canvas.getActiveObject() as fabric.IText).text\n      ) {\n        canvas.getActiveObject().set('fill', color);\n        canvas.renderAll();\n\n        const object: ICanvasObject = canvas?.getActiveObject();\n\n        if (!(object as fabric.ITextOptions).isEditing) {\n          const payload = {\n            type: 'textbox',\n            target: { fill: color },\n            id: object.id,\n          } as ObjectEvent;\n\n          eventSerializer?.push('fontColorChanged', payload);\n\n          const event = { event: payload, type: 'colorChanged' };\n\n          dispatch({\n            type: SET,\n            payload: canvas?.getObjects() as TypedShape[],\n            canvasId: userId,\n            event: (event as unknown) as IUndoRedoEvent,\n          });\n        }\n        return;\n      }\n\n      canvas?.getActiveObjects().forEach((obj: ICanvasObject) => {\n        if (obj.id) {\n          const type: ObjectType = obj.get('type') as ObjectType;\n          if (type === 'textbox') {\n            const target = (type: string) => {\n              if (type === 'textbox') {\n                return {\n                  fill: color,\n                };\n              }\n            };\n\n            obj.set({\n              fill: color,\n            });\n\n            const payload: ObjectEvent = {\n              type,\n              target: target(type) as ICanvasObject,\n              id: obj.id,\n            };\n\n            eventSerializer?.push('fontColorChanged', payload);\n          }\n        }\n      });\n    },\n    [updateFontColor, canvas, eventSerializer, dispatch, userId]\n  );\n","import { TypedShape } from \"../../../interfaces/shapes/shapes\";\n\nexport const findLocalObjects = (userId: string, objects: TypedShape[]) => (\n  objects.filter((o: TypedShape) => (o.id?.split(':')[0] === userId))\n);\n\nexport const isLocalObject = (objectId: string, userId: string) => (objectId.split(':')[0] === userId);\n","import { useCallback } from \"react\";\nimport { ICanvasBrush } from \"../../../interfaces/brushes/canvas-brush\";\nimport { ICanvasMouseEvent } from \"../../../interfaces/canvas-events/canvas-mouse-event\";\nimport { ICanvasObject } from \"../../../interfaces/objects/canvas-object\";\nimport { isLocalObject } from \"../utils/findLocalObjects\";\nimport eraseObjectCursor from '../../../assets/cursors/erase-object.png';\n\n/**\n * Creates the listeners to erase objects from the whiteboard\n * @param canvas fabric canvas\n * @param userId user id\n * @param canvasId canvas id\n */\nexport const useEraseObject = (\n  canvas: fabric.Canvas,\n  userId: string,\n  canvasId: string\n) => (\n  useCallback(() => {\n    let eraser: boolean = false;\n    let activeObjects = canvas?.getActiveObjects();\n\n    canvas?.getObjects().forEach((object: ICanvasObject) => {\n      if (\n        (object.id && isLocalObject(object.id, userId as string)) ||\n        !object.id\n      ) {\n        object.set({\n          evented: true,\n          hoverCursor: `url(\"${eraseObjectCursor}\"), auto`,\n          lockMovementX: true,\n          lockMovementY: true,\n        });\n      } else if (object.id) {\n        object.set({\n          hoverCursor: 'default',\n        });\n      }\n    });\n\n    if (activeObjects?.length && activeObjects.length > 1) {\n      canvas?.getActiveObject().set({\n        hoverCursor: `url(\"${eraseObjectCursor}\"), auto`,\n      });\n    }\n\n    const mouseDown = (e: ICanvasMouseEvent) => {\n      if (eraser) {\n        return;\n      }\n\n      canvas.defaultCursor = `url(\"${eraseObjectCursor}\"), auto`;\n      eraser = true;\n\n      // if the click is made over an object\n      if (\n      e.target &&\n      (!e.target._objects ||\n        (e.target._objects && (e.target as ICanvasBrush).basePath)) &&\n      ((e.target.id && isLocalObject(e.target.id, userId as string)) ||\n        !e.target.id)\n      ) {\n        canvas.remove(e.target);\n        canvas.renderAll();\n      }\n\n      // if the click is made over an object group\n      if (e.target?._objects) {\n        e.target._objects.forEach(function (object: fabric.Object) {\n          canvas.remove(object);\n        });\n\n        canvas.discardActiveObject();\n        canvas.renderAll();\n      }\n    };\n\n    const mouseOver = (e: ICanvasMouseEvent) => {\n      if (!eraser) {\n        return false;\n      }\n\n      if (\n        (e.target &&\n          e.target.id &&\n          isLocalObject(e.target.id, userId as string)) ||\n        (e.target && !e.target.id)\n      ) {\n        canvas.remove(e.target);\n        canvas.renderAll();\n      }\n    }\n\n    const mouseUp = () => {\n      if (!eraser) {\n        return false;\n      }\n\n      canvas.defaultCursor = 'default';\n      eraser = false;\n    };\n\n    // When mouse down eraser is able to remove objects\n    canvas?.on('mouse:down', mouseDown);\n\n    // When mouse is over an object\n    canvas?.on('mouse:over', mouseOver);\n\n    // When mouse up eraser is unable to remove objects\n    canvas?.on('mouse:up', mouseUp);\n    // If isLocalObject is added in dependencies an infinity loop happens\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [canvas, canvasId, userId])\n);\n","import { useCallback } from 'react';\nimport { IUndoRedoEvent } from '../../../interfaces/canvas-events/undo-redo-event';\nimport { ICanvasObject } from '../../../interfaces/objects/canvas-object';\nimport { IPermissions } from '../../../interfaces/permissions/permissions';\nimport {\n  ObjectEvent,\n  PaintEventSerializer,\n} from '../event-serializer/PaintEventSerializer';\nimport { CanvasAction, SET } from '../reducers/undo-redo';\nimport store from '../redux/store';\nimport { getToolbarIsEnabled } from '../redux/utils';\n\n/**\n *\n * @param canvas Canvas\n * @param userId user Id\n * @param isCursorObject Function to know which is a cursor and which isn't\n * @param closeModal Close modal method\n * @param dispatch Dispatch method\n * @param isLocalObject Method to check if object is local\n * @param allToolbarIsEnabled Indicates if all toolbar tools are enabled\n * @param localImage Image to display as background or cavnas\n * @param eventSerializer Paint event serializer\n * @param updateClearIsActive Method to activate clear canvas functionality\n * @param canvasId Canvas ID\n * @param backgroundImage background image\n */\nexport const useClearWhiteboardSelf = (\n  canvas: fabric.Canvas,\n  userId: string,\n  isCursorObject: (object: ICanvasObject) => boolean,\n  closeModal: () => void,\n  dispatch: (action: CanvasAction) => void,\n  isLocalObject: (\n    id: string,\n    canvasId: string | undefined\n  ) => boolean | undefined,\n  allToolbarIsEnabled: boolean,\n  localImage: string | File,\n  eventSerializer: PaintEventSerializer,\n  updateClearIsActive: (arg: boolean) => void,\n  canvasId: string,\n  backgroundImage: any\n) =>\n  useCallback(async () => {\n    const toolbarIsEnabled = getToolbarIsEnabled();\n    const serializerToolbarState = store.getState()\n      .permissionsState as IPermissions;\n    const teacherHasPermission = allToolbarIsEnabled;\n    const studentHasPermission =\n      toolbarIsEnabled && serializerToolbarState.clearWhiteboard;\n    if (teacherHasPermission || studentHasPermission) {\n      if (typeof localImage === 'string' && localImage.length) {\n        const target = {\n          id: '',\n          target: {\n            strategy: 'allowClearMyself',\n            isLocalImage: true,\n          },\n        };\n\n        eventSerializer?.push('removed', target as ObjectEvent);\n      }\n      await updateClearIsActive(true);\n      await canvas?.getObjects().forEach((obj: ICanvasObject) => {\n        if (\n          obj.id &&\n          isLocalObject(obj.id, userId) &&\n          !isCursorObject(obj) &&\n          !obj.stampObject\n        ) {\n          const target = {\n            id: obj.id,\n            target: {\n              strategy: 'allowClearMyself',\n            },\n          };\n\n          obj.set({ groupClear: true });\n          canvas?.remove(obj);\n          eventSerializer?.push('removed', target as ObjectEvent);\n        }\n      });\n\n      if (canvas?.backgroundImage) {\n        const target = {\n          // @ts-ignore\n          id: canvas.backgroundImage.id,\n          target: {\n            strategy: 'allowClearMyself',\n            isBackgroundImage: true,\n          },\n        };\n\n        eventSerializer?.push('removed', target as ObjectEvent);\n\n        // In order to remove background you need to add 0 to the first argument.\n        // An empty string unfortunately doesnt work.\n        // https://stackoverflow.com/a/14171884\n        // @ts-ignore\n        canvas.setBackgroundImage(0, canvas.renderAll.bind(canvas));\n      }\n\n      closeModal();\n\n      const event = {\n        event: { id: `${userId}:clearWhiteboard` },\n        type: 'clearedWhiteboard',\n      } as IUndoRedoEvent;\n\n      // Add cleared whiteboard to undo / redo state.\n      dispatch({\n        type: SET,\n        payload: canvas?.getObjects(),\n        canvasId: userId,\n        event,\n      });\n\n      await updateClearIsActive(false);\n    }\n    // If isLocalObject is added in dependencies an infinity loop happens\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [\n    allToolbarIsEnabled,\n    localImage,\n    updateClearIsActive,\n    canvas,\n    closeModal,\n    userId,\n    dispatch,\n    eventSerializer,\n    isCursorObject,\n  ]);\n\n/**\n * Method to clear other clearboards besides teacher\n * @param canvas Fabric canvas\n * @param isCursorObject Function to know which is a cursor and which isn't\n * @param updateClearIsActive Updates clear is active\n * @param eventSerializer Pain event serializer\n */\nexport const useClearWhiteboardOthers = (\n  canvas: fabric.Canvas,\n  isCursorObject: (object: ICanvasObject) => boolean,\n  updateClearIsActive: (arg: boolean) => void,\n  eventSerializer: PaintEventSerializer\n) =>\n  /**\n   * Clears all whiteboard with allowClearOthers strategy\n   * */\n  useCallback(\n    async (userId: string) => {\n      await updateClearIsActive(true);\n      await canvas?.getObjects().forEach((obj: ICanvasObject) => {\n        if (obj.id) {\n          const object = obj.id.split(':');\n\n          if (!object.length) {\n            throw new Error('Invalid ID');\n          }\n\n          if (\n            object[0] === userId &&\n            !isCursorObject(obj) &&\n            !obj.stampObject\n          ) {\n            canvas?.remove(obj);\n          }\n\n          const target = {\n            id: obj.id,\n            target: {\n              strategy: 'allowClearOthers',\n              userId,\n            },\n          };\n\n          eventSerializer?.push('removed', target as ObjectEvent);\n        }\n      });\n      await updateClearIsActive(false);\n    },\n    [canvas, eventSerializer, isCursorObject, updateClearIsActive]\n  );\n\nexport const useClearWhiteboardClearAll = (\n  canvas: fabric.Canvas,\n  userId: string,\n  isCursorObject: (object: ICanvasObject) => boolean,\n  updateClearIsActive: any,\n  eventSerializer: PaintEventSerializer,\n  dispatch: any\n) =>\n  useCallback(async () => {\n    await updateClearIsActive(true);\n    await canvas?.getObjects().forEach((obj: ICanvasObject) => {\n      if (obj.id && !isCursorObject(obj) && !obj.stampObject) {\n        obj.set({ groupClear: true });\n        canvas?.remove(obj);\n      }\n    });\n\n    const target = {\n      target: {\n        strategy: 'allowClearAll',\n      },\n    };\n\n    eventSerializer?.push('removed', target as ObjectEvent);\n\n    // Add cleared whiteboard to undo / redo state.\n    const event = {\n      event: { id: `${userId}:clearWhiteboard` },\n      type: 'clearedWhiteboard',\n    } as IUndoRedoEvent;\n\n    // Add cleared whiteboard to undo / redo state.\n\n    dispatch({\n      type: SET,\n      payload: canvas?.getObjects(),\n      canvasId: userId,\n      event,\n    });\n\n    await updateClearIsActive(false);\n  }, [\n    updateClearIsActive,\n    canvas,\n    eventSerializer,\n    userId,\n    dispatch,\n    isCursorObject,\n  ]);\n","import { useCallback, useContext, useEffect, useMemo, useState } from 'react';\nimport { fabric } from 'fabric';\nimport eraseObjectCursor from '../../../assets/cursors/erase-object.png';\nimport { WhiteboardContext } from '../WhiteboardContext';\nimport { isShape } from '../utils/shapes';\nimport { UNDO, REDO, SET, CanvasAction } from '../reducers/undo-redo';\nimport { ICanvasObject } from '../../../interfaces/objects/canvas-object';\nimport { IWhiteboardContext } from '../../../interfaces/whiteboard-context/whiteboard-context';\nimport { PartialErase } from '../partial-erase/partialErase';\nimport { useSynchronization } from '../canvas-features/useSynchronization';\nimport store from '../../whiteboard/redux/store';\nimport { getToolbarIsEnabled } from '../redux/utils';\nimport { IPermissions } from '../../../interfaces/permissions/permissions';\nimport { IBrushType } from '../../../interfaces/brushes/brush-type';\nimport { changeBrushTypeAction } from './feature-actions/changeBrushTypeAction';\nimport { useShapeSelector, useSpecialShapeSelector } from './shapeActions';\nimport { useMouseDown, useMouseMove, useMouseUp } from './mouseActions';\nimport { mouseDownAction } from './mouseHandlers/mouseDown';\nimport { mouseUpAction } from './mouseHandlers/mouseUp';\nimport { mouseMoveAction } from './mouseHandlers/mouseMove';\nimport { useChangeStrokeColor, useTextColor } from './strokeColor';\nimport { useEraseObject } from './eraseActions';\nimport {\n  useClearWhiteboardOthers,\n  useClearWhiteboardSelf,\n  useClearWhiteboardClearAll,\n} from './clearWhiteboardActions';\nimport { IShapeInProgress } from '../../../interfaces/canvas-events/shape-in-progress';\nimport { IUndoRedoEvent } from '../../../interfaces/canvas-events/undo-redo-event';\n\nexport const useCanvasActions = (\n  canvas: fabric.Canvas,\n  dispatch: (action: CanvasAction) => void,\n  canvasId: string,\n  eventSerializer: any,\n  userId: string,\n  ignoreDirectActions?: boolean\n) => {\n  const {\n    shapeIsActive,\n    updateFontColor,\n    shape,\n    shapeColor,\n    updatePenColor,\n    updateShapeColor,\n    updateBrushType,\n    closeModal,\n    penColor,\n    lineWidth,\n    isLocalObject,\n    updateClearIsActive,\n    allToolbarIsEnabled,\n    perfectShapeIsActive,\n    partialEraseIsActive,\n    eraseType,\n    localImage,\n    brushType,\n    eraserIsActive,\n    updateBackgroundColor,\n    setLocalBackground,\n    backgroundImage,\n    setIsBackgroundImage,\n    setBackgroundImageIsPartialErasable,\n    setLocalImage,\n    setBackgroundImage,\n  } = useContext(WhiteboardContext) as IWhiteboardContext;\n\n  const { changePenColorSync } = useSynchronization(userId as string);\n  /**\n   * Adds shape to whiteboard.\n   * @param specific Indicates shape type that should be added in whiteboard.\n   */\n  const shapeSelector = useShapeSelector({\n    brushType,\n    lineWidth,\n    penColor,\n    shape,\n    shapeColor,\n  });\n\n  /**\n   * Adds shape with special brush to whiteboard.\n   * @param {string} shape - Indicates shape type that should be added in whiteboard.\n   * @param {IBrushType} brushType - Indicates brush type that sould be drawed the given shape.\n   */\n  const specialShapeSelector = useSpecialShapeSelector(userId as string);\n\n  /**\n   * Changes backgroundColor property\n   * and makes the necessary changes to paint the current whiteboard\n   * @param {string} color - Color to paint the background\n   */\n  const setBackgroundColorInCanvas = useCallback(\n    (color: string) => {\n      updateBackgroundColor(color);\n      setLocalBackground(true);\n      setIsBackgroundImage(false);\n      setBackgroundImageIsPartialErasable(false);\n      setLocalImage('');\n      setBackgroundImage('');\n\n      canvas.setBackgroundColor('transparent', canvas.renderAll.bind(canvas));\n\n      // @ts-ignore\n      canvas.setBackgroundImage(0, canvas.renderAll.bind(canvas));\n    },\n    [\n      canvas,\n      setBackgroundImage,\n      setBackgroundImageIsPartialErasable,\n      setIsBackgroundImage,\n      setLocalBackground,\n      setLocalImage,\n      updateBackgroundColor,\n    ]\n  );\n\n  /**\n   * Add specific color to the whiteboard background\n   * @param {string} color - color to set\n   */\n  const fillBackgroundColor = useCallback(\n    async (color: string) => {\n      await setBackgroundColorInCanvas(color);\n\n      const payload = {\n        id: userId,\n        target: color,\n      };\n\n      const event = ({\n        event: {\n          id: userId,\n          color,\n        },\n        type: 'backgroundColorChanged',\n      } as unknown) as IUndoRedoEvent;\n\n      dispatch({\n        type: SET,\n        payload: canvas?.getObjects(),\n        canvasId: userId,\n        event,\n      });\n\n      eventSerializer?.push('backgroundColorChanged', payload);\n    },\n    [canvas, dispatch, eventSerializer, setBackgroundColorInCanvas, userId]\n  );\n\n  /**\n   *\n   * @param shape Shape that was added to canvas.\n   * @param coordsStart Coordinates of initial click on canvas.\n   * @param isCircle Indicates if shape added is a circle.\n   */\n  const mouseMove = useMouseMove();\n\n  /**\n   * Mouse up event handlers for cavnas\n   */\n  const mouseUp = useMouseUp(dispatch);\n\n  /**\n   * Clear mouse event handlers for cavnas\n   */\n  const clearOnMouseEvent = useCallback((click?: (arg: fabric.IEvent) => void): void => {\n    if (click) {\n      canvas?.off('mouse:down', click);\n    } else {\n      canvas?.off('mouse:down');\n    }\n  }, [canvas]);\n\n  /**\n   * Clears all mouse event listeners from canvas.\n   */\n  const clearMouseEvents = useCallback((): void => {\n    canvas?.off('mouse:move');\n    canvas?.off('mouse:up');\n  }, [canvas]);\n\n  /**\n   * Mouse down event listener for canvas.\n   * @param shape Shape being added on canvas.\n   * @param isCircle Indicates if shape is a circle.\n   */\n  const mouseDown = useMouseDown(\n    canvas,\n    shapeSelector,\n    clearOnMouseEvent,\n    mouseMove,\n    mouseUp,\n    brushType,\n    shapeColor\n  );\n\n  /**\n   * Used to save the current shape in case of an interruption\n   * in its creation, generated by a state change in perfectShapeIsActive\n   */\n  const [\n    shapeInProgress,\n    setShapeInProgress,\n  ] = useState<IShapeInProgress | null>();\n\n  /**\n   * Add specific shape to whiteboard\n   * */\n  const addShape = useCallback(\n    (shapeToAdd: string) => {\n      // Required to prevent multiple shapes add at once\n      // if user clicked more than one shape during selection.\n      if (!shapeIsActive) {\n        return;\n      }\n\n      // If shape creation was interrupted by a change in perfectShapeIsActive\n      if (shapeInProgress) {\n        let startPoint = shapeInProgress.startPoint;\n        store.dispatch({ type: 'SET_TRUE' });\n        store.dispatch({ type: 'SET_START_POINT', payload: startPoint });\n      }\n\n      const activeObject = canvas?.getActiveObject();\n\n      if (activeObject && isShape(activeObject)) {\n        activeObject.set('evented', true);\n      }\n\n      canvas?.on(\n        'mouse:down',\n        mouseDownAction(\n          canvas,\n          brushType,\n          shapeSelector,\n          shapeToAdd,\n          specialShapeSelector,\n          lineWidth,\n          penColor\n        )\n      );\n      canvas?.on(\n        'mouse:move',\n        mouseMoveAction(\n          canvas,\n          userId,\n          perfectShapeIsActive,\n          shapeToAdd,\n          brushType,\n          setShapeInProgress,\n          eventSerializer\n        )\n      );\n      canvas?.on(\n        'mouse:up',\n        mouseUpAction(\n          canvas,\n          userId,\n          perfectShapeIsActive,\n          shapeToAdd,\n          brushType,\n          lineWidth,\n          penColor,\n          setShapeInProgress,\n          eventSerializer,\n          dispatch\n        )\n      );\n    },\n    /* If dataInProgress is added on dependencies\n    the performance is bad and an unexpected behavior occurs */\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    [\n      shapeIsActive,\n      canvas,\n      perfectShapeIsActive,\n      shapeSelector,\n      userId,\n      eventSerializer,\n      dispatch,\n    ]\n  );\n\n  /**\n   * Changes the penColor value and if one or more objects are selected\n   * also changes the stroke color in free drawing and empty shape objects\n   * @param {string} color - new color to change\n   */\n  const changeStrokeColor = useChangeStrokeColor(\n    canvas,\n    userId,\n    eventSerializer,\n    updatePenColor,\n    dispatch,\n    changePenColorSync\n  );\n\n  /**\n   * Changes brush type for shapes and\n   */\n  const changeBrushType = useCallback(\n    (type: IBrushType) => {\n      changeBrushTypeAction(\n        canvas as fabric.Canvas,\n        userId as string,\n        eventSerializer,\n        updateBrushType,\n        type,\n        dispatch\n      );\n    },\n    [canvas, dispatch, eventSerializer, updateBrushType, userId]\n  );\n\n  /**\n   * Add specific color to selected shape\n   * */\n  const fillColor = useCallback(\n    (color: string) => {\n      updateShapeColor(color);\n      clearOnMouseEvent();\n      clearMouseEvents();\n      mouseDown(shape, color);\n\n      if (\n        canvas?.getActiveObject() &&\n        canvas.getActiveObject().fill !== 'transparent'\n      ) {\n        canvas.getActiveObject().set('fill', color);\n        canvas.renderAll();\n\n        // TODO: Handle Undo/Redo dispatch.\n        dispatch({ type: SET, payload: canvas.getObjects() });\n      }\n    },\n    [\n      canvas,\n      clearMouseEvents,\n      clearOnMouseEvent,\n      mouseDown,\n      shape,\n      updateShapeColor,\n      dispatch,\n    ]\n  );\n\n  /**\n   * Add specific color to selected text or group of texts\n   * @param {string} color - color to set\n   */\n  const textColor = useTextColor(\n    canvas,\n    userId,\n    updateFontColor,\n    eventSerializer,\n    dispatch\n  );\n\n  /**\n   * Set the given visibility in all the controls in the given object.\n   * @param {ICanvasObject} object - Object to set controls visibility.\n   * @param {boolean} visibility - Visibility state.\n   */\n  const setObjectControlsVisibility = useCallback(\n    (object: ICanvasObject, visibility: boolean) => {\n      object.setControlsVisibility({\n        bl: visibility,\n        br: visibility,\n        mb: visibility,\n        ml: visibility,\n        mr: visibility,\n        mt: visibility,\n        tl: visibility,\n        tr: visibility,\n        mtr: visibility,\n      });\n    },\n    []\n  );\n\n  // Flood-fill Feature or maybe could be in CanvasActions.tsx\n  /**\n   * Reorder the current shapes letting the shapes over their container shape\n   */\n  const reorderShapes = useCallback(() => {\n    let temporal;\n    let actualIndex;\n    let compareIndex;\n\n    const getObjectIndex = (object: ICanvasObject, canvas: fabric.Canvas) => {\n      return canvas.getObjects().indexOf(object);\n    };\n\n    canvas?.forEachObject((actual) => {\n      canvas.forEachObject((compare) => {\n        actualIndex = getObjectIndex(actual, canvas);\n        compareIndex = getObjectIndex(compare, canvas);\n\n        if (\n          actual.isContainedWithinObject(compare) &&\n          actualIndex < compareIndex\n        ) {\n          temporal = getObjectIndex(actual, canvas);\n          actual.moveTo(compareIndex);\n          compare.moveTo(temporal);\n        }\n      });\n    });\n  }, [canvas]);\n\n  /**\n   * Finds in the current canvas an object with the given id and returns it.\n   * @param {string} id - Id of the object to find\n   */\n  const findObjectById = useCallback(\n    (id: string) => {\n      return canvas\n        .getObjects()\n        .find((obj: ICanvasObject) => obj.id === id) as ICanvasObject;\n    },\n    [canvas]\n  );\n\n  /**\n   * Checks if the given object is a cursor object\n   * @param {ICanvasObject} object - Object to check\n   */\n  const isCursorObject = useCallback((object: ICanvasObject) => {\n    return object.id?.split(':')[1] === 'cursor';\n  }, []);\n\n  /**\n   * Clears all whiteboard elements\n   * */\n  const clearWhiteboardClearAll = useClearWhiteboardClearAll(\n    canvas,\n    userId,\n    isCursorObject,\n    updateClearIsActive,\n    eventSerializer,\n    dispatch\n  );\n\n  /**\n   * Clears all whiteboard elements\n   * */\n  const clearWhiteboardClearMySelf = useClearWhiteboardSelf(\n    canvas,\n    userId,\n    isCursorObject,\n    closeModal,\n    dispatch,\n    isLocalObject,\n    allToolbarIsEnabled,\n    localImage,\n    eventSerializer,\n    updateClearIsActive,\n    canvasId,\n    backgroundImage\n  );\n\n  /**\n   * Clears all whiteboard with allowClearOthers strategy\n   * */\n  const clearWhiteboardAllowClearOthers = useClearWhiteboardOthers(\n    canvas,\n    isCursorObject,\n    updateClearIsActive,\n    eventSerializer\n  );\n\n  /**\n   * Set Canvas Whiteboard selection ability\n   * @param {boolean} selection - value to set in canvas and objects selection\n   */\n  const setCanvasSelection = useCallback(\n    (selection: boolean) => {\n      if (canvas) {\n        canvas.selection = selection;\n        canvas.renderAll();\n      }\n    },\n    [canvas]\n  );\n\n  /**\n   * Set the cursor to be showed when a object hover happens\n   * @param {string} cursor - Cursor name to show\n   */\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  const setHoverCursorObjects = useCallback(\n    (cursor: string): void => {\n      if (canvas) {\n        canvas.forEachObject((object: fabric.Object) => {\n          object.hoverCursor = cursor;\n        });\n\n        canvas.renderAll();\n      }\n    },\n    [canvas]\n  );\n\n  /**\n   * Creates the listeners to erase objects from the whiteboard\n   */\n  const eraseObject = useEraseObject(canvas, userId, canvasId);\n\n  useEffect(() => {\n    if (!canvas || ignoreDirectActions) {\n      return;\n    }\n\n    const toolbarIsEnabled = getToolbarIsEnabled(userId);\n    const serializerToolbarState = store.getState()\n      .permissionsState as IPermissions;\n    let eraser: any;\n\n    if (\n      eraseType === 'partial' &&\n      canvas &&\n      toolbarIsEnabled &&\n      eraserIsActive &&\n      (allToolbarIsEnabled || serializerToolbarState.partialErase)\n    ) {\n      canvas?.discardActiveObject();\n      canvas?.renderAll();\n\n      eraser = new PartialErase(\n        userId as string,\n        canvas as fabric.Canvas,\n        lineWidth,\n        eraseObjectCursor,\n        allToolbarIsEnabled,\n        partialEraseIsActive,\n        serializerToolbarState.partialErase,\n        eventSerializer,\n        dispatch\n      );\n      eraser.init();\n    }\n\n    if (\n      eraseType === 'object' &&\n      canvas &&\n      toolbarIsEnabled &&\n      (allToolbarIsEnabled || serializerToolbarState.erase)\n    ) {\n      eraseObject();\n\n      if (canvas.getActiveObjects().length === 1) {\n        canvas.discardActiveObject().renderAll();\n      }\n    }\n\n    return () => {\n      if (eraser) {\n        eraser.destroy();\n        eraser = null;\n      }\n\n      canvas?.off('mouse:up');\n      canvas?.off('mouse:over');\n      canvas?.off('path:created');\n    };\n  }, [\n    canvas,\n    eraserIsActive,\n    eraseType,\n    partialEraseIsActive,\n    allToolbarIsEnabled,\n    userId,\n    lineWidth,\n    eventSerializer,\n    dispatch,\n    eraseObject,\n    ignoreDirectActions,\n  ]);\n\n  /**\n   * Deselect the actual selected object\n   */\n  const discardActiveObject = useCallback(() => {\n    canvas?.discardActiveObject().renderAll();\n  }, [canvas]);\n\n  const undo = useCallback(() => {\n    const toolbarIsEnabled = getToolbarIsEnabled();\n    const serializerToolbarState = store.getState()\n      .permissionsState as IPermissions;\n    const teacherHasPermission = allToolbarIsEnabled;\n    const studentHasPermission =\n      toolbarIsEnabled && serializerToolbarState.undoRedo;\n\n    if (teacherHasPermission || studentHasPermission) {\n      dispatch({ type: UNDO, canvasId: canvasId });\n    }\n  }, [dispatch, canvasId, allToolbarIsEnabled]);\n\n  const redo = useCallback(() => {\n    const toolbarIsEnabled = getToolbarIsEnabled();\n    const serializerToolbarState = store.getState()\n      .permissionsState as IPermissions;\n    const teacherHasPermission = allToolbarIsEnabled;\n    const studentHasPermission =\n      toolbarIsEnabled && serializerToolbarState.undoRedo;\n\n    if (teacherHasPermission || studentHasPermission) {\n      dispatch({ type: REDO, canvasId: canvasId });\n    }\n  }, [dispatch, canvasId, allToolbarIsEnabled]);\n\n  const state = useMemo(() => {\n    const actions = {\n      fillColor,\n      changeStrokeColor,\n      changeBrushType,\n      textColor,\n      clearWhiteboardClearAll,\n      discardActiveObject,\n      addShape,\n      eraseObject,\n      reorderShapes,\n      setCanvasSelection,\n      setHoverCursorObjects,\n      setObjectControlsVisibility,\n      undo,\n      redo,\n      clearWhiteboardAllowClearOthers,\n      clearWhiteboardClearMySelf,\n      fillBackgroundColor,\n      setBackgroundColorInCanvas,\n      isCursorObject,\n      findObjectById,\n    };\n\n    return { actions, mouseDown };\n  }, [\n    fillColor,\n    changeStrokeColor,\n    changeBrushType,\n    textColor,\n    clearWhiteboardClearAll,\n    discardActiveObject,\n    addShape,\n    eraseObject,\n    reorderShapes,\n    setCanvasSelection,\n    setHoverCursorObjects,\n    setObjectControlsVisibility,\n    undo,\n    redo,\n    clearWhiteboardAllowClearOthers,\n    clearWhiteboardClearMySelf,\n    fillBackgroundColor,\n    setBackgroundColorInCanvas,\n    isCursorObject,\n    findObjectById,\n    mouseDown,\n  ]);\n\n  return state;\n};\n","import { v4 as uuidv4 } from 'uuid';\nimport { ObjectEvent } from './PaintEventSerializer';\nimport { ICanvasObject } from '../../../interfaces/objects/canvas-object';\n\nexport class PainterEvents {\n  public static createId(canvasId: string): string {\n    return `${canvasId}:${uuidv4()}`;\n  }\n\n  private static isLocalObject(id: string, canvasId: string) {\n    const object = id.split(':');\n\n    if (!object.length) {\n      throw new Error('Invalid ID');\n    }\n\n    return object[0] === canvasId;\n  }\n\n  public static pathCreated(\n    target: ICanvasObject,\n    id: string,\n    canvasId: string\n  ): ObjectEvent | undefined {\n    if (this.isLocalObject(id, canvasId)) {\n      return {\n        type: 'path',\n        target,\n        id,\n      };\n    }\n  }\n\n  public static objectAdded(\n    target: ICanvasObject,\n    id: string,\n    canvasId: string\n  ): ObjectEvent | undefined {\n    if (this.isLocalObject(id, canvasId)) {\n      return {\n        type: 'path',\n        target,\n        id,\n      };\n    }\n  }\n}\n","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.deinterlace = void 0;\n\n/**\r\n * Deinterlace function from https://github.com/shachaf/jsgif\r\n */\nvar deinterlace = function deinterlace(pixels, width) {\n  var newPixels = new Array(pixels.length);\n  var rows = pixels.length / width;\n\n  var cpRow = function cpRow(toRow, fromRow) {\n    var fromPixels = pixels.slice(fromRow * width, (fromRow + 1) * width);\n    newPixels.splice.apply(newPixels, [toRow * width, width].concat(fromPixels));\n  }; // See appendix E.\n\n\n  var offsets = [0, 4, 2, 1];\n  var steps = [8, 8, 4, 2];\n  var fromRow = 0;\n\n  for (var pass = 0; pass < 4; pass++) {\n    for (var toRow = offsets[pass]; toRow < rows; toRow += steps[pass]) {\n      cpRow(toRow, fromRow);\n      fromRow++;\n    }\n  }\n\n  return newPixels;\n};\n\nexports.deinterlace = deinterlace;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.lzw = void 0;\n\n/**\r\n * javascript port of java LZW decompression\r\n * Original java author url: https://gist.github.com/devunwired/4479231\r\n */\nvar lzw = function lzw(minCodeSize, data, pixelCount) {\n  var MAX_STACK_SIZE = 4096;\n  var nullCode = -1;\n  var npix = pixelCount;\n  var available, clear, code_mask, code_size, end_of_information, in_code, old_code, bits, code, i, datum, data_size, first, top, bi, pi;\n  var dstPixels = new Array(pixelCount);\n  var prefix = new Array(MAX_STACK_SIZE);\n  var suffix = new Array(MAX_STACK_SIZE);\n  var pixelStack = new Array(MAX_STACK_SIZE + 1); // Initialize GIF data stream decoder.\n\n  data_size = minCodeSize;\n  clear = 1 << data_size;\n  end_of_information = clear + 1;\n  available = clear + 2;\n  old_code = nullCode;\n  code_size = data_size + 1;\n  code_mask = (1 << code_size) - 1;\n\n  for (code = 0; code < clear; code++) {\n    prefix[code] = 0;\n    suffix[code] = code;\n  } // Decode GIF pixel stream.\n\n\n  var datum, bits, count, first, top, pi, bi;\n  datum = bits = count = first = top = pi = bi = 0;\n\n  for (i = 0; i < npix;) {\n    if (top === 0) {\n      if (bits < code_size) {\n        // get the next byte\n        datum += data[bi] << bits;\n        bits += 8;\n        bi++;\n        continue;\n      } // Get the next code.\n\n\n      code = datum & code_mask;\n      datum >>= code_size;\n      bits -= code_size; // Interpret the code\n\n      if (code > available || code == end_of_information) {\n        break;\n      }\n\n      if (code == clear) {\n        // Reset decoder.\n        code_size = data_size + 1;\n        code_mask = (1 << code_size) - 1;\n        available = clear + 2;\n        old_code = nullCode;\n        continue;\n      }\n\n      if (old_code == nullCode) {\n        pixelStack[top++] = suffix[code];\n        old_code = code;\n        first = code;\n        continue;\n      }\n\n      in_code = code;\n\n      if (code == available) {\n        pixelStack[top++] = first;\n        code = old_code;\n      }\n\n      while (code > clear) {\n        pixelStack[top++] = suffix[code];\n        code = prefix[code];\n      }\n\n      first = suffix[code] & 0xff;\n      pixelStack[top++] = first; // add a new string to the table, but only if space is available\n      // if not, just continue with current table until a clear code is found\n      // (deferred clear code implementation as per GIF spec)\n\n      if (available < MAX_STACK_SIZE) {\n        prefix[available] = old_code;\n        suffix[available] = first;\n        available++;\n\n        if ((available & code_mask) === 0 && available < MAX_STACK_SIZE) {\n          code_size++;\n          code_mask += available;\n        }\n      }\n\n      old_code = in_code;\n    } // Pop a pixel off the pixel stack.\n\n\n    top--;\n    dstPixels[pi++] = pixelStack[top];\n    i++;\n  }\n\n  for (i = pi; i < npix; i++) {\n    dstPixels[i] = 0; // clear missing pixels\n  }\n\n  return dstPixels;\n};\n\nexports.lzw = lzw;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.decompressFrames = exports.decompressFrame = exports.parseGIF = void 0;\n\nvar _gif = _interopRequireDefault(require(\"js-binary-schema-parser/lib/schemas/gif\"));\n\nvar _jsBinarySchemaParser = require(\"js-binary-schema-parser\");\n\nvar _uint = require(\"js-binary-schema-parser/lib/parsers/uint8\");\n\nvar _deinterlace = require(\"./deinterlace\");\n\nvar _lzw = require(\"./lzw\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\n\nvar parseGIF = function parseGIF(arrayBuffer) {\n  var byteData = new Uint8Array(arrayBuffer);\n  return (0, _jsBinarySchemaParser.parse)((0, _uint.buildStream)(byteData), _gif[\"default\"]);\n};\n\nexports.parseGIF = parseGIF;\n\nvar generatePatch = function generatePatch(image) {\n  var totalPixels = image.pixels.length;\n  var patchData = new Uint8ClampedArray(totalPixels * 4);\n\n  for (var i = 0; i < totalPixels; i++) {\n    var pos = i * 4;\n    var colorIndex = image.pixels[i];\n    var color = image.colorTable[colorIndex];\n    patchData[pos] = color[0];\n    patchData[pos + 1] = color[1];\n    patchData[pos + 2] = color[2];\n    patchData[pos + 3] = colorIndex !== image.transparentIndex ? 255 : 0;\n  }\n\n  return patchData;\n};\n\nvar decompressFrame = function decompressFrame(frame, gct, buildImagePatch) {\n  if (!frame.image) {\n    console.warn('gif frame does not have associated image.');\n    return;\n  }\n\n  var image = frame.image; // get the number of pixels\n\n  var totalPixels = image.descriptor.width * image.descriptor.height; // do lzw decompression\n\n  var pixels = (0, _lzw.lzw)(image.data.minCodeSize, image.data.blocks, totalPixels); // deal with interlacing if necessary\n\n  if (image.descriptor.lct.interlaced) {\n    pixels = (0, _deinterlace.deinterlace)(pixels, image.descriptor.width);\n  }\n\n  var resultImage = {\n    pixels: pixels,\n    dims: {\n      top: frame.image.descriptor.top,\n      left: frame.image.descriptor.left,\n      width: frame.image.descriptor.width,\n      height: frame.image.descriptor.height\n    }\n  }; // color table\n\n  if (image.descriptor.lct && image.descriptor.lct.exists) {\n    resultImage.colorTable = image.lct;\n  } else {\n    resultImage.colorTable = gct;\n  } // add per frame relevant gce information\n\n\n  if (frame.gce) {\n    resultImage.delay = (frame.gce.delay || 10) * 10; // convert to ms\n\n    resultImage.disposalType = frame.gce.extras.disposal; // transparency\n\n    if (frame.gce.extras.transparentColorGiven) {\n      resultImage.transparentIndex = frame.gce.transparentColorIndex;\n    }\n  } // create canvas usable imagedata if desired\n\n\n  if (buildImagePatch) {\n    resultImage.patch = generatePatch(resultImage);\n  }\n\n  return resultImage;\n};\n\nexports.decompressFrame = decompressFrame;\n\nvar decompressFrames = function decompressFrames(parsedGif, buildImagePatches) {\n  return parsedGif.frames.filter(function (f) {\n    return f.image;\n  }).map(function (f) {\n    return decompressFrame(f, parsedGif.gct, buildImagePatches);\n  });\n};\n\nexports.decompressFrames = decompressFrames;","import { parseGIF, decompressFrames } from 'gifuct-js';\n\n/**\n * Function that converts a valid sprite to render in fabric.js\n * @param {string | input File} gif can be a URL, dataURL or an \"input File\"\n * @param {number} maxWidth Optional, scale to maximum width\n * @param {number} maxHeight Optional, scale to maximum height\n * @param {number} maxDuration Optional, in milliseconds reduce the gif frames to a maximum duration, ex: 2000 for 2 seconds\n * @returns {*} {error} object if any or a sprite sheet of the converted gif as dataURL\n */\nexport const gifToSprite = async (gif, maxWidth, maxHeight, maxDuration) => {\n  let arrayBuffer;\n  let error;\n  let frames;\n\n  // if the gif is an input file, get the arrayBuffer with FileReader\n  if (gif.type) {\n    const reader = new FileReader();\n    try {\n      arrayBuffer = await new Promise((resolve, reject) => {\n        reader.onload = () => resolve(reader.result);\n        reader.onerror = () => reject(reader.error);\n        reader.readAsArrayBuffer(gif);\n      });\n    } catch (err) {\n      error = err;\n    }\n  }\n  // else the gif is a URL or a dataUrl, fetch the arrayBuffer\n  else {\n    try {\n      arrayBuffer = await fetch(gif).then((resp) => resp.arrayBuffer());\n    } catch (err) {\n      error = err;\n    }\n  }\n\n  // Parse and decompress the gif arrayBuffer to frames with the \"gifuct-js\" library\n  if (!error) frames = decompressFrames(parseGIF(arrayBuffer), true);\n  if (!error && (!frames || !frames.length)) error = 'No_frame_error';\n  if (error) {\n    console.error(error);\n    return { error };\n  }\n\n  // Create the needed canvass\n  const dataCanvas = document.createElement('canvas');\n  const dataCtx = dataCanvas.getContext('2d');\n  const frameCanvas = document.createElement('canvas');\n  const frameCtx = frameCanvas.getContext('2d');\n  const spriteCanvas = document.createElement('canvas');\n  const spriteCtx = spriteCanvas.getContext('2d');\n\n  // Get the frames dimensions and delay\n  let [width, height, delay] = [\n    frames[0].dims.width,\n    frames[0].dims.height,\n    frames.reduce((acc, cur) => (acc = !acc ? cur.delay : acc), null),\n  ];\n\n  // Set the Max duration of the gif if any\n  // FIXME handle delay for each frame\n  const duration = frames.length * delay;\n  maxDuration = maxDuration || duration;\n  if (duration > maxDuration) frames.splice(Math.ceil(maxDuration / delay));\n\n  // Set the scale ratio if any\n  maxWidth = maxWidth || width;\n  maxHeight = maxHeight || height;\n  const scale = Math.min(maxWidth / width, maxHeight / height);\n  width = width * scale;\n  height = height * scale;\n\n  //Set the frame and sprite canvass dimensions\n  frameCanvas.width = width;\n  frameCanvas.height = height;\n  spriteCanvas.width = width * frames.length;\n  spriteCanvas.height = height;\n\n  frames.forEach((frame, i) => {\n    // Get the frame imageData from the \"frame.patch\"\n    const frameImageData = dataCtx.createImageData(\n      frame.dims.width,\n      frame.dims.height\n    );\n    frameImageData.data.set(frame.patch);\n    dataCanvas.width = frame.dims.width;\n    dataCanvas.height = frame.dims.height;\n    dataCtx.putImageData(frameImageData, 0, 0);\n\n    // Draw a frame from the imageData\n    if (frame.disposalType === 2) frameCtx.clearRect(0, 0, width, height);\n    frameCtx.drawImage(\n      dataCanvas,\n      frame.dims.left * scale,\n      frame.dims.top * scale,\n      frame.dims.width * scale,\n      frame.dims.height * scale\n    );\n\n    // Add the frame to the sprite sheet\n    spriteCtx.drawImage(frameCanvas, width * i, 0);\n  });\n\n  // Get the sprite sheet dataUrl\n  const dataUrl = spriteCanvas.toDataURL();\n\n  // Clean the dom, dispose of the unused canvass\n  dataCanvas.remove();\n  frameCanvas.remove();\n  spriteCanvas.remove();\n\n  return {\n    dataUrl,\n    frameWidth: width,\n    framesLength: frames.length,\n    delay,\n  };\n};\n","import { fabric } from 'fabric';\nimport { gifToSprite } from './gifToSprite';\n\nconst [PLAY, PAUSE, STOP] = [0, 1, 2];\n\n/**\n * Function that generates a valid gif for fabric.js\n * @param {string|File} gif can be a URL, dataURL or an \"input File\"\n * @param {number} maxWidth Optional, scale to maximum width\n * @param {number} maxHeight Optional, scale to maximum height\n * @param {number} maxDuration Optional, in milliseconds reduce the gif frames to a maximum duration, ex: 2000 for 2 seconds\n * @returns {*} {error} object if any or a 'fabric.image' instance of the gif with new 'play', 'pause', 'stop' methods\n */\nexport const fabricGif = async (gif, maxWidth, maxHeight, maxDuration) => {\n  const { error, dataUrl, delay, frameWidth, framesLength } = await gifToSprite(\n    gif,\n    maxWidth,\n    maxHeight,\n    maxDuration\n  );\n\n  if (error) return { error };\n\n  return new Promise((resolve) => {\n    fabric.Image.fromURL(dataUrl, (img) => {\n      const sprite = img.getElement();\n      let framesIndex = 0;\n      let start = performance.now();\n      let status;\n\n      img.width = frameWidth;\n      img.height = sprite.naturalHeight;\n      img.mode = 'image';\n      img.top = 200;\n      img.left = 200;\n\n      img._render = function (ctx) {\n        if (status === PAUSE || (status === STOP && framesIndex === 0)) return;\n        const now = performance.now();\n        const delta = now - start;\n        if (delta > delay) {\n          start = now;\n          framesIndex++;\n        }\n        if (framesIndex === framesLength || status === STOP) framesIndex = 0;\n        ctx.drawImage(\n          sprite,\n          frameWidth * framesIndex,\n          0,\n          frameWidth,\n          sprite.height,\n          -this.width / 2,\n          -this.height / 2,\n          frameWidth,\n          sprite.height\n        );\n      };\n      img.play = function () {\n        status = PLAY;\n        this.dirty = true;\n      };\n      img.pause = function () {\n        status = PAUSE;\n        this.dirty = false;\n      };\n      img.stop = function () {\n        status = STOP;\n        this.dirty = false;\n      };\n      img.getStatus = () => ['Playing', 'Paused', 'Stopped'][status];\n\n      img.play();\n      resolve(img);\n    });\n  });\n};\n","import { fabric } from 'fabric';\nimport { v4 as uuidv4 } from 'uuid';\nimport { ICoordinate } from '../../../../interfaces/brushes/coordinate';\nimport { ICanvasPathBrush } from '../../../../interfaces/brushes/canvas-path-brush';\nimport { ICanvasObject } from '../../../../interfaces/objects/canvas-object';\n\nexport class DashedBrush extends fabric.PencilBrush {\n  /**\n   * Canvas to draw the path\n   */\n  private canvas: fabric.Canvas;\n\n  /**\n   * User that will draw\n   */\n  private userId: string;\n\n  /**\n   * Flag to know if currently is possible draw in the given canvas,\n   * basically used to avoid draw in the canvas in a mouse move event\n   * when mouse down is not happening\n   */\n  private isDrawing: boolean;\n\n  /**\n   * Array to store the points to draw the path that will conform\n   * the final group of paths with their respective width\n   */\n  private points: ICoordinate[];\n\n  /**\n   * Recent created path with the current points\n   */\n  private currentPath: fabric.Path | null;\n\n  /**\n   * Class Constructor\n   * @param {fabric.Canvas} canvas - Canvas to draw\n   * @param {string} userId - User that will draw\n   */\n  constructor(canvas: fabric.Canvas, userId: string) {\n    super();\n\n    this.canvas = canvas;\n    this.userId = userId;\n    this.isDrawing = false;\n    this.points = [];\n    this.currentPath = null;\n  }\n\n  /**\n   * Creates a new Dashed Brush Path with the given parameters\n   * @param {string} id - Id to set in the new path object\n   * @param {ICoordinate[]} points - Points to follow\n   * and draw the new path object\n   * @param {number} width - General width that the draw\n   * will have (lineWidth value)\n   * @param {string} color - Path Color\n   */\n  public createDashedPath(\n    id: string,\n    points: ICoordinate[],\n    width: number,\n    color: string\n  ) {\n    const dashedPath = new fabric.Path(\n      super\n        .convertPointsToSVGPath(\n          points.map((point) => {\n            return new fabric.Point(point.x, point.y);\n          })\n        )\n        .join(''),\n      {\n        fill: 'transparent',\n        stroke: color,\n        strokeWidth: width,\n        strokeLineJoin: 'round',\n        strokeLineCap: 'round',\n        strokeUniform: true,\n        strokeDashArray: [width * 2],\n      }\n    );\n\n    (dashedPath as unknown as ICanvasPathBrush).set({\n      id: id,\n      basePath: {\n        type: 'dashed',\n        points: points,\n        stroke: color,\n        strokeWidth: width,\n      },\n    });\n\n    return dashedPath;\n  }\n\n  /**\n   * Mouse Down Event, starts to draw in the canvas\n   * @param {ICoordinate} e - Event Coordinate value\n   */\n  public onMouseDown(e: ICoordinate) {\n    if (this.isDrawing) return;\n\n    this.isDrawing = true;\n    this.points.push(e);\n  }\n\n  /**\n   * Mouse Move Event, detects mouse movement to set the position of each point\n   * @param {ICoordinate} e - Event Coordinate value\n   */\n  public onMouseMove(e: ICoordinate) {\n    if (!this.isDrawing) return;\n\n    this.points.push(e);\n\n    if (this.currentPath) {\n      this.canvas.remove(this.currentPath);\n    }\n\n    this.currentPath = this.createDashedPath(\n      'provisional',\n      this.points,\n      this.width,\n      this.color\n    );\n\n    this.canvas.add(this.currentPath);\n  }\n\n  /**\n   * Mouse Up Event, finish drawing in canvas\n   * and creates the new path with the given points\n   */\n  public onMouseUp() {\n    if (!this.isDrawing) return;\n\n    this.isDrawing = false;\n\n    if (this.currentPath) {\n      this.canvas.remove(this.currentPath);\n    }\n\n    if (this.points.length > 1) {\n      const path = this.createDashedPath(\n        `${this.userId}:${uuidv4()}`,\n        this.points,\n        this.width,\n        this.color\n      );\n\n      this.points = [];\n\n      path.setCoords();\n      this.canvas.add(path);\n      this.canvas.renderAll();\n    }\n  }\n}\n","import { PenBrush } from '../classes/penBrush';\nimport { MarkerBrush } from '../classes/markerBrush';\nimport { PaintBrush } from '../classes/paintBrush';\nimport { ICanvasBrush } from '../../../../interfaces/brushes/canvas-brush';\nimport { IPenPoint } from '../../../../interfaces/brushes/pen-point';\nimport { ICoordinate } from '../../../../interfaces/brushes/coordinate';\nimport { DashedBrush } from '../classes/dashedBrush';\nimport { ICanvasObject } from '../../../../interfaces/objects/canvas-object';\n\n/**\n * Logic for synchronize special brushes creation\n * @param {fabric.Canvas} canvas - Canvas to draw\n * @param {string} userId - User that is drawing\n * @param {string} id - path id\n * @param {ICanvasBrush} target - Target with properties to be setted in path\n */\nexport const addSynchronizationInSpecialBrushes = (\n  canvas: fabric.Canvas,\n  userId: string,\n  id: string,\n  target: ICanvasBrush\n) => {\n  return new Promise<void>((resolve, reject) => {\n    let brush: PenBrush | MarkerBrush | PaintBrush | DashedBrush;\n    let path;\n    const basePath = target.basePath;\n    const brushType = target.basePath?.type;\n\n    try {\n      if (\n        canvas.getObjects().find((obj: ICanvasObject) => obj.id === target.id)\n      )\n        return;\n\n      switch (brushType) {\n        case 'dashed':\n          brush = new DashedBrush(canvas, userId);\n          path = brush.createDashedPath(\n            'provisional',\n            (basePath?.points as ICoordinate[]) || [],\n            Number(basePath?.strokeWidth),\n            String(basePath?.stroke)\n          );\n          break;\n\n        case 'pen':\n          brush = new PenBrush(canvas, userId);\n          path = brush.createPenPath(\n            'provisional',\n            (basePath?.points as IPenPoint[]) || [],\n            Number(basePath?.strokeWidth),\n            String(basePath?.stroke)\n          );\n          break;\n\n        case 'marker':\n        case 'felt':\n          brush = new MarkerBrush(canvas, userId, brushType);\n          path = brush.createMarkerPath(\n            'provisional',\n            (basePath?.points as ICoordinate[]) || [],\n            Number(basePath?.strokeWidth),\n            String(basePath?.stroke)\n          );\n          break;\n\n        case 'paintbrush':\n          brush = new PaintBrush(canvas, userId);\n          path = brush.modifyPaintBrushPath(\n            'provisional',\n            (basePath?.points as ICoordinate[]) || [],\n            Number(basePath?.strokeWidth),\n            String(basePath?.stroke),\n            basePath?.bristles || []\n          );\n          break;\n      }\n\n      if (!path) return;\n\n      (path as ICanvasBrush).set({\n        top: target.top,\n        left: target.left,\n        originX: target.originX,\n        originY: target.originY,\n        selectable: false,\n        evented: false,\n      });\n\n      canvas.add(path);\n\n      (path as ICanvasBrush).set({ id });\n      canvas.renderAll();\n\n      resolve();\n    } catch (error) {\n      reject();\n    }\n  });\n};\n","import { useEffect, useContext } from 'react';\nimport { PainterEvents } from '../event-serializer/PainterEvents';\nimport {\n  ObjectEvent,\n  ObjectType,\n} from '../event-serializer/PaintEventSerializer';\nimport { useSharedEventSerializer } from '../SharedEventSerializerProvider';\nimport { fabric } from 'fabric';\nimport { CanvasAction, SET, SET_BACKGROUND, SET_OTHER } from '../reducers/undo-redo';\nimport { TypedShape, TypedPolygon } from '../../../interfaces/shapes/shapes';\nimport { chat, star, arrow, hexagon, pentagon } from '../shapes/shapes';\nimport { ICanvasObject } from '../../../interfaces/objects/canvas-object';\nimport { ICanvasDrawingEvent } from '../../../interfaces/canvas-events/canvas-drawing-event';\nimport { DEFAULT_VALUES } from '../../../config/toolbar-default-values';\nimport { IUndoRedoEvent } from '../../../interfaces/canvas-events/undo-redo-event';\nimport { WhiteboardContext } from '../WhiteboardContext';\nimport { ICanvasFreeDrawingBrush } from '../../../interfaces/free-drawing/canvas-free-drawing-brush';\nimport { ICanvasBrush } from '../../../interfaces/brushes/canvas-brush';\nimport { fabricGif } from '../gifs-actions/fabricGif';\nimport { addSynchronizationInSpecialBrushes } from '../brushes/actions/addSynchronizationInSpecialBrushes';\nimport { ICanvasPathBrush } from '../../../interfaces/brushes/canvas-path-brush';\nimport FontFaceObserver from 'fontfaceobserver';\nimport { CANVAS_OBJECT_PROPS } from '../../../config/undo-redo-values';\nimport { IImageOptions } from 'fabric/fabric-impl';\n\nconst useSynchronizedAdded = (\n  canvas: fabric.Canvas | undefined,\n  userId: string,\n  shouldSerializeEvent: (id: string) => boolean,\n  shouldHandleRemoteEvent: (id: string) => boolean,\n  undoRedoDispatch: React.Dispatch<CanvasAction>\n) => {\n  const {\n    floodFillIsActive,\n    isGif,\n    image,\n    setLocalImage,\n    setLocalBackground,\n  } = useContext(WhiteboardContext);\n  const {\n    state: { eventSerializer, eventController },\n  } = useSharedEventSerializer();\n\n  /** Register and handle path:created event. */\n  // Remove all of this useEffect.\n  useEffect(() => {\n    const pathCreated = (e: ICanvasDrawingEvent) => {\n      if (!e.path) {\n        return;\n      }\n\n      e.path.id = PainterEvents.createId(userId);\n\n      const target = {\n        stroke: e.path.stroke,\n        strokeWidth: e.path.strokeWidth,\n        path: e.path.path,\n        strokeDashArray: ((e.path as unknown) as ICanvasFreeDrawingBrush)\n          .strokeDashArray,\n        isPartialErased: e.path.isPartialErased,\n      } as ICanvasObject;\n\n      eventSerializer?.push(\n        'added',\n        PainterEvents.pathCreated(target, e.path.id, userId) as ObjectEvent\n      );\n\n      const stateTarget = { ...target, top: e.path.top, left: e.path.left };\n\n      if (canvas) {\n        const event = ({\n          event: {\n            id: e.path.id,\n            target: stateTarget,\n            type: 'path',\n          },\n          type: 'added',\n        } as unknown) as IUndoRedoEvent;\n\n        undoRedoDispatch({\n          type: SET,\n          payload: canvas.getObjects(),\n          canvasId: userId,\n          event,\n        });\n      }\n    };\n\n    canvas?.on('path:created', pathCreated);\n\n    return () => {\n      canvas?.off('path:created', pathCreated);\n    };\n  }, [canvas, eventSerializer, shouldSerializeEvent, undoRedoDispatch, userId]);\n\n  /** Register and handle object:added event. */\n  useEffect(() => {\n    const objectAdded = (e: any) => {\n      if (!e.target?.id) return;\n      if (e.target.fromJSON) return;\n      if (!shouldSerializeEvent(e.target.id)) return;\n\n      let target;\n      if (e.type === 'localImage') {\n        const payload: ObjectEvent = {\n          type: e.type,\n          target: e.target,\n          id: e.target.id,\n        };\n        eventSerializer?.push('added', payload);\n\n        const event = { event: payload, type: 'backgroundAdded' } as IUndoRedoEvent;\n        const background = { ...e.target, backgroundImageEditable: false };\n\n        // send undo redo dispatch here.\n        undoRedoDispatch({\n          type: SET,\n          background,\n          payload: canvas?.getObjects(),\n          canvasId: userId,\n          event,\n        });\n\n        return;\n      }\n\n      const type: ObjectType = (e.target.get('type') || 'path') as ObjectType;\n\n      switch (type) {\n        case 'path':\n          if (e.target?.basePath?.type === 'dashed') {\n            target = {\n              basePath: e.target.basePath,\n              originX: e.target.originX,\n              originY: e.target.originY,\n            };\n          }\n          break;\n\n        case 'textbox':\n          target = {\n            text: e.target.text,\n            fontFamily: e.target.fontFamily,\n            stroke: e.target.fill,\n            top: e.target.top,\n            left: e.target.left,\n            width: e.target.width,\n          };\n          break;\n\n        case 'group':\n          target = {\n            basePath: e.target.basePath,\n            originX: e.target.originX,\n            originY: e.target.originY,\n          };\n          break;\n\n        case 'image':\n          const element = e.target?.getElement();\n          if (element.currentSrc && !e.target.cursorPointer) {\n            target = {\n              basePath: {\n                ...e.target.basePath,\n                imageData: element.currentSrc,\n              },\n              scaleX: e.target.scaleX,\n              scaleY: e.target.scaleY,\n              angle: e.target.angle,\n              flipX: e.target.flipX,\n              flipY: e.target.flipY,\n              originX: e.target.originX,\n              originY: e.target.originY,\n            };\n          }\n          break;\n      }\n\n      const payload: ObjectEvent = {\n        type,\n        target: {\n          ...target,\n          top: e.target.top,\n          left: e.target.left,\n        } as ICanvasObject,\n        id: e.target.id,\n      };\n\n      if (\n        (canvas && (payload.target as ICanvasObject)?.text?.trim().length) ||\n        (canvas &&\n          payload.type === 'group' &&\n          (payload.target as ICanvasBrush)?.basePath) ||\n        (canvas &&\n          payload.type === 'image' &&\n          (payload.target as ICanvasBrush)?.basePath) ||\n        (canvas &&\n          payload.type === 'path' &&\n          (payload.target as ICanvasPathBrush)?.basePath)\n      ) {\n        if (e.type !== 'backgroundImage') {\n          const event = { event: payload, type: 'added' } as IUndoRedoEvent;\n\n          undoRedoDispatch({\n            type: SET,\n            payload: (canvas?.getObjects() as unknown) as TypedShape[],\n            canvasId: userId,\n            event,\n          });\n        }\n\n        if (!isGif && e.type !== 'backgroundImage') {\n          eventSerializer?.push('added', payload);\n        }\n      }\n\n      if (isGif) {\n        const payload: ObjectEvent = {\n          type: 'gif',\n          target: { src: image as string } as ICanvasObject,\n          id: e.target.id,\n        };\n\n        eventSerializer?.push('added', payload);\n\n        return;\n      }\n\n      if (e.type === 'backgroundImage') {\n        eventSerializer?.push('added', { ...payload, type: 'backgroundImage' });\n        const event = { event: payload, type: 'backgroundAdded' } as IUndoRedoEvent;\n        const background = { ...((canvas?.backgroundImage as fabric.Image)?.toJSON(CANVAS_OBJECT_PROPS)), backgroundImageEditable: true };\n\n        // send undo redo dispatch here.\n        undoRedoDispatch({\n          type: SET,\n          background,\n          payload: canvas?.getObjects(),\n          canvasId: userId,\n          event,\n        });\n\n        return;\n      }\n    };\n\n    canvas?.on('object:added', objectAdded);\n\n    return () => {\n      canvas?.off('object:added', objectAdded);\n    };\n  }, [\n    canvas,\n    eventSerializer,\n    shouldSerializeEvent,\n    undoRedoDispatch,\n    userId,\n    isGif,\n    image,\n  ]);\n\n  /**\n   * Generates a new shape based on shape name.\n   * @param target Object data.\n   */\n  const generateGenericShape = (target: {\n    [key: string]: number | string | boolean;\n  }): TypedShape | TypedPolygon => {\n    switch (target.name) {\n      case 'chatBubble': {\n        return chat(\n          target.width as number,\n          target.height as number,\n          target.stroke as string,\n          target.filled as boolean,\n          target.strokeWidth as number,\n          target.strokeDashArray as boolean\n        );\n      }\n      case 'star': {\n        return star(\n          target.width as number,\n          target.height as number,\n          target.stroke as string,\n          target.filled as boolean,\n          target.strokeWidth as number,\n          target.strokeDashArray as boolean\n        );\n      }\n      case 'hexagon': {\n        return hexagon(\n          target.stroke as string,\n          target.filled as boolean,\n          target.strokeWidth as number,\n          target.strokeDashArray as boolean\n        );\n      }\n      case 'pentagon': {\n        return pentagon(\n          target.stroke as string,\n          target.filled as boolean,\n          target.strokeWidth as number,\n          target.strokeDashArray as boolean\n        );\n      }\n      default: {\n        return arrow(\n          target.width as number,\n          target.height as number,\n          target.stroke as string,\n          target.filled as boolean,\n          target.strokeWidth as number,\n          target.strokeDashArray as boolean\n        );\n      }\n    }\n  };\n\n  const objectAlreadyExists = (objectId: string) => {\n    return !!canvas?.getObjects().find((obj: ICanvasObject) => {\n      return obj.id === objectId;\n    });\n  };\n\n  /** Register and handle remote added event. */\n  useEffect(() => {\n    const added = (\n      id: string,\n      objectType: string,\n      target: ICanvasObject,\n      isPersistent?: boolean\n    ) => {\n      // TODO: We'll want to filter events based on the user ID. This can\n      // be done like this. Example of extracting user id from object ID:\n      // let { user } = new ShapeID(id);\n      // Help!\n      // if (eventSerializer?.didSerializeEvent(id)) return;\n\n      // TODO: We'll have to replace this with the user based filtering. Because\n      // we want to allow bi-directional events (Teacher <-> Student) as opposed\n      // to (Teacher --> Student).\n\n      // Events come from another user\n      // Pass as props to user context\n      // Ids of shapes + userId  uuid()\n      if (\n        (!shouldHandleRemoteEvent(id) && !isPersistent) ||\n        objectAlreadyExists(id)\n      )\n        return;\n\n      const renderTextObject = async () => {\n        eventController.setEventRunning(true);\n\n        let text = new fabric.Textbox(target.text || '', {\n          fontSize: 30,\n          fontWeight: 400,\n          fontStyle: 'normal',\n          fill: target.stroke,\n          top: target.top,\n          left: target.left,\n          width: target.width,\n          selectable: false,\n          hoverCursor: isPersistent ? 'none' : 'default',\n        });\n\n        canvas?.add(text);\n\n        (text as ICanvasObject).id = id;\n        const fontObserver = new FontFaceObserver(target.fontFamily as string);\n        try {\n          const font = (await fontObserver.load()) as any;\n\n          text.set({ fontFamily: font.family });\n          canvas?.renderAll();\n\n          undoRedoDispatch({\n            type: SET_OTHER,\n            payload: (canvas?.getObjects() as unknown) as TypedShape[],\n            canvasId: userId,\n          });\n\n          eventController.setEventRunning(false);\n\n          return;\n        } catch (error) {\n          return;\n        }\n      };\n\n      const renderSpecialBrushObject = async () => {\n        eventController.setEventRunning(false);\n\n        await addSynchronizationInSpecialBrushes(\n          canvas as fabric.Canvas,\n          userId,\n          id,\n          target as ICanvasBrush\n        );\n\n        eventController.setEventRunning(false);\n      };\n\n      if (objectType === 'textbox') {\n        renderTextObject();\n      }\n\n      if ((objectType === 'group' || objectType === 'path') && canvas) {\n        renderSpecialBrushObject();\n      }\n\n      let shape = null;\n\n      if (\n        objectType === 'path' &&\n        !target.name &&\n        (!(target as ICanvasPathBrush).basePath || (target as ICanvasPathBrush).basePath.type === 'pencil')\n      ) {\n        const pencil = new fabric.PencilBrush();\n        pencil.color = target.stroke || '#000';\n        pencil.width = target.strokeWidth || DEFAULT_VALUES.LINE_WIDTH;\n        pencil.strokeDashArray = target.strokeDashArray || [];\n\n        // Convert Points to SVG Path\n        const res = pencil.createPath((target.path as string) || '');\n        (res as ICanvasObject).id = id;\n        res.selectable = false;\n        res.evented = false;\n        res.strokeUniform = true;\n        if (target.isPartialErased) {\n          res.globalCompositeOperation = 'destination-out';\n        }\n\n        if (target.top !== undefined && target.left !== undefined) {\n          res.set({\n            top: target.top,\n            left: target.left,\n          });\n        }\n\n        canvas?.add(res);\n        canvas?.renderAll();\n      } else if (\n        (objectType === 'path' || objectType === 'polygon') &&\n        target.name\n      ) {\n        shape = generateGenericShape(\n          (target as unknown) as { [key: string]: string | number | boolean }\n        );\n      }\n\n      if (objectType === 'rect') {\n        shape = new fabric.Rect();\n      }\n\n      if (objectType === 'triangle') {\n        shape = new fabric.Triangle();\n      }\n\n      if (objectType === 'ellipse') {\n        shape = new fabric.Ellipse();\n      }\n\n      if (objectType === 'image') {\n        const src = (target as ICanvasBrush).basePath?.imageData || target.src;\n\n        const provisionalImage = new fabric.Image() as ICanvasObject;\n\n        eventController.setEventRunning(true);\n\n        canvas?.add(provisionalImage);\n        provisionalImage.set({ id });\n\n        fabric.Image.fromURL(src as string, (data: fabric.Image) => {\n          (data as TypedShape).set({\n            top: target.top,\n            left: target.left,\n            angle: target.angle,\n            scaleX: target.scaleX,\n            scaleY: target.scaleY,\n            flipX: target.flipX,\n            flipY: target.flipY,\n            originX: target.originX,\n            originY: target.originY,\n            selectable: false,\n            evented: false,\n          });\n\n          if ((target as ICanvasBrush).basePath) {\n            ((data as unknown) as ICanvasBrush).set({\n              basePath: (target as ICanvasBrush).basePath,\n            });\n          }\n\n          delete provisionalImage.id;\n          canvas?.remove(provisionalImage);\n\n          if (objectAlreadyExists(id) && isPersistent) return;\n\n          canvas?.add(data);\n          (data as ICanvasObject).set({ id });\n          canvas?.renderAll();\n\n          undoRedoDispatch({\n            type: SET_OTHER,\n            payload: (canvas?.getObjects() as unknown) as TypedShape[],\n            canvasId: userId,\n          });\n\n          eventController.setEventRunning(false);\n        });\n      }\n\n      if (objectType === 'gif') {\n        (async function () {\n          try {\n            const gif = await fabricGif(`${target.src} `, 200, 200, 2000);\n            gif.set({ top: 0, left: 0, selectable: false, evented: false });\n            canvas?.add(gif);\n\n            fabric.util.requestAnimFrame(function render() {\n              canvas?.renderAll();\n              fabric.util.requestAnimFrame(render);\n            });\n          } catch (e) {\n            console.error(e);\n          }\n        })();\n      }\n\n      if (objectType === 'backgroundImage') {\n        if (canvas) {\n          canvas.setBackgroundColor(\n            'transparent',\n            canvas.renderAll.bind(canvas)\n          );\n          setLocalImage('');\n          setLocalBackground(false);\n          let src = (target as ICanvasPathBrush).basePath?.imageData || target.src;\n\n          fabric.Image.fromURL(src as string, function (img) {\n            canvas?.setBackgroundImage(img, canvas.renderAll.bind(canvas), {\n              scaleX: (canvas.width || 0) / (img.width || 0),\n              scaleY: (canvas.height || 0) / (img.height || 0),\n              originX: 'left',\n              originY: 'top',\n              id,\n            } as IImageOptions);\n\n            canvas?.renderAll();\n          });\n        }\n\n        return;\n      }\n\n      if (objectType === 'localImage') {\n        if (canvas)\n          canvas.setBackgroundColor(\n            'transparent',\n            canvas.renderAll.bind(canvas)\n          );\n\n        if (target.backgroundImage) setLocalImage(target.backgroundImage);\n\n        return;\n      }\n\n      if (shape) {\n        target = {\n          ...target,\n          selectable: false,\n          evented: floodFillIsActive,\n          hoverCursor: floodFillIsActive ? 'not-allowed' : 'move',\n        } as ICanvasObject;\n\n        shape.set(target as Partial<fabric.Ellipse>);\n        canvas?.add(shape);\n        canvas?.renderAll();\n      }\n\n      undoRedoDispatch({\n        type: SET_OTHER,\n        payload: (canvas?.getObjects() as unknown) as TypedShape[],\n        canvasId: userId,\n      });\n    };\n\n    eventController?.on('added', added);\n\n    return () => {\n      eventController?.removeListener('added', added);\n    };\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [\n    canvas,\n    eventController,\n    floodFillIsActive,\n    shouldHandleRemoteEvent,\n    undoRedoDispatch,\n    userId,\n  ]);\n};\n\nexport default useSynchronizedAdded;\n","import { useCallback, useEffect } from 'react';\nimport { useSharedEventSerializer } from '../SharedEventSerializerProvider';\nimport { fabric } from 'fabric';\nimport {\n  ObjectEvent,\n  ObjectType,\n} from '../event-serializer/PaintEventSerializer';\nimport { CanvasAction, SET, SET_OTHER, SET_GROUP } from '../reducers/undo-redo';\nimport { TypedShape } from '../../../interfaces/shapes/shapes';\nimport { TypedGroup } from '../../../interfaces/shapes/group';\nimport CanvasEvent from '../../../interfaces/canvas-events/canvas-events';\nimport { ICanvasObject } from '../../../interfaces/objects/canvas-object';\nimport { IEvent } from 'fabric/fabric-impl';\nimport { IUndoRedoEvent } from '../../../interfaces/canvas-events/undo-redo-event';\n\nconst useSynchronizedMoved = (\n  canvas: fabric.Canvas | undefined,\n  userId: string,\n  shouldSerializeEvent: (id: string) => boolean,\n  shouldHandleRemoteEvent: (id: string) => boolean,\n  undoRedoDispatch: React.Dispatch<CanvasAction>\n) => {\n  const {\n    state: { eventSerializer, eventController },\n  } = useSharedEventSerializer();\n\n  const moveSelectedObject = useCallback(\n    (type: ObjectType, e: CanvasEvent, filteredState?: boolean) => {\n      if (\n        !e.target ||\n        !e.target.id ||\n        (e.target.id && !shouldSerializeEvent(e.target.id))\n      )\n        return;\n\n      e.target.bringToFront();\n\n      const target = {\n        angle: e.target.angle,\n        top: e.target.top,\n        left: e.target.left,\n        scaleX: e.target.scaleX,\n        scaleY: e.target.scaleY,\n        flipX: e.target.flipX,\n        flipY: e.target.flipY,\n        originX: e.target.originX,\n        originY: e.target.originY,\n      } as ICanvasObject;\n\n      const payload: ObjectEvent = {\n        type,\n        target,\n        id: e.target.id,\n        avoidPersistentStoring: filteredState,\n      };\n\n      if (canvas && !filteredState) {\n        const event = { event: payload, type: 'moved' };\n\n        undoRedoDispatch({\n          type: SET,\n          payload: canvas.getObjects(),\n          canvasId: userId,\n          event: event as IUndoRedoEvent,\n        });\n      }\n\n      eventSerializer?.push('moved', payload);\n    },\n    [canvas, eventSerializer, shouldSerializeEvent, undoRedoDispatch, userId]\n  );\n\n  const moveSelectedGroup = useCallback(\n    (type: ObjectType, e: CanvasEvent, filteredState?: boolean) => {\n      const activeIds: string[] = [];\n\n      if (!e.target || !e.target._objects) return;\n\n      e.target._objects.forEach((activeObject: ICanvasObject) => {\n        if (!shouldSerializeEvent(activeObject.id as string)) return;\n        const matrix = activeObject.calcTransformMatrix();\n        const options = fabric.util.qrDecompose(matrix);\n\n        const flipX = () => {\n          if (activeObject.flipX && e.target?.flipX) {\n            return false;\n          }\n\n          return activeObject.flipX || e.target?.flipX;\n        };\n\n        const flipY = () => {\n          if (activeObject.flipY && e.target?.flipY) {\n            return false;\n          }\n\n          return activeObject.flipY || e.target?.flipY;\n        };\n\n        const angle = () => {\n          if (e.target?.angle !== 0) {\n            return e.target?.angle;\n          }\n\n          return activeObject.angle;\n        };\n\n        const target = {\n          angle: angle(),\n          top: options.translateY,\n          left: options.translateX,\n          scaleX: options.scaleX,\n          scaleY: options.scaleY,\n          flipX: flipX(),\n          flipY: flipY(),\n        } as ICanvasObject;\n\n        const payload: ObjectEvent = {\n          type,\n          target,\n          id: activeObject.id || '',\n          avoidPersistentStoring: filteredState,\n        };\n\n        activeIds.push(activeObject.id as string);\n\n        eventSerializer?.push('moved', payload);\n      });\n\n      if (!filteredState) {\n        const payload = {\n          type,\n          svg: true,\n          target: null,\n          id: `${userId}:group`,\n        };\n\n        const event = { event: payload, type: 'activeSelection', activeIds };\n\n        let filtered = canvas?.getObjects().filter((o: any) => {\n          return !o.group;\n        });\n\n        let active: TypedGroup = canvas?.getActiveObject() as TypedGroup;\n        active?.set({ id: `${userId}:group` });\n\n        undoRedoDispatch({\n          type: SET_GROUP,\n          payload: [...(filtered as any[]), active],\n          canvasId: userId,\n          event: (event as unknown) as IUndoRedoEvent,\n        });\n      }\n    },\n    [canvas, eventSerializer, shouldSerializeEvent, undoRedoDispatch, userId]\n  );\n\n  /** Register and handle object:moved event. */\n  useEffect(() => {\n    const objectMoved = (e: IEvent) => {\n      if (!e.target) return;\n\n      const type: ObjectType = (e.target.get('type') || 'path') as ObjectType;\n      if (type === 'activeSelection') {\n        moveSelectedGroup(type, (e as unknown) as CanvasEvent);\n      } else {\n        moveSelectedObject(type, (e as unknown) as CanvasEvent);\n      }\n    };\n\n    const objectMoving = (e: fabric.IEvent) => {\n      if (!e.target) return;\n\n      const type: ObjectType = (e.target.get('type') || 'path') as ObjectType;\n      if (type === 'activeSelection') {\n        moveSelectedGroup(type, (e as unknown) as CanvasEvent, true);\n      } else {\n        moveSelectedObject(type, (e as unknown) as CanvasEvent, true);\n      }\n    };\n\n    canvas?.on('object:moved', objectMoved);\n    canvas?.on('object:moving', objectMoving);\n\n    return () => {\n      canvas?.off('object:moved', objectMoved);\n      canvas?.off('object:moving', objectMoving);\n    };\n  }, [canvas, eventSerializer, moveSelectedGroup, moveSelectedObject]);\n\n  /** Register and handle remote moved event. */\n  useEffect(() => {\n    const moved = (\n      id: string,\n      objectType: string,\n      target: ICanvasObject,\n      isPersistent: boolean\n    ) => {\n      if (!shouldHandleRemoteEvent(id) && !isPersistent) return;\n\n      canvas?.forEachObject(function (obj: ICanvasObject) {\n        if (obj.id && obj.id === id) {\n          if (objectType === 'activeSelection' && target.left && obj.left) {\n            obj.set({\n              angle: target.angle,\n              top: target.top,\n              left: target.left + 1,\n              scaleX: target.scaleX,\n              scaleY: target.scaleY,\n              flipX: target.flipX,\n              flipY: target.flipY,\n              originX: 'center',\n              originY: 'center',\n            });\n            obj.set({ left: obj.left - 1 });\n            obj.bringToFront();\n            obj.setCoords();\n          } else {\n            obj.set({\n              angle: target.angle || 0,\n              top: target.top,\n              left: target.left,\n              scaleX: target.scaleX || 1,\n              scaleY: target.scaleY || 1,\n              flipX: target.flipX || false,\n              flipY: target.flipY || false,\n              originX: target.originX || 'left',\n              originY: target.originY || 'top',\n            });\n            obj.bringToFront();\n            obj.setCoords();\n\n            undoRedoDispatch({\n              type: SET_OTHER,\n              payload: (canvas?.getObjects() as unknown) as TypedShape[],\n              canvasId: userId,\n            });\n          }\n        }\n      });\n      canvas?.renderAll();\n    };\n\n    eventController?.on('moved', moved);\n\n    return () => {\n      eventController?.removeListener('moved', moved);\n    };\n  }, [\n    canvas,\n    eventController,\n    shouldHandleRemoteEvent,\n    undoRedoDispatch,\n    userId,\n  ]);\n};\n\nexport default useSynchronizedMoved;\n","import { IUndoRedoEvent } from '../../../interfaces/canvas-events/undo-redo-event';\nimport { IUndoRedoSingleEvent } from '../../../interfaces/canvas-events/undo-redo-single-event';\n\n/**\n * Get's previous set color for canvas background.\n * @param currentIndex Current event index.\n * @param events List of events.\n */\nexport const getPreviousBackground = (\n  currentIndex: number,\n  events: IUndoRedoEvent[]\n): string => {\n  let i = currentIndex;\n\n  if (i < 0) {\n    return '#fff';\n  }\n\n  for (i; i >= 0; i--) {\n    if ((events[i].event as IUndoRedoSingleEvent).type === 'background') {\n      return (events[i].event as IUndoRedoSingleEvent).target.fill as string;\n    }\n  }\n\n  return '#fff';\n};\n\n/**\n * Get's previous set color for canvas background.\n * @param currentIndex Current event index.\n * @param events List of events.\n */\nexport const getPreviousBackgroundDivColor = (\n  currentIndex: number,\n  events: IUndoRedoEvent[]\n): string | null => {\n  let i = currentIndex;\n\n  if (i < 0) {\n    return null;\n  }\n\n  for (i; i >= 0; i--) {\n    if ((events[i] as IUndoRedoEvent)?.type === 'backgroundColorChanged') {\n      return (events[i].event as IUndoRedoSingleEvent).color as string;\n    }\n  }\n\n  return null;\n};\n","import { IUndoRedoSingleEvent } from '../../../interfaces/canvas-events/undo-redo-single-event';\nimport { CanvasHistoryState } from '../reducers/undo-redo';\n\n/**\n * Extract from the given state the necessary variables\n * to be used in undo/redo actions\n * @param {CanvasHistoryState} state - Current state to extract variables\n */\nexport const getStateVariables = (state: CanvasHistoryState) => {\n  const currentEvent = state.events[state.eventIndex];\n  const currentObject = currentEvent?.event as IUndoRedoSingleEvent;\n  const currentState = state.states[state.activeStateIndex as number];\n  const nextEvent = state.events[state.eventIndex + 1];\n  const nextObject = nextEvent?.event as IUndoRedoSingleEvent;\n  const background = state.backgrounds[state.activeStateIndex as number];\n\n  return { currentEvent, currentObject, currentState, nextEvent, nextObject, background };\n};\n","import { fabric } from 'fabric';\nimport { ICanvasBrush } from '../../../interfaces/brushes/canvas-brush';\nimport { IPathTarget } from '../../../interfaces/canvas-events/path-target';\nimport { ICanvasObject } from '../../../interfaces/objects/canvas-object';\nimport { TypedGroup } from '../../../interfaces/shapes/group';\nimport { TypedPolygon, TypedShape } from '../../../interfaces/shapes/shapes';\nimport { CanvasHistoryState } from '../reducers/undo-redo';\nimport {\n  getPreviousBackground,\n  getPreviousBackgroundDivColor,\n} from './getPreviousBackground';\nimport { getStateVariables } from './getStateVariables';\n\n/**\n * Determine if an object belongs to local canvas.\n * @param id Object ID\n * @param canvasId Canvas ID\n */\nconst isLocalObject = (id: string, canvasId: string): boolean => {\n  if (!id) {\n    return false;\n  }\n\n  const object = id.split(':');\n\n  if (!object.length) {\n    throw new Error('Invalid ID');\n  }\n\n  return object[0] === canvasId;\n};\n\n/**\n * Parses to an object the given state\n * @param {string} activeState - Stringified state to parse\n */\nconst mapActiveState = (activeState: string) =>\n  JSON.parse(activeState).objects.map((object: TypedShape | TypedGroup) => {\n    if ((object as TypedGroup).objects) {\n      let _objects = (object as TypedGroup).objects;\n      let mappedObjects = (_objects as TypedShape[]).map((o: TypedShape) => {\n        return { ...o, fromJSON: true };\n      });\n\n      return { ...object, fromJSON: true, objects: mappedObjects };\n    }\n    return { ...object, fromJSON: true };\n  });\n\n/**\n * Loads the given objects in the whiteboard with the given instanceId\n * @param {fabric.Canvas} canvas - Canvas to set the objects.\n * @param {{ [key: string]: any }} mapped - Objects to set in canvas.\n * @param {string} instanceId - Canvas ID\n * @param {CanvasHistoryState} state - Current state in canvas actions history\n * @param {'UNDO' | 'REDO'} action - Action made\n * @param {(color: string) => void} setBackgroundColorInCanvas - Function to\n * set background color in current canvas\n */\nconst loadFromJSON = (\n  canvas: fabric.Canvas,\n  mapped: { [key: string]: any },\n  instanceId: string,\n  state: CanvasHistoryState,\n  action: 'UNDO' | 'REDO',\n  setBackgroundColorInCanvas: (color: string) => void,\n  setLocalImage: (img: string | File) => void,\n  setBackgroundImageIsPartialErasable: (state: boolean) => void\n) => {\n  const { currentEvent, nextEvent } = getStateVariables(state);\n\n  canvas.loadFromJSON(JSON.stringify({ objects: mapped }), () => {\n    canvas\n      .getObjects()\n      .forEach((o: TypedShape | TypedPolygon | TypedGroup | IPathTarget) => {\n        if (isLocalObject(o.id as string, instanceId)) {\n          (o as TypedShape).set({ selectable: true, evented: true });\n\n          if ((o as TypedGroup)._objects && !(o as ICanvasBrush).basePath) {\n            (o as TypedGroup).toActiveSelection();\n            canvas.discardActiveObject();\n          }\n        }\n      }); \n\n    if (state.backgrounds.length && state.activeStateIndex !== null) {\n      let bgs = state.backgrounds.slice(0, state.activeStateIndex + 1); \n      let target = bgs.reverse().find((item: any) => item !== null);\n\n      if (target && (target as ICanvasObject).backgroundImageEditable) {\n        setBackgroundImageIsPartialErasable(true);\n        fabric.Image.fromURL((target as ICanvasObject).src as string, function (img) {\n          canvas?.setBackgroundImage(img, canvas.renderAll.bind(canvas), {\n            scaleX: (target as ICanvasObject).scaleX,\n            scaleY: (target as ICanvasObject).scaleY,\n            originX: 'left',\n            originY: 'top',\n            // @ts-ignore\n            id: target.id,\n          });\n\n          canvas?.renderAll();\n          canvas?.trigger('background:modified', img);\n        });\n      } else if (target && !(target as ICanvasObject).backgroundImageEditable) {\n        setBackgroundImageIsPartialErasable(false);\n        // @ts-ignore\n        canvas?.setBackgroundImage(0, canvas.renderAll.bind(canvas));\n        setLocalImage((target as ICanvasObject).backgroundImage as string);\n        canvas?.trigger('background:modified', null);\n      } else {\n        setLocalImage('');\n        canvas?.trigger('background:modified', null);\n        // @ts-ignore\n        canvas?.setBackgroundImage(0, canvas.renderAll.bind(canvas));\n        canvas?.renderAll();\n      }\n    } else if (state.backgrounds.length && state.activeStateIndex === null) {\n      setLocalImage('');\n      canvas?.trigger('background:modified', null);\n    }\n\n    if (\n      (action === 'UNDO' && nextEvent?.type === 'backgroundColorChanged') ||\n      (action === 'REDO' && currentEvent?.type === 'backgroundColorChanged')\n    ) {\n      const fill = getPreviousBackground(state.eventIndex, state.events);\n      const divColorBackground = getPreviousBackgroundDivColor(\n        state.eventIndex,\n        state.events\n      );\n\n      if (divColorBackground) {\n        setBackgroundColorInCanvas(divColorBackground);\n      } else {\n        canvas.backgroundColor = fill;\n      }\n    }\n\n    canvas.renderAll();\n  });\n};\n\n/**\n * Render Undo/Redo action in Local Whiteboard according with the given state\n * @param {fabric.Canvas} canvas - Current canvas\n * @param {string} instanceId - Canvas ID\n * @param {CanvasHistoryState} state - Current state to get data to render\n * @param {'UNDO' | 'REDO'} action - Action made\n * @param {boolean} shapesAreSelectable - Flag to know if objects are able\n * to be selectable\n * @param {(color: string) => void} setBackgroundColorInCanvas - Function to\n * set background color in current canvas\n */\nexport const RenderLocalUndoRedo = (\n  canvas: fabric.Canvas,\n  instanceId: string,\n  state: CanvasHistoryState,\n  action: 'UNDO' | 'REDO',\n  shapesAreSelectable: boolean,\n  setBackgroundColorInCanvas: (color: string) => void,\n  setLocalImage: (img: string | File) => void,\n  setBackgroundImageIsPartialErasable: (state: boolean) => void\n) => {\n  /**\n   * Reset selectable, evented and strokeUniform properties\n   * when a group of objects had an undo/redo action\n   */\n  const resetObjectsSelectability = () => {\n    canvas?.forEachObject((object: ICanvasObject) => {\n      const id = object.id as string;\n      const isLocal = isLocalObject(id, instanceId);\n\n      object.set({\n        selectable: isLocal && shapesAreSelectable,\n        evented: isLocal && shapesAreSelectable,\n        strokeUniform: true,\n      });\n    });\n\n    canvas.renderAll();\n  };\n\n  // To prevent fabricjs observers from updating state on rerender.\n  canvas.forEachObject((object: TypedShape) => {\n    if (isLocalObject(object.id as string, instanceId)) {\n      object.set({ fromJSON: true });\n    }\n  });\n\n  // Getting the object of the current state\n  const mapped: { [key: string]: any } = mapActiveState(\n    state.activeState as string\n  );\n\n  // Loading objects in canvas\n  loadFromJSON(\n    canvas,\n    mapped,\n    instanceId,\n    state,\n    action,\n    setBackgroundColorInCanvas,\n    setLocalImage,\n    setBackgroundImageIsPartialErasable\n  );\n\n  // If undo/redo was applied in a group of objects\n  if (mapped.length === 1 && mapped[0].type === 'activeSelection') {\n    resetObjectsSelectability();\n  }\n};\n","import {\n  ObjectEvent,\n  PaintEventSerializer,\n  PayloadTarget,\n} from '../event-serializer/PaintEventSerializer';\n\n/**\n * Creates payload with the given id and target\n * and send reconstruct event with the created payload\n * @param {string} id - Object id for payload\n * @param {PayloadTarget} target - Target to send in payload\n */\nexport const sendReconstructEvent = (\n  id: string,\n  target: PayloadTarget,\n  eventSerializer: PaintEventSerializer\n) => {\n  const payload = {\n    id,\n    target,\n    type: 'reconstruct',\n  } as ObjectEvent;\n\n  eventSerializer?.push('reconstruct', payload);\n};\n","import { fabric } from 'fabric';\nimport { IUndoRedoSingleEvent } from '../../../interfaces/canvas-events/undo-redo-single-event';\nimport { ICanvasObject } from '../../../interfaces/objects/canvas-object';\nimport {\n  ObjectEvent,\n  PaintEventSerializer,\n} from '../event-serializer/PaintEventSerializer';\nimport { CanvasHistoryState } from '../reducers/undo-redo';\nimport {\n  getPreviousBackground,\n  getPreviousBackgroundDivColor,\n} from './getPreviousBackground';\nimport { getStateVariables } from './getStateVariables';\nimport { sendReconstructEvent } from './sendReconstructEvent';\n\n/**\n * Renders Undo action in Remote Whiteboards\n * @param {fabric.Canvas} canvas - Current canvas\n * @param {string} instanceId - Canvas ID\n * @param {CanvasHistoryState} state - Current state to get data to render\n * @param {PaintEventSerializer} eventSerializer - Event serializer to send\n * changes to Remote Whiteboards\n */\nexport const RenderRemoteUndo = (\n  canvas: fabric.Canvas,\n  instanceId: string,\n  state: CanvasHistoryState,\n  eventSerializer: PaintEventSerializer,\n  setLocalImage: (img: string | File) => void,\n  setBackgroundImageIsPartialErasable: (state: boolean) => void\n) => {\n  const {\n    currentEvent,\n    currentObject,\n    currentState,\n    nextEvent,\n    nextObject,\n  } = getStateVariables(state);\n\n  const checkPreviousBackgroundImage = () => {\n    const backgrounds = state.backgrounds;\n    const currentIndex = state.eventIndex;\n    const background = backgrounds.slice(0, currentIndex + 1).reverse().find((bg: string | fabric.Image | null) => bg !== null) || null;\n\n    return background;\n  };\n\n  /**\n   * Gets the joinedIds property from the given object and finds the objects\n   * with those ids to reconstruct them in the whiteboard\n   */\n  const reconstructJoinedObjects = () => {\n\n    if (!currentState) {\n      return;\n    }\n  \n    let joinedIds = nextObject.target.joinedIds as string[];\n    const id = nextObject.id;\n    const currentIds = currentObject?.target?.joinedIds as string[] | [];\n    const objects = JSON.parse(currentState).objects;\n\n    if (currentIds && joinedIds) {\n      joinedIds = [...joinedIds, ...currentIds];\n    }\n\n    // If state has states reconstruct event is able to be sent\n    if (currentState) {\n      const filteredObjects = objects.filter(\n        (o: ObjectEvent) => joinedIds?.indexOf(o.id) !== -1\n      ) as ICanvasObject[];\n\n      const previousBg = checkPreviousBackgroundImage();\n\n      let payload: ObjectEvent = {\n        id,\n        target: { objects: filteredObjects, backgroundImage: previousBg as fabric.Image },\n        type: 'reconstruct',\n      };\n\n      eventSerializer?.push('reconstruct', payload);\n    }\n  };\n\n  const undoAdd = (nextObject: IUndoRedoSingleEvent) => {\n    const payload: ObjectEvent = {\n      id: nextObject.id,\n    };\n\n    // If undoing the creation of an object, remove.\n    eventSerializer?.push('removed', payload);\n\n    /* If the object is an image, is necessary find if this image\n    is product of flood-filled object composed for other objects */\n    if (nextObject.type === 'image') {\n      reconstructJoinedObjects();\n    }\n  }\n\n  switch (nextEvent.type) {\n    case 'added': {\n\n      if (!Array.isArray(nextObject)) {\n        undoAdd(nextObject);\n      } else {\n        nextObject.forEach((o: IUndoRedoSingleEvent) => {\n          undoAdd(o);\n        });\n      }\n      break;\n    }\n\n    case 'backgroundAdded': {\n      const target = {\n        // @ts-ignore\n        id: nextEvent.event.id,\n        target: {\n          strategy: 'removeBackground',\n          isBackgroundImage: true,\n        },\n      };\n      \n      eventSerializer?.push('removed', target as ObjectEvent);\n\n      if (state.backgrounds.length && state.activeStateIndex !== null) {\n        const previous = state.backgrounds[state.eventIndex] || checkPreviousBackgroundImage();\n\n        if (!previous) return;\n        \n        const payload: ObjectEvent = {\n          type: (previous as ICanvasObject)?.backgroundImageEditable ? 'backgroundImage' : 'localImage',\n          target: previous as ICanvasObject,\n          id: (previous as ICanvasObject).id as string,\n        };\n        \n        eventSerializer?.push('added', payload as ObjectEvent);\n        break;\n      }\n      break;\n    }\n\n    case 'activeSelection': {\n      /**\n       * Validates if the id to send to payload must be from\n       * currentObject or nextObject\n       */\n      const idIsInCurrentObject = () => {\n        return (\n          currentEvent.type === 'activeSelection' ||\n          currentEvent.type === 'added'\n        );\n      };\n\n      const objects = JSON.parse(currentState).objects;\n      const { id } = idIsInCurrentObject() ? currentObject : nextObject;\n\n      if (currentEvent.type === 'added' && currentObject.type !== 'textbox') {\n        eventSerializer.push('removed', {\n          id: nextObject.id,\n        });\n      }\n\n      sendReconstructEvent(id, { objects }, eventSerializer);\n\n      break;\n    }\n\n    case 'clearedWhiteboard': {\n      const objects = JSON.parse(currentState).objects;\n      const id = nextObject.id;\n\n      sendReconstructEvent(id, { objects }, eventSerializer);\n      break;\n    }\n\n    case 'backgroundColorChanged': {\n      const divColorBackground = getPreviousBackgroundDivColor(\n        state.eventIndex,\n        state.events\n      );\n\n      const payload = {\n        id: instanceId,\n        target: divColorBackground || 'transparent',\n      };\n\n      eventSerializer?.push('backgroundColorChanged', payload);\n      break;\n    }\n\n    default: {\n      if (nextObject.type === 'background') {\n        const fill = getPreviousBackground(state.eventIndex, state.events);\n        const id = nextObject.id;\n\n        canvas.backgroundColor = fill;\n        canvas.renderAll();\n\n        sendReconstructEvent(id, { background: fill }, eventSerializer);\n        return;\n      }\n\n      if (\n        currentEvent?.type !== 'remove' &&\n        nextEvent.type !== 'clearedWhiteboard'\n      ) {\n        let id = nextObject.id;\n\n        if (id.split(':')[1] !== 'group') {\n          const objects = JSON.parse(currentState).objects;\n          let object = objects.find((o: ObjectEvent) => o.id === id);\n\n          sendReconstructEvent(id, { objects: [object] }, eventSerializer);\n        } else {\n          const objectsToReconstruct: fabric.Object[] = [];\n          const objects = JSON.parse(currentState).objects;\n\n          nextEvent.activeIds?.forEach((id) => {\n            const object = objects.find(\n              (object: ICanvasObject) => object.id === id\n            );\n\n            objectsToReconstruct.push(object);\n          });\n\n          sendReconstructEvent(\n            id,\n            { objects: objectsToReconstruct },\n            eventSerializer\n          );\n        }\n      } else if (state.activeStateIndex !== null) {\n        const objects = JSON.parse(currentState).objects;\n        const id = nextObject.id;\n\n        sendReconstructEvent(id, { objects }, eventSerializer);\n      }\n\n      break;\n    }\n  }\n};\n","import { ICanvasObject } from '../../../interfaces/objects/canvas-object';\nimport { TypedGroup } from '../../../interfaces/shapes/group';\nimport { TypedShape } from '../../../interfaces/shapes/shapes';\nimport {\n  ObjectEvent,\n  PaintEventSerializer,\n} from '../event-serializer/PaintEventSerializer';\nimport { CanvasHistoryState } from '../reducers/undo-redo';\nimport { getStateVariables } from './getStateVariables';\nimport { sendReconstructEvent } from './sendReconstructEvent';\n\n/**\n * Renders Redo action in Remote Whiteboards according with the given state\n * @param {fabric.Canvas} canvas - Current canvas\n * @param {string} instanceId - Canvas ID\n * @param {CanvasHistoryState} state - Current state to get data for render\n * @param {PaintEventSerializer} eventSerializer - Event serializer to send\n * changes to remote whiteboards\n */\nexport const RenderRemoteRedo = (\n  canvas: fabric.Canvas,\n  instanceId: string,\n  state: CanvasHistoryState,\n  eventSerializer: PaintEventSerializer\n) => {\n  const { currentEvent, currentObject, currentState, background } = getStateVariables(\n    state\n  );\n\n  if (currentObject.type === 'background') {\n    canvas.backgroundColor = currentObject.target.fill as string;\n    canvas.renderAll();\n\n    const payload: ObjectEvent = {\n      id: currentObject.id,\n      target: {\n        background: currentObject.target.fill as string,\n      },\n      type: 'reconstruct',\n    };\n    eventSerializer?.push('reconstruct', payload);\n    return;\n  }\n\n  switch (currentEvent.type) {\n    case 'added': {\n      if (!Array.isArray(currentObject)) {\n        eventSerializer?.push('added', currentObject as ObjectEvent);\n\n        if (currentObject.type === 'image') {\n          const joinedIds = currentObject.target.joinedIds;\n\n          joinedIds?.forEach((id) => {\n            eventSerializer?.push('removed', {\n              id: id,\n            } as ObjectEvent);\n          });\n        }\n      }\n\n      if (background) {\n        const payload: ObjectEvent = {\n          type: (background as ICanvasObject).backgroundImageEditable ? 'backgroundImage' : 'localImage',\n          target: background as ICanvasObject,\n          id: (background as ICanvasObject).id as string,\n        };\n      \n        eventSerializer?.push('added', payload);\n      }\n      break;\n    }\n\n    case 'backgroundAdded': {\n      const payload: ObjectEvent = {\n        type: (state.backgrounds[state.eventIndex] as ICanvasObject).backgroundImageEditable ? 'backgroundImage' : 'localImage',\n        target: state.backgrounds[state.eventIndex] as ICanvasObject,\n        id: (state.backgrounds[state.eventIndex] as ICanvasObject).id as string,\n      };\n      \n      eventSerializer?.push('added', payload as ObjectEvent);\n      break;\n    }\n\n    case 'removed': {\n      if (currentEvent.activeIds) {\n        // Redo in a group of objects removed\n        currentEvent.activeIds?.forEach((id) => {\n          eventSerializer?.push('removed', {\n            id: id,\n          } as ObjectEvent);\n        });\n      } else {\n        // Redo in single object removed\n        eventSerializer?.push('removed', {\n          id: currentObject.id,\n        } as ObjectEvent);\n      }\n      break;\n    }\n\n    case 'clearedWhiteboard': {\n      const id = currentObject.id;\n\n      sendReconstructEvent(id, false, eventSerializer);\n      break;\n    }\n\n    case 'activeSelection': {\n      const objects = JSON.parse(currentState).objects;\n      const id = currentObject.id;\n\n      sendReconstructEvent(id, { objects }, eventSerializer);\n      break;\n    }\n\n    case 'backgroundColorChanged': {\n      const payload = {\n        id: instanceId,\n        target: currentObject.color,\n      };\n\n      eventSerializer?.push('backgroundColorChanged', payload);\n      break;\n    }\n\n    default: {\n      const objects = JSON.parse(currentState).objects;\n      let id = currentObject.id;\n      let object = objects.find((o: TypedShape | TypedGroup) => o.id === id);\n\n      sendReconstructEvent(id, { objects: [object] }, eventSerializer);\n      break;\n    }\n  }\n};\n","import { useContext, useEffect } from 'react';\nimport { useUndoRedo, UNDO, REDO } from '../reducers/undo-redo';\nimport { Canvas } from 'fabric/fabric-impl';\nimport { PaintEventSerializer } from '../event-serializer/PaintEventSerializer';\nimport { WhiteboardContext } from '../WhiteboardContext';\nimport { RenderLocalUndoRedo } from '../undo-redo-actions/RenderLocalUndoRedo';\nimport { RenderRemoteUndo } from '../undo-redo-actions/RenderRemoteUndo';\nimport { RenderRemoteRedo } from '../undo-redo-actions/RenderRemoteRedo';\n\n// This file is a work in progress. Multiple events need to be considered,\n// such as group events, that are currently not function (or break functionality).\n\n/**\n * Custom hook to track canvas history.\n * @param canvas Canvas being manipulated\n * @param eventSerializer Event serializer\n * @param canvasId Canvas ID\n */\nexport const UndoRedo = (\n  canvas: Canvas,\n  eventSerializer: PaintEventSerializer,\n  instanceId: string,\n) => {\n  const { state, dispatch } = useUndoRedo();\n  const { shapesAreSelectable, setBackgroundColorInCanvas, setLocalImage, setBackgroundImageIsPartialErasable } = useContext(\n    WhiteboardContext\n  );\n\n  /**\n   * Handles logic for render changes in undo/redo actions in local whiteboard\n   */\n  useEffect(() => {\n    if (!state || !canvas) {\n      return;\n    }\n\n    // Rerenders local canvas when an undo or redo event has been executed.\n    if (state.actionType === UNDO || state.actionType === REDO) {\n      RenderLocalUndoRedo(\n        canvas,\n        instanceId,\n        state,\n        state.actionType as 'UNDO' | 'REDO',\n        shapesAreSelectable,\n        setBackgroundColorInCanvas,\n        setLocalImage,\n        setBackgroundImageIsPartialErasable,\n      );\n    }\n  }, [\n    canvas,\n    instanceId,\n    setBackgroundColorInCanvas,\n    shapesAreSelectable,\n    state,\n  ]);\n\n  /**\n   * Handles logic for render changes in undo/redo actions in remote whiteboards\n   */\n  useEffect(() => {\n    if (state.actionType === UNDO) {\n      RenderRemoteUndo(canvas, instanceId, state, eventSerializer, setLocalImage, setBackgroundImageIsPartialErasable);\n    } else if (state.actionType === REDO) {\n      RenderRemoteRedo(canvas, instanceId, state, eventSerializer);\n    }\n  }, [canvas, eventSerializer, instanceId, state]);\n\n  return { state, dispatch };\n};\n","import { ICanvasBrush } from '../../../../interfaces/brushes/canvas-brush';\nimport { fabric } from 'fabric';\nimport { ICanvasObject } from '../../../../interfaces/objects/canvas-object';\n\n/**\n * Logic for synchronize line color in special brushes\n * @param {ICanvasBrush} object - Path to change color\n * @param {ICanvasObject} target - Target to copy properties on path\n */\nexport const colorChangeSynchronizationInSpecialBrushes = (\n  object: ICanvasBrush,\n  target: ICanvasObject\n) => {\n  const basePath = object.basePath;\n  const brushType = object.basePath?.type;\n\n  if (brushType === 'paintbrush') {\n    const bristles = target.bristles || [];\n\n    if (!bristles.length) return;\n\n    object.forEachObject((line, index) => {\n      line.set({\n        stroke: bristles[index].color,\n        shadow: new fabric.Shadow({\n          affectStroke: true,\n          nonScaling: true,\n          color: bristles[index].color,\n          blur: Number(line.strokeWidth) / 2,\n        }),\n      });\n\n      object.set({\n        basePath: {\n          type: brushType || 'pen',\n          points: basePath?.points || [],\n          stroke: String(target.stroke),\n          strokeWidth: Number(basePath?.strokeWidth),\n          bristles: bristles,\n        },\n      });\n    });\n  } else if (brushType !== 'chalk' && brushType !== 'crayon') {\n    object.forEachObject((line) => {\n      line.set({\n        stroke: target.stroke,\n      });\n    });\n\n    (object as ICanvasBrush).set({\n      basePath: {\n        type: brushType || 'pen',\n        points: basePath?.points || [],\n        stroke: String(target.stroke),\n        strokeWidth: Number(basePath?.strokeWidth),\n      },\n    });\n  }\n};\n","import { useEffect } from 'react';\nimport { CanvasAction, SET_OTHER } from '../reducers/undo-redo';\nimport { useSharedEventSerializer } from '../SharedEventSerializerProvider';\nimport { ICanvasObject } from '../../../interfaces/objects/canvas-object';\nimport { ICanvasBrush } from '../../../interfaces/brushes/canvas-brush';\nimport { fabric } from 'fabric';\nimport { colorChangeSynchronizationInSpecialBrushes } from '../brushes/actions/colorChangeSynchronizationInSpecialBrushes';\nimport { ChalkBrush } from '../brushes/classes/chalkBrush';\n\nconst useSynchronizedColorChanged = (\n  canvas: fabric.Canvas | undefined,\n  userId: string,\n  shouldHandleRemoteEvent: (id: string) => boolean,\n  undoRedoDispatch: React.Dispatch<CanvasAction>\n) => {\n  const {\n    state: { eventController },\n  } = useSharedEventSerializer();\n\n  useEffect(() => {\n    const colorChanged = (\n      id: string,\n      objectType: string,\n      target: ICanvasObject,\n      isPersistent?: boolean\n    ) => {\n      if (id && !shouldHandleRemoteEvent(id) && !isPersistent) return;\n\n      if (objectType === 'background' && canvas) {\n        canvas.backgroundColor = target.fill?.toString();\n      }\n\n      canvas?.forEachObject(function (obj: ICanvasObject) {\n        if (obj.id && obj.id === id) {\n          switch (objectType) {\n            case 'textbox':\n              return;\n\n            case 'shape':\n              obj.set({\n                fill: target.fill || obj.fill,\n                stroke: target.stroke || obj.stroke,\n              });\n              break;\n\n            case 'path':\n              obj.set({\n                stroke: target.stroke,\n              });\n              break;\n\n            // Color change in special brushes\n            case 'group':\n              colorChangeSynchronizationInSpecialBrushes(\n                obj as ICanvasBrush,\n                target\n              );\n              break;\n\n            // Chalk/Crayon path case, original is removed and recreated with a new color\n            case 'image':\n              const basePath = (obj as ICanvasBrush).basePath;\n              const brush = new ChalkBrush(\n                canvas,\n                userId,\n                basePath?.type as 'chalk' | 'crayon'\n              );\n\n              const clearRects = brush.createChalkEffect(\n                basePath?.points || [],\n                Number(basePath?.strokeWidth)\n              );\n\n              brush\n                .createChalkPath(\n                  String(target.id),\n                  basePath?.points || [],\n                  Number(basePath?.strokeWidth),\n                  String(target.stroke),\n                  clearRects\n                )\n                .then((newPath) => {\n                  (obj as ICanvasBrush).set({\n                    basePath: newPath.basePath,\n                    _element: newPath._element,\n                  });\n\n                  canvas.renderAll();\n                })\n                .catch((error: Error) => {\n                  console.warn(error);\n                });\n              break;\n          }\n        }\n\n        if (objectType === 'shape') {\n          const index = target.objectsOrdering?.find(\n            (find) => obj.id === find.id\n          )?.index;\n\n          if (index !== undefined) {\n            obj.moveTo(index);\n          }\n        }\n      });\n\n      undoRedoDispatch({\n        type: SET_OTHER,\n        payload: canvas?.getObjects(),\n        canvasId: userId,\n      });\n\n      canvas?.renderAll();\n    };\n\n    eventController?.on('colorChanged', colorChanged);\n\n    return () => {\n      eventController?.removeListener('colorChanged', colorChanged);\n    };\n  }, [\n    canvas,\n    eventController,\n    shouldHandleRemoteEvent,\n    undoRedoDispatch,\n    userId,\n  ]);\n};\n\nexport default useSynchronizedColorChanged;\n","import { useEffect } from 'react';\nimport { useSharedEventSerializer } from '../SharedEventSerializerProvider';\nimport { ICanvasObject } from '../../../interfaces/objects/canvas-object';\n\nconst useSynchronizedFontFamilyChanged = (\n  canvas: fabric.Canvas | undefined,\n  shouldHandleRemoteEvent: (id: string) => boolean\n) => {\n  const {\n    state: { eventController },\n  } = useSharedEventSerializer();\n\n  useEffect(() => {\n    const fontFamilyChanged = (\n      id: string,\n      target: ICanvasObject,\n      isPersistent: boolean\n    ) => {\n      if (!shouldHandleRemoteEvent(id) && !isPersistent) return;\n\n      canvas?.forEachObject(function (obj: ICanvasObject) {\n        if (obj.id && obj.id === id) {\n          obj.set({\n            fontFamily: target.fontFamily,\n          });\n        }\n      });\n      canvas?.renderAll();\n    };\n\n    eventController?.on('fontFamilyChanged', fontFamilyChanged);\n\n    return () => {\n      eventController?.removeListener('fontFamilyChanged', fontFamilyChanged);\n    };\n  }, [canvas, eventController, shouldHandleRemoteEvent]);\n};\n\nexport default useSynchronizedFontFamilyChanged;\n","import { useEffect, useContext } from 'react';\nimport { ObjectEvent } from '../event-serializer/PaintEventSerializer';\nimport { CanvasAction, SET, SET_OTHER } from '../reducers/undo-redo';\nimport { useSharedEventSerializer } from '../SharedEventSerializerProvider';\nimport { ICanvasObject } from '../../../interfaces/objects/canvas-object';\nimport CanvasEvent from '../../../interfaces/canvas-events/canvas-events';\nimport { ITextOptions } from 'fabric/fabric-impl';\nimport { WhiteboardContext } from '../WhiteboardContext';\nimport { TypedShape } from '../../../interfaces/shapes/shapes';\nimport { IUndoRedoEvent } from '../../../interfaces/canvas-events/undo-redo-event';\n\ninterface ITarget {\n  strategy: string;\n  userId: string;\n  isBackgroundImage: boolean;\n  isLocalImage: boolean;\n  objectIds?: string[];\n}\n\nconst useSynchronizedRemoved = (\n  canvas: fabric.Canvas | undefined,\n  userId: string,\n  shouldSerializeEvent: (id: string) => boolean,\n  shouldHandleRemoteEvent: (id: string) => boolean,\n  undoRedoDispatch: React.Dispatch<CanvasAction>\n) => {\n  const {\n    state: { eventSerializer, eventController },\n  } = useSharedEventSerializer();\n\n  const {\n    clearIsActive,\n    setBackgroundImage,\n    setLocalImage,\n    setLocalBackground,\n    isCursorObject,\n  } = useContext(WhiteboardContext);\n\n  /** Register and handle remote event. */\n  useEffect(() => {\n    const removed = (\n      objectId: string,\n      target: ITarget,\n      isPersistent: boolean\n    ) => {\n      if (target.isLocalImage) {\n        setLocalImage('');\n        setBackgroundImage('');\n        setLocalBackground(false);\n        return;\n      }\n\n      switch (target.strategy) {\n        case 'allowClearMyself':\n          if (!shouldHandleRemoteEvent(objectId) && !isPersistent) return;\n          canvas?.forEachObject(function (obj: ICanvasObject) {\n            if (\n              obj.id === objectId &&\n              !isCursorObject(obj) &&\n              !obj.stampObject\n            ) {\n              canvas?.remove(obj);\n            }\n          });\n\n          if (target.isBackgroundImage) {\n            // In order to remove background you need to add 0 to the first argument.\n            // An empty string unfortunately doesnt work.\n            // https://stackoverflow.com/a/14171884\n            // @ts-ignore\n            canvas?.setBackgroundImage(0, canvas.renderAll.bind(canvas));\n            setLocalImage('');\n            setBackgroundImage('');\n          }\n\n          break;\n        case 'allowClearAll':\n          if (shouldHandleRemoteEvent(objectId) && !isPersistent) return;\n          canvas?.forEachObject(function (obj: ICanvasObject) {\n            if (!isCursorObject(obj) && !obj.stampObject) {\n              canvas?.remove(obj);\n            }\n          });\n          break;\n        case 'allowClearOthers':\n          if (shouldHandleRemoteEvent(objectId) && !isPersistent) return;\n          canvas?.forEachObject(function (obj: ICanvasObject) {\n            if (obj.id) {\n              const object = obj.id.split(':');\n\n              if (!object.length) {\n                throw new Error('Invalid ID');\n              }\n\n              if (\n                object[0] === target.userId &&\n                !isCursorObject(obj) &&\n                !obj.stampObject\n              ) {\n                canvas?.remove(obj);\n              }\n            }\n          });\n          break;\n        case 'removeGroup':\n          if (shouldHandleRemoteEvent(objectId) && !isPersistent) return;\n\n          target.objectIds?.forEach((id) => {\n            const objectToRemove = canvas\n              ?.getObjects()\n              .find((object: ICanvasObject) => object.id === id);\n\n            canvas?.remove(objectToRemove as fabric.Object);\n          });\n\n          const event = ({\n            event: { id: `${userId}:group` },\n            type: 'removed',\n            activeIds: target.objectIds,\n          } as unknown) as IUndoRedoEvent;\n\n          undoRedoDispatch({\n            type: SET,\n            payload: canvas?.getObjects(),\n            canvasId: userId,\n            event,\n          });\n          break;\n        case 'removeBackground': {\n          if (!shouldHandleRemoteEvent(objectId) && objectId) return;\n          // @ts-ignore\n          canvas?.setBackgroundImage(0, canvas.renderAll.bind(canvas));\n          setLocalImage('');\n          break;\n        }\n        default:\n          canvas?.forEachObject(function (obj: ICanvasObject | TypedShape) {\n            if (obj.id && obj.id === objectId) {\n              delete obj.id;\n              canvas?.remove(obj);\n            }\n          });\n      }\n\n      canvas?.renderAll();\n\n      if (shouldHandleRemoteEvent(objectId)) {\n        undoRedoDispatch({\n          type: SET_OTHER,\n          payload: canvas?.getObjects(),\n          canvasId: userId,\n        });\n      }\n    };\n\n    eventController?.on('removed', removed);\n\n    return () => {\n      eventController?.removeListener('removed', removed);\n    };\n  }, [\n    canvas,\n    eventController,\n    shouldHandleRemoteEvent,\n    undoRedoDispatch,\n    userId,\n    setLocalImage,\n    setBackgroundImage,\n    setLocalBackground,\n    isCursorObject,\n  ]);\n\n  /** Register and handle local event. */\n  useEffect(() => {\n    const objectRemoved = (e: fabric.IEvent | CanvasEvent) => {\n      if ((e.target as ICanvasObject).isActiveErase) {\n        return;\n      }\n\n      if (\n        !e.target ||\n        !(e.target as ICanvasObject).id ||\n        ((e.target as ICanvasObject).id &&\n          !shouldSerializeEvent((e.target as ICanvasObject).id as string))\n      ) {\n        return;\n      }\n\n      const payload = {\n        id: (e.target as ICanvasObject).id as string,\n      };\n\n      const canvasEvent = e.target as ICanvasObject;\n      const groupObjects = canvasEvent?._objects || [];\n\n      if (\n        canvas &&\n        payload.id &&\n        (!canvasEvent?._objects || groupObjects.length > 0) &&\n        !(e.target as ICanvasObject).groupClear &&\n        !clearIsActive\n      ) {\n        if (\n          (e.target as ITextOptions).text &&\n          !(e.target as ITextOptions).text?.trim()\n        )\n          return;\n\n        if (\n          !(e.target as TypedShape).skipState &&\n          !(e.target as TypedShape).fromJSON &&\n          ((e.target as ICanvasObject)?.text?.trim().length ||\n            (e.target as ICanvasObject).get('type') !== 'textbox')\n        ) {\n          if (payload.id.split(':')[1] === 'cursor' ) return;\n\n          let event = { event: payload, type: 'removed' } as IUndoRedoEvent;\n\n          undoRedoDispatch({\n            type: SET,\n            payload: canvas?.getObjects(),\n            canvasId: userId,\n            event,\n          });\n        }\n\n        eventSerializer?.push('removed', payload as ObjectEvent);\n      }\n    };\n\n    canvas?.on('object:removed', objectRemoved);\n\n    return () => {\n      canvas?.off('object:removed', objectRemoved);\n    };\n  }, [\n    canvas,\n    clearIsActive,\n    eventSerializer,\n    shouldSerializeEvent,\n    undoRedoDispatch,\n    userId,\n  ]);\n};\n\nexport default useSynchronizedRemoved;\n","import { useEffect } from 'react';\nimport { useSharedEventSerializer } from '../SharedEventSerializerProvider';\nimport { fabric } from 'fabric';\nimport { CanvasAction, SET, SET_GROUP } from '../reducers/undo-redo';\nimport { ICanvasObject } from '../../../interfaces/objects/canvas-object';\nimport CanvasEvent from '../../../interfaces/canvas-events/canvas-events';\nimport {\n  ObjectEvent,\n  ObjectType,\n} from '../event-serializer/PaintEventSerializer';\nimport { IUndoRedoEvent } from '../../../interfaces/canvas-events/undo-redo-event';\nimport { TypedGroup } from '../../../interfaces/shapes/group';\n\nconst useSynchronizedRotated = (\n  canvas: fabric.Canvas | undefined,\n  userId: string,\n  shouldSerializeEvent: (id: string) => boolean,\n  shouldHandleRemoteEvent: (id: string) => boolean,\n  undoRedoDispatch: React.Dispatch<CanvasAction>\n) => {\n  const {\n    state: { eventSerializer, eventController },\n  } = useSharedEventSerializer();\n\n  /** Register and handle remote event. */\n  useEffect(() => {\n    const objectRotated = (\n      id: string,\n      target: ICanvasObject,\n      isPersistent: boolean\n    ) => {\n      if (!shouldHandleRemoteEvent(id) && !isPersistent) return;\n\n      canvas?.forEachObject(function (obj: ICanvasObject) {\n        if (obj.id && obj.id === id) {\n          const object = target.eTarget;\n          if (object) {\n            obj.set({\n              angle: object.angle,\n              top: object.top,\n              left: object.left,\n              scaleX: object.scaleX,\n              scaleY: object.scaleY,\n              flipX: object.flipX,\n              flipY: object.flipY,\n              originX: object.originX || 'left',\n              originY: object.originY || 'top',\n            });\n            obj.setCoords();\n          }\n        }\n      });\n      canvas?.renderAll();\n    };\n\n    const groupRotated = (\n      id: string,\n      target: ICanvasObject,\n      isPersistent: boolean\n    ) => {\n      const isLocalGroup = (id: string, canvasId: string | undefined) => {\n        const object = id.split(':');\n\n        if (!object.length) {\n          throw new Error('Invalid ID');\n        }\n\n        return object[0] === canvasId;\n      };\n\n      if (isLocalGroup(id, userId) && !isPersistent) {\n        return;\n      }\n\n      const localObjects: any[] = canvas?.getObjects() || [];\n      const objectsToGroup: ICanvasObject[] = [];\n\n      for (let i = 0; i < localObjects.length; i++) {\n        if (target.activeIds) {\n          if (target.activeIds.includes(localObjects[i].id)) {\n            objectsToGroup.push(localObjects[i]);\n          }\n        }\n      }\n\n      for (let i = 0; i < objectsToGroup.length; i++) {\n        let match =\n          target?.eTarget?.objects?.filter(\n            (o: any) => o.id === objectsToGroup[i].id\n          )[0] || {};\n        objectsToGroup[i].set(match);\n      }\n\n      const props = target?.eTarget;\n\n      const sel = new fabric.ActiveSelection(objectsToGroup, {\n        canvas: canvas,\n        originX: props?.originX,\n        originY: props?.originY,\n        top: props?.top,\n        left: props?.left,\n        width: props?.width,\n        height: props?.height,\n        scaleX: props?.scaleX,\n        scaleY: props?.scaleY,\n        flipX: props?.flipX,\n        flipY: props?.flipY,\n        angle: props?.angle,\n        skewX: props?.skewX,\n        skewY: props?.skewY,\n        oCoords: props?.oCoords,\n        aCoords: props?.aCoords,\n        matrixCache: props?.matrixCache,\n        ownMatrixCache: props?.ownMatrixCache,\n        snapAngle: props?.snapAngle,\n        snapThreshold: props?.snapThreshold,\n        group: props?.group,\n      });\n      canvas?.setActiveObject(sel);\n      canvas?.requestRenderAll();\n      canvas?.discardActiveObject();\n    };\n\n    const rotation = (\n      id: string,\n      _type: string,\n      target: ICanvasObject,\n      isPersistent: boolean\n    ) => {\n      if (target.isGroup) {\n        groupRotated(id, target, isPersistent);\n        return;\n      }\n\n      objectRotated(id, target, isPersistent);\n    };\n\n    eventController?.on('rotated', rotation);\n\n    return () => {\n      eventController?.removeListener('rotated', rotation);\n    };\n  }, [canvas, eventController, shouldHandleRemoteEvent, userId]);\n\n  /** Register and handle local event. */\n  useEffect(() => {\n    const objectRotated = (\n      e: fabric.IEvent | CanvasEvent,\n      filteredState?: boolean\n    ) => {\n      if (!e.target) return;\n\n      const type = (e.target as ICanvasObject).get('type');\n      const activeIds: string[] = [];\n\n      if (type === 'activeSelection') {\n        if (!e.target || !(e.target as ICanvasObject)._objects) return;\n        const targetObjects = (e.target as ICanvasObject)._objects;\n\n        targetObjects?.forEach((activeObject: ICanvasObject) => {\n          if (activeObject.id && !shouldSerializeEvent(activeObject.id)) return;\n\n          activeIds.push(activeObject.id as string);\n        });\n\n        const groupPayloadData = e.target.toJSON(['id']);\n\n        const groupPayload: ObjectEvent = {\n          id: userId,\n          type,\n          target: { activeIds, eTarget: groupPayloadData, isGroup: true },\n        };\n        eventSerializer?.push('rotated', groupPayload);\n\n        if (!filteredState) {\n          const activeObjects = canvas?.getActiveObjects();\n          canvas?.discardActiveObject();\n          const activeSelection = new fabric.ActiveSelection(activeObjects, {\n            canvas: canvas,\n          });\n          canvas?.setActiveObject(activeSelection);\n          canvas?.renderAll();\n\n          const payload = {\n            type,\n            svg: true,\n            target: null,\n            id: `${userId}:group`,\n          };\n\n          const event = { event: payload, type: 'activeSelection', activeIds };\n\n          let filtered = canvas?.getObjects().filter((o: any) => {\n            return !o.group;\n          });\n\n          let active: TypedGroup = canvas?.getActiveObject() as TypedGroup;\n          active?.set({ id: `${userId}:group` });\n\n          undoRedoDispatch({\n            type: SET_GROUP,\n            payload: [...(filtered as any[]), active],\n            canvasId: userId,\n            event: (event as unknown) as IUndoRedoEvent,\n          });\n        }\n      } else {\n        if (!(e.target as ICanvasObject).id) {\n          return;\n        }\n\n        const id = (e.target as ICanvasObject).id;\n        const target = {\n          top: e.target.top,\n          left: e.target.left,\n          angle: e.target.angle,\n          scaleX: e.target.scaleX,\n          scaleY: e.target.scaleY,\n          flipX: e.target.flipX,\n          flipY: e.target.flipY,\n          originX: e.target.originX,\n          originY: e.target.originY,\n        } as ICanvasObject;\n\n        const payload: ObjectEvent = {\n          id: id as string,\n          type: type as ObjectType,\n          target: { eTarget: target, isGroup: false },\n        };\n\n        eventSerializer?.push('rotated', payload);\n\n        if (canvas && !filteredState) {\n          const event = { event: payload, type: 'rotated' };\n\n          undoRedoDispatch({\n            type: SET,\n            payload: canvas.getObjects(),\n            canvasId: userId,\n            event: (event as unknown) as IUndoRedoEvent,\n          });\n        }\n      }\n    };\n\n    const objectRotating = (e: fabric.IEvent | CanvasEvent) => {\n      objectRotated(e, true);\n    };\n\n    canvas?.on('object:rotated', objectRotated);\n    canvas?.on('object:rotating', objectRotating);\n\n    return () => {\n      canvas?.off('object:rotated', objectRotated);\n      canvas?.off('object:rotating', objectRotating);\n    };\n  }, [canvas, eventSerializer, shouldSerializeEvent, undoRedoDispatch, userId]);\n};\n\nexport default useSynchronizedRotated;\n","import { useEffect, useCallback, useContext } from 'react';\nimport { useSharedEventSerializer } from '../SharedEventSerializerProvider';\nimport { fabric } from 'fabric';\nimport { CanvasAction, SET, SET_GROUP } from '../reducers/undo-redo';\nimport { ICanvasObject } from '../../../interfaces/objects/canvas-object';\nimport CanvasEvent from '../../../interfaces/canvas-events/canvas-events';\nimport {\n  ObjectEvent,\n  ObjectType,\n} from '../event-serializer/PaintEventSerializer';\nimport { IUndoRedoEvent } from '../../../interfaces/canvas-events/undo-redo-event';\nimport { ICanvasBrush } from '../../../interfaces/brushes/canvas-brush';\nimport { Group } from 'fabric/fabric-impl';\nimport { ICoordinate } from '../../../interfaces/brushes/coordinate';\nimport { PaintBrush } from '../brushes/classes/paintBrush';\nimport { ChalkBrush } from '../brushes/classes/chalkBrush';\nimport { WhiteboardContext } from '../WhiteboardContext';\nimport { PenBrush } from '../brushes/classes/penBrush';\nimport { IPenPoint } from '../../../interfaces/brushes/pen-point';\nimport { ICanvasShapeBrush } from '../../../interfaces/brushes/canvas-shape-brush';\n\nconst useSynchronizedScaled = (\n  canvas: fabric.Canvas | undefined,\n  userId: string,\n  shouldSerializeEvent: (id: string) => boolean,\n  shouldHandleRemoteEvent: (id: string) => boolean,\n  undoRedoDispatch: React.Dispatch<CanvasAction>\n) => {\n  const { perfectShapeIsActive } = useContext(WhiteboardContext);\n  const {\n    state: { eventSerializer, eventController },\n  } = useSharedEventSerializer();\n\n  /**\n   * When the lines to fix are paintbrush type is necessary\n   * create a new paintbrush path based on its current data\n   * @param {ICanvasBrush} path - Path to take base to create the new one\n   */\n  const fixPaintBrushLines = useCallback(\n    (path: ICanvasBrush) => {\n      if (!canvas || !userId) return;\n\n      const brush = new PaintBrush(canvas, userId);\n      const newPoints = (path.basePath?.points as ICoordinate[]).map(\n        (point) => {\n          return {\n            x: point.x * Number(path.scaleX),\n            y: point.y * Number(path.scaleY),\n          };\n        }\n      );\n\n      const newPath = brush.modifyPaintBrushPath(\n        String(path.id),\n        newPoints,\n        Number(path.basePath?.strokeWidth),\n        String(path.basePath?.stroke),\n        path.basePath?.bristles || []\n      );\n\n      path.set({ ...newPath });\n      (path as Group).addWithUpdate();\n      canvas.renderAll();\n    },\n    [canvas, userId]\n  );\n\n  /**\n   * Fix the lines of marker/paintbrush path to maintain\n   * the same separation on them when marker/paintbrush path is scaled\n   * @param {ICanvasBrush} path - Modified path\n   */\n  const fixLines = useCallback(\n    (path: ICanvasBrush) => {\n      let top = path.top;\n      let left = path.left;\n\n      if (path.basePath?.type === 'paintbrush') {\n        fixPaintBrushLines(path);\n      }\n\n      (path as Group)._objects.forEach((line) => {\n        line.set({\n          top: Number(line.top) / Number(path.scaleY),\n          left: Number(line.left) / Number(path.scaleX),\n        });\n      });\n      (path as Group).addWithUpdate();\n\n      ((path as unknown) as ICanvasShapeBrush).set({\n        top: top,\n        left: left,\n        blockResize: false,\n      });\n\n      (path as Group).addWithUpdate();\n    },\n    [fixPaintBrushLines]\n  );\n\n  /**\n   * Remove the given chalk/crayon path from canvas\n   * and add a new one in the correct scale in remote whiteboard\n   * @param {ICanvasBrush} path - Path to remove\n   */\n  const remakePathSync = useCallback(\n    async (path: ICanvasBrush) => {\n      if (!canvas || !userId || !path.basePath) return;\n\n      eventController.setEventRunning(true);\n\n      // Data to generate a new chalk/crayon path\n      const basePath = path.basePath;\n\n      // Brush creation\n      const brush = new ChalkBrush(\n        canvas,\n        userId,\n        basePath?.type as 'crayon' | 'chalk'\n      );\n\n      // new points creation based on the new scale\n      const newPoints = (basePath?.points as ICoordinate[])?.map((point) => {\n        return {\n          x: point.x * Number(path?.scaleX),\n          y: point.y * Number(path?.scaleY),\n        };\n      });\n\n      // new chalk/crayon effect for the new path\n      const newRects = brush.createChalkEffect(\n        newPoints,\n        Number(basePath?.strokeWidth)\n      );\n\n      try {\n        const newObject = await brush.createChalkPath(\n          'provisional',\n          newPoints,\n          Number(basePath?.strokeWidth),\n          String(basePath?.stroke),\n          newRects\n        );\n\n        if (!path || !path.id) return;\n\n        const id = path.id;\n        newObject.set({\n          top: path.top,\n          left: path.left,\n          angle: path.angle,\n          flipX: path.flipX,\n          flipY: path.flipY,\n        });\n\n        // Id's are deleted to avoid add and remove event serializing\n        delete path.id;\n        delete newObject.id;\n\n        canvas.add(newObject);\n        canvas.remove(path);\n        canvas.renderAll();\n\n        // Id's are deleted to avoid add and remove event serializing\n        newObject.set({\n          id: id,\n        });\n\n        eventController.setEventRunning(false);\n      } catch (error) {\n        console.warn(error);\n      }\n    },\n    [canvas, eventController, userId]\n  );\n\n  /**\n   * Remove the given pen path from canvas\n   * and add a new one in the current whiteboard\n   * @param {ICanvasBrush} path - Path to remove\n   */\n  const remakePenPath = useCallback(\n    (path: ICanvasBrush) => {\n      if (!canvas || !userId) return;\n\n      // Data to generate a new chalk/crayon path\n      const basePath = path.basePath;\n\n      // Brush creation\n      const brush = new PenBrush(canvas, userId);\n\n      // new points creation based on the new scale\n      const newPoints = (basePath?.points as IPenPoint[]).map((point) => {\n        return {\n          x: point.x * Number(path?.scaleX),\n          y: point.y * Number(path?.scaleY),\n          width: point.width,\n        };\n      });\n\n      try {\n        const newObject = brush.createPenPath(\n          String(path.id),\n          newPoints,\n          Number(basePath?.strokeWidth),\n          String(basePath?.stroke)\n        );\n\n        if (!path) return;\n\n        const id = path.id;\n        newObject.set({\n          top: path.top,\n          left: path.left,\n          angle: path.angle,\n          flipX: path.flipX,\n          flipY: path.flipY,\n        });\n\n        // Id's are deleted to avoid add and remove event serializing\n        delete path.id;\n        delete newObject.id;\n\n        canvas.remove(path);\n        canvas.add(newObject);\n        canvas.renderAll();\n\n        // Id's are deleted to avoid add and remove event serializing\n        newObject.set({\n          id,\n        });\n\n        eventController.setEventRunning(false);\n      } catch (error) {\n        console.warn(error);\n      }\n    },\n    [canvas, eventController, userId]\n  );\n\n  /**\n   * Checks if an image-based path object should be scaled\n   * when this comes from persistent events\n   * @param object - Object to check\n   * @param target - Target with the properties to set in the given object\n   */\n  const chalkCrayonObjectShouldBeScaled = useCallback(\n    (object: ICanvasBrush, target: ICanvasBrush) => {\n      const objectWidth = Number(object.width);\n      const objectHeight = Number(object.height);\n      const targetWidth = Number(target.width);\n      const targetHeight = Number(target.height);\n      const objectStrokeWidth = Number(object.basePath?.strokeWidth);\n\n      return (\n        objectWidth > targetWidth + objectStrokeWidth / 4 ||\n        objectHeight > targetHeight + objectStrokeWidth / 4\n      );\n    },\n    []\n  );\n\n  /** Register and handle remote event. */\n  useEffect(() => {\n    const objectScaled = (\n      id: string,\n      target: ICanvasObject,\n      isPersistent: boolean\n    ) => {\n      if (!shouldHandleRemoteEvent(id) && !isPersistent) return;\n\n      canvas?.forEachObject(function (obj: ICanvasObject) {\n        if (obj.id && obj.id === id) {\n          const object = target.eTarget;\n\n          if (\n            isPersistent &&\n            object?.type === 'image-based' &&\n            chalkCrayonObjectShouldBeScaled(\n              obj as ICanvasBrush,\n              object as ICanvasBrush\n            )\n          ) {\n            return;\n          }\n\n          if (object) {\n            obj.set({\n              angle: object.angle,\n              top: object.top,\n              left: object.left,\n              scaleX: object.scaleX,\n              scaleY: object.scaleY,\n              flipX: object.flipX,\n              flipY: object.flipY,\n              originX: object.originX || 'left',\n              originY: object.originY || 'top',\n            });\n\n            obj.setCoords();\n\n            if (\n              isPersistent &&\n              object.type === 'group-marker' &&\n              object.scaleX === 1 &&\n              object.scaleY === 1\n            ) {\n              obj.set({\n                scaleX: Number(object.width) / Number(obj.width),\n                scaleY: Number(object.height) / Number(obj.height),\n              });\n            }\n\n            if (object.type === 'group-marker') {\n              fixLines(obj as ICanvasBrush);\n            }\n\n            if (object.type === 'image-based') {\n              remakePathSync(obj as ICanvasBrush);\n            }\n\n            if (object.type === 'group-pen') {\n              remakePenPath(obj as ICanvasBrush);\n            }\n          }\n        }\n      });\n\n      canvas?.renderAll();\n    };\n\n    const groupScaled = (\n      id: string,\n      target: ICanvasObject,\n      isPersistent: boolean\n    ) => {\n      const isLocalGroup = (id: string, canvasId: string | undefined) => {\n        const object = id.split(':');\n\n        if (!object.length) {\n          throw new Error('Invalid ID');\n        }\n\n        return object[0] === canvasId;\n      };\n\n      if (isLocalGroup(id, userId) && !isPersistent) {\n        return;\n      }\n\n      const localObjects: any[] = canvas?.getObjects() || [];\n      const objectsToGroup: ICanvasObject[] = [];\n\n      for (let i = 0; i < localObjects.length; i++) {\n        if (target.activeIds) {\n          if (target.activeIds.includes(localObjects[i].id)) {\n            objectsToGroup.push(localObjects[i]);\n          }\n        }\n      }\n\n      for (let i = 0; i < objectsToGroup.length; i++) {\n        let match =\n          target?.eTarget?.objects?.filter(\n            (o: any) => o.id === objectsToGroup[i].id\n          )[0] || {};\n        objectsToGroup[i].set(match);\n      }\n\n      const props = target?.eTarget;\n\n      const sel = new fabric.ActiveSelection(objectsToGroup, {\n        canvas,\n        originX: props?.originX,\n        originY: props?.originY,\n        top: props?.top,\n        left: props?.left,\n        width: props?.width,\n        height: props?.height,\n        scaleX: props?.scaleX,\n        scaleY: props?.scaleY,\n        flipX: props?.flipX,\n        flipY: props?.flipY,\n        angle: props?.angle,\n        skewX: props?.skewX,\n        skewY: props?.skewY,\n        oCoords: props?.oCoords,\n        aCoords: props?.aCoords,\n        matrixCache: props?.matrixCache,\n        ownMatrixCache: props?.ownMatrixCache,\n        snapAngle: props?.snapAngle,\n        snapThreshold: props?.snapThreshold,\n        group: props?.group,\n        globalCompositeOperation: 'source-over',\n      });\n\n      canvas?.setActiveObject(sel);\n      canvas?.requestRenderAll();\n      canvas?.discardActiveObject();\n    };\n\n    const scaled = (\n      id: string,\n      _type: string,\n      target: ICanvasObject,\n      isPersistent: boolean\n    ) => {\n      if (target.isGroup) {\n        groupScaled(id, target, isPersistent);\n        return;\n      }\n\n      objectScaled(id, target, isPersistent);\n    };\n\n    eventController?.on('scaled', scaled);\n\n    return () => {\n      eventController?.removeListener('scaled', scaled);\n    };\n  }, [\n    canvas,\n    chalkCrayonObjectShouldBeScaled,\n    eventController,\n    fixLines,\n    remakePathSync,\n    remakePenPath,\n    shouldHandleRemoteEvent,\n    userId,\n  ]);\n\n  useEffect(() => {\n    /**\n     * Handles the logic for scale objects on canvas\n     * @param e - Scale or scaling event\n     * @param filtered - Flag to know if is a scaling (true)\n     * or scaled (false) event\n     */\n    const objectScaled = async (\n      e: fabric.IEvent | CanvasEvent,\n      filtered?: boolean\n    ) => {\n      if (!e.target) return;\n\n      const type = (e.target as ICanvasObject).get('type');\n      const activeIds: string[] = [];\n\n      if (type === 'activeSelection' && (e.target as ICanvasObject)._objects) {\n        const groupObjects = (e.target as ICanvasObject)._objects || [];\n\n        groupObjects.forEach((activeObject: ICanvasObject) => {\n          if (activeObject.id && !shouldSerializeEvent(activeObject.id)) return;\n\n          activeIds.push(activeObject.id as string);\n        });\n\n        const groupPayloadData = e.target.toJSON(['id']);\n\n        const groupPayload: ObjectEvent = {\n          id: userId,\n          type,\n          target: { activeIds, eTarget: groupPayloadData, isGroup: true },\n          avoidPersistentStoring: filtered,\n        };\n\n        eventSerializer?.push('scaled', groupPayload);\n\n        if (!filtered) {\n          const activeObjects = canvas?.getActiveObjects();\n          canvas?.discardActiveObject();\n          const activeSelection = new fabric.ActiveSelection(activeObjects, {\n            canvas: canvas,\n          });\n          canvas?.setActiveObject(activeSelection);\n          canvas?.renderAll();\n\n          const payload = {\n            type,\n            svg: true,\n            target: null,\n            id: `${userId}:group`,\n          };\n\n          const event = { event: payload, type: 'activeSelection', activeIds };\n          const filteredPayload = canvas?.getObjects().filter((o: any) => {\n            return !o.group;\n          });\n\n          let active = canvas?.getActiveObject();\n\n          undoRedoDispatch({\n            type: SET_GROUP,\n            payload: [...(filteredPayload as any[]), active],\n            canvasId: userId,\n            event: (event as unknown) as IUndoRedoEvent,\n          });\n        }\n      } else {\n        if (!(e.target as ICanvasObject).id) {\n          return;\n        }\n\n        if (!shouldSerializeEvent((e.target as ICanvasObject).id as string))\n          return;\n\n        const type: ObjectType = (e.target as ICanvasObject).get(\n          'type'\n        ) as ObjectType;\n\n        const brushTarget: ICanvasBrush = e.target as ICanvasBrush;\n        const brushType = brushTarget.basePath?.type;\n        const id = brushTarget.id;\n\n        let target = {\n          top: e.target.top,\n          left: e.target.left,\n          width: e.target.width,\n          height: e.target.height,\n          angle: e.target.angle,\n          scaleX: e.target.scaleX,\n          scaleY: e.target.scaleY,\n          flipX: e.target.flipX,\n          flipY: e.target.flipY,\n          originX: e.target.originX,\n          originY: e.target.originY,\n          name: e.target.name,\n        } as ICanvasObject;\n\n        switch (brushType) {\n          case 'pen': {\n            if (!canvas || !userId) return;\n\n            if (filtered) break;\n\n            const brush = new PenBrush(canvas, userId);\n            const basePath = brushTarget.basePath;\n            const newPoints = (basePath?.points as IPenPoint[]).map((point) => {\n              return {\n                x: point.x * Number(e.target?.scaleX),\n                y: point.y * Number(e.target?.scaleY),\n                width: point.width,\n              };\n            });\n\n            try {\n              const newObject = await brush.createPenPath(\n                String(brushTarget.id),\n                newPoints,\n                Number(basePath?.strokeWidth),\n                String(basePath?.stroke)\n              );\n\n              if (!e.target) return;\n\n              console.log(e.target);\n              const id = brushTarget.id;\n              ((newObject as unknown) as ICanvasShapeBrush).set({\n                top: e.target.top,\n                left: e.target.left,\n                angle: e.target.angle,\n                flipX: e.target.flipX,\n                flipY: e.target.flipY,\n                name: e.target.name,\n                shapeType: (e.target as ICanvasShapeBrush).shapeType,\n              });\n\n              // Id's are deleted to avoid add and remove event serializing\n              delete (e.target as ICanvasBrush).id;\n              delete newObject.id;\n\n              canvas.remove(e.target);\n              canvas.add(newObject);\n              canvas.setActiveObject(newObject);\n              canvas.renderAll();\n\n              // Id's are deleted to avoid add and remove event serializing\n              newObject.set({\n                id: id,\n              });\n\n              // target.type = 'image-based';\n            } catch (e) {\n              console.warn(e);\n            }\n\n            target.type = 'group-pen';\n            break;\n          }\n          case 'marker':\n          case 'felt':\n          case 'paintbrush': {\n            fixLines(brushTarget);\n            canvas?.renderAll();\n            target.type = 'group-marker';\n            break;\n          }\n          case 'chalk':\n          case 'crayon': {\n            if (!canvas || !userId) return;\n\n            if (filtered) break;\n\n            const brush = new ChalkBrush(canvas, userId, brushType);\n            const basePath = brushTarget.basePath;\n            const newPoints = (basePath?.points as ICoordinate[]).map(\n              (point) => {\n                return {\n                  x: point.x * Number(e.target?.scaleX),\n                  y: point.y * Number(e.target?.scaleY),\n                };\n              }\n            );\n\n            const newRects = brush.createChalkEffect(\n              newPoints,\n              Number(basePath?.strokeWidth)\n            );\n\n            try {\n              const newObject = await brush.createChalkPath(\n                String(brushTarget.id),\n                newPoints,\n                Number(basePath?.strokeWidth),\n                String(basePath?.stroke),\n                newRects\n              );\n\n              if (!e.target) return;\n\n              const id = brushTarget.id;\n              ((newObject as unknown) as ICanvasShapeBrush).set({\n                top: e.target.top,\n                left: e.target.left,\n                angle: e.target.angle,\n                flipX: e.target.flipX,\n                flipY: e.target.flipY,\n                name: e.target.name,\n                shapeType: (e.target as ICanvasShapeBrush).shapeType,\n              });\n\n              // Id's are deleted to avoid add and remove event serializing\n              delete (e.target as ICanvasBrush).id;\n              delete newObject.id;\n\n              canvas.remove(e.target);\n              canvas.add(newObject);\n              canvas.setActiveObject(newObject);\n              canvas.renderAll();\n\n              // Id's are deleted to avoid add and remove event serializing\n              newObject.set({\n                id: id,\n              });\n\n              target.type = 'image-based';\n            } catch (e) {\n              console.warn(e);\n            }\n\n            break;\n          }\n        }\n\n        const payload: ObjectEvent = {\n          id: id as string,\n          type: type as ObjectType,\n          target: { eTarget: target, isGroup: false },\n          avoidPersistentStoring: filtered,\n        };\n\n        eventSerializer?.push('scaled', payload);\n\n        if (canvas && !filtered) {\n          const event = { event: payload, type: 'scaled' };\n\n          undoRedoDispatch({\n            type: SET,\n            payload: canvas.getObjects(),\n            canvasId: userId,\n            event: (event as unknown) as IUndoRedoEvent,\n          });\n        }\n      }\n    };\n\n    const scaling = (e: fabric.IEvent | CanvasEvent) => {\n      objectScaled(e, true);\n    };\n\n    canvas?.on('object:scaled', objectScaled);\n    canvas?.on('object:scaling', scaling);\n\n    return () => {\n      canvas?.off('object:scaled', objectScaled);\n      canvas?.off('object:scaling', scaling);\n    };\n  }, [\n    canvas,\n    eventSerializer,\n    fixLines,\n    shouldSerializeEvent,\n    undoRedoDispatch,\n    userId,\n  ]);\n\n  useEffect(() => {\n    if (perfectShapeIsActive) {\n      canvas?.renderAll();\n    }\n  }, [canvas, perfectShapeIsActive]);\n};\n\nexport default useSynchronizedScaled;\n","import { useEffect } from 'react';\nimport { useSharedEventSerializer } from '../SharedEventSerializerProvider';\nimport { ICanvasObject } from '../../../interfaces/objects/canvas-object';\nimport CanvasEvent from '../../../interfaces/canvas-events/canvas-events';\nimport {\n  ObjectEvent,\n  ObjectType,\n} from '../event-serializer/PaintEventSerializer';\n\nconst useSynchronizedSkewed = (\n  canvas: fabric.Canvas | undefined,\n  shouldSerializeEvent: (id: string) => boolean,\n  shouldHandleRemoteEvent: (id: string) => boolean\n) => {\n  const {\n    state: { eventSerializer, eventController },\n  } = useSharedEventSerializer();\n\n  /** Register and handle remote events. */\n  useEffect(() => {\n    const skewed = (id: string, target: ICanvasObject) => {\n      if (!shouldHandleRemoteEvent(id)) return;\n\n      canvas?.forEachObject(function (obj: ICanvasObject) {\n        if (obj.id && obj.id === id) {\n          obj.set({\n            angle: target.angle,\n            top: target.top,\n            left: target.left,\n            scaleX: target.scaleX,\n            scaleY: target.scaleY,\n            flipX: target.flipX,\n            flipY: target.flipY,\n            skewX: target.skewX,\n            skewY: target.skewY,\n          });\n        }\n      });\n      canvas?.renderAll();\n    };\n\n    eventController?.on('skewed', skewed);\n\n    return () => {\n      eventController?.removeListener('skewed', skewed);\n    };\n  }, [canvas, eventController, shouldHandleRemoteEvent]);\n\n  /** Register and handle local events. */\n  useEffect(() => {\n    const objectSkewed = (e: CanvasEvent) => {\n      if (!e.target?.id) {\n        return;\n      }\n\n      if (!shouldSerializeEvent(e.target.id)) return;\n\n      const type: ObjectType = e.target.get('type') as ObjectType;\n      const target = {\n        top: e.target.top,\n        left: e.target.left,\n        angle: e.target.angle,\n        scaleX: e.target.scaleX,\n        scaleY: e.target.scaleY,\n        skewX: e.target.skewX,\n        skewY: e.target.skewY,\n      } as ICanvasObject;\n\n      const payload: ObjectEvent = {\n        type,\n        target,\n        id: e.target.id,\n      };\n\n      eventSerializer?.push('skewed', payload);\n    };\n\n    canvas?.on('object:skewed', objectSkewed);\n\n    return () => {\n      canvas?.off('object:skewed', objectSkewed);\n    };\n  }, [canvas, eventSerializer, shouldSerializeEvent]);\n};\n\nexport default useSynchronizedSkewed;\n","import { useEffect } from 'react';\nimport { useSharedEventSerializer } from '../SharedEventSerializerProvider';\nimport { TypedShape } from '../../../interfaces/shapes/shapes';\nimport { CanvasAction, SET_OTHER } from '../reducers/undo-redo';\nimport { fabric } from 'fabric';\nimport { TypedGroup } from '../../../interfaces/shapes/group';\nimport { ICanvasObject } from '../../../interfaces/objects/canvas-object';\nimport { ICanvasBrush } from '../../../interfaces/brushes/canvas-brush';\nimport { IImageOptions } from 'fabric/fabric-impl';\nimport { ICanvasPathBrush } from '../../../interfaces/brushes/canvas-path-brush';\n\nconst useSynchronizedReconstruct = (\n  canvas: fabric.Canvas | undefined,\n  shouldHandleRemoteEvent: (id: string) => boolean,\n  userId: string,\n  undoRedoDispatch: React.Dispatch<CanvasAction>,\n  setLocalImage: (img: string | File) => void,\n  setLocalBackground: (condition: boolean) => void\n) => {\n  const {\n    state: { eventController },\n  } = useSharedEventSerializer();\n\n  const getId = (id: string | undefined) => (id ? id.split(':')[0] : null);\n\n  if (canvas) {\n    canvas.preserveObjectStacking = true;\n  }\n\n  useEffect(() => {\n    const reconstruct = (\n      id: string,\n      target: ICanvasObject,\n      isPersistent: boolean\n    ) => {\n      if (!shouldHandleRemoteEvent(id) && !isPersistent) return;\n\n      if (typeof target === 'object' && !target.param) {\n        target.param = JSON.stringify(target);\n      }\n\n      if (typeof target !== 'object') {\n        target = {\n          param: 'false',\n        } as ICanvasObject;\n      }\n\n      const parsed = JSON.parse(target.param as string);\n\n      if (parsed === false) {\n        canvas?.getObjects().forEach((object: TypedShape) => {\n          if (getId(id) === getId(object.id)) {\n            canvas.remove(object);\n          }\n        });\n      }\n\n      if (parsed.background && canvas) {\n        canvas?.setBackgroundColor(parsed.background, () => {});\n        canvas.renderAll();\n        return;\n      }\n\n      if (parsed.backgroundImage && canvas) {\n        canvas.setBackgroundColor(\n          'transparent',\n          canvas.renderAll.bind(canvas)\n        );\n\n        if (parsed.backgroundImage.backgroundImageEditable) {\n          setLocalImage('');\n          setLocalBackground(false);\n          let src = (parsed.backgroundImage as ICanvasPathBrush).basePath?.imageData || parsed.backgroundImage.src;\n\n          fabric.Image.fromURL(src as string, function (img) {\n            canvas?.setBackgroundImage(img, canvas.renderAll.bind(canvas), {\n              scaleX: (canvas.width || 0) / (img.width || 0),\n              scaleY: (canvas.height || 0) / (img.height || 0),\n              originX: 'left',\n              originY: 'top',\n              id,\n            } as IImageOptions);\n\n            canvas?.renderAll();\n          });\n        } else {\n          canvas.setBackgroundColor(\n            'transparent',\n            canvas.renderAll.bind(canvas)\n          );\n\n          setLocalImage(parsed.backroundImage.src);\n        }\n      }\n\n      const objects = JSON.parse(target.param as string).objects;\n\n      const reset = (object: TypedShape): void => {\n        const old = canvas\n          ?.getObjects()\n          .filter((o: TypedShape) => o.id === object.id)[0];\n        object.set({ selectable: false, evented: false });\n        canvas?.remove(old as fabric.Object);\n        canvas?.add(object);\n        canvas?.bringToFront(object);\n      };\n\n      const loadImage = (object: ICanvasObject) =>\n        new Promise<void>((resolve) => {\n          const { src, ...data } = object as ICanvasObject;\n\n          fabric.Image.fromURL(\n            object.src as string,\n            async (image: fabric.Image) => {\n              image.set(data);\n              reset(image as TypedShape);\n\n              resolve();\n            }\n          );\n        });\n\n      objects?.forEach(async (object: TypedShape) => {\n        if (object && object.type === 'path') {\n          const group: TypedGroup | undefined = canvas\n            ?.getObjects()\n            .filter((o: any) => o._objects && !o.basePath)[0] as TypedGroup;\n          if (group && group.id) {\n            canvas?.remove(group);\n          }\n\n          fabric.Path.fromObject(object, (path: TypedShape) => {\n            reset(path);\n          });\n\n          canvas?.renderAll();\n        } else if (object && object.type === 'polygon') {\n          // Ignore is required, typing is wrong in definition file.\n          //@ts-ignore\n          fabric.Polygon.fromObject(object, (o: TypedShape) => {\n            reset(o);\n          });\n        } else if (object && object.type === 'textbox') {\n          fabric.Textbox.fromObject(object, (text: TypedShape) => {\n            reset(text);\n          });\n        } else if (object && object.type === 'rect') {\n          // Ignore is required, typing is wrong in definition file.\n          //@ts-ignore\n          fabric.Rect.fromObject(object, (o: TypedShape) => {\n            reset(o);\n          });\n        } else if (object && object.type === 'ellipse') {\n          // Ignore is required, typing is wrong in definition file.\n          //@ts-ignore\n          fabric.Ellipse.fromObject(object, (o: TypedShape) => {\n            reset(o);\n          });\n        } else if (object && object.type === 'triangle') {\n          // Ignore is required, typing is wrong in definition file.\n          //@ts-ignore\n          fabric.Triangle.fromObject(object, (o: TypedShape) => {\n            reset(o);\n          });\n        } else if (object && object.type === 'image') {\n          if ((object as ICanvasObject).joinedIds) {\n            canvas?.getObjects().forEach((o: ICanvasObject) => {\n              if (\n                (object as ICanvasObject).joinedIds?.indexOf(o.id as string) !==\n                -1\n              ) {\n                canvas.remove(o);\n              }\n            });\n          }\n\n          await loadImage(object as ICanvasObject);\n        } else if (object) {\n          let items: TypedShape[] = [];\n          let groupObject: any;\n          fabric.Group.fromObject(object, (group: fabric.Group) => {\n            groupObject = group;\n            const old = canvas\n              ?.getObjects()\n              .filter((o: TypedShape) => o.id === object.id)[0];\n            if (group.getObjects()) {\n              group.getObjects().forEach((o: TypedShape) => {\n                const oldO = canvas\n                  ?.getObjects()\n                  .filter((oldObject: TypedShape) => oldObject.id === o.id)[0];\n                canvas?.remove(oldO as fabric.Object);\n                items.push(o);\n              });\n            }\n            group.set({ selectable: false, evented: false });\n            canvas?.remove(old as fabric.Object);\n            canvas?.add(group);\n          });\n\n          canvas?.remove(groupObject);\n\n          // If object is a custom brush\n          if ((object as ICanvasBrush).basePath) {\n            let newGroup = new fabric.Group(items);\n            (newGroup as ICanvasBrush).set({\n              ...object,\n            });\n\n            canvas?.add(newGroup);\n          } else {\n            items.forEach((o: TypedShape) => {\n              canvas?.add(o);\n            });\n          }\n        }\n\n        undoRedoDispatch({\n          type: SET_OTHER,\n          payload: (canvas?.getObjects() as unknown) as TypedShape[],\n          canvasId: userId,\n        });\n      });\n    };\n\n    eventController?.on('reconstruct', reconstruct);\n\n    return () => {\n      eventController?.removeListener('reconstruct', reconstruct);\n    };\n  }, [\n    canvas,\n    eventController,\n    shouldHandleRemoteEvent,\n    undoRedoDispatch,\n    userId,\n  ]);\n};\n\nexport default useSynchronizedReconstruct;\n","import fabric from 'fabric/fabric-impl';\n\n/**\n * Point interface.\n */\ninterface IPoint {\n  x: number;\n  y: number;\n}\n\n/**\n * RGB Interface\n */\ninterface IRgb {\n  r: number;\n  g: number;\n  b: number;\n}\n\n/**\n * Class to manage laser pointer.\n */\nexport class Laser {\n  /**\n   * Pointer coordinates.\n   */\n  public pointer: IPoint;\n\n  /**\n   * Canvas element\n   */\n  public canvas: HTMLCanvasElement;\n\n  /**\n   * Stored coordinates of previous pointer positions\n   */\n  public positions: IPoint[];\n\n  /**\n   * Indicates if pointer canvas should be cleared.\n   */\n  public clear: boolean;\n\n  /**\n   * Length of motion trail.\n   */\n  private motionTrailLength: number;\n\n  /**\n   * Interval for trail fader.\n   */\n  private fadeInterval: ReturnType<typeof setInterval> | null;\n\n  /**\n   * Canvas context\n   */\n  private context: any;\n\n  /**\n   * Pointer color\n   */\n  private color: string;\n\n  /**\n   * Indicates fade delay.\n   */\n  private fadeDelay: number;\n\n  /**\n   * Indicates width of line\n   */\n  private lineWidth: number;\n\n  /**\n   * Radius of pointer.\n   */\n  private radius: number;\n\n  /**\n   * Alpha fade of trail.\n   */\n  private alpha: number;\n\n  /**\n   * Class constructor\n   * @param canvas Original canvas\n   * @param color Color of pointer\n   * @param fadeDelay Delay of trail fade\n   * @param trailLength Length of trail\n   * @param lineWidth Width of trail line\n   * @param radius Radius of pointer\n   * @param alpha Indicates level of alpha for fading line\n   */\n  constructor(\n    canvas: fabric.Canvas,\n    color: string,\n    fadeDelay?: number,\n    trailLength?: number,\n    lineWidth?: number,\n    radius?: number,\n    alpha?: number\n  ) {\n    this.canvas = document.createElement('canvas');\n    this.canvas.style.cssText =\n      'position: absolute; z-index: 3; pointer-events: none;';\n    this.canvas.width = canvas.width as number;\n    this.canvas.height = canvas.height as number;\n    this.fadeInterval = null;\n    this.clear = false;\n    this.color = color;\n    this.fadeDelay = fadeDelay && fadeDelay > 25 ? 25 : fadeDelay || 15;\n    this.lineWidth = lineWidth ? lineWidth : 5;\n    this.radius = radius ? radius : 2.5;\n    this.alpha = alpha ? alpha / 100 : 0.01;\n\n    // Create temporary canvas for laser pointer.\n    let fabricCanvas = canvas.getElement();\n    fabricCanvas.parentNode?.insertBefore(this.canvas, fabricCanvas);\n\n    this.positions = [];\n    this.pointer = { x: 0, y: 0 };\n    this.motionTrailLength =\n      trailLength && trailLength > 100 ? 100 : trailLength || 20;\n    this.context = this.canvas.getContext('2d');\n  }\n\n  /**\n   * Converts 6 digit hex to rgb\n   * @param color 6 digit hex color\n   */\n  private hexToRgb(color: string): IRgb | null {\n    let parsed = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec(color);\n\n    return parsed\n      ? {\n          r: parseInt(parsed[1], 16),\n          g: parseInt(parsed[2], 16),\n          b: parseInt(parsed[3], 16),\n        }\n      : null;\n  }\n\n  /**\n   * Stores last positions of pointer\n   * @param xPos\n   * @param yPos\n   */\n  private storeLastPosition(xPos: number, yPos: number) {\n    this.positions.push({\n      x: xPos,\n      y: yPos,\n    });\n\n    if (this.positions.length > this.motionTrailLength) {\n      this.positions.shift();\n    }\n  }\n\n  /**\n   * Generates mid point between two points.\n   * @param c1 Coordinate\n   * @param c2 Coordinate\n   */\n  private getMidpoint(c1: number, c2: number) {\n    return (c1 + c2) / 2;\n  }\n\n  /**\n   * Creates additional coordinates between coordinates provided\n   * for a smoother gradient effect.\n   */\n  private generateMidpoints() {\n    let points = [];\n\n    for (let i = 0; i < this.positions.length; i++) {\n      points.push(this.positions[i]);\n\n      if (this.positions[i + 1]) {\n        let a = this.positions[i];\n        let b = this.positions[i + 1];\n        let midpoint = {\n          x: this.getMidpoint(a.x, b.x),\n          y: this.getMidpoint(a.y, b.y),\n        };\n        points.push(midpoint);\n      }\n    }\n\n    return points;\n  }\n\n  /**\n   * Draws main pointer in exact mouse coordinate.\n   */\n  private buildPointer() {\n    this.context.fillStyle = this.color;\n    this.context.beginPath();\n    this.context.arc(\n      this.pointer.x,\n      this.pointer.y,\n      this.radius,\n      0,\n      2 * Math.PI\n    );\n    this.context.fill();\n  }\n\n  /**\n   * Generates fading trail.\n   * @param points Array of coordinates\n   * @param colorProps RGB values of color\n   */\n  private buildLine(points: IPoint[], colorProps: IRgb) {\n    let i = 0;\n\n    this.context.strokeStyle = `rgba(${colorProps.r}, ${colorProps.g}, ${colorProps.b}, ${this.alpha})`;\n    this.context.lineWidth = this.lineWidth;\n    this.context.beginPath();\n    this.context.moveTo(points[0], points[0]);\n    points.shift();\n\n    for (i; i < points.length; i++) {\n      this.context.lineTo(points[i].x, points[i].y);\n      this.context.strokeStyle = `rgba(${colorProps.r}, ${colorProps.g}, ${\n        colorProps.b\n      }, ${this.alpha * (i * 10)})`;\n      this.context.stroke();\n      this.context.beginPath();\n      this.context.moveTo(points[i].x, points[i].y);\n    }\n  }\n\n  /**\n   * Fades trailing path\n   */\n  private fadeAway() {\n    let context = this.context;\n    // let alpha = this.alpha;\n    let colorProps = this.hexToRgb(this.color);\n\n    this.fadeInterval = setInterval(() => {\n      context.clearRect(\n        0,\n        0,\n        this.canvas.width as number,\n        this.canvas.height as number\n      );\n      this.positions.shift();\n      let points = this.generateMidpoints();\n\n      if (!this.clear) {\n        this.buildPointer();\n      }\n\n      if (points.length) {\n        clearInterval(this.fadeInterval as ReturnType<typeof setInterval>);\n\n        if (!colorProps) {\n          throw new Error('Invalid color!');\n        }\n\n        this.buildLine(points, colorProps);\n        this.fadeAway();\n      }\n    }, this.fadeDelay);\n  }\n\n  /**\n   * Updates pointer position and generates light trail.\n   * @param pointer\n   */\n  public update(pointer: IPoint) {\n    this.pointer = pointer;\n    this.clear = false;\n\n    // Clear interval that removes fading trail.\n    if (this.fadeInterval) {\n      clearInterval(this.fadeInterval);\n    }\n\n    this.context.clearRect(\n      0,\n      0,\n      this.canvas.width as number,\n      this.canvas.height as number\n    );\n\n    // Store latest pointer position.\n    this.storeLastPosition(this.pointer.x, this.pointer.y);\n\n    let points = this.generateMidpoints();\n    let colorProps = this.hexToRgb(this.color);\n    this.context.beginPath(); // Start path\n\n    if (!colorProps) {\n      throw new Error('Only valid colors allowed!');\n    }\n\n    this.buildPointer();\n    this.buildLine(points, colorProps);\n    this.fadeAway();\n  }\n\n  /**\n   * Clears pointer\n   */\n  public clearPointer() {\n    this.clear = true;\n  }\n\n  /**\n   * Removes temporary canvas for laser pointer.\n   */\n  public remove() {\n    this.context.clearRect(\n      0,\n      0,\n      this.canvas.width as number,\n      this.canvas.height as number\n    );\n    this.positions = [];\n    this.canvas.remove();\n  }\n}\n","import { useEffect } from 'react';\nimport { useSharedEventSerializer } from '../SharedEventSerializerProvider';\nimport { fabric } from 'fabric';\nimport { ICanvasObject } from '../../../interfaces/objects/canvas-object';\nimport CanvasEvent from '../../../interfaces/canvas-events/canvas-events';\nimport { ObjectEvent } from '../event-serializer/PaintEventSerializer';\nimport { Laser } from '../utils/laser';\n\n/**\n * Handles laser pointer events.\n * @param canvas Canvas\n * @param showPointer Indicates if pointer should be shown.\n * @param universalPermits Indicates if user has universal permits, such as a teacher.\n * @param shouldHandleRemoteEvent Method that checks if an event should be handled.\n * @param userId User ID.\n * @param laserColor Color of laser.\n * @param laserIsActive Indicates if laser tool is sselected.\n * @param allowPointer Indicates if user has permission to use laser pointer.\n */\nconst useSynchronizedPointer = (\n  canvas: fabric.Canvas | undefined,\n  allowPointer: boolean,\n  shouldHandleRemoteEvent: (id: string) => boolean,\n  userId: string,\n  laserColor: string,\n  laserIsActive: boolean\n) => {\n  const {\n    state: { eventSerializer, eventController },\n  } = useSharedEventSerializer();\n\n  /** Emits local event. */\n  useEffect(() => {\n    let trail: Laser;\n    const id: string = `${userId}:laser`;\n\n    /**\n     * Handles moving event for laser pointer. Emits event to other users.\n     * @param e Canvas event.\n     */\n    const move = (e: CanvasEvent) => {\n      if ((e.e as MouseEvent).which && (e.e as MouseEvent).buttons && canvas) {\n        canvas.defaultCursor = 'none';\n        canvas.hoverCursor = 'none';\n        canvas?.getObjects().forEach((o: any) => {\n          o.set({ hoverCursor: 'none' });\n        });\n        trail.update(e.pointer as { x: number; y: number });\n\n        const top = (e.pointer as fabric.Point).y;\n        const left = (e.pointer as fabric.Point).x;\n\n        const payload: ObjectEvent = {\n          type: 'pointer',\n          target: { top, left, fill: laserColor } as ICanvasObject,\n          id,\n        };\n\n        eventSerializer.push('pointer', payload);\n      } else if (trail && canvas && !trail.clear) {\n        canvas.defaultCursor = 'default';\n        canvas?.getObjects().forEach((o: any) => {\n          o.set({ hoverCursor: 'default' });\n        });\n\n        const payload: ObjectEvent = {\n          type: 'pointer',\n          target: { groupClear: true } as ICanvasObject,\n          id,\n        };\n\n        eventSerializer.push('pointer', payload);\n        trail.clearPointer();\n      }\n    };\n\n    if (laserIsActive && allowPointer) {\n      trail = new Laser(canvas as fabric.Canvas, laserColor, 20, 25);\n      canvas?.renderAll();\n      canvas?.on('mouse:move', move);\n    }\n\n    return () => {\n      if (trail) {\n        trail.remove();\n\n        const payload: ObjectEvent = {\n          type: 'pointer',\n          target: false,\n          id,\n        };\n\n        eventSerializer.push('pointer', payload);\n      }\n\n      canvas?.off('mouse:move', move);\n    };\n  }, [\n    laserIsActive,\n    canvas,\n    allowPointer,\n    eventSerializer,\n    laserColor,\n    userId,\n  ]);\n\n  /** Register and handle remote moved event. */\n  useEffect(() => {\n    let trail: Laser | null;\n\n    /**\n     * Handles moving event for laser pointer. Receives event.\n     * @param id User ID. Used for determining if event should be handled.\n     * @param target Properites for laser pointer.\n     */\n    const moved = (\n      id: string,\n      target: { top: number; left: number; fill?: string }\n    ) => {\n      if (!shouldHandleRemoteEvent(id)) {\n        return;\n      }\n\n      if (!trail && canvas && target && !(target as ICanvasObject).groupClear) {\n        trail = new Laser(\n          canvas as fabric.Canvas,\n          target.fill || '#000000',\n          20,\n          25\n        );\n      } else if (trail && (target as ICanvasObject).groupClear) {\n        trail.clearPointer();\n      } else if (trail && !target) {\n        trail.remove();\n        trail = null;\n      } else if (!trail && !canvas) {\n        return;\n      }\n\n      trail?.update({ x: target.left, y: target.top });\n    };\n\n    eventController?.on('pointer', moved);\n\n    return () => {\n      eventController?.removeListener('pointer', moved);\n    };\n  }, [canvas, eventController, allowPointer, shouldHandleRemoteEvent]);\n};\n\nexport default useSynchronizedPointer;\n","import { useEffect } from 'react';\nimport { useSharedEventSerializer } from '../SharedEventSerializerProvider';\nimport { UPDATE_RECEIVED } from '../redux/actions';\n\nconst useSynchronizedSetToolbarPermissions = (\n  canvas: fabric.Canvas | undefined,\n  userId: string,\n  shouldHandleRemoteEvent: (id: string) => boolean,\n  updatePermissions: (tool: string, payload: boolean) => any\n) => {\n  const {\n    state: { eventController },\n  } = useSharedEventSerializer();\n\n  useEffect(() => {\n    const setToolbarPermissions = (\n      id: string,\n      target: any,\n      isPersistent: boolean\n    ) => {\n      if (!shouldHandleRemoteEvent(id) && !isPersistent) return;\n      updatePermissions(UPDATE_RECEIVED, target);\n    };\n\n    eventController?.on('setToolbarPermissions', setToolbarPermissions);\n\n    return () => {\n      eventController?.removeListener(\n        'setToolbarPermissions',\n        setToolbarPermissions\n      );\n    };\n  }, [\n    canvas,\n    eventController,\n    shouldHandleRemoteEvent,\n    userId,\n    updatePermissions,\n  ]);\n};\n\nexport default useSynchronizedSetToolbarPermissions;\n","import { useEffect } from 'react';\nimport { CanvasAction, SET_OTHER } from '../reducers/undo-redo';\nimport { useSharedEventSerializer } from '../SharedEventSerializerProvider';\nimport { ICanvasObject } from '../../../interfaces/objects/canvas-object';\n\nconst useSynchronizedFontColorChanged = (\n  canvas: fabric.Canvas | undefined,\n  userId: string,\n  shouldHandleRemoteEvent: (id: string) => boolean,\n  undoRedoDispatch: React.Dispatch<CanvasAction>\n) => {\n  const {\n    state: { eventController },\n  } = useSharedEventSerializer();\n\n  useEffect(() => {\n    const colorChanged = (\n      id: string,\n      objectType: string,\n      target: ICanvasObject,\n      isPersistent?: boolean\n    ) => {\n      if (id && !shouldHandleRemoteEvent(id) && !isPersistent) return;\n\n      canvas?.forEachObject(function (obj: ICanvasObject) {\n        if (obj.id && obj.id === id) {\n          if (objectType === 'textbox') {\n            obj.set({\n              fill: target.fill,\n            });\n          }\n        }\n      });\n\n      undoRedoDispatch({\n        type: SET_OTHER,\n        payload: canvas?.getObjects(),\n        canvasId: userId,\n      });\n\n      canvas?.renderAll();\n    };\n\n    eventController?.on('fontColorChanged', colorChanged);\n\n    return () => {\n      eventController?.removeListener('fontColorChanged', colorChanged);\n    };\n  }, [\n    canvas,\n    eventController,\n    shouldHandleRemoteEvent,\n    undoRedoDispatch,\n    userId,\n  ]);\n};\n\nexport default useSynchronizedFontColorChanged;\n","import { fabric } from 'fabric';\nimport { shapePoints } from '../../../assets/shapes-points';\nimport { IBrushType } from '../../../interfaces/brushes/brush-type';\nimport { ICanvasBrush } from '../../../interfaces/brushes/canvas-brush';\nimport { ICanvasPathBrush } from '../../../interfaces/brushes/canvas-path-brush';\nimport { ICanvasShapeBrush } from '../../../interfaces/brushes/canvas-shape-brush';\nimport { ICoordinate } from '../../../interfaces/brushes/coordinate';\nimport { IShapePointsIndex } from '../../../interfaces/brushes/shape-points-index';\nimport { ICanvasObject } from '../../../interfaces/objects/canvas-object';\nimport { ChalkBrush } from '../brushes/classes/chalkBrush';\nimport { DashedBrush } from '../brushes/classes/dashedBrush';\nimport { MarkerBrush } from '../brushes/classes/markerBrush';\nimport { PaintBrush } from '../brushes/classes/paintBrush';\nimport { PenBrush } from '../brushes/classes/penBrush';\nimport * as shapes from '../shapes/shapes';\n\n/**\n * Point interface.\n */\ninterface IPoint {\n  x: number;\n  y: number;\n}\n\nexport interface IRealtimeData {\n  type: string;\n  target: fabric.Object;\n  coordinates?: IPoint[];\n  shape?: { [key: string]: string | number | ICanvasShapeBrush | undefined };\n}\n\n/**x\n * Class to handle realtime creation of objects.\n */\nexport class Realtime {\n  /**\n   * Pointer coordinates.\n   */\n  public pointer: IPoint | null;\n\n  /**\n   * Canvas element\n   */\n  public canvas: HTMLCanvasElement;\n\n  /**\n   * Points for path that is in process of being drawn\n   */\n  public points: IPoint[];\n\n  /**\n   * Stroke color, used when adding in realtime\n   */\n  private color!: { r: number; g: number; b: number };\n\n  /**\n   * Line width of object being added.\n   */\n  private lineWidth!: number;\n\n  /**\n   * Canvas context\n   */\n  private context: any;\n\n  /**\n   * Temporary canvas will erasing will take place.\n   */\n  private tempCanvas: fabric.Canvas | null;\n\n  /**\n   * Indicates shape to be drawn\n   */\n  private type: string | null;\n\n  /**\n   * Canvas width\n   */\n  private width: number;\n\n  /**\n   * Canvas height\n   */\n  private height: number;\n\n  /**\n   *\n   * @param width Canvas width\n   * @param height Canvas height\n   * @param id User / instance id\n   */\n  constructor(width: number, height: number, id: string) {\n    this.canvas = document.createElement('canvas');\n    this.canvas.id = id;\n\n    this.canvas.style.cssText =\n      'position: absolute; z-index: 3; pointer-events: none;';\n\n    this.canvas.width = width as number;\n    this.canvas.height = height as number;\n    this.pointer = null;\n    this.points = [];\n    this.context = null;\n    this.type = null;\n    this.tempCanvas = null;\n    this.width = width;\n    this.height = height;\n  }\n\n  /**\n   * Initiates realtime process for adding elements to canvas.\n   * @param canvas Canavs\n   * @param type type of object being added\n   * @param color Coloro of object being added\n   * @param lineWidth Line width of object being added\n   */\n  public init(\n    canvas: fabric.Canvas,\n    type: string,\n    color: string,\n    lineWidth: number\n  ) {\n    if (type !== 'pencil' && type !== 'text') {\n      this.tempCanvas = new fabric.Canvas(this.canvas, {\n        width: this.width,\n        height: this.height,\n      });\n    }\n\n    let fabricCanvas = canvas?.getElement();\n    fabricCanvas?.parentNode?.insertBefore(this.canvas, fabricCanvas);\n    this.context = this.canvas.getContext('2d');\n    this.color = this.hexToRgb(color);\n    this.lineWidth = lineWidth;\n    this.type = type;\n  }\n\n  /**\n   * Checks if instance is initiated.\n   */\n  public isInitiated() {\n    return this.context !== null;\n  }\n\n  /**\n   * Converts 6 digit hex to rgb\n   * @param color 6 digit hex color\n   */\n  private hexToRgb(color: string): any | null {\n    let parsed = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec(color);\n\n    return parsed\n      ? {\n          r: parseInt(parsed[1], 16),\n          g: parseInt(parsed[2], 16),\n          b: parseInt(parsed[3], 16),\n        }\n      : null;\n  }\n\n  /**\n   *\n   * @param target Contains shape information.\n   */\n  public async draw(target: IRealtimeData) {\n    if (!((target.shape as unknown) as ICanvasShapeBrush)?.basePath) {\n      switch (this.type) {\n        case 'pencil': {\n          this.drawPath(target.coordinates as IPoint[]);\n          break;\n        }\n        case 'rectangle': {\n          this.rectDraw(target);\n          break;\n        }\n        case 'circle': {\n          this.ellipseDraw(target);\n          break;\n        }\n        case 'triangle': {\n          this.triangleDraw(target);\n          break;\n        }\n        case 'pentagon': {\n          this.pentagonDraw(target);\n          break;\n        }\n        case 'hexagon': {\n          this.hexagonDraw(target);\n          break;\n        }\n        case 'star': {\n          this.starDraw(target);\n          break;\n        }\n        case 'chatBubble': {\n          this.chatDraw(target);\n          break;\n        }\n        case 'arrow': {\n          this.arrowDraw(target);\n          break;\n        }\n        default: {\n          this.customBrushPath(target);\n        }\n      }\n    } else if (this.type) {\n      let shape = await this.customBrushShape(this.type, target);\n\n      if (shape) {\n        this.clear();\n        this.tempCanvas?.add(shape);\n        this.tempCanvas?.renderAll();\n      }\n    }\n  }\n\n  /**\n   * Draws a path.\n   * @param points Path points\n   */\n  public drawPath(points: IPoint[]) {\n    if (!points) {\n      return;\n    }\n\n    let i = 0;\n    this.clear();\n\n    this.context.strokeStyle = `rgba(${this.color.r},${this.color.g},${this.color.b},1)`;\n    this.context.lineCap = 'round';\n    this.context.lineWidth = this.lineWidth;\n    this.context.beginPath();\n    this.context.moveTo(points[0], points[0]);\n    points.shift();\n\n    for (i; i < points.length; i++) {\n      this.context.lineTo(points[i].x, points[i].y);\n    }\n\n    this.context.stroke();\n  }\n\n  /**\n   * Draws a shape\n   * @param target Canvas target\n   */\n  public rectDraw(target: any) {\n    this.clear();\n\n    if (!target || !target.shape) {\n      return;\n    }\n\n    const rect = shapes.rectangle(\n      target.shape.width,\n      target.shape.height,\n      target.shape.stroke,\n      false,\n      target.shape.strokeWidth,\n      target.shape.strokeDashArray?.length\n    );\n\n    rect.set({\n      top: target.shape.top,\n      left: target.shape.left,\n      originX: target.shape.originX,\n      originY: target.shape.originY,\n    });\n\n    this.tempCanvas?.add(rect);\n    this.tempCanvas?.renderAll();\n  }\n\n  /**\n   * Draws circle\n   * @param target Data of shape to be drawn.\n   */\n  public ellipseDraw(target: any) {\n    this.clear();\n    const ellipse = shapes.circle(\n      target.shape.width / 2,\n      target.shape.height / 2,\n      target.shape.stroke,\n      false,\n      target.shape.strokeWidth,\n      target.shape.strokeDashArray?.length\n    );\n    ellipse.set({\n      top: target.shape.top,\n      left: target.shape.left,\n      originX: target.shape.originX,\n      originY: target.shape.originY,\n    });\n    this.tempCanvas?.add(ellipse);\n    this.tempCanvas?.renderAll();\n  }\n\n  public triangleDraw(target: any) {\n    this.tempCanvas?.clear();\n    const triangle = shapes.triangle(\n      target.shape.width,\n      target.shape.height,\n      target.shape.stroke,\n      false,\n      target.shape.strokeWidth,\n      target.shape.strokeDashArray?.length\n    );\n\n    triangle.set({\n      top: target.shape.top,\n      left: target.shape.left,\n      originX: target.shape.originX,\n      originY: target.shape.originY,\n    });\n\n    this.tempCanvas?.add(triangle);\n    this.tempCanvas?.renderAll();\n  }\n\n  /**\n   *\n   * @param target Shape information\n   */\n  private shapeProps(shape: IRealtimeData['shape']) {\n    return {\n      top: shape?.top,\n      left: shape?.left,\n      originX: shape?.originX,\n      originY: shape?.originY,\n      scaleX: shape?.scaleX,\n      scaleY: shape?.scaleY,\n    };\n  }\n\n  /**\n   * Draws pentagon\n   * @param target Shape information\n   */\n  public pentagonDraw(target: any) {\n    this.tempCanvas?.clear();\n    const pentagon = shapes.pentagon(\n      target.shape.stroke,\n      false,\n      target.shape.strokeWidth,\n      target.shape.strokeDashArray?.length\n    );\n\n    // @ts-ignore\n    pentagon.set(this.shapeProps(target.shape));\n\n    this.tempCanvas?.add(pentagon);\n    this.tempCanvas?.renderAll();\n  }\n\n  /**\n   * Draws hegaxon\n   * @param target Shape information\n   */\n  public hexagonDraw(target: any) {\n    this.tempCanvas?.clear();\n    const hexagon = shapes.hexagon(\n      target.shape.stroke,\n      false,\n      target.shape.strokeWidth,\n      target.shape.strokeDashArray?.length\n    );\n\n    // @ts-ignore\n    hexagon.set(this.shapeProps(target.shape));\n    this.tempCanvas?.add(hexagon);\n    this.tempCanvas?.renderAll();\n  }\n\n  /**\n   * Draws star\n   * @param target Shape inforamtion\n   */\n  public starDraw(target: any) {\n    this.tempCanvas?.clear();\n    const star = shapes.star(\n      2,\n      2,\n      target.shape.stroke,\n      false,\n      target.shape.strokeWidth,\n      target.shape.strokeDashArray?.length\n    );\n\n    // @ts-ignore\n    star.set(this.shapeProps(target.shape));\n    this.tempCanvas?.add(star);\n    this.tempCanvas?.renderAll();\n  }\n\n  /**\n   * Draws chat bubble\n   * @param target Shape information\n   */\n  public chatDraw(target: any) {\n    this.tempCanvas?.clear();\n    const chat = shapes.chat(\n      2,\n      2,\n      target.shape.stroke,\n      false,\n      target.shape.strokeWidth,\n      target.shape.strokeDashArray?.length\n    );\n\n    // @ts-ignore\n    chat.set(this.shapeProps(target.shape));\n    this.tempCanvas?.add(chat);\n    this.tempCanvas?.renderAll();\n  }\n\n  /**\n   * Draws arrow\n   * @param target Shape information\n   */\n  public arrowDraw(target: any) {\n    this.tempCanvas?.clear();\n    const arrow = shapes.arrow(\n      2,\n      2,\n      target.shape.stroke,\n      false,\n      target.shape.strokeWidth,\n      target.shape.strokeDashArray?.length\n    );\n\n    // @ts-ignore\n    arrow.set(this.shapeProps(target.shape));\n    this.tempCanvas?.add(arrow);\n    this.tempCanvas?.renderAll();\n  }\n\n  /**\n   * Real time text drawing process.\n   * @param target\n   */\n  public textDraw(target: any) {\n    this.clear();\n    this.context.font = `${target.fontSize}px ${target.fontFamily}`;\n    this.context.fillStyle = target.fill || '#000000';\n    this.context.fillText(\n      target.text,\n      target.left,\n      target.top + target.height - 7\n    );\n  }\n\n  /**\n   * Clears temporary canvas.\n   */\n  private clear() {\n    this.context.clearRect(\n      0,\n      0,\n      this.canvas.width as number,\n      this.canvas.height as number\n    );\n\n    this.tempCanvas?.clear();\n  }\n\n  /**\n   * Removes / destroys temporary canvas.\n   */\n  public remove() {\n    if (!this.isInitiated()) {\n      return;\n    }\n\n    this.clear();\n    this.canvas?.remove();\n  }\n\n  /**\n   * Fix the dimensions of the given shape\n   * @param newShape - Shape to set dimensions\n   * @param targetShape - Reference shape to set dimensions in the new one\n   * @param brushType - Shape Brush Type\n   */\n  private fixCustomBrushShapeDimensions(\n    newShape: ICanvasObject,\n    targetShape: ICanvasObject,\n    brushType: IBrushType\n  ) {\n    newShape.set({\n      scaleX: targetShape.scaleX,\n      scaleY: targetShape.scaleY,\n      top: targetShape.top,\n      left: targetShape.left,\n      originX: targetShape.originX,\n      originY: targetShape.originY,\n    });\n\n    if (\n      brushType === 'paintbrush' ||\n      brushType === 'marker' ||\n      brushType === 'felt'\n    ) {\n      const scaleX = Number(targetShape.width) / Number(newShape.width);\n      const scaleY = Number(targetShape.height) / Number(newShape.height);\n      let top = targetShape.top;\n      let left = targetShape.left;\n\n      newShape.set({\n        top: targetShape.top,\n        left: targetShape.left,\n        width: targetShape.width,\n        height: targetShape.height,\n        scaleX,\n        scaleY,\n      });\n\n      if (brushType === 'paintbrush') {\n        const brush = new PaintBrush(\n          this.tempCanvas as fabric.Canvas,\n          this.canvas.id\n        );\n        const newPoints = ((newShape as ICanvasPathBrush).basePath\n          ?.points as ICoordinate[]).map((point) => {\n          return {\n            x: point.x * Number(newShape?.scaleX),\n            y: point.y * Number(newShape?.scaleY),\n          };\n        });\n\n        const newPath = brush.modifyPaintBrushPath(\n          'provisional',\n          newPoints,\n          Number((newShape as ICanvasPathBrush).basePath?.strokeWidth),\n          String((newShape as ICanvasPathBrush).basePath?.stroke),\n          (newShape as ICanvasBrush).basePath?.bristles || []\n        );\n\n        (newShape as ICanvasPathBrush).set({ ...newPath });\n\n        (newShape as fabric.Group).addWithUpdate();\n\n        newShape.set({\n          top,\n          left,\n        });\n\n        (newShape as fabric.Group).addWithUpdate();\n      } else {\n        (newShape as fabric.Group).forEachObject((line) => {\n          line.set({\n            top: Number(line.top) / Number(newShape?.scaleY),\n            left: Number(line.left) / Number(newShape?.scaleX),\n          });\n        });\n\n        (newShape as fabric.Group).addWithUpdate();\n\n        newShape.set({\n          top,\n          left,\n        });\n\n        (newShape as fabric.Group).addWithUpdate();\n      }\n    }\n\n    return newShape;\n  }\n\n  /**\n   * Draws a custom brush shape in tempCanvas\n   * @param shape - Shape to draw\n   * @param target - Object with the required properties to render the shape\n   */\n  private async customBrushShape(shape: string, target: any) {\n    const userId: string = this.canvas.id;\n    const original = shapePoints[shape as keyof IShapePointsIndex];\n    const brushType = target.shape.basePath.type;\n    const lineWidth = target.shape.basePath.strokeWidth;\n    const penColor = target.shape.basePath.stroke;\n\n    let brush: PenBrush | MarkerBrush | PaintBrush | ChalkBrush;\n    let newShape: fabric.Object | null = null;\n\n    if (!original) {\n      return;\n    }\n\n    switch (brushType) {\n      case 'pen':\n        brush = new PenBrush(this.tempCanvas as fabric.Canvas, userId);\n\n        const { min, max } = brush.setMinMaxWidth(lineWidth);\n        const penPoints = original.points.map((point) => {\n          return {\n            x: point.x,\n            y: point.y,\n            width: (brush as PenBrush).getRandomInt(min, max),\n          };\n        });\n\n        newShape = brush.createPenPath(\n          'provisional',\n          penPoints,\n          lineWidth,\n          penColor\n        );\n        break;\n\n      case 'marker':\n      case 'felt':\n        brush = new MarkerBrush(\n          this.tempCanvas as fabric.Canvas,\n          userId,\n          brushType\n        );\n        newShape = brush.createMarkerPath(\n          'provisional',\n          original.points,\n          lineWidth,\n          penColor\n        );\n        break;\n\n      case 'paintbrush':\n        brush = new PaintBrush(this.tempCanvas as fabric.Canvas, userId);\n        newShape = brush.modifyPaintBrushPath(\n          'provisional',\n          original.points,\n          lineWidth,\n          penColor,\n          target.shape.basePath.bristles\n        );\n        break;\n\n      case 'chalk':\n      case 'crayon':\n        const imagePromise = new Promise<fabric.Object>((resolve, reject) => {\n          try {\n            fabric.Image.fromURL(target.shape.basePath.imageData, (image) => {\n              resolve(image);\n            });\n          } catch (e) {\n            reject(e);\n          }\n        });\n\n        newShape = await imagePromise;\n    }\n\n    if (!newShape) return;\n\n    newShape = this.fixCustomBrushShapeDimensions(\n      newShape,\n      target.shape,\n      brushType\n    );\n\n    return newShape;\n  }\n\n  /**\n   * Draws a custom brush path in tempCanvas\n   * @param target - Object with the required properties to render the shape\n   */\n  private async customBrushPath(target: any) {\n    let brush: DashedBrush | PenBrush | MarkerBrush | PaintBrush | ChalkBrush;\n    let newPath;\n\n    if (!this.tempCanvas) return;\n\n    this.clear();\n\n    switch (target.type) {\n      case 'dashed':\n        brush = new DashedBrush(\n          this.tempCanvas as fabric.Canvas,\n          this.canvas.id\n        );\n\n        newPath = brush.createDashedPath(\n          'provisional',\n          target.coordinates,\n          target.lineWidth,\n          target.color\n        );\n        break;\n\n      case 'pen':\n        brush = new PenBrush(this.tempCanvas as fabric.Canvas, this.canvas.id);\n\n        const { min, max } = brush.setMinMaxWidth(target.lineWidth);\n        const points = target.coordinates.map((point: ICoordinate) => {\n          return {\n            x: point.x,\n            y: point.y,\n            width: (brush as PenBrush).getRandomInt(min, max),\n          };\n        });\n\n        newPath = brush.createPenPath(\n          'provisional',\n          points,\n          target.lineWidth,\n          target.color\n        );\n        break;\n\n      case 'marker':\n      case 'felt':\n        brush = new MarkerBrush(\n          this.tempCanvas as fabric.Canvas,\n          this.canvas.id,\n          target.type\n        );\n\n        newPath = brush.createMarkerPath(\n          'provisional',\n          target.coordinates,\n          target.lineWidth,\n          target.color\n        );\n        break;\n\n      case 'paintbrush':\n        brush = new PaintBrush(\n          this.tempCanvas as fabric.Canvas,\n          this.canvas.id\n        );\n\n        const bristles = brush.makeBrush(target.color, target.lineWidth);\n\n        newPath = brush.modifyPaintBrushPath(\n          'provisional',\n          target.coordinates,\n          target.lineWidth,\n          target.color,\n          bristles\n        );\n        break;\n\n      case 'chalk':\n      case 'crayon':\n        // const currentCanvas = new fabric.Canvas(this.canvas);\n        // currentCanvas.freeDrawingBrush = new ChalkBrush(\n        //   currentCanvas,\n        //   this.canvas.id,\n        //   target.type\n        // );\n\n        // currentCanvas.freeDrawingBrush.color = target.color;\n        // currentCanvas.freeDrawingBrush.width = target.lineWidth;\n        // currentCanvas.isDrawingMode = true;\n\n        // (target.coordinates as ICoordinate[]).forEach(\n        //   (coordinate: { x: number; y: number }, index: number) => {\n        //     if (!index) {\n        //       currentCanvas?.trigger('mouse:down', {\n        //         pointer: {\n        //           x: coordinate.x,\n        //           y: coordinate.y,\n        //         },\n        //       });\n\n        //       return;\n        //     }\n        //     currentCanvas?.trigger('mouse:move', {\n        //       pointer: {\n        //         x: coordinate.x,\n        //         y: coordinate.y,\n        //       },\n        //     });\n        //   }\n        // );\n\n        brush = new ChalkBrush(\n          this.tempCanvas as fabric.Canvas,\n          this.canvas.id,\n          target.type\n        );\n\n        const clearRects = brush.createChalkEffect(\n          target.coordinates,\n          target.lineWidth\n        );\n\n        newPath = await brush.createChalkPath(\n          'provisional',\n          target.coordinates,\n          target.lineWidth,\n          target.color,\n          clearRects\n        );\n        break;\n    }\n\n    if (!newPath) return;\n\n    this.tempCanvas?.add(newPath);\n    this.tempCanvas?.renderAll();\n  }\n}\n","import { useEffect } from 'react';\nimport { useSharedEventSerializer } from '../SharedEventSerializerProvider';\nimport { fabric } from 'fabric';\nimport { IRealtimeData, Realtime } from '../realtime/realtime';\n\n/**\n * Handles laser pointer events.\n * @param canvas Canvas\n * @param shouldHandleRemoteEvent Method that checks if an event should be handled.\n * @param userId User ID.\n */\nconst useSynchronizedRealtime = (\n  canvas: fabric.Canvas | undefined,\n  shouldHandleRemoteEvent: (id: string) => boolean,\n  userId: string\n) => {\n  const {\n    state: { eventController },\n  } = useSharedEventSerializer();\n\n  let rt: Realtime | null;\n  rt = new Realtime(\n    canvas?.getWidth() as number,\n    canvas?.getHeight() as number,\n    userId\n  );\n\n  /** Register and handle remote moved event. */\n  useEffect(() => {\n    /**\n     * Handles moving event for objects. Receives event.\n     * @param id User ID. Used for determining if event should be handled.\n     * @param target Properites for object.\n     */\n    const moved = (\n      // Event emitter automatically sends ID, required but not needed in this case.\n      // @ts-ignore\n      id: string,\n      target: {\n        coordinates: { x: number; y: number }[];\n        lineWidth: number;\n        color: string;\n        id: string;\n        type: string;\n        shape?: any;\n        eventType?: string;\n      }\n    ) => {\n      if (target.eventType !== 'added' && userId !== id) {\n        if (rt && !rt.isInitiated() && target.type === 'pencil') {\n          rt.init(\n            canvas as fabric.Canvas,\n            'pencil',\n            target.color,\n            target.lineWidth\n          );\n        } else if (rt && !rt.isInitiated() && target.type === 'rectangle') {\n          rt.init(\n            canvas as fabric.Canvas,\n            'rectangle',\n            target.shape.stroke,\n            target.shape.strokeWidth\n          );\n        } else if (rt && !rt.isInitiated() && target.type === 'circle') {\n          rt.init(\n            canvas as fabric.Canvas,\n            'circle',\n            target.shape.stroke,\n            target.shape.strokeWidth\n          );\n        } else if (rt && !rt.isInitiated() && target.type === 'text') {\n          rt.init(\n            canvas as fabric.Canvas,\n            'text',\n            target.shape.stroke,\n            target.shape.strokeWidth\n          );\n        } else if (rt && !rt.isInitiated() && target.type === 'triangle') {\n          rt.init(\n            canvas as fabric.Canvas,\n            'triangle',\n            target.shape.stroke,\n            target.shape.strokeWidth\n          );\n        } else if (rt && !rt.isInitiated() && target.type === 'pentagon') {\n          rt.init(\n            canvas as fabric.Canvas,\n            'pentagon',\n            target.shape.stroke,\n            target.shape.strokeWidth\n          );\n        } else if (rt && !rt.isInitiated() && target.type === 'hexagon') {\n          rt.init(\n            canvas as fabric.Canvas,\n            'hexagon',\n            target.shape.stroke,\n            target.shape.strokeWidth\n          );\n        } else if (rt && !rt.isInitiated() && target.type === 'arrow') {\n          rt.init(\n            canvas as fabric.Canvas,\n            'arrow',\n            target.shape.stroke,\n            target.shape.strokeWidth\n          );\n        } else if (rt && !rt.isInitiated() && target.type === 'star') {\n          rt.init(\n            canvas as fabric.Canvas,\n            'star',\n            target.shape.stroke,\n            target.shape.strokeWidth\n          );\n        } else if (rt && !rt.isInitiated() && target.type === 'chatBubble') {\n          rt.init(\n            canvas as fabric.Canvas,\n            'chatBubble',\n            '#555555',\n            target.shape.strokeWidth\n          );\n        } else if (rt && !rt.isInitiated()) {\n          rt.init(\n            canvas as fabric.Canvas,\n            target.type,\n            target.color,\n            target.lineWidth\n          );\n        }\n      }\n\n      rt?.draw((target as unknown) as IRealtimeData);\n    };\n\n    /**\n     * Real time functionality for text.\n     * @param id ID of objects.\n     * @param target Text properties.\n     */\n    const textEdit = (\n      // Event emitter automatically sends ID, required but not needed in this case.\n      // @ts-ignore\n      id: string,\n      target: {\n        coordinates: { x: number; y: number }[];\n        lineWidth: number;\n        color: string;\n        id: string;\n        type: string;\n        shape?: any;\n        eventType?: string;\n        fill?: string;\n        fontweight?: number;\n      }\n    ) => {\n      if (rt && !rt.isInitiated() && target.type === 'i-text') {\n        rt.init(\n          canvas as fabric.Canvas,\n          'text',\n          target.fill as string,\n          target.fontweight as number\n        );\n      }\n\n      if (rt) {\n        rt.textDraw(target);\n      }\n    };\n\n    eventController?.on('moving', moved);\n    eventController?.on('textEdit', textEdit);\n\n    return () => {\n      eventController?.removeListener('moving', moved);\n      eventController?.removeListener('textEdit', textEdit);\n\n      if (rt && rt.isInitiated()) {\n        rt.remove();\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n        rt = null;\n      }\n    };\n  }, [canvas, eventController, shouldHandleRemoteEvent, rt]);\n};\n\nexport default useSynchronizedRealtime;\n","import { PenBrush } from '../classes/penBrush';\nimport { MarkerBrush } from '../classes/markerBrush';\nimport { PaintBrush } from '../classes/paintBrush';\nimport { ChalkBrush } from '../classes/chalkBrush';\nimport { ICanvasBrush } from '../../../../interfaces/brushes/canvas-brush';\nimport { IPenPoint } from '../../../../interfaces/brushes/pen-point';\nimport { IBristle } from '../../../../interfaces/brushes/bristle';\nimport { DashedBrush } from '../classes/dashedBrush';\n\n/**\n * Logic for change lineWidth in special brushes local and remote\n * @param {fabric.Canvas} canvas - Canvas to draw\n * @param {string} userId - User that is drawing\n * @param {ICanvasBrush} object - Path to change its line width\n * @param {number} lineWidth - New line width to set in path\n * @param {ICanvasBrush} target - Target to copy properties and set itin a remote path\n */\nexport const changeLineWidthInSpecialBrushes = async (\n  canvas: fabric.Canvas,\n  userId: string,\n  object: ICanvasBrush,\n  lineWidth: number,\n  target?: ICanvasBrush\n): Promise<ICanvasBrush> => {\n  let brush: PenBrush | MarkerBrush | PaintBrush | ChalkBrush | DashedBrush;\n  let newObject: ICanvasBrush | fabric.Path | null = null;\n  let basePath = object.basePath;\n  const brushType = object.basePath?.type;\n\n  try {\n    if (lineWidth === basePath?.strokeWidth)\n      throw new Error('lineWidth is the same');\n\n    if (target) {\n      basePath = target.basePath;\n    }\n\n    switch (brushType) {\n      case 'dashed':\n        brush = new DashedBrush(canvas, userId);\n        newObject = brush.createDashedPath(\n          String(object.id),\n          basePath?.points || [],\n          lineWidth,\n          String(basePath?.stroke)\n        );\n        break;\n      case 'pen':\n        let points: IPenPoint[] = (basePath?.points as IPenPoint[]) || [];\n\n        brush = new PenBrush(canvas, userId);\n        const { min, max } = brush.setMinMaxWidth(lineWidth);\n\n        if (!target) {\n          points = points.map((point) => {\n            return {\n              x: point.x,\n              y: point.y,\n              width: (brush as PenBrush).getRandomInt(min, max),\n            };\n          });\n        }\n\n        newObject = brush.createPenPath(\n          String(object.id),\n          points,\n          lineWidth,\n          String(basePath?.stroke)\n        );\n        break;\n\n      case 'marker':\n      case 'felt':\n        brush = new MarkerBrush(canvas, userId, brushType);\n        newObject = brush.createMarkerPath(\n          String(object.id),\n          basePath?.points || [],\n          lineWidth,\n          String(basePath?.stroke)\n        );\n        break;\n\n      case 'paintbrush':\n        brush = new PaintBrush(canvas, userId);\n        let newBrush: IBristle[] = basePath?.bristles || [];\n\n        if (!target) {\n          newBrush = brush.makeBrush(String(basePath?.stroke), lineWidth);\n        }\n\n        newObject = brush.modifyPaintBrushPath(\n          String(object.id),\n          basePath?.points || [],\n          lineWidth,\n          String(basePath?.stroke),\n          newBrush\n        );\n        break;\n\n      case 'chalk':\n      case 'crayon':\n        brush = new ChalkBrush(canvas, userId, brushType);\n\n        const newClearRects = brush.createChalkEffect(\n          basePath?.points || [],\n          lineWidth\n        );\n\n        newObject = await brush.createChalkPath(\n          String(object.id),\n          basePath?.points || [],\n          lineWidth,\n          String(basePath?.stroke),\n          newClearRects\n        );\n\n        break;\n    }\n\n    if (newObject) {\n      const id = (newObject as ICanvasBrush).id;\n      (newObject as ICanvasBrush).set({\n        angle: object.angle,\n        top: object.top,\n        left: object.left,\n        scaleX: object.scaleX,\n        scaleY: object.scaleY,\n        flipX: object.flipX,\n        flipY: object.flipY,\n        originX: object.originX || 'left',\n        originY: object.originY || 'top',\n        evented: !target,\n        selectable: !target,\n      });\n\n      delete object.id;\n      delete (newObject as ICanvasBrush).id;\n      canvas.remove(object);\n      canvas.add(newObject);\n\n      (newObject as ICanvasBrush).set({ id: id });\n      if (!target) {\n        canvas.setActiveObject(newObject);\n      }\n    } else if (!target) {\n      throw new Error('newObject was not created');\n    }\n\n    canvas.renderAll();\n\n    return (newObject as ICanvasBrush) || object;\n  } catch (e) {\n    throw e;\n  }\n};\n","import { CanvasAction, SET_OTHER } from '../reducers/undo-redo';\nimport { useSharedEventSerializer } from '../SharedEventSerializerProvider';\nimport { ICanvasObject } from '../../../interfaces/objects/canvas-object';\nimport { useEffect } from 'react';\nimport { ICanvasBrush } from '../../../interfaces/brushes/canvas-brush';\nimport { changeLineWidthInSpecialBrushes } from '../brushes/actions/changeLineWidthInSpecialBrushes';\n\nconst useSynchronizedLineWidthChanged = (\n  canvas: fabric.Canvas | undefined,\n  userId: string,\n  shouldHandleRemoteEvent: (id: string) => boolean,\n  undoRedoDispatch: React.Dispatch<CanvasAction>\n) => {\n  const {\n    state: { eventController },\n  } = useSharedEventSerializer();\n  useEffect(() => {\n    const widthChanged = (\n      id: string,\n      objectType: string,\n      target: ICanvasObject,\n      isPersistent: boolean\n    ) => {\n      const validTypes: string[] = [\n        'rect',\n        'ellipse',\n        'triangle',\n        'polygon',\n        'path',\n        'group',\n        'image',\n      ];\n\n      if (id && !shouldHandleRemoteEvent(id) && !isPersistent) return;\n      canvas?.forEachObject(function (obj: ICanvasObject) {\n        if (obj.id && obj.id === id) {\n          if (validTypes.includes(objectType)) {\n            // Line width Synchronization in special brushes\n            if (\n              objectType === 'group' ||\n              objectType === 'image' ||\n              (objectType === 'path' &&\n                (obj as ICanvasBrush).basePath?.type === 'dashed')\n            ) {\n              const lineWidth = Number(\n                (target as ICanvasBrush).basePath?.strokeWidth\n              );\n\n              changeLineWidthInSpecialBrushes(\n                canvas,\n                userId,\n                obj as ICanvasBrush,\n                lineWidth,\n                target as ICanvasBrush\n              )\n                .then()\n                .catch((e: Error) => {\n                  if (e.message !== 'lineWidth is the same') {\n                    console.warn(e);\n                  }\n                });\n            } else {\n              obj.set({\n                strokeWidth: target.strokeWidth,\n              });\n            }\n          }\n        }\n      });\n\n      undoRedoDispatch({\n        type: SET_OTHER,\n        payload: canvas?.getObjects(),\n        canvasId: userId,\n      });\n\n      canvas?.renderAll();\n    };\n\n    eventController?.on('lineWidthChanged', widthChanged);\n\n    return () => {\n      eventController?.removeListener('lineWidthChanged', widthChanged);\n    };\n  }, [\n    canvas,\n    eventController,\n    shouldHandleRemoteEvent,\n    undoRedoDispatch,\n    userId,\n  ]);\n};\n\nexport default useSynchronizedLineWidthChanged;\n","import { useEffect } from 'react';\nimport { useSharedEventSerializer } from '../SharedEventSerializerProvider';\nimport { ICanvasObject } from '../../../interfaces/objects/canvas-object';\nimport CanvasEvent from '../../../interfaces/canvas-events/canvas-events';\nimport {\n  ObjectEvent,\n  ObjectType,\n} from '../event-serializer/PaintEventSerializer';\nimport { CanvasAction, SET } from '../reducers/undo-redo';\nimport { IUndoRedoEvent } from '../../../interfaces/canvas-events/undo-redo-event';\nimport FontFaceObserver from 'fontfaceobserver';\n\nconst useSynchronizedModified = (\n  canvas: fabric.Canvas | undefined,\n  shouldSerializeEvent: (id: string) => boolean,\n  shouldHandleRemoteEvent: (id: string) => boolean,\n  userId: string,\n  undoRedoDispatch: React.Dispatch<CanvasAction>\n) => {\n  const {\n    state: { eventSerializer, eventController },\n  } = useSharedEventSerializer();\n\n  /** Register and handle remote event. */\n  useEffect(() => {\n    const modified = (\n      id: string,\n      objectType: string,\n      target: ICanvasObject,\n      isPersistent: boolean\n    ) => {\n      if (!shouldHandleRemoteEvent(id) && !isPersistent) return;\n\n      /**\n       * Renders text object calling the fontFamily loader\n       * to load the current font\n       * @param obj - Text object to set the fontFamily\n       * @param target - Yarget to get the properties that will change\n       */\n      const renderTextObject = async (\n        obj: ICanvasObject,\n        target: ICanvasObject\n      ) => {\n        obj.set({\n          text: target.text,\n          stroke: target.fill?.toString(),\n          top: target.top,\n          left: Number(target.left) + 1,\n          width: target.width,\n        });\n\n        obj.set({ left: Number(obj.left) - 1 });\n        obj.setCoords();\n\n        const fontObserver = new FontFaceObserver(target.fontFamily as string);\n        try {\n          const font = (await fontObserver.load()) as any;\n\n          obj.set({ fontFamily: font.family });\n          canvas?.renderAll();\n        } catch (error) {}\n      };\n\n      canvas?.forEachObject(function (obj: ICanvasObject) {\n        if (obj.id && obj.id === id) {\n          if (objectType === 'textbox' && target.left && obj.left) {\n            renderTextObject(obj, target);\n          }\n        }\n      });\n      canvas?.renderAll();\n    };\n\n    const payload = {\n      id: ((modified as unknown) as ICanvasObject).id as string,\n    };\n\n    if (canvas && payload.id) {\n      const event = { event: payload, type: 'modified' } as IUndoRedoEvent;\n\n      undoRedoDispatch({\n        type: SET,\n        payload: canvas.getObjects(),\n        canvasId: userId,\n        event,\n      });\n    }\n\n    eventController?.on('modified', modified);\n\n    return () => {\n      eventController?.removeListener('modified', modified);\n    };\n  }, [\n    canvas,\n    eventController,\n    shouldHandleRemoteEvent,\n    undoRedoDispatch,\n    userId,\n  ]);\n\n  /** Register and handle local events. */\n  useEffect(() => {\n    const objectModified = (e: fabric.IEvent | CanvasEvent) => {\n      if (!e.target) return;\n      if (\n        (e.target as ICanvasObject).id &&\n        !shouldSerializeEvent((e.target as ICanvasObject).id as string)\n      )\n        return;\n\n      const type = (e.target as ICanvasObject).get('type') as ObjectType;\n\n      // If text has been modified\n      if (type === 'textbox' && (e.target as ICanvasObject).id) {\n        const target = {\n          ...(type === 'textbox' && {\n            text: (e.target as ICanvasObject).text,\n            fontFamily: (e.target as ICanvasObject).fontFamily,\n            stroke: e.target.fill,\n            top: e.target.top,\n            left: e.target.left,\n            width: e.target.width,\n          }),\n        } as ICanvasObject;\n\n        const payload: ObjectEvent = {\n          type,\n          target,\n          id: (e.target as ICanvasObject).id as string,\n        };\n\n        const event = { event: payload, type: 'modified' };\n\n        undoRedoDispatch({\n          type: SET,\n          payload: canvas?.getObjects(),\n          canvasId: userId,\n          event: (event as unknown) as IUndoRedoEvent,\n        });\n\n        eventSerializer?.push('modified', payload);\n      }\n    };\n\n    canvas?.on('object:modified', objectModified);\n\n    return () => {\n      canvas?.off('object:modified', objectModified);\n    };\n  }, [canvas, eventSerializer, shouldSerializeEvent, undoRedoDispatch, userId]);\n};\n\nexport default useSynchronizedModified;\n","import { useCallback, useEffect, useState } from 'react';\nimport ResizeObserver from 'resize-observer-polyfill';\n\nexport type ScaleMode = \"ScaleToFit\" | \"ScaleToFill\" | \"ScaleFitHorizontally\" | \"ScaleFitVertically\";\n\nexport default function useFixedAspectScaling(parent: Element | undefined | null, aspectRatio: number, scaleMode: ScaleMode) {\n    const [top, setTop] = useState<number>(0.0);\n    const [left, setLeft] = useState<number>(0.0);\n    const [width, setWidth] = useState<number>(0.0);\n    const [height, setHeight] = useState<number>(0.0);\n\n    const updateLocationAndSize = useCallback((containerWidth: number, containerHeight: number) => {\n        let width = 0.0;\n        let height = 0.0;\n\n        const aspectCorrectedWidth = containerHeight * aspectRatio;\n        const aspectCorrectedHeight = containerWidth / aspectRatio;\n\n        if (scaleMode === \"ScaleToFill\") {\n            if (aspectCorrectedWidth < containerWidth) {\n                width = containerWidth;\n                height = aspectCorrectedHeight;\n            } else {\n                width = aspectCorrectedWidth;\n                height = containerHeight;\n            }\n        } else if (scaleMode === \"ScaleToFit\") {\n            if (aspectCorrectedWidth >= containerWidth) {\n                width = containerWidth;\n                height = aspectCorrectedHeight;\n            } else {\n                width = aspectCorrectedWidth;\n                height = containerHeight;\n            }\n        } else if (scaleMode === \"ScaleFitVertically\") {\n            width = aspectCorrectedWidth;\n            height = containerHeight;\n        } else if (scaleMode === \"ScaleFitHorizontally\") {\n            width = containerWidth;\n            height = aspectCorrectedHeight;\n        }\n\n        const offsetLeft = (containerWidth - width) / 2;\n        setLeft(offsetLeft);\n\n        const offsetTop = (containerHeight - height) / 2;\n        setTop(offsetTop);\n\n        setWidth(width);\n        setHeight(height);\n    }, [aspectRatio, scaleMode]);\n\n    // NOTE: Set up resize observer.\n    useEffect(() => {\n        if (!parent) return;\n\n        const ro = new ResizeObserver((entries, _observer) => {\n            entries.forEach(entry => {\n                updateLocationAndSize(entry.contentRect.width, entry.contentRect.height);\n            });\n        });\n\n        ro.observe(parent);\n\n        return () => {\n            ro.disconnect();\n        }\n    }, [parent, updateLocationAndSize]);\n\n    return {\n        top,\n        left,\n        width,\n        height,\n    }\n}","interface IProps {\n  backgroundImage?: string | File;\n  backgroundColor?: string;\n  localImage?: string | File;\n  width: number;\n  height: number;\n  canvas: fabric.Canvas;\n  onClose: (close: boolean) => void;\n}\n\n/**\n * Generates link to download canvas as image.\n * @param img Generated image from canvas.\n * @param ext Image extension\n * @param type Image type\n */\nconst generateLink = (img: string, ext: string, type: string): void => {\n  const link = document.createElement('a'); // document.getElementById('canvasDownloader');\n  const date = new Date();\n\n  (link as HTMLElement).setAttribute(\n    'download',\n    `canvas${date.getTime()}.${ext}`\n  );\n  (link as HTMLElement).setAttribute(\n    'href',\n    img.replace(type, 'image/octet-stream')\n  );\n  (link as HTMLElement).click();\n};\n\n/**\n * Download method for canvas.\n * @param type Type of image, either png or jpg.\n */\nexport const downloadCanvas = (props: IProps, type: string) => {\n  if (props.backgroundImage || props.localImage) {\n    let canvas = document.createElement('canvas');\n    let ctx = canvas.getContext('2d');\n\n    canvas.width = props.width;\n    canvas.height = props.height;\n\n    var background = new Image();\n    background.src =\n      (props.backgroundImage as string) || (props.localImage as string);\n\n    background.onload = () => {\n      const ext = type === 'image/png' ? 'png' : 'jpg';\n\n      if (ext === 'jpg' && ctx) {\n        ctx.fillStyle = '#fff';\n        ctx.fillRect(0, 0, props.width, props.height);\n        ctx.restore();\n      }\n\n      ctx?.drawImage(background, 0, 0, props.width, props.height);\n      ctx?.drawImage(\n        props.canvas.getElement(),\n        0,\n        0,\n        props.width,\n        props.height\n      );\n\n      const img = ((canvas as unknown) as HTMLCanvasElement).toDataURL(type, 1);\n\n      generateLink(img, ext, type);\n      props.onClose(false);\n    };\n  } else if (props.backgroundColor) {\n    const currentColor = props.canvas.backgroundColor;\n    props.canvas.backgroundColor = props.backgroundColor;\n\n    const ext = type === 'image/png' ? 'png' : 'jpg';\n    const img = ((props.canvas as unknown) as HTMLCanvasElement).toDataURL(\n      type,\n      1\n    );\n\n    generateLink(img, ext, type);\n    props.onClose(false);\n    props.canvas.backgroundColor = currentColor;\n  } else {\n    const ext = type === 'image/png' ? 'png' : 'jpg';\n    const img = ((props.canvas as unknown) as HTMLCanvasElement).toDataURL(\n      type,\n      1\n    );\n    generateLink(img, ext, type);\n    props.onClose(false);\n  }\n};\n","import React from 'react';\nimport { Modal, Button } from '@material-ui/core';\nimport makeStyles from '@material-ui/core/styles/makeStyles';\nimport { downloadCanvas } from './utils';\n\n/**\n * Modal styles\n */\nconst useStyles = makeStyles((theme) => ({\n  confirm: {\n    position: 'absolute',\n    width: 400,\n    backgroundColor: theme.palette.background.paper,\n    border: '2px solid #000',\n    boxShadow: theme.shadows[5],\n    padding: theme.spacing(2, 4, 3),\n    top: '100px',\n    left: 'calc(50% - 200px)',\n    textAlign: 'center',\n  },\n  button: {\n    border: '1px solid black',\n    borderRadius: '5px',\n    margin: '0 5px',\n  },\n  cancel: {\n    border: '2px solid red',\n    borderRadius: '5px',\n    margin: '0 5px',\n  },\n  a: {\n    visibility: 'hidden',\n  },\n}));\n\n/**\n * Modal props.\n */\ntype Props = {\n  open: boolean;\n  onClose: (open: boolean) => void;\n  canvas: fabric.Canvas;\n  backgroundColor?: string | undefined;\n  backgroundImage?: string | File | undefined;\n  localImage?: string | File | undefined;\n  width: number;\n  height: number;\n};\n\n/**\n * Modal component to confirm download.\n * @param props Component props.\n */\nexport const CanvasDownloadConfirm = (props: Props) => {\n  /**\n   * Modal styles\n   */\n  const css = useStyles();\n\n  /**\n   * Click event to download png image.\n   */\n  const downloadCanvasPNG = () => {\n    downloadCanvas(props, 'image/png');\n  };\n\n  /**\n   * Click event to downloag jpg image.\n   */\n  const downloadCanvasJPG = () => {\n    downloadCanvas(props, 'image/jpeg');\n  };\n\n  return (\n    <Modal\n      open={props.open}\n      aria-labelledby=\"simple-modal-title\"\n      aria-describedby=\"simple-modal-description\"\n    >\n      <div className={css.confirm}>\n        <h2>Select Format</h2>\n        <Button className={css.button} onClick={downloadCanvasPNG}>\n          PNG\n        </Button>\n        <Button className={css.button} onClick={downloadCanvasJPG}>\n          JPG\n        </Button>\n        <Button\n          className={css.cancel}\n          onClick={() => {\n            props.onClose(false);\n          }}\n        >\n          Cancel\n        </Button>\n      </div>\n    </Modal>\n  );\n};\n","import { fabric } from 'fabric';\nimport { useEffect, useState } from 'react';\nimport { useSharedEventSerializer } from '../SharedEventSerializerProvider';\nimport useFixedAspectScaling, {\n  ScaleMode,\n} from '../utils/useFixedAspectScaling';\n\n/**\n * Mnages the logic for set canvas properties\n * @param {string} instanceId - Unique ID for current canvas\n * @param {(instance: fabric.Canvas) => void} setCanvas - Creates a new canvas\n * @param {fabric.Canvas} canvas - Canvas to set\n * @param {HTMLElement} wrapper - Canvas wrapper\n * @param {(wrapper: HTMLElement) => void} setWrapper - Creates wrapper\n * for canvas\n * @param {number} pixelWidth - Canvas width\n * @param {number} pixelHeight - Canvas height\n * @param {boolean} pointerEvents - Enable or disable pointer interaction\n * @param {ScaleMode} scaleMode - Determines how the canvas should scale\n * if parent element doesn't match aspect ratio.\n * @param {boolean} display - Flag to display elements.\n * @param {React.CSSProperties} initialStyle - Canvas initial style.\n */\nexport const useSetCanvas = (\n  instanceId: string,\n  setCanvas: (instance: fabric.Canvas) => void,\n  canvas: fabric.Canvas,\n  wrapper: HTMLElement,\n  setWrapper: (wrapper: HTMLElement) => void,\n  pixelWidth: number,\n  pixelHeight: number,\n  pointerEvents: boolean,\n  scaleMode?: ScaleMode,\n  display?: boolean,\n  initialStyle?: React.CSSProperties\n) => {\n  const { requestAllEvents } = useSharedEventSerializer();\n  const { width, height, top, left } = useFixedAspectScaling(\n    wrapper?.parentElement,\n    pixelWidth / pixelHeight,\n    scaleMode || 'ScaleToFit'\n  );\n  const [lowerCanvas, setLowerCanvas] = useState<HTMLCanvasElement>();\n  const [upperCanvas, setUpperCanvas] = useState<HTMLCanvasElement>();\n\n  /**\n   * Creates Canvas/Whiteboard instance\n   */\n  useEffect(() => {\n    const canvasInstance = new fabric.Canvas(instanceId, {\n      backgroundColor: undefined,\n      isDrawingMode: false,\n      allowTouchScrolling: false,\n      selectionBorderColor: 'rgba(100, 100, 255, 1)',\n      selectionLineWidth: 2,\n      selectionColor: 'rgba(100, 100, 255, 0.1)',\n      selectionDashArray: [10],\n    });\n\n    setCanvas(canvasInstance);\n  }, [instanceId, setCanvas]);\n\n  /**\n   * Enable or disable allow touch scroll based on pointer events.\n   */\n  useEffect(() => {\n    if (!canvas) return;\n    canvas.allowTouchScrolling = !pointerEvents;\n  }, [pointerEvents, canvas]);\n\n  /**\n   * Request all events to be resent after canvas is created.\n   */\n  useEffect(() => {\n    if (!canvas) return;\n\n    requestAllEvents();\n  }, [canvas, requestAllEvents]);\n\n  /**\n   * Retrieve references to elements created by fabricjs. We'll need these to\n   * tweak the style after canvas have been initialized.\n   */\n  useEffect(() => {\n    if (!canvas) return;\n\n    const lowerCanvas = document.getElementById(instanceId);\n    const wrapper = lowerCanvas?.parentElement;\n    const upperCanvas = wrapper?.getElementsByClassName('upper-canvas')[0];\n\n    if (wrapper) {\n      setWrapper(wrapper);\n\n      // TODO: We may want to make the position style\n      // controlled by property or variable.\n      wrapper.style.position = 'absolute';\n\n      if (initialStyle && initialStyle.zIndex) {\n        wrapper.style.zIndex = String(initialStyle.zIndex);\n      }\n    }\n    if (lowerCanvas) setLowerCanvas(lowerCanvas as HTMLCanvasElement);\n    if (upperCanvas) setUpperCanvas(upperCanvas as HTMLCanvasElement);\n  }, [canvas, initialStyle, instanceId, setWrapper]);\n\n  /**\n   * Update wrapper display state.\n   */\n  useEffect(() => {\n    if (!wrapper) return;\n\n    if (display === false) {\n      wrapper.style.display = 'none';\n    } else {\n      wrapper.style.removeProperty('display');\n    }\n  }, [wrapper, display]);\n\n  /**\n   * Update the CSS Width/Height\n   */\n  useEffect(() => {\n    if (wrapper && lowerCanvas && upperCanvas) {\n      const widthStyle = `${width}px`;\n      wrapper.style.width = widthStyle;\n      lowerCanvas.style.width = widthStyle;\n      upperCanvas.style.width = widthStyle;\n\n      const heightStyle = `${height}px`;\n      wrapper.style.height = heightStyle;\n      lowerCanvas.style.height = heightStyle;\n      upperCanvas.style.height = heightStyle;\n\n      const wrapperTransform = `translate(${left}px, ${top}px)`;\n      wrapper.style.transform = wrapperTransform;\n\n      wrapper.style.top = '0px';\n      wrapper.style.left = '0px';\n    }\n  }, [wrapper, lowerCanvas, upperCanvas, width, height, left, top]);\n\n  /**\n   * Update the pointer events to make canvas click through.\n   */\n  useEffect(() => {\n    if (wrapper && lowerCanvas && upperCanvas) {\n      const pointerEventsStyle = pointerEvents ? 'auto' : 'none';\n\n      wrapper.style.pointerEvents = pointerEventsStyle;\n      lowerCanvas.style.pointerEvents = pointerEventsStyle;\n      upperCanvas.style.pointerEvents = pointerEventsStyle;\n    }\n  }, [lowerCanvas, pointerEvents, upperCanvas, wrapper]);\n};\n","import { Textbox } from 'fabric/fabric-impl';\nimport { useCallback, useContext, useEffect } from 'react';\nimport { ICanvasObject } from '../../../interfaces/objects/canvas-object';\nimport { IPermissions } from '../../../interfaces/permissions/permissions';\nimport ICanvasActions from '../canvas-actions/ICanvasActions';\nimport { getToolbarIsEnabled } from '../redux/utils';\nimport { isText } from '../utils/shapes';\nimport { WhiteboardContext } from '../WhiteboardContext';\n\n/**\n * Handles the logic for set/unset objects selectable/eventable\n * depending of the circunstances\n * @param {fabric.Canvas} canvas - Canvas in which the objects are.\n * @param {string} userId - User that is making changes in whiteboard.\n * @param {ICanvasActions} actions - Shared functions that this file needs.\n * @param {boolean} pointerEvents - Flag to know if\n * pointerEvents are active or not\n */\nexport const useObjectManipulation = (\n  canvas: fabric.Canvas,\n  userId: string,\n  actions: ICanvasActions,\n  pointerEvents: boolean,\n  permissions: IPermissions\n) => {\n  // Getting context variables\n  const {\n    allToolbarIsEnabled,\n    shapesAreSelectable,\n    shapesAreEvented,\n    eraseType,\n    isLocalObject,\n    eventedObjects,\n    brushIsActive,\n    lineWidthIsActive,\n    shapeIsActive,\n    textIsActive,\n  } = useContext(WhiteboardContext);\n\n  /**\n   * Gets permissions for objects in Objects UseEffect\n   */\n  const getObjectPermissions = useCallback(() => {\n    return {\n      teacherHasPermission: allToolbarIsEnabled && shapesAreSelectable,\n      studentHasPermission: permissions.move && shapesAreSelectable,\n      isEvented:\n        (shapesAreSelectable || shapesAreEvented) &&\n        (allToolbarIsEnabled || permissions.move),\n    };\n  }, [\n    allToolbarIsEnabled,\n    permissions.move,\n    shapesAreEvented,\n    shapesAreSelectable,\n  ]);\n\n  /**\n   * Gets permissions for objects in PointerMove UseEffect\n   */\n  const getPointerMoveToolPermissions = useCallback(() => {\n    return {\n      teacherHasPermission: allToolbarIsEnabled && eventedObjects,\n      studentHasPermission: permissions.move && eventedObjects,\n      isEvented: allToolbarIsEnabled || permissions.move,\n    };\n  }, [allToolbarIsEnabled, eventedObjects, permissions.move]);\n\n  /**\n   * Gets permissions for local objects in LocalObjects UseEffect\n   */\n  const getLocalObjectPermissions = useCallback(() => {\n    const toolbarIsEnabled = getToolbarIsEnabled();\n    const studentHasPermission =\n      toolbarIsEnabled && (permissions.move || permissions.erase);\n\n    return {\n      isEvented: allToolbarIsEnabled || studentHasPermission,\n    };\n  }, [allToolbarIsEnabled, permissions.erase, permissions.move]);\n\n  /**\n   * Objects UseEffect.\n   * Update objects selectable/evented state.\n   */\n  useEffect(() => {\n    if (!canvas) return;\n\n    const {\n      teacherHasPermission,\n      studentHasPermission,\n      isEvented,\n    } = getObjectPermissions();\n\n    canvas.forEachObject((object: ICanvasObject) => {\n      if (object.id && isLocalObject(object.id, userId) && !eraseType) {\n        object.set({\n          selectable: teacherHasPermission || studentHasPermission,\n          evented: isEvented,\n          lockMovementX: !shapesAreSelectable,\n          lockMovementY: !shapesAreSelectable,\n          hoverCursor: shapesAreSelectable ? 'move' : 'default',\n        });\n      }\n    });\n\n    canvas.selection = shapesAreSelectable;\n    canvas.renderAll();\n  }, [\n    canvas,\n    eraseType,\n    isLocalObject,\n    shapesAreEvented,\n    shapesAreSelectable,\n    userId,\n    allToolbarIsEnabled,\n    permissions.move,\n    getObjectPermissions,\n  ]);\n\n  /**\n   * PointerMove UseEffect.\n   * Set the objects like evented if you select pointer or move tool.\n   */\n  useEffect(() => {\n    const {\n      teacherHasPermission,\n      studentHasPermission,\n      isEvented,\n    } = getPointerMoveToolPermissions();\n\n    if (!isEvented || (!permissions.shape && !isEvented)) {\n      canvas?.discardActiveObject().renderAll();\n    }\n\n    if (teacherHasPermission || studentHasPermission) {\n      canvas?.forEachObject((object: ICanvasObject) => {\n        if (object.id && isLocalObject(object.id, userId)) {\n          object.set({\n            evented: isEvented,\n            selectable: isEvented,\n            lockMovementX: false,\n            lockMovementY: false,\n          });\n        }\n      });\n\n      actions.setHoverCursorObjects('move');\n    }\n  }, [\n    actions,\n    canvas,\n    eventedObjects,\n    isLocalObject,\n    userId,\n    allToolbarIsEnabled,\n    permissions.move,\n    getPointerMoveToolPermissions,\n    permissions.shape,\n  ]);\n\n  /**\n   * Manage the states for setting local objects like selectable/modifiable.\n   */\n  useEffect(() => {\n    if (\n      permissions &&\n      canvas &&\n      !eraseType &&\n      !brushIsActive &&\n      !lineWidthIsActive &&\n      !shapeIsActive\n    ) {\n      canvas.forEachObject((object: ICanvasObject) => {\n        const isTextObject = Boolean(isText(object));\n        const isEvented = eventedObjects || (isTextObject && textIsActive);\n        const isEditable = isTextObject && textIsActive;\n\n        if (object.id && isLocalObject(object.id, userId)) {\n          actions.setObjectControlsVisibility(object, isEvented);\n          (object as Textbox).set({\n            evented: isEvented,\n            selectable: isEvented,\n            hasBorders: isEvented,\n            editable: isEditable,\n            lockMovementX: !eventedObjects,\n            lockMovementY: !eventedObjects,\n            hasRotatingPoint: eventedObjects,\n          });\n        }\n      });\n    }\n  }, [\n    actions,\n    brushIsActive,\n    canvas,\n    eraseType,\n    eventedObjects,\n    isLocalObject,\n    lineWidthIsActive,\n    permissions,\n    shapeIsActive,\n    textIsActive,\n    userId,\n  ]);\n\n  /**\n   * If pointerEvents changes to false, all the selected objects\n   * will be unselected\n   */\n  useEffect(() => {\n    if (!pointerEvents && canvas) {\n      canvas.discardActiveObject().renderAll();\n    }\n  }, [pointerEvents, canvas]);\n\n  /**\n   * LocalObjects UseEffect.\n   * Makes local objects unselectable when toolbar is disabled by the teacher.\n   * */\n  useEffect(() => {\n    const { isEvented } = getLocalObjectPermissions();\n\n    canvas?.forEachObject((object: ICanvasObject) => {\n      if (\n        object.id &&\n        isLocalObject(object.id, userId) &&\n        shapesAreSelectable\n      ) {\n        object.set({\n          evented: isEvented,\n          selectable: isEvented,\n        });\n      }\n    });\n  }, [\n    canvas,\n    isLocalObject,\n    userId,\n    allToolbarIsEnabled,\n    permissions,\n    shapesAreSelectable,\n    getLocalObjectPermissions,\n  ]);\n\n  /**\n   * Is executed each time that the permissions changes\n   * to set the current objects in the correct status\n   */\n  useEffect(() => {\n    if (!permissions.move) {\n      canvas?.forEachObject((obj) => {\n        obj.set({\n          selectable: false,\n          evented: false,\n          lockMovementX: true,\n          lockMovementY: true,\n        });\n      });\n    }\n  }, [permissions, canvas]);\n};\n","import { fabric } from 'fabric';\nimport { IEvent } from 'fabric/fabric-impl';\nimport { useCallback, useContext, useEffect } from 'react';\nimport { DEFAULT_VALUES } from '../../../config/toolbar-default-values';\nimport { ICanvasPathBrush } from '../../../interfaces/brushes/canvas-path-brush';\nimport { ICoordinate } from '../../../interfaces/brushes/coordinate';\nimport { ICanvasDrawingEvent } from '../../../interfaces/canvas-events/canvas-drawing-event';\nimport { ICanvasFreeDrawingBrush } from '../../../interfaces/free-drawing/canvas-free-drawing-brush';\nimport { IPermissions } from '../../../interfaces/permissions/permissions';\nimport { ChalkBrush } from '../brushes/classes/chalkBrush';\nimport { DashedBrush } from '../brushes/classes/dashedBrush';\nimport { MarkerBrush } from '../brushes/classes/markerBrush';\nimport { PaintBrush } from '../brushes/classes/paintBrush';\nimport { PenBrush } from '../brushes/classes/penBrush';\nimport { setBasePathInNormalBrushes } from '../brushes/utils/setBasePathInNormalBrushes';\nimport { ObjectEvent } from '../event-serializer/PaintEventSerializer';\nimport { getToolbarIsEnabled } from '../redux/utils';\nimport { useSharedEventSerializer } from '../SharedEventSerializerProvider';\n// import { useSharedEventSerializer } from '../SharedEventSerializerProvider';\nimport { WhiteboardContext } from '../WhiteboardContext';\n\n/**\n * Handles logic for Free Hand Drawing Feature\n * @param {fabric.Canvas} canvas - Canvas to draw\n * @param {string} userId - User that will draw in Whiteboard\n */\nexport const useFreeHandDrawing = (\n  canvas: fabric.Canvas,\n  userId: string,\n  serializerToolbarState: IPermissions\n) => {\n  // Getting necessary context variables\n  const {\n    brushIsActive,\n    penColor,\n    lineWidth,\n    brushType,\n    allToolbarIsEnabled,\n    partialEraseIsActive,\n  } = useContext(WhiteboardContext);\n\n  // Getting event serializer for synchronize objects in remote whiteboards\n  const {\n    state: { eventSerializer },\n  } = useSharedEventSerializer();\n\n  /**\n   * Checks current brushType selected\n   * to set it like current path style\n   */\n  const setBrushType = useCallback(() => {\n    switch (brushType) {\n      case 'pen':\n        canvas.freeDrawingBrush = new PenBrush(canvas, userId);\n        break;\n      case 'marker':\n      case 'felt':\n        canvas.freeDrawingBrush = new MarkerBrush(canvas, userId, brushType);\n        break;\n      case 'paintbrush':\n        canvas.freeDrawingBrush = new PaintBrush(canvas, userId);\n        break;\n      case 'chalk':\n      case 'crayon':\n        canvas.freeDrawingBrush = new ChalkBrush(canvas, userId, brushType);\n        break;\n      case 'dashed':\n        canvas.freeDrawingBrush = new DashedBrush(canvas, userId);\n        break;\n      default:\n        canvas.freeDrawingBrush = new fabric.PencilBrush();\n        break;\n    }\n  }, [brushType, canvas, userId]);\n\n  /**\n   * Activates or deactivates drawing mode.\n   */\n  useEffect(() => {\n    let coordinates: ICoordinate[] = [];\n    const toolbarIsEnabled = getToolbarIsEnabled();\n\n    /**\n     * When a path object is recently created set its stroke like uniform\n     * @param {ICanvasDrawingEvent} e - Event that contains\n     * the recent created path\n     */\n    const pathCreated = (e: ICanvasDrawingEvent) => {\n      if (e.path) {\n        setBasePathInNormalBrushes(e.path as ICanvasPathBrush);\n        e.path.strokeUniform = true;\n        canvas.renderAll();\n      }\n    };\n\n    const realTimePath = (e: IEvent) => {\n      const hasPermission =\n        allToolbarIsEnabled || (toolbarIsEnabled && serializerToolbarState.pen);\n      if (\n        (e.e as MouseEvent).which &&\n        (e.e as MouseEvent).buttons &&\n        canvas &&\n        hasPermission\n      ) {\n        coordinates.push(e.pointer as ICoordinate);\n\n        if (coordinates.length && coordinates.length % 10 === 0) {\n          const payload: ObjectEvent = {\n            type: 'path',\n            target: {\n              coordinates,\n              color: penColor || DEFAULT_VALUES.PEN_COLOR,\n              lineWidth,\n              id: userId,\n              type: brushType,\n            },\n            id: userId,\n          };\n\n          eventSerializer.push('moving', payload);\n        }\n      } else {\n        coordinates = [];\n      }\n    };\n\n    /* When free hand drawing option is selected on toolbar,\n    freeDrawingBrush is created */\n    if (brushIsActive && canvas) {\n      const canDraw =\n        allToolbarIsEnabled || (toolbarIsEnabled && serializerToolbarState.pen);\n      coordinates = [];\n\n      setBrushType();\n\n      (canvas.freeDrawingBrush as ICanvasFreeDrawingBrush).canvas = canvas;\n      canvas.freeDrawingBrush.color = penColor || DEFAULT_VALUES.PEN_COLOR;\n      canvas.freeDrawingBrush.width = lineWidth;\n      canvas.freeDrawingCursor = 'crosshair';\n      canvas.isDrawingMode = canDraw;\n\n      canvas.on('mouse:move', realTimePath);\n\n      canvas.on('path:created', pathCreated);\n    } else if (canvas && !brushIsActive && !partialEraseIsActive) {\n      canvas.isDrawingMode = false;\n    }\n\n    return () => {\n      canvas?.off('path:created');\n      canvas?.off('mouse:move');\n    };\n  }, [\n    allToolbarIsEnabled,\n    brushIsActive,\n    brushType,\n    canvas,\n    eventSerializer,\n    lineWidth,\n    partialEraseIsActive,\n    penColor,\n    serializerToolbarState.pen,\n    setBrushType,\n    userId,\n  ]);\n};\n","import { Group } from 'fabric/fabric-impl';\nimport { useCallback, useContext, useEffect } from 'react';\nimport { ICanvasBrush } from '../../../interfaces/brushes/canvas-brush';\nimport { ICanvasShapeBrush } from '../../../interfaces/brushes/canvas-shape-brush';\nimport { ICoordinate } from '../../../interfaces/brushes/coordinate';\nimport { IPenPoint } from '../../../interfaces/brushes/pen-point';\nimport { IUndoRedoEvent } from '../../../interfaces/canvas-events/undo-redo-event';\nimport { ICanvasObject } from '../../../interfaces/objects/canvas-object';\nimport { IPermissions } from '../../../interfaces/permissions/permissions';\nimport { TypedShape } from '../../../interfaces/shapes/shapes';\nimport { ChalkBrush } from '../brushes/classes/chalkBrush';\nimport { PaintBrush } from '../brushes/classes/paintBrush';\nimport { PenBrush } from '../brushes/classes/penBrush';\nimport ICanvasActions from '../canvas-actions/ICanvasActions';\nimport {\n  ObjectEvent,\n  ObjectType,\n} from '../event-serializer/PaintEventSerializer';\nimport { CanvasAction, SET } from '../reducers/undo-redo';\nimport { getToolbarIsEnabled } from '../redux/utils';\nimport { useSharedEventSerializer } from '../SharedEventSerializerProvider';\nimport { isEmptyShape } from '../utils/shapes';\nimport { WhiteboardContext } from '../WhiteboardContext';\n\n/**\n * Handles the logic for shape creation\n * @param {fabric.Canvas} canvas - Canvas to add the shape\n * @param {string} userId - User that will create the shape\n * @param {ICanvasActions} actions - Shared functions necessaries\n * to work shape creation logic\n * @param {(specific: string, color?: string) => void} mouseDown - Mouse Event\n * @param {(action: CanvasAction) => void} undoRedoDispatch - Dispatcher\n * to save shapes states and could make und/redo over them\n */\nexport const useShapeFeature = (\n  canvas: fabric.Canvas,\n  userId: string,\n  actions: ICanvasActions,\n  mouseDown: (specific: string, color?: string) => void,\n  undoRedoDispatch: (action: CanvasAction) => void,\n  serializerToolbarState: IPermissions\n) => {\n  // Getting context variables\n  const {\n    shapeIsActive,\n    brushIsActive,\n    allToolbarIsEnabled,\n    isLocalObject,\n    textIsActive,\n    floodFillIsActive,\n    shapesAreEvented,\n    eraseType,\n    laserIsActive,\n    shape,\n    perfectShapeIsActive,\n    perfectShapeIsAvailable,\n    updatePerfectShapeIsActive,\n    pointerEvents,\n  } = useContext(WhiteboardContext);\n\n  // Getting event serializer to synchronize objects\n  const {\n    state: { eventSerializer },\n  } = useSharedEventSerializer();\n\n  /**\n   * Multiplies the width by scaleX of the given shape\n   * to obtain the real current width\n   * @param {TypedShape} shape - Shape to calculate its real width\n   */\n  const getShapeRealWidth = (shape: TypedShape) => {\n    return Number(shape.width) * Number(shape.scaleX);\n  };\n\n  /**\n   * Multiplies the height by scaleY of the given shape\n   * to obtain the real current height\n   * @param {TypedShape} shape - Shape to calculate its real height\n   */\n  const getShapeRealHeight = (shape: TypedShape) => {\n    return Number(shape.height) * Number(shape.scaleY);\n  };\n\n  /**\n   * Checks if the given object is a local shape\n   * @param {TypedShape} shape - Object to check\n   */\n  const isLocalShape = useCallback(\n    (shape: TypedShape) => {\n      return shape.id && isEmptyShape(shape) && isLocalObject(shape.id, userId);\n    },\n    [isLocalObject, userId]\n  );\n\n  /**\n   * Checks if is possible resize the active object perfectly\n   */\n  const activeShapeCanBePerfectSized = useCallback(() => {\n    return (\n      perfectShapeIsActive &&\n      canvas.getActiveObject() &&\n      isEmptyShape(canvas.getActiveObject())\n    );\n  }, [canvas, perfectShapeIsActive]);\n\n  /**\n   * Get the permissions for students and teacher to use shape feature.\n   */\n  const getPermissions = useCallback(() => {\n    const toolbarIsEnabled = getToolbarIsEnabled();\n    return {\n      teacherHasPermission: allToolbarIsEnabled && shape && shapeIsActive,\n      studentHasPermission:\n        shape &&\n        shapeIsActive &&\n        toolbarIsEnabled &&\n        serializerToolbarState.shape,\n    };\n  }, [allToolbarIsEnabled, shape, shapeIsActive, serializerToolbarState]);\n\n  /**\n   * Synchronizes and dispatches undo/redo for pperfect shape scaling\n   */\n  const syncAndDispatchPerfectShapeScaling = useCallback(\n    (shape: TypedShape) => {\n      const id = String(shape.id);\n      const type = shape.get('type') as ObjectType;\n      const target = {\n        top: shape.top,\n        left: shape.left,\n        angle: shape.angle,\n        scaleX: shape.scaleX,\n        scaleY: shape.scaleY,\n        flipX: shape.flipX,\n        flipY: shape.flipY,\n        originX: shape.originX,\n        originY: shape.originY,\n      } as ICanvasObject;\n\n      const payload: ObjectEvent = {\n        id,\n        type,\n        target: { eTarget: target, isGroup: false },\n      };\n\n      eventSerializer.push('scaled', payload);\n\n      if (canvas) {\n        const event = { event: payload, type: 'scaled' };\n\n        undoRedoDispatch({\n          type: SET,\n          payload: canvas.getObjects(),\n          canvasId: userId,\n          event: (event as unknown) as IUndoRedoEvent,\n        });\n      }\n    },\n    [canvas, eventSerializer, undoRedoDispatch, userId]\n  );\n\n  /**\n   * Disables canvas mouse events when shape is inactive.\n   */\n  useEffect(() => {\n    if (!shapeIsActive && canvas) {\n      canvas.off('mouse:move');\n      canvas.off('mouse:up');\n    }\n  }, [shapeIsActive, canvas]);\n\n  /**\n   * Sets local objects like no evented and no selectable\n   * to could draw shapes over whiteboard\n   */\n  useEffect(() => {\n    const { teacherHasPermission, studentHasPermission } = getPermissions();\n\n    if (teacherHasPermission || studentHasPermission) {\n      canvas?.forEachObject((object: ICanvasObject) => {\n        if (object.id && isLocalObject(object.id, userId)) {\n          object.set({\n            evented: false,\n            selectable: false,\n          });\n        }\n      });\n\n      actions.addShape(shape);\n    }\n\n    return () => {\n      if (!textIsActive && !floodFillIsActive && !shapesAreEvented) {\n        canvas?.off('mouse:down');\n      }\n\n      if (eraseType !== 'object') {\n        canvas?.off('mouse:up');\n      }\n\n      if (!laserIsActive && !brushIsActive && pointerEvents) {\n        canvas?.off('mouse:move');\n      }\n    };\n  }, [\n    canvas,\n    shape,\n    shapeIsActive,\n    actions,\n    textIsActive,\n    userId,\n    floodFillIsActive,\n    eraseType,\n    shapesAreEvented,\n    isLocalObject,\n    laserIsActive,\n    allToolbarIsEnabled,\n    serializerToolbarState.shape,\n    getPermissions,\n    brushIsActive,\n    pointerEvents,\n  ]);\n\n  /**\n   * Set a selected shape like perfect if perfectShapeIsActive\n   */\n  useEffect(() => {\n    if (!canvas) return;\n\n    /**\n     * When the lines to fix are paintbrush type is necessary\n     * create a new paintbrush path based on its current data\n     * @param {ICanvasBrush} path - Path to take base to create the new one\n     */\n    const fixPaintBrushLines = (path: ICanvasShapeBrush) => {\n      if (!canvas || !userId) return;\n\n      const brush = new PaintBrush(canvas, userId);\n      const newPoints = (path.basePath?.points as ICoordinate[]).map(\n        (point) => {\n          return {\n            x: point.x * Number(path.scaleX),\n            y: point.y * Number(path.scaleY),\n          };\n        }\n      );\n\n      const newPath = brush.modifyPaintBrushPath(\n        String(path.id),\n        newPoints,\n        Number(path.basePath?.strokeWidth),\n        String(path.basePath?.stroke),\n        path.basePath?.bristles || []\n      );\n\n      path.set({ ...newPath });\n      ((path as unknown) as Group).addWithUpdate();\n      canvas.renderAll();\n    };\n\n    /**\n     * Fix the lines of marker/paintbrush path to maintain\n     * the same separation on them when marker/paintbrush path is scaled\n     * @param {ICanvasBrush} path - Modified path\n     */\n    const fixLines = (path: ICanvasShapeBrush) => {\n      let top = path.top;\n      let left = path.left;\n\n      if (path.basePath?.type === 'paintbrush') {\n        fixPaintBrushLines(path);\n      }\n\n      ((path as unknown) as Group)._objects.forEach((line) => {\n        line.set({\n          top: Number(line.top) / Number(path.scaleY),\n          left: Number(line.left) / Number(path.scaleX),\n        });\n      });\n      ((path as unknown) as Group).addWithUpdate();\n\n      (path as ICanvasShapeBrush).set({\n        top: top,\n        left: left,\n        blockResize: true,\n        lockUniScaling: perfectShapeIsActive,\n      });\n\n      ((path as unknown) as Group).addWithUpdate();\n    };\n\n    /**\n     * Fix the given custom shape to make it perfect\n     * @param shapeToFix - Shape to make it perfect\n     */\n    const fixCustomBrushShape = async (shapeToFix: ICanvasShapeBrush) => {\n      console.log(shapeToFix.scaleX, shapeToFix.scaleY);\n      const type: ObjectType = (shapeToFix as ICanvasObject).get(\n        'type'\n      ) as ObjectType;\n\n      const brushTarget = shapeToFix;\n      const brushType = brushTarget.basePath?.type;\n      const id = brushTarget.id;\n\n      let target = {\n        top: shapeToFix.top,\n        left: shapeToFix.left,\n        angle: shapeToFix.angle,\n        scaleX: shapeToFix.scaleX,\n        scaleY: shapeToFix.scaleY,\n        flipX: shapeToFix.flipX,\n        flipY: shapeToFix.flipY,\n        originX: shapeToFix.originX,\n        originY: shapeToFix.originY,\n        name: shapeToFix.name,\n      } as ICanvasShapeBrush;\n\n      switch (brushType) {\n        case 'pen': {\n          if (!canvas || !userId) return;\n\n          const brush = new PenBrush(canvas, userId);\n          const basePath = brushTarget.basePath;\n          const newPoints = (basePath?.points as IPenPoint[]).map((point) => {\n            return {\n              x: point.x * Number(shapeToFix?.scaleX),\n              y: point.y * Number(shapeToFix?.scaleY),\n              width: point.width,\n            };\n          });\n\n          try {\n            const newObject = brush.createPenPath(\n              String(brushTarget.id),\n              newPoints,\n              Number(basePath?.strokeWidth),\n              String(basePath?.stroke)\n            );\n\n            if (!shapeToFix) return;\n\n            console.log(shapeToFix);\n            const id = brushTarget.id;\n            ((newObject as unknown) as ICanvasShapeBrush).set({\n              top: shapeToFix.top,\n              left: shapeToFix.left,\n              angle: shapeToFix.angle,\n              flipX: shapeToFix.flipX,\n              flipY: shapeToFix.flipY,\n              name: shapeToFix.name,\n              shapeType: (shapeToFix as ICanvasShapeBrush).shapeType,\n              blockResize: true,\n              lockUniScaling: perfectShapeIsActive,\n            });\n\n            // Id's are deleted to avoid add and remove event serializing\n            delete shapeToFix.id;\n            delete newObject.id;\n\n            canvas.remove(shapeToFix);\n            canvas.add(newObject);\n            canvas.setActiveObject(newObject);\n            canvas.renderAll();\n\n            // Id's are deleted to avoid add and remove event serializing\n            newObject.set({\n              id: id,\n            });\n          } catch (e) {\n            console.warn(e);\n          }\n\n          target.type = 'group-pen';\n          break;\n        }\n\n        case 'marker':\n        case 'felt':\n        case 'paintbrush': {\n          fixLines(brushTarget);\n          canvas?.renderAll();\n          target.type = 'group-marker';\n          break;\n        }\n        case 'chalk':\n        case 'crayon': {\n          if (!canvas || !userId) return;\n\n          const brush = new ChalkBrush(canvas, userId, brushType);\n          const basePath = brushTarget.basePath;\n          const newPoints = (basePath?.points as ICoordinate[]).map((point) => {\n            return {\n              x: point.x * Number(shapeToFix?.scaleX),\n              y: point.y * Number(shapeToFix?.scaleY),\n            };\n          });\n\n          const newRects = brush.createChalkEffect(\n            newPoints,\n            Number(basePath?.strokeWidth)\n          );\n\n          try {\n            const newObject = await brush.createChalkPath(\n              String(brushTarget.id),\n              newPoints,\n              Number(basePath?.strokeWidth),\n              String(basePath?.stroke),\n              newRects\n            );\n\n            if (!shapeToFix) return;\n\n            const id = brushTarget.id;\n            ((newObject as unknown) as ICanvasShapeBrush).set({\n              top: shapeToFix.top,\n              left: shapeToFix.left,\n              angle: shapeToFix.angle,\n              flipX: shapeToFix.flipX,\n              flipY: shapeToFix.flipY,\n              name: shapeToFix.name,\n              shapeType: (shapeToFix as ICanvasShapeBrush).shapeType,\n              lockUniScaling: perfectShapeIsActive,\n              blockResize: true,\n            });\n\n            // Id's are deleted to avoid add and remove event serializing\n            delete shapeToFix.id;\n            delete newObject.id;\n\n            canvas.remove(shapeToFix);\n            canvas.add(newObject);\n            canvas.setActiveObject(newObject);\n            canvas.renderAll();\n\n            // Id's are deleted to avoid add and remove event serializing\n            newObject.set({\n              id: id,\n            });\n\n            target.type = 'image-based';\n          } catch (e) {\n            console.warn(e);\n          }\n\n          break;\n        }\n      }\n\n      const payload: ObjectEvent = {\n        id: id as string,\n        type: type as ObjectType,\n        target: { eTarget: target, isGroup: false },\n      };\n\n      console.log('EL PAY: ', payload);\n\n      eventSerializer?.push('scaled', payload);\n\n      if (canvas) {\n        const event = { event: payload, type: 'scaled' };\n\n        undoRedoDispatch({\n          type: SET,\n          payload: canvas.getObjects(),\n          canvasId: userId,\n          event: (event as unknown) as IUndoRedoEvent,\n        });\n      }\n    };\n\n    /*\n      Hide/Show resize middle controls in local shapes.\n      When perfectShapeIsActive controls will be hidden\n      and when not will be shown\n    */\n    canvas.forEachObject((object: ICanvasObject) => {\n      if (isLocalShape(object as TypedShape)) {\n        object.set({\n          lockUniScaling: perfectShapeIsActive,\n        });\n      }\n    });\n\n    canvas.renderAll();\n\n    // Resets active shape like perfect\n    if (activeShapeCanBePerfectSized()) {\n      let scaling;\n      const shapeToFix = canvas.getActiveObject();\n      const width = getShapeRealWidth(shapeToFix);\n      const heigth = getShapeRealHeight(shapeToFix);\n\n      if ((shapeToFix as ICanvasShapeBrush).blockResize) return;\n\n      if (width > heigth) {\n        scaling = { scaleY: width / Number(shapeToFix.height) };\n      } else if (heigth > width) {\n        scaling = { scaleX: heigth / Number(shapeToFix.width) };\n      }\n\n      if (scaling) {\n        shapeToFix.set(scaling);\n\n        if (\n          (shapeToFix as ICanvasBrush).basePath?.type === 'pencil' ||\n          (shapeToFix as ICanvasBrush).basePath?.type === 'dashed'\n        ) {\n          syncAndDispatchPerfectShapeScaling(shapeToFix);\n        } else {\n          fixCustomBrushShape(shapeToFix as ICanvasShapeBrush);\n        }\n      }\n\n      shapeToFix.setCoords();\n    }\n\n    /* If isLocalObject is added on dependencies\n    an unexpected event is triggered */\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [canvas, perfectShapeIsActive, userId]);\n\n  /**\n   * Reset perfectShapeIsActive to false when the shape\n   * or move tool permissions are revoked\n   */\n  useEffect(() => {\n    if (!perfectShapeIsAvailable()) {\n      updatePerfectShapeIsActive(false);\n    }\n  }, [perfectShapeIsAvailable, updatePerfectShapeIsActive]);\n};\n","type ColorRGBA = {\n  r: number;\n  g: number;\n  b: number;\n  a: number;\n};\n\ntype PixelCoords = {\n  x: number;\n  y: number;\n};\n\ntype LineQueued = [number, number, number, number];\n\nexport interface IFloodFillData {\n  coords: number[];\n  x: number;\n  y: number;\n  width: number;\n  height: number;\n  edgeCoordinates: { x: number; y: number; }[][]\n}\n\nexport default class FloodFiller {\n  public imageData: ImageData;\n  public color: ColorRGBA | undefined;\n  public replacedColor: ColorRGBA | undefined;\n  public tolerance: number;\n  public queue: LineQueued[] = [];\n  public coords: number[] = [];\n  public maxX: number = -1;\n  public minX: number = -1;\n  public maxY: number = -1;\n  public minY: number = -1;\n  public autoTolerance: number;\n  public coordsFilled: [number, number, number, number][] = [];\n\n  /**\n   * Class constructor\n   * @param imageData Canvas ImageData\n   */\n  constructor(imageData: ImageData) {\n    this.imageData = imageData;\n    this.tolerance = 0;\n    this.autoTolerance = 0;\n  }\n\n  private RGBA2Hex = () => {\n    if (!this.replacedColor) {\n      throw new Error('Color has not been selected!');\n    }\n\n    let partials = [\n      this.replacedColor.r.toString(16),\n      this.replacedColor.g.toString(16),\n      this.replacedColor.b.toString(16),\n      Math.round(this.replacedColor.a * 255)\n        .toString(16)\n        .substring(0, 2),\n    ];\n\n    let hexList = partials.map((part: string) => {\n      if (part.length === 1) {\n        return `0${part}`;\n      }\n\n      return part;\n    });\n\n    return `#${hexList.join('')}`;\n  };\n\n  public getReplacedColor = () => {\n    return this.RGBA2Hex();\n  };\n\n  /**\n   * Gets color of specific pixel.\n   * @param imageData Canvas ImageData\n   * @param x X coordinate\n   * @param y Y coordinate\n   */\n  public getColorAtPixel = (x: number, y: number): ColorRGBA => {\n    const { width, data } = this.imageData;\n    const startPos = 4 * (y * width + x);\n    if (data[startPos + 3] === undefined) {\n      throw new Error(`Invalid pixel coordinates: x=${x}; y=${y}`);\n    }\n    return {\n      r: data[startPos],\n      g: data[startPos + 1],\n      b: data[startPos + 2],\n      a: data[startPos + 3],\n    };\n  };\n\n  /**\n   * Changes hex color to rgba\n   * @param hex color hex string\n   * @param alpha Opacity\n   */\n  public hex2RGBA(hex: string, alpha: number = 255): ColorRGBA {\n    let parsedHex = hex;\n    if (hex.indexOf('#') === 0) {\n      parsedHex = hex.slice(1);\n    }\n    // convert 3-digit hex to 6-digits.\n    if (parsedHex.length === 3) {\n      parsedHex =\n        parsedHex[0] +\n        parsedHex[0] +\n        parsedHex[1] +\n        parsedHex[1] +\n        parsedHex[2] +\n        parsedHex[2];\n    }\n    if (parsedHex.length !== 6 && parsedHex !== 'transparent') {\n      throw new Error(`Invalid HEX color ${parsedHex}.`);\n    } else if (parsedHex === 'transparent') {\n      return {\n        r: 255,\n        g: 255,\n        b: 255,\n        a: 0,\n      };\n    }\n\n    const r = parseInt(parsedHex.slice(0, 2), 16);\n    const g = parseInt(parsedHex.slice(2, 4), 16);\n    const b = parseInt(parsedHex.slice(4, 6), 16);\n    return {\n      r,\n      g,\n      b,\n      a: alpha,\n    };\n  }\n\n  /**\n   * Checks if colors are the same.\n   * @param a Color to compare\n   * @param b Color to compare\n   * @param tolerance Color tolerance. If not 0, will return true to slight variations.\n   */\n  public isSameColor = (a: ColorRGBA, b: ColorRGBA, tolerance: number = 0): boolean => {\n    return !(\n      Math.abs(a.r - b.r) > tolerance ||\n      Math.abs(a.g - b.g) > tolerance ||\n      Math.abs(a.b - b.b) > tolerance ||\n      Math.abs(a.a - b.a) > 150\n    );\n  };\n\n  /**\n   * Adds line to color fill to queue\n   * @param line Line to color fill\n   */\n  private addToQueue(line: LineQueued): void {\n    this.queue.push(line);\n  }\n\n  /**\n   * Removes line to color fill from queue\n   */\n  private popFromQueue(): LineQueued | null {\n    if (!this.queue.length) {\n      return null;\n    }\n    //@ts-ignore\n    return this.queue.pop();\n  }\n\n  /**\n   * Checks if coordinates and pixel are valid.\n   * @param pixel Coordinates of pixel.\n   */\n  private isValidTarget(pixel: PixelCoords | null): boolean {\n    if (pixel === null) {\n      //@ts-ignore\n      return;\n    }\n    const pixelColor = this.getColorAtPixel(pixel.x, pixel.y);\n    const tempTolerance = 60; // If set at 0, crashes when colors are too similar.\n\n    return this.isSameColor(\n      this.replacedColor as ColorRGBA,\n      pixelColor,\n      tempTolerance\n    );\n  }\n\n  /**\n   * Changes color of pixel at specific coordinates.\n   * @param imageData Canvas ImageData\n   * @param color New color of pixel.\n   * @param x X coordinate\n   * @param y Y coordinate\n   */\n  public setColorAtPixel(\n    imageData: ImageData,\n    color: ColorRGBA,\n    x: number,\n    y: number\n  ): void {\n    const { width, data } = imageData;\n    const startPos = 4 * (y * width + x);\n\n    if (data[startPos + 3] === undefined) {\n      throw new Error(\n        'Invalid pixel coordinates. Cannot set color at: x=' + x + '; y=' + y\n      );\n    }\n\n    if (x > this.maxX) {\n      this.maxX = x;\n    }\n    if (y > this.maxY) {\n      this.maxY = y;\n    }\n    if (x < this.minX || this.minX === -1) {\n      this.minX = x;\n    }\n    if (y < this.minY || this.minY === -1) {\n      this.minY = y;\n    }\n\n    data[startPos + 0] = color.r & 0xff;\n    data[startPos + 1] = color.g & 0xff;\n    data[startPos + 2] = color.b & 0xff;\n    data[startPos + 3] = color.a & 0xff;\n    this.coords[startPos + 0] = color.r & 0xff;\n    this.coords[startPos + 1] = color.g & 0xff;\n    this.coords[startPos + 2] = color.b & 0xff;\n    this.coords[startPos + 3] = color.a & 0xff;\n  }\n\n  /**\n   * Begins process to change color of pixel\n   * @param color Color to change to\n   * @param pixel Pixel at specific coordinate\n   */\n  private setPixelColor(color: ColorRGBA, pixel: PixelCoords): void {\n    this.setColorAtPixel(this.imageData, color, pixel.x, pixel.y);\n  }\n\n  /**\n   * Checks neighboring pixels.\n   * @param direction Direction to check to\n   * @param x X coordinate\n   * @param y Y coordinate\n   */\n  private getPixelNeighbour(\n    direction: string,\n    x: number,\n    y: number\n  ): PixelCoords | null {\n    x = x | 0;\n    y = y | 0;\n    let coords: PixelCoords | null = null;\n    switch (direction) {\n      case 'right':\n        coords = { x: (x + 1) | 0, y };\n        break;\n      case 'left':\n        coords = { x: (x - 1) | 0, y };\n        break;\n    }\n    if (coords && coords.x >= 0 && coords.x < this.imageData.width) {\n      return coords;\n    }\n\n    return null;\n  }\n\n  /**\n   * Start filling line at specific coordinate.\n   * @param x X coordinate\n   * @param y Y coordinate\n   */\n  private fillLineAt(x: number, y: number): [number, number] {\n    if (!this.isValidTarget({ x, y })) {\n      return [-1, -1];\n    }\n    this.setPixelColor(this.color as ColorRGBA, { x, y });\n    let minX = x;\n    let maxX = x;\n    let px = this.getPixelNeighbour('left', minX, y);\n\n    while (px && this.isValidTarget(px)) {\n      this.setPixelColor(this.color as ColorRGBA, px);\n      minX = px.x;\n      px = this.getPixelNeighbour('left', minX, y);\n    }\n    px = this.getPixelNeighbour('right', maxX, y);\n    // prevPx = null;\n    while (px && this.isValidTarget(px)) {\n      this.setPixelColor(this.color as ColorRGBA, px);\n      maxX = px.x;\n      px = this.getPixelNeighbour('right', maxX, y);\n    }\n\n    return [minX, maxX];\n  }\n\n  /**\n   * While lines in queue, keeps checking if pixels need to color modified.\n   */\n  private fillQueue(): void {\n    let line = this.popFromQueue();\n    while (line) {\n      const [start, end, y, parentY] = line;\n      let currX = start;\n      while (currX !== -1 && currX <= end) {\n        const [lineStart, lineEnd] = this.fillLineAt(currX, y);\n        if (lineStart !== -1) {\n          this.coordsFilled.push([lineStart, lineEnd, y, y]);\n\n          if (lineStart >= start && lineEnd <= end && parentY !== -1) {\n            if (parentY < y && y + 1 < this.imageData.height) {\n              this.addToQueue([lineStart, lineEnd, y + 1, y]);\n            }\n            if (parentY > y && y > 0) {\n              this.addToQueue([lineStart, lineEnd, y - 1, y]);\n            }\n          } else {\n            if (y > 0) {\n              this.addToQueue([lineStart, lineEnd, y - 1, y]);\n            }\n            if (y + 1 < this.imageData.height) {\n              this.addToQueue([lineStart, lineEnd, y + 1, y]);\n            }\n          }\n        }\n        if (lineEnd === -1 && currX <= end) {\n          currX += 1;\n        } else {\n          currX = lineEnd + 1;\n        }\n      }\n      line = this.popFromQueue();\n    }\n  }\n\n  /**\n   * When conversion to image is done, similar colors may blend in.\n   * This is to allow some level of tolerance when detecting pixel\n   * colors and changing them from one color to another. This tends to\n   * occur in the edge of a shape.\n   * @param a Color to compare\n   * @param b Color to compare.\n   */\n  private setAutoTolerance = (a: ColorRGBA, b: ColorRGBA) => {\n    const differenceList = [\n      Math.abs(a.r - b.r),\n      Math.abs(a.g - b.g),\n      Math.abs(a.b - b.b),\n      Math.abs(a.a - b.a),\n    ];\n\n    let max = 0;\n\n    differenceList.forEach((n: number) => {\n      max = n > max ? n : max;\n    });\n\n    return max > 10 ? 10 : max;\n  };\n\n  /**\n   * Executes flood fill.\n   * @param point Mouse click location coordinates\n   * @param colorHex Color to change to.\n   * @param tolerance Color tolerance.\n   */\n  public fill = async (\n    point: { x: number; y: number },\n    colorHex: string,\n    tolerance: number\n  ): Promise<IFloodFillData | null> => {\n    try {\n      this.color = this.hex2RGBA(colorHex);\n      this.replacedColor = this.getColorAtPixel(point.x, point.y);\n      this.tolerance = tolerance;\n\n      if (this.isSameColor(this.replacedColor, this.color, this.tolerance)) {\n        return null;\n      }\n\n      this.autoTolerance = this.setAutoTolerance(\n        this.replacedColor,\n        this.color\n      );\n      this.addToQueue([point.x, point.x, point.y, -1]);\n      this.fillQueue();\n\n      // Only get coordinates of every tenth line to improve performance.\n      const edges = this.coordsFilled.filter((line: any, i: number) => {\n        return line && (i === 0 || i % 10 === 0);\n      });\n\n      // Map coordinates\n      const edgeCoordinates = edges.map((item: any) => {\n        return [{ x: item[0], y: item[2] }, { x: item[1], y: item[3] }]\n      });\n\n      return {\n        coords: this.coords,\n        x: this.minX,\n        y: this.minY,\n        width: this.maxX - this.minX,\n        height: this.maxY - this.minY,\n        edgeCoordinates\n      };\n    } catch (e) {\n      throw e;\n    }\n  };\n}\n","import { ObjectEvent } from \"../event-serializer/PaintEventSerializer\";import { ICanvasObject } from \"../../../interfaces/objects/canvas-object\";import { IUndoRedoEvent } from \"../../../interfaces/canvas-events/undo-redo-event\";import { SET } from \"../reducers/undo-redo\";\n\nexport const changeBackgroundColor = (\n  canvas: any,\n  eventSerializer: any,\n  undoRedoDispatch: any,\n  color: string,\n  userId: string\n) => {\n  canvas.backgroundColor = color;\n\n  const payload: ObjectEvent = {\n    type: 'background',\n    target: {\n      fill: color,\n    } as ICanvasObject,\n    id: '',\n  };\n\n  const eventState = {\n    event: { ...payload, id: `${userId}:background` },\n    type: 'colorChanged',\n  } as IUndoRedoEvent;\n\n  undoRedoDispatch({\n    type: SET,\n    payload: canvas.getObjects(),\n    canvasId: userId,\n    event: eventState,\n  });\n\n  eventSerializer?.push('colorChanged', payload);\n}\n","import { TypedShape } from '../../../interfaces/shapes/shapes';\n\ninterface IPixel {\n  x: number;\n  y: number;\n  width: number;\n  height: number;\n}\n\ninterface IPixeledObject {\n  x: number;\n  y: number;\n  pixelMap: IPixelMap;\n}\n\ninterface IPixelMap {\n  data: {\n    x: number;\n    y: number;\n  }[];\n  resolution: number;\n}\n\n/**\n * Checks the objects in objectsList\n * to know if are really intersecting mainObject\n * @param {TypedShape} mainObject - Flood-fill object\n * @param {TypedShape} objectsList - Objects to compare with mainObject\n * @param {fabric.Canvas} canvas - Canvas in which the objects are\n */\nexport const findIntersectedObjects = (\n  mainObject: TypedShape,\n  objectsList: TypedShape[],\n  canvas: fabric.Canvas\n) => {\n  /**\n   * Maps the object's ubication to find its pixels\n   * @param {TypedShape} object - Object to find pixels\n   * @param {number} resolution - Resolution image. A bigger number\n   * means better performance but worse precision.\n   */\n  const pixelMapping = (\n    object: TypedShape,\n    resolution: number\n  ): IPixeledObject => {\n    // Hiding the the rest of objects to get just iamge data for this object\n    toogleOtherObjects(object, false);\n\n    let pixelMap = [];\n    const ctx = canvas.getContext();\n\n    // Getting bounding rect in case of object is rotated\n    const bound = object.getBoundingRect();\n\n    const width = Number(object.width) * Number(object.scaleX);\n    const height = Number(object.height) * Number(object.scaleY);\n    const startPoint = {\n      x: Number(bound.left),\n      y: Number(bound.top),\n    };\n\n    // Mapping each pixel in object to get the no transparent pixels\n    for (let y = startPoint.y; y <= startPoint.y + height; y += resolution) {\n      for (let x = startPoint.x; x <= startPoint.x + width; x += resolution) {\n        let pixel = ctx.getImageData(\n          x * window.devicePixelRatio,\n          y * window.devicePixelRatio,\n          resolution * window.devicePixelRatio,\n          resolution * window.devicePixelRatio\n        );\n\n        if (!isTransparent(pixel)) {\n          pixelMap.push({ x, y });\n        }\n      }\n    }\n\n    // Showing again the previous hidden objects\n    toogleOtherObjects(object, true);\n\n    return {\n      x: startPoint.x,\n      y: startPoint.y,\n      pixelMap: {\n        data: pixelMap,\n        resolution: resolution,\n      },\n    };\n  };\n\n  /**\n   * Checks if exists a collision in the given pixels\n   * @param {IPixel} source - Pixel to compare\n   * @param {IPixel} target - Pixel to compare\n   */\n  const isPixelCollision = (source: IPixel, target: IPixel) => {\n    return !(\n      source.y + source.height < target.y ||\n      source.y > target.y + target.height ||\n      source.x + source.width < target.x ||\n      source.x > target.x + target.width\n    );\n  };\n\n  /**\n   * Compares each source pixel with each target pixel\n   * to find a collision in one of them\n   * @param {IPixeledObject} source - Object to compare\n   * @param {IPixeledObject} target - Object to compare\n   */\n  const findPixelCollision = (\n    source: IPixeledObject,\n    target: IPixeledObject\n  ) => {\n    // Checking each colored pixel coordinate in source object\n    for (let s = 0; s < source.pixelMap.data.length; s += 1) {\n      const sourcePixel = source.pixelMap.data[s];\n      const sourceArea: IPixel = {\n        x: sourcePixel.x,\n        y: sourcePixel.y,\n        width: target.pixelMap.resolution,\n        height: target.pixelMap.resolution,\n      };\n\n      // Checking each colored pixel coordinate in target object\n      for (let t = 0; t < target.pixelMap.data.length; t += 1) {\n        const targetPixel = target.pixelMap.data[t];\n        const targetArea: IPixel = {\n          x: targetPixel.x,\n          y: targetPixel.y,\n          width: target.pixelMap.resolution,\n          height: target.pixelMap.resolution,\n        };\n\n        // Comparing source and target's current pixel\n        if (isPixelCollision(sourceArea, targetArea)) {\n          return true;\n        }\n      }\n    }\n\n    return false;\n  };\n\n  /**\n   * Show/hide all the objects in canvas except the current object\n   * @param {TypedShape} currentObject - Object to ignore\n   * @param {boolean} status - Flag to show or hide objects\n   * (true: show, false: hide)\n   */\n  const toogleOtherObjects = (currentObject: TypedShape, status: boolean) => {\n    objectsList.forEach((obj) => {\n      if (currentObject !== obj) {\n        obj.set({\n          visible: status,\n        });\n      }\n    });\n\n    canvas.renderAll();\n  };\n\n  /**\n   * Checks the given image data to know if represents a transparent color\n   * @param {ImageData} image - Data to check\n   */\n  const isTransparent = (image: ImageData) => {\n    // Checking each alpha channel in image data\n    for (let i = 0; i < image.data.length; i += 4) {\n      if (image.data[i + 3] !== 0) {\n        return false;\n      }\n    }\n\n    return true;\n  };\n\n  // Pixels Data in Flood-fill object\n  const mainObjectPixels: IPixeledObject = pixelMapping(mainObject, 2);\n\n  return objectsList.filter((o: TypedShape) => {\n    let collision = false;\n\n    // if current object is flood-fill object, filter is no needed\n    if (o === mainObject) return true;\n\n    // If bounding box collision happens, the next step is check pixel collision\n    if (mainObject.intersectsWithObject(o) && o !== mainObject) {\n      // Pixels Data in current object\n      const pixels = pixelMapping(o, 2);\n\n      collision = findPixelCollision(pixels, mainObjectPixels);\n    }\n\n    return collision;\n  });\n};\n","var img = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAQAAAC1+jfqAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAAmJLR0QA/4ePzL8AAAAJcEhZcwAAAMgAAADIAGP6560AAAAHdElNRQfkCBUWCC2DGxbnAAAAEGNhTnYAAAAgAAAAIAAAAAAAAAAAYrnu+gAAAJFJREFUKM91kb0VgCAMhDMFA1BSWtlQWzKC+y/hmeMnBsXzCU/uCx5ELpkfQYLAvuRlq1lV8AOIVldiDdAGApbAXk2+HF8AF1K1CtARByTkXgmbB6IKkMk+Dcm4Wt6M6Ba9DsaNeBJ8pR5/EbjZEth0D8QRaFXfMtihJjuOkOKbM52h34MHeCuj+gGsh02JqUw38OcwJH76GZAAAAAldEVYdGRhdGU6Y3JlYXRlADIwMjAtMDgtMjFUMjI6MDg6NDUrMDA6MDA7/mpuAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDIwLTA4LTIxVDIyOjA4OjQ1KzAwOjAwSqPS0gAAAABJRU5ErkJggg==\";\n  export default img;","import { v4 as uuidv4 } from 'uuid';\nimport { findIntersectedObjects } from './findIntersectedObjects';\nimport { findLocalObjects } from './findLocalObjects';\nimport { TypedShape } from '../../../interfaces/shapes/shapes';\nimport { fabric } from 'fabric';\nimport { ICanvasObject } from '../../../interfaces/objects/canvas-object';\nimport {\n  ObjectEvent,\n  PaintEventSerializer,\n} from '../event-serializer/PaintEventSerializer';\nimport { IFloodFillData } from './floodFiller';\nimport floodFillCursor from '../../../assets/cursors/flood-fill.png';\n\nexport interface ITargetObject extends ICanvasObject {\n  color: string;\n}\n\nexport const updateAfterCustomFloodFill = async (\n  itemId: string,\n  image: fabric.Image,\n  target: ITargetObject,\n  clickedColor: string,\n  canvas: fabric.Canvas,\n  userId: string,\n  data: IFloodFillData,\n  eventSerializer: PaintEventSerializer\n): Promise<ICanvasObject> => {\n  let id = itemId;\n\n  if (!id || target.color !== clickedColor) {\n    // generate new ID, which will be for the image created by the new color.\n    id = `${userId}:${uuidv4()}`;\n  } else if (target.color === clickedColor) {\n    canvas.remove(target);\n  }\n\n  ((image as unknown) as TypedShape).set({\n    top: data.y / window.devicePixelRatio,\n    left: data.x / window.devicePixelRatio,\n    scaleX: 0.5 * (2 / window.devicePixelRatio),\n    scaleY: 0.5 * (2 / window.devicePixelRatio),\n    selectable: false,\n    evented: false,\n  });\n\n  canvas.add(image);\n  (image as ICanvasObject).set({ id });\n  canvas.discardActiveObject();\n\n  const objectsAtPoint = findIntersectedObjects(\n    image as TypedShape,\n    findLocalObjects(userId, canvas.getObjects()),\n    canvas\n  );\n  let singleObject = new fabric.Group(objectsAtPoint);\n  let joinedIds: string[] = [];\n\n  const bounds = singleObject.getBoundingRect();\n  const top = bounds.top;\n  const left = bounds.left;\n\n  objectsAtPoint.forEach((o: TypedShape) => {\n    o.set({\n      skipState: true,\n    });\n\n    if (o.id && o.id !== id) {\n      joinedIds.push(o.id);\n    }\n\n    canvas.remove(o);\n    eventSerializer.push('removed', {\n      id: o.id as string,\n      avoidPersistentStoring: true,\n    });\n  });\n\n  const clonedImage: Promise<ICanvasObject> = new Promise((resolve, reject) => {\n    singleObject.cloneAsImage((cloned: fabric.Object) => {\n      if (!cloned) {\n        reject();\n      }\n\n      (cloned as ICanvasObject).set({\n        top: (top as unknown) as number,\n        left: (left as unknown) as number,\n        lockMovementX: true,\n        lockMovementY: true,\n        hoverCursor: `url(\"${floodFillCursor}\") 2 15, default`,\n        selectable: false,\n        id,\n        joinedIds,\n      });\n      canvas.add(cloned);\n      canvas.renderAll();\n\n      const payload: ObjectEvent = {\n        type: 'image',\n        target: cloned as ICanvasObject,\n        id,\n      };\n\n      eventSerializer.push('added', payload);\n\n      resolve(cloned);\n    });\n  });\n\n  return await clonedImage;\n};\n","import { TypedShape } from '../../../interfaces/shapes/shapes';\nimport FloodFiller, { IFloodFillData } from './floodFiller';\nimport { fabric } from 'fabric';\nimport { changeBackgroundColor } from './changeBackgroundColor';\nimport {\n  updateAfterCustomFloodFill,\n  ITargetObject,\n} from './updateAfterCustomFloodFill';\nimport { SET, CanvasAction } from '../reducers/undo-redo';\nimport { IUndoRedoEvent } from '../../../interfaces/canvas-events/undo-redo-event';\nimport {\n  ObjectEvent,\n  PaintEventSerializer,\n} from '../event-serializer/PaintEventSerializer';\nimport { ICanvasObject } from '../../../interfaces/objects/canvas-object';\n\n/**\n * Sets up a temporary canvas to be used for object manipulation\n * @param height Canvas height\n * @param width Canvas width\n */\nconst setTemporaryCanvas = (height: number, width: number) => {\n  const tempCanvas = document.createElement('canvas');\n  const tempContext = tempCanvas.getContext('2d') as CanvasRenderingContext2D;\n  tempCanvas.height = height;\n  tempCanvas.width = width;\n\n  return { tempCanvas, tempContext };\n};\n\n/**\n * Updates temporary canvas with data from permanent canvas.\n * @param palette\n * @param tempCanvas\n * @param tempContext\n * @param data\n */\nconst updateTemporary = (\n  palette: ImageData,\n  tempCanvas: HTMLCanvasElement,\n  tempContext: CanvasRenderingContext2D,\n  data: IFloodFillData\n) => {\n  tempContext.putImageData(palette, 0, 0);\n  let newImgData = tempContext.getImageData(\n    data.x,\n    data.y,\n    data.width,\n    data.height\n  );\n  tempCanvas.width = data.width;\n  tempCanvas.height = data.height;\n  tempContext.putImageData(newImgData, 0, 0);\n};\n\n/**\n * Removes foreign objects from local board.\n * @param canvas\n * @param isLocalObject\n * @param userId\n */\nconst stripForeignObjects = (\n  canvas: fabric.Canvas,\n  isLocalObject: (p1: string, p2: string) => boolean,\n  userId: string\n) => {\n  let placeholderNonLocal: TypedShape[] = [];\n\n  canvas.getObjects().forEach((o: TypedShape) => {\n    if (!isLocalObject(o.id as string, userId)) {\n      placeholderNonLocal.push(o);\n      canvas.remove(o);\n    }\n  });\n\n  canvas.renderAll();\n  return placeholderNonLocal;\n};\n\n/**\n * Adds foreign objects to local board.\n * @param canvas\n * @param placeholderNonLocal\n */\nconst addForeignObjects = (\n  canvas: fabric.Canvas,\n  placeholderNonLocal: TypedShape[]\n) => {\n  placeholderNonLocal.forEach((o: TypedShape) => {\n    canvas.add(o);\n  });\n\n  canvas.renderAll();\n};\n\n/**\n * Handles flood fill on mouse click for background color or custom paths.\n * @param event\n * @param canvas\n * @param userId\n * @param isLocalObject\n * @param color\n * @param eventSerializer\n * @param undoRedoDispatch\n */\nexport const floodFillMouseEvent = async (\n  event: fabric.IEvent,\n  canvas: fabric.Canvas,\n  userId: string,\n  isLocalObject: (p1: string, p2: string) => boolean,\n  color: string,\n  eventSerializer: PaintEventSerializer,\n  undoRedoDispatch: React.Dispatch<CanvasAction>\n) => {\n  const { tempCanvas, tempContext } = setTemporaryCanvas(\n    canvas.getHeight() * 2,\n    canvas.getWidth() * 2\n  );\n\n  if (!canvas) {\n    throw new Error('Canvas does not exist!');\n  }\n\n  // Preserve object stacking while flood filling.\n  canvas.preserveObjectStacking = true;\n\n  // Remove non local object temporarly to be able to flood fill for local objects only.\n  let placeholderNonLocal = stripForeignObjects(canvas, isLocalObject, userId);\n  const palette = tempContext.getImageData(\n    0,\n    0,\n    tempCanvas.width,\n    tempCanvas.height\n  );\n  const context = canvas.getContext();\n  const imgData = context.getImageData(\n    0,\n    0,\n    canvas.getWidth() * 2,\n    canvas.getHeight() * 2\n  );\n  const floodFiller = new FloodFiller(imgData);\n  let id =\n    event.target && event.target.get('type') !== 'path'\n      ? (event.target as TypedShape).id\n      : null;\n\n  let data = await floodFiller.fill(\n    {\n      x: Math.round(\n        (event.pointer as { x: number; y: number }).x * window.devicePixelRatio\n      ),\n      y: Math.round(\n        (event.pointer as { x: number; y: number }).y * window.devicePixelRatio\n      ),\n    },\n    color,\n    0\n  );\n\n  if (!data) {\n    return;\n  }\n\n  const clickedColor = floodFiller.getReplacedColor();\n\n  palette.data.set(new Uint8ClampedArray(data.coords));\n  updateTemporary(palette, tempCanvas, tempContext, data);\n\n  placeholderNonLocal.forEach((o: TypedShape) => {\n    canvas.add(o);\n  });\n\n  canvas.renderAll();\n\n  if (\n    // @ts-ignore - TS is ignoring previous error throw if Canvas is undefined.\n    canvas.width - data.width / 2 <= 4 &&\n    // @ts-ignore - TS is ignoring previous error throw if Canvas is undefined.\n    canvas.height - data.height / 2 <= 4\n  ) {\n    changeBackgroundColor(\n      canvas,\n      eventSerializer,\n      undoRedoDispatch,\n      color,\n      userId\n    );\n    return;\n  }\n\n  const tempData = tempCanvas.toDataURL();\n  let target: ICanvasObject;\n\n  fabric.Image.fromURL(tempData, async (image: fabric.Image) => {\n    try {\n      target = await updateAfterCustomFloodFill(\n        id as string,\n        image,\n        event.target as ITargetObject,\n        clickedColor,\n        canvas,\n        userId,\n        data as IFloodFillData,\n        eventSerializer\n      );\n\n      const payload: ObjectEvent = {\n        id: target.id as string,\n        type: 'image',\n        target: target as ICanvasObject,\n      };\n\n      const eventData = { event: payload, type: 'added' };\n\n      undoRedoDispatch({\n        type: SET,\n        payload: canvas.getObjects(),\n        canvasId: userId,\n        event: (eventData as unknown) as IUndoRedoEvent,\n      });\n    } catch (e) {\n      throw e;\n    }\n  });\n\n  addForeignObjects(canvas, placeholderNonLocal);\n\n  tempCanvas.remove();\n  canvas.preserveObjectStacking = true;\n};\n","import { useContext, useEffect, useMemo } from 'react';\nimport { IUndoRedoEvent } from '../../../interfaces/canvas-events/undo-redo-event';\nimport { ICanvasObject } from '../../../interfaces/objects/canvas-object';\nimport { TypedShape } from '../../../interfaces/shapes/shapes';\nimport {\n  ObjectEvent,\n  PaintEventSerializer,\n} from '../event-serializer/PaintEventSerializer';\nimport { CanvasAction, SET } from '../reducers/undo-redo';\nimport { floodFillMouseEvent } from '../utils/floodFillMouseEvent';\nimport { isEmptyShape, isFreeDrawing, isShape } from '../utils/shapes';\nimport { WhiteboardContext } from '../WhiteboardContext';\nimport floodFillCursor from '../../../assets/cursors/flood-fill.png';\nimport ICanvasActions from '../canvas-actions/ICanvasActions';\nimport { getToolbarIsEnabled } from '../redux/utils';\nimport { IPermissions } from '../../../interfaces/permissions/permissions';\nimport { ICanvasBrush } from '../../../interfaces/brushes/canvas-brush';\n\n/**\n * Handles the logic for Flood-fill Feature\n * @param {fabric.Canvas} canvas - Canvas in which objects to flood-fill are\n * @param {string} userId - User that will flood-fill objects\n * @param {ICanvasActions} actions - Shared functions\n * that are necessaries here to flood-fill objects\n * @param {PaintEventSerializer} eventSerializer - Serializer for synchronize\n * flood-fill in the other whiteboards\n * @param {(action: CanvasAction) => void} undoRedoDispatch - Dispatcher to\n * save the ocurred events and could make undo/redo over them\n */\nexport const useFloodFill = (\n  canvas: fabric.Canvas,\n  serializerToolbarState: IPermissions,\n  userId: string,\n  actions: ICanvasActions,\n  eventSerializer: PaintEventSerializer,\n  undoRedoDispatch: (action: CanvasAction) => void\n) => {\n  // Getting context variables\n  const {\n    isLocalObject,\n    allToolbarIsEnabled,\n    floodFillIsActive,\n    floodFill,\n    eraseType,\n    laserIsActive,\n    textIsActive,\n    pointerEvents,\n  } = useContext(WhiteboardContext);\n\n  const paintBucket = `url(\"${floodFillCursor}\") 2 15, default`;\n  const laserPointerIsActive = useMemo(() => laserIsActive, [laserIsActive]);\n\n  /**\n   * Checks if the given object exists in the given point\n   * and if is a flood-fillable object.\n   * @param {fabric.Object} object - Object to check\n   * @param {fabric.Point} pointer - Point to find the given object\n   */\n  const objectExistsAtPoint = (\n    object: fabric.Object,\n    pointer: fabric.Point\n  ) => {\n    return (\n      (isEmptyShape(object) || isFreeDrawing(object)) &&\n      object.containsPoint(pointer)\n    );\n  };\n\n  /**\n   * Checks if target in given event is different than a shape\n   * to apply on it the flood-fill algorithm for paths and images\n   * @param {fabric.IEvent} event - Event in which mouse down is happening\n   */\n  const needsFloodFillAlgorithm = (event: fabric.IEvent) => {\n    return (\n      !event.target ||\n      (event.target.get('type') === 'path' && !isEmptyShape(event.target)) ||\n      (event.target.get('type') === 'group' &&\n        (event.target as ICanvasBrush).basePath) ||\n      event.target.get('type') === 'image'\n    );\n  };\n\n  /**\n   * Manages the logic for Flood-fill Feature\n   */\n  useEffect(() => {\n    if (!canvas) return;\n\n    const toolbarIsEnabled = getToolbarIsEnabled();\n\n    /**\n     * Logic for flood-fill a shape\n     * @param {fabric.IEvent} event - Event in which mouse down is happening\n     */\n    const floodFillInShape = (event: fabric.IEvent) => {\n      if (!event.target || !event.pointer) return;\n\n      const differentFill = '#dcdcdc';\n      const differentStroke = '#dbdbdb';\n      const differentBackground = '#dadada';\n\n      /* Storing the current stroke, fill\n      and canvas background colors to reset them */\n      const originalStroke = event.target.stroke;\n      const originalFill = event.target.fill;\n      const originalBackground = canvas.backgroundColor;\n\n      // Change stroke and fill to provisional colors to be identified\n      event.target.set({\n        stroke: differentStroke,\n        fill: differentFill,\n      });\n\n      // Change canvas background to a provional color to be identified\n      canvas.backgroundColor = differentBackground;\n      canvas.renderAll();\n\n      const clickedColor = getColorInCoord(event.pointer.x, event.pointer.y);\n\n      if (clickedColor === differentFill) {\n        // If user click inside of the shape\n        event.target.set({\n          fill: floodFill,\n          stroke: originalStroke,\n        });\n\n        canvas.discardActiveObject();\n        canvas.backgroundColor = originalBackground;\n\n        const payload: ObjectEvent = {\n          type: 'shape',\n          target: {\n            fill: event.target.fill,\n            objectsOrdering: canvas\n              .getObjects()\n              .map((obj: ICanvasObject, index) => {\n                return { id: obj.id, index: index };\n              }),\n          } as ICanvasObject,\n          id: (event.target as ICanvasObject).id || '',\n        };\n\n        const eventState = {\n          event: payload,\n          type: 'colorChanged',\n        } as IUndoRedoEvent;\n\n        undoRedoDispatch({\n          type: SET,\n          payload: canvas.getObjects(),\n          canvasId: userId,\n          event: eventState,\n        });\n\n        eventSerializer?.push('colorChanged', payload);\n      } else if (clickedColor === differentStroke) {\n        // If user click in the border of the shape\n        event.target.set({\n          stroke: originalStroke,\n          fill: originalFill,\n        });\n\n        canvas.backgroundColor = originalBackground;\n      } else {\n        // If user click outside of the shape\n        event.target.set({\n          stroke: originalStroke,\n          fill: originalFill,\n        });\n\n        canvas.backgroundColor = originalBackground;\n\n        if (event.e) {\n          manageShapeOutsideClick(event);\n        }\n      }\n    };\n\n    /**\n     * Prepares objects to be evented and could flood-fill them\n     */\n    const prepareObjects = () => {\n      canvas.defaultCursor = paintBucket;\n\n      canvas.forEachObject((object: TypedShape) => {\n        actions.setObjectControlsVisibility(object as ICanvasObject, false);\n\n        if (!isLocalShape(object)) return;\n\n        object.set({\n          evented: true,\n          selectable: object.get('type') !== 'image',\n          lockMovementX: true,\n          lockMovementY: true,\n          hasBorders: false,\n          hoverCursor: paintBucket,\n          perPixelTargetFind: !isShape(object),\n        });\n      });\n\n      actions.reorderShapes();\n      canvas.renderAll();\n    };\n\n    /**\n     * Make a mouse down event below of the clicked shape\n     * @param {IEvent} event - Contains the x, y coords of the clicked point\n     */\n    const manageShapeOutsideClick = (event: fabric.IEvent) => {\n      if (!event.pointer || !event.target) return;\n\n      const { pointer } = event;\n\n      canvas?.forEachObject((object: fabric.Object) => {\n        if (object !== event.target && objectExistsAtPoint(object, pointer)) {\n          canvas?.trigger('mouse:down', {\n            target: object,\n            pointer: {\n              x: pointer.x,\n              y: pointer.y,\n            },\n          });\n        }\n      });\n    };\n\n    /**\n     * Checks if the given shape object is local for current user\n     * @param {TypedShape} shape - Shape Object to check\n     */\n    const isLocalShape = (shape: TypedShape) => {\n      return shape.id && isLocalObject(shape.id, userId);\n    };\n\n    /**\n     * Get the color of the clicked area in the Whiteboard\n     * and returns it in hexadecimal code\n     * @param {IEvent} event - click event\n     */\n    const getColorInCoord = (x: number, y: number): string | undefined => {\n      if (!canvas) return;\n\n      const colorData = canvas\n        .getContext()\n        .getImageData(\n          x * window.devicePixelRatio,\n          y * window.devicePixelRatio,\n          1,\n          1\n        )\n        .data.slice(0, 3);\n\n      return (\n        '#' +\n        ((1 << 24) + (colorData[0] << 16) + (colorData[1] << 8) + colorData[2])\n          .toString(16)\n          .slice(1)\n      );\n    };\n\n    const teacherHasPermission =\n      allToolbarIsEnabled && floodFillIsActive;\n\n    const studentHasPermission =\n      floodFillIsActive && toolbarIsEnabled && serializerToolbarState.floodFill;\n\n    const mouseDownFill = async (event: fabric.IEvent) => {\n      if (!event.pointer) return;\n\n      // Flood-fill for no shape objects\n      if (needsFloodFillAlgorithm(event)) {\n        floodFillMouseEvent(\n          event,\n          canvas,\n          userId,\n          isLocalObject as (p1: string, p2: string) => boolean,\n          floodFill,\n          eventSerializer,\n          undoRedoDispatch\n        );\n\n        return;\n      }\n\n      // Click on shape object\n      if (event.target && isEmptyShape(event.target)) {\n        floodFillInShape(event);\n      }\n\n      canvas.renderAll();\n    };\n\n    if (teacherHasPermission || studentHasPermission) {\n      prepareObjects();\n\n      canvas.on('mouse:down', mouseDownFill);\n    }\n\n    return () => {\n      if (pointerEvents) {\n        canvas.defaultCursor = 'default';\n      }\n\n      // Returning objects to their normal state\n      if (!floodFillIsActive && eraseType !== 'object') {\n        canvas?.forEachObject((object: ICanvasObject) => {\n          object.set({\n            hoverCursor: laserPointerIsActive ? 'none' : 'default',\n            evented: false,\n            perPixelTargetFind: false,\n          });\n        });\n      }\n\n      // Removing mouse:down event when it is not necessary\n      if (!textIsActive && eraseType !== 'object') {\n        canvas?.off('mouse:down', mouseDownFill);\n      }\n    };\n  }, [\n    actions,\n    allToolbarIsEnabled,\n    canvas,\n    eraseType,\n    eventSerializer,\n    floodFill,\n    floodFillIsActive,\n    isLocalObject,\n    laserPointerIsActive,\n    paintBucket,\n    pointerEvents,\n    serializerToolbarState.floodFill,\n    textIsActive,\n    undoRedoDispatch,\n    userId,\n  ]);\n};\n","import { ITextOptions } from 'fabric/fabric-impl';\nimport { useCallback, useContext, useEffect } from 'react';\nimport { IBrushType } from '../../../interfaces/brushes/brush-type';\nimport { ICanvasBrush } from '../../../interfaces/brushes/canvas-brush';\nimport { TypedShape } from '../../../interfaces/shapes/shapes';\nimport ICanvasActions from '../canvas-actions/ICanvasActions';\nimport {\n  isFreeDrawing,\n  isEmptyShape,\n  isShape,\n  isText,\n  isSpecialFreeDrawing,\n} from '../utils/shapes';\nimport { WhiteboardContext } from '../WhiteboardContext';\n\n/**\n * Handles the logic for change Whiteboard states when an object is selected\n * @param {fabric.Canvas} canvas - Canvas in which the objects are selected\n * @param {ICanvasActions} actions - Shared functions that are necessaries\n * to work this logic\n */\nexport const useObjectSelection = (\n  canvas: fabric.Canvas,\n  actions: ICanvasActions\n) => {\n  // Getting the necessary context variables\n  const {\n    shapeIsActive,\n    brushIsActive,\n    eventedObjects,\n    penColor,\n    updatePenColor,\n    lineWidth,\n    updateLineWidth,\n    brushType,\n    updateBrushType,\n    shape,\n    updateShape,\n    fontFamily,\n    updateFontFamily,\n    fontColor,\n    updateFontColor,\n  } = useContext(WhiteboardContext);\n\n  /**\n   * Gets stroke, strokeWidth and brushType properties\n   * from path and custom path objects\n   * @param {ICanvasBrush} object - Object to get its properties\n   */\n  const getBrushObjectProperties = useCallback((object: ICanvasBrush) => {\n    if (isFreeDrawing(object) || isEmptyShape(object as TypedShape)) {\n      return {\n        objectStroke: String(object.stroke),\n        objectStrokeWidth: Number(object.strokeWidth),\n        objectBrushType: object.strokeDashArray?.length ? 'dashed' : 'pencil',\n      };\n    }\n\n    return {\n      objectStroke: String(object.basePath?.stroke),\n      objectStrokeWidth: Number(object.basePath?.strokeWidth),\n      objectBrushType: String(object.basePath?.type),\n    };\n  }, []);\n\n  /**\n   * Trigger the changes in the required variables\n   * when a certain object is selected\n   * @param {IEvent} event - event that contains the selected object\n   */\n  const manageChanges = useCallback(\n    (event: fabric.IEvent) => {\n      if (!event.target) return;\n\n      const selected = event.target;\n      actions.reorderShapes();\n\n      // Shape or Path selected\n      if (\n        !shapeIsActive &&\n        !brushIsActive &&\n        eventedObjects &&\n        (isFreeDrawing(selected) ||\n          isEmptyShape(selected) ||\n          isSpecialFreeDrawing(selected))\n      ) {\n        const {\n          objectStroke,\n          objectStrokeWidth,\n          objectBrushType,\n        } = getBrushObjectProperties(selected as ICanvasBrush);\n\n        // Change pen color\n        if (objectStroke !== penColor) {\n          updatePenColor(objectStroke);\n        }\n\n        // Change line width\n        if (objectStrokeWidth !== lineWidth) {\n          updateLineWidth(objectStrokeWidth);\n        }\n\n        // Change brush type\n        if (objectBrushType !== brushType) {\n          updateBrushType(objectBrushType as IBrushType);\n        }\n      }\n\n      // Shape selected, change shape\n      if (\n        isShape(selected) &&\n        !shapeIsActive &&\n        eventedObjects &&\n        selected.name !== shape\n      ) {\n        updateShape(selected.name as string);\n      }\n\n      // Text Selected\n      if (isText(selected)) {\n        const newFont = (selected as ITextOptions).fontFamily;\n        const newFontColor = selected.fill;\n\n        // Change font family\n        if (newFont !== fontFamily) {\n          updateFontFamily(newFont as string);\n        }\n\n        // Change text color\n        if (newFontColor !== fontColor) {\n          updateFontColor(newFontColor as string);\n        }\n      }\n    },\n    [\n      actions,\n      brushIsActive,\n      brushType,\n      eventedObjects,\n      fontColor,\n      fontFamily,\n      getBrushObjectProperties,\n      lineWidth,\n      penColor,\n      shape,\n      shapeIsActive,\n      updateBrushType,\n      updateFontColor,\n      updateFontFamily,\n      updateLineWidth,\n      updatePenColor,\n      updateShape,\n    ]\n  );\n\n  // Set up manageChanges callback.\n  useEffect(() => {\n    if (!canvas) return;\n\n    canvas.on('selection:created', manageChanges);\n    canvas.on('selection:updated', manageChanges);\n\n    return () => {\n      canvas.off('selection:created', manageChanges);\n      canvas.off('selection:updated', manageChanges);\n    };\n  }, [canvas, manageChanges]);\n};\n","import { fabric } from 'fabric';\nimport { ITextOptions } from 'fabric/fabric-impl';\nimport { useCallback, useContext } from 'react';\nimport { ICanvasKeyboardEvent } from '../../../interfaces/canvas-events/canvas-keyboard-event';\nimport { IPermissions } from '../../../interfaces/permissions/permissions';\nimport { ICanvasObject } from '../../../interfaces/objects/canvas-object';\nimport { ObjectEvent } from '../event-serializer/PaintEventSerializer';\nimport { useSharedEventSerializer } from '../SharedEventSerializerProvider';\nimport { WhiteboardContext } from '../WhiteboardContext';\n\n/**\n * Handles the logic for keyboard events\n * @param {fabric.Canvas} canvas - Canvas to interact\n * @param {string} instanceId - Id of the current canvas\n */\nexport const useKeyHandlers = (\n  canvas: fabric.Canvas,\n  instanceId: string,\n  permissions: IPermissions,\n  allToolbarIsEnabled: boolean,\n) => {\n  // Getting context variables\n  const {\n    activeCanvas,\n    perfectShapeIsActive,\n    updatePerfectShapeIsActive,\n    perfectShapeIsAvailable,\n    redo,\n    undo,\n  } = useContext(WhiteboardContext);\n\n  // Event serialization for synchronizing whiteboard state.\n  const {\n    state: { eventSerializer },\n  } = useSharedEventSerializer();\n\n  /**\n   * General handler for keydown keyboard events\n   * 'Backspace' event for removing selected element from whiteboard.\n   * 'Escape' event for deselect active objects.\n   * 'Shift' event for active the perfect shapes creation.\n   * */\n  const keyDownHandler = useCallback(\n    (e: Event) => {\n      if (instanceId !== activeCanvas.current) return;\n\n      if (!(permissions.undoRedo || allToolbarIsEnabled)) return;\n\n      /**\n       * Removes the current active objects in canvas\n       */\n      const removeSelectedObjects = () => {\n        let active = canvas.getActiveObject();\n\n        if ((active as fabric.IText)?.isEditing) return;\n\n        canvas.discardActiveObject();\n\n        if (active?.type === 'activeSelection') {\n          const objectIds: string[] = [];\n\n          (active as fabric.ActiveSelection).forEachObject(\n            (object: ICanvasObject) => {\n              if (!(object as ITextOptions)?.isEditing) {\n                object.groupClear = true;\n                objectIds.push(object.id as string);\n                canvas.remove(object);\n              }\n            }\n          );\n\n          const target = {\n            target: {\n              strategy: 'removeGroup',\n              objectIds: objectIds,\n            },\n          };\n\n          eventSerializer?.push('removed', (target as unknown) as ObjectEvent);\n        } else {\n          if (!(active as ITextOptions)?.isEditing) {\n            canvas.remove(active);\n          }\n        }\n      };\n\n      /**\n       * Checks if client's OS is MacOS or not\n       */\n      const isMacOS = () => {\n        return navigator.appVersion.indexOf('Mac') !== -1;\n      };\n\n      /**\n       * Checks if an Undo Shortcut is executed\n       */\n      const isUndoShortcut = () => {\n        return (\n          (event.ctrlKey || (isMacOS() && event.metaKey)) &&\n          event.keyCode === 90 &&\n          !event.shiftKey &&\n          activeCanvas.current === instanceId\n        );\n      };\n\n      /**\n       * Checks if a Redo Shortcut is executed\n       */\n      const isRedoShortcut = () => {\n        return (\n          ((event.keyCode === 89 && event.ctrlKey) ||\n            (isMacOS() &&\n              event.metaKey &&\n              event.shiftKey &&\n              event.keyCode === 90)) &&\n          activeCanvas.current === instanceId\n        );\n      };\n\n      const event = e as ICanvasKeyboardEvent;\n\n      // UNDO Keyboard Shortcut\n      if (isUndoShortcut() && (permissions.undoRedo || allToolbarIsEnabled)) {\n        undo();\n        return;\n      }\n\n      // REDO Keyboard Shortcut\n      if (isRedoShortcut() && (permissions.undoRedo || allToolbarIsEnabled)) {\n        redo();\n        return;\n      }\n\n      // Erase Object Keyboard Shortcut\n      if (event.key === 'Backspace') {\n        removeSelectedObjects();\n        return;\n      }\n\n      // Deselect Active Object Keyboard Shortcut\n      if (event.key === 'Escape') {\n        canvas.discardActiveObject();\n        canvas.renderAll();\n      }\n\n      // Active Perfect Shape\n      if (\n        event.key === 'Shift' &&\n        !perfectShapeIsActive &&\n        window.innerWidth > 768 &&\n        perfectShapeIsAvailable()\n      ) {\n        updatePerfectShapeIsActive(true);\n      }\n    },\n    [\n      activeCanvas,\n      allToolbarIsEnabled,\n      canvas,\n      eventSerializer,\n      instanceId,\n      perfectShapeIsActive,\n      perfectShapeIsAvailable,\n      permissions.undoRedo,\n      redo,\n      undo,\n      updatePerfectShapeIsActive,\n    ]\n  );\n\n  /**\n   * General handler for keyup keyboard events\n   * 'Shift' event for deactive the perfect shapes creation\n   */\n  const keyUpHandler = useCallback(\n    (e: Event) => {\n      const event = e as ICanvasKeyboardEvent;\n      // Deactive Perfect Shape\n      if (\n        event.key === 'Shift' &&\n        perfectShapeIsActive &&\n        window.innerWidth > 768\n      ) {\n        updatePerfectShapeIsActive(false);\n      }\n    },\n    [perfectShapeIsActive, updatePerfectShapeIsActive]\n  );\n\n  return {\n    keyDownHandler,\n    keyUpHandler,\n  };\n};\n","import { fabric } from 'fabric';\nimport { IEvent, IText, Textbox } from 'fabric/fabric-impl';\nimport { useCallback, useContext, useEffect } from 'react';\nimport { WhiteboardContext } from '../WhiteboardContext';\nimport { v4 as uuidv4 } from 'uuid';\nimport { ICanvasObject } from '../../../interfaces/objects/canvas-object';\nimport { ObjectEvent } from '../event-serializer/PaintEventSerializer';\nimport { useKeyHandlers } from './useKeyHandlers';\nimport { SET } from '../reducers/undo-redo';\nimport FontFaceObserver from 'fontfaceobserver';\nimport { IUndoRedoEvent } from '../../../interfaces/canvas-events/undo-redo-event';\nimport { TypedShape } from '../../../interfaces/shapes/shapes';\nimport { useSharedEventSerializer } from '../SharedEventSerializerProvider';\nimport { UndoRedo } from '../hooks/useUndoRedoEffect';\nimport { IPermissions } from '../../../interfaces/permissions/permissions';\nimport { getToolbarIsEnabled } from '../redux/utils';\nimport ICanvasActions from '../canvas-actions/ICanvasActions';\n\n/**\n * Manages the logic for text object creation and edition\n * @param {fabric.Canvas} canvas - Canvas in which text object will be created\n * @param {string} instanceId - Canvas instance identifier\n * @param {string} userId - User that will create/edit the text objects\n * @param {ICanvasActions} actions - Shared functions for canvas\n * @param {IPermissions} permissions - User permissions in whiteboard tools\n */\nexport const useTextObject = (\n  canvas: fabric.Canvas,\n  instanceId: string,\n  userId: string,\n  actions: ICanvasActions,\n  permissions: IPermissions\n) => {\n  // Getting context data\n  const {\n    allToolbarIsEnabled,\n    textIsActive,\n    fontFamily,\n    fontColor,\n    eraseType,\n    isLocalObject,\n    text,\n  } = useContext(WhiteboardContext);\n\n  // Getting Event Serializer\n  const {\n    state: { eventSerializer },\n  } = useSharedEventSerializer();\n\n  // Getting Undo/Redo Dispatcher\n  const { dispatch: undoRedoDispatch } = UndoRedo(\n    canvas as fabric.Canvas,\n    eventSerializer,\n    userId\n  );\n\n  // Getting Key Handlers\n  const { keyUpHandler, keyDownHandler } = useKeyHandlers(\n    canvas,\n    instanceId,\n    permissions,\n    allToolbarIsEnabled\n  );\n\n  /**\n   * Loads selected font. Default is Arial\n   * Send synchronization event for fontFamily changes.\n   * */\n  const fontFamilyLoader = useCallback(\n    (font: string) => {\n      const myFont = new FontFaceObserver(font);\n      myFont\n        .load()\n        .then(() => {\n          const activeObject = canvas?.getActiveObject() as fabric.IText;\n\n          if (activeObject && activeObject.fontFamily !== font) {\n            activeObject.set({ fontFamily: font });\n            canvas.requestRenderAll();\n\n            const objects = canvas?.getActiveObjects();\n\n            canvas.discardActiveObject();\n\n            if (objects && objects.length) {\n              objects.forEach((obj: ICanvasObject) => {\n                if (obj.id && isLocalObject(obj.id, userId)) {\n                  const type = obj.get('type');\n\n                  if (type === 'textbox') {\n                    const target = {\n                      fontFamily: obj.fontFamily,\n                    } as ICanvasObject;\n\n                    const payload: ObjectEvent = {\n                      type,\n                      target,\n                      id: obj.id,\n                    };\n\n                    eventSerializer?.push('fontFamilyChanged', payload);\n                  }\n                }\n\n                if (objects.length === 1) {\n                  const target = {\n                    fontFamily,\n                  };\n\n                  const payload = {\n                    type: obj.type,\n                    target,\n                    id: obj?.id,\n                  };\n\n                  const event = { event: payload, type: 'fontFamilyChanged' };\n\n                  undoRedoDispatch({\n                    type: SET,\n                    payload: canvas?.getObjects() as TypedShape[],\n                    canvasId: userId,\n                    event: (event as unknown) as IUndoRedoEvent,\n                  });\n                }\n              });\n            }\n\n            if (objects.length === 1) {\n              canvas?.setActiveObject(objects[0]);\n            } else if (objects.length >= 2) {\n              const activesGroup = new fabric.ActiveSelection(objects);\n              canvas?.setActiveObject(activesGroup);\n            }\n          }\n        })\n        .catch((e: IEvent) => {\n          console.log(e);\n        });\n    },\n    /* If isLocalObject is added on dependencies,\n    an unecessary event is triggered */\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    [canvas, eventSerializer, userId]\n  );\n\n  /**\n   * Handles the logic to write text on the whiteboard\n   * */\n  useEffect(() => {\n    const toolbarIsEnabled = getToolbarIsEnabled();\n    const teacherHasPermission = allToolbarIsEnabled && textIsActive;\n    const studentHasPermission =\n      toolbarIsEnabled && permissions.text && textIsActive;\n\n\n      const mouseDown = (e: fabric.IEvent) => {\n        if (!e.pointer) return;\n\n        const { target, pointer } = e;\n        const type = target?.type;\n\n        // If Click is made over anything except a text object\n        if (!target || (type !== 'textbox' && type !== 'i-text')) {\n          let text = new fabric.IText(' ', {\n            fontFamily: fontFamily,\n            fontSize: 30,\n            fontWeight: 400,\n            fill: fontColor,\n            fontStyle: 'normal',\n            top: pointer.y,\n            left: pointer.x,\n            cursorDuration: 500,\n            lockMovementX: true,\n            lockMovementY: true,\n            hasRotatingPoint: false,\n            hoverCursor: 'default',\n          });\n\n          canvas.add(text);\n          canvas.setActiveObject(text);\n          text.enterEditing();\n          text?.hiddenTextarea?.focus();\n\n          // When text edition is out\n          text.on('editing:exited', () => {\n            const textCopy = text.text?.trim();\n            const toObject = text.toObject();\n\n            delete toObject.text;\n            delete toObject.type;\n\n            const clonedTextObj = JSON.parse(JSON.stringify(toObject));\n\n            clonedTextObj.id = `${userId}:${uuidv4()}`;\n            clonedTextObj.lockMovementX = true;\n            clonedTextObj.lockMovementY = true;\n            clonedTextObj.hasRotatingPoint = false;\n            clonedTextObj.hoverCursor = 'default';\n\n            // IText is converted to Textbox to could resise it\n            if (typeof textCopy === 'string') {\n              text = new fabric.Textbox(textCopy, clonedTextObj);\n            }\n\n            // IText object is removed\n            delete (canvas.getActiveObject() as ICanvasObject).id;\n            canvas.remove(canvas.getActiveObject());\n\n            // Textbox is added is setted like active object\n            canvas.add(text);\n            canvas.setActiveObject(text);\n\n            // If Textbox is empty, it will be removed from canvas\n            if (text?.text?.replace(/\\s/g, '').length === 0) {\n              delete (canvas.getActiveObject() as ICanvasObject).id;\n              canvas.remove(canvas.getActiveObject());\n              return;\n            }\n\n            /* If a created Textbox is modified,\n            it will be removed because a new Textbox object was be created */\n            text.on('modified', () => {\n              if (text?.text?.replace(/\\s/g, '').length === 0) {\n                delete (canvas.getActiveObject() as ICanvasObject).id;\n                canvas.remove(canvas.getActiveObject());\n              }\n            });\n          });\n        }\n      };\n\n    if (teacherHasPermission || studentHasPermission) {\n      canvas.on('mouse:down', mouseDown);\n    } else {\n      const active = canvas?.getActiveObject() as fabric.IText;\n\n      if (active && active.isEditing) {\n        canvas.discardActiveObject();\n        canvas.renderAll();\n      }\n    }\n\n    return () => {\n      if (!eraseType) {\n        canvas?.off('mouse:down', mouseDown);\n      }\n    };\n  }, [\n    allToolbarIsEnabled,\n    canvas,\n    eraseType,\n    fontColor,\n    fontFamily,\n    permissions.text,\n    textIsActive,\n    userId,\n  ]);\n\n  /**\n   * Handles the logic to set the Textbox auto grownable and text responsive\n   */\n  useEffect(() => {\n    let currentTextbox: Textbox;\n    let textboxCopy: IText;\n\n    if (textIsActive) {\n      /**\n       * Entering to edit a text object\n       * Textbox transformed in IText\n       */\n      canvas?.on('text:editing:entered', (e: IEvent) => {\n        if (e.target?.type === 'textbox') {\n          let counter = 0;\n          let textCopy = '';\n\n          /**\n           * Emulates the aspect of a Textbox keeping the lines\n           * that this had in the new IText object\n           */\n          const setLines = () => {\n            currentTextbox.textLines.forEach((line, index) => {\n              let separator =\n                currentTextbox.text?.charCodeAt(counter + line.length) === 10\n                  ? '\\n'\n                  : ' \\n';\n\n              if (index === currentTextbox.textLines.length - 1) {\n                separator = '';\n              }\n\n              textCopy += `${line}${separator}`;\n              counter += line.length + 1;\n            });\n          };\n\n          delete ((textCopy as unknown) as ICanvasObject).id;\n          canvas.remove(textboxCopy);\n          currentTextbox = e.target as Textbox;\n          setLines();\n\n          // Preparing Textbox properties to be setted in IText object\n          const textboxProps = JSON.parse(JSON.stringify(currentTextbox));\n          delete textboxProps.text;\n          delete textboxProps.type;\n          textboxProps.type = 'i-text';\n          textboxProps.visible = true;\n          textboxProps.width = currentTextbox.width;\n          textboxProps.height = currentTextbox.height;\n\n          if ((currentTextbox as TypedShape).id) {\n            textboxProps.id = (currentTextbox as TypedShape).id;\n          }\n\n          // Adding the IText and hiding the Textbox\n          if (typeof textCopy === 'string') {\n            textboxCopy = new fabric.IText(textCopy.trim(), textboxProps);\n            canvas.add(textboxCopy);\n            canvas.setActiveObject(textboxCopy);\n            textboxCopy.enterEditing();\n            currentTextbox.set({\n              visible: false,\n            });\n\n            canvas.renderAll();\n          }\n        }\n      });\n\n      /**\n       * Text has been changed is some Text Object in canvas\n       */\n      canvas?.on('text:changed', (e: IEvent) => {\n        if (!(e?.target as TypedShape).id) {\n          // use native canvas to show new text box in realtime\n          const payload: ObjectEvent = {\n            type: 'textbox',\n            target: e.target,\n            id: (e.target as ICanvasObject).id as string,\n          };\n          eventSerializer.push('textEdit', payload);\n        } else {\n          const payload: ObjectEvent = {\n            type: 'textbox',\n            target: e.target,\n            id: (e.target as ICanvasObject).id as string,\n            avoidPersistentStoring: true,\n          };\n\n          eventSerializer.push('modified', payload);\n        }\n      });\n\n      /**\n       * Text Edition finished on IText object\n       * IText transformed in Textbox\n       */\n      canvas?.on('text:editing:exited', (e: IEvent) => {\n        if (!textboxCopy || !textboxCopy.width) return;\n\n        const textboxWidth: number = textboxCopy.width;\n\n        // Updating/showing the Textbox and hiding the IText\n        if (currentTextbox && e.target?.type === 'i-text') {\n          textboxCopy.set('isEditing', false);\n          currentTextbox.set({\n            width: textboxWidth + 10,\n            height: textboxCopy.height,\n            visible: true,\n            text: textboxCopy.text?.trim(),\n          });\n\n          canvas.setActiveObject(currentTextbox);\n          currentTextbox.set({ isEditing: true });\n          textboxCopy.set({ visible: false });\n          canvas.discardActiveObject();\n          canvas.renderAll();\n        }\n      });\n    }\n\n    return () => {\n      canvas?.off('text:editing:entered');\n      canvas?.off('text:editing:exited');\n    };\n  }, [canvas, eventSerializer, textIsActive]);\n\n  /**\n   * Is executed when textIsActive changes its value,\n   * basically to deselect any selected object\n   */\n  useEffect(() => {\n    if (!textIsActive) {\n      canvas?.discardActiveObject();\n      canvas?.renderAll();\n    }\n  }, [canvas, textIsActive]);\n\n  /**\n   * If the input field (text) has length\n   * will unselect whiteboard active objects\n   * */\n  useEffect(() => {\n    if (text?.length) {\n      actions.discardActiveObject();\n    }\n  }, [actions, text, textIsActive]);\n\n  /**\n   * Add keyboard keydown event listener. It listen keyDownHandler function\n   * Invokes fontFamilyLoader to set default and selected font family\n   * */\n  useEffect(() => {\n    document.addEventListener('keydown', keyDownHandler, false);\n    document.addEventListener('keyup', keyUpHandler, false);\n    fontFamilyLoader(fontFamily);\n\n    return () => {\n      document.removeEventListener('keydown', keyDownHandler);\n      document.removeEventListener('keyup', keyUpHandler);\n    };\n  }, [canvas, fontFamily, fontFamilyLoader, keyDownHandler, keyUpHandler]);\n};\n","import { fabricGif } from './fabricGif';\nimport { v4 as uuidv4 } from 'uuid';\nimport { fabric } from 'fabric';\nimport { ICanvasObject } from '../../../interfaces/objects/canvas-object';\nimport { IImageOptions } from 'fabric/fabric-impl';\n\n/**\n * Function to create gif as object\n *\n * @param image Image to upload\n * @param userId User id\n * @param canvas Canvas instance\n */\nexport async function createGif(\n  image: string | File,\n  userId: string,\n  canvas: fabric.Canvas\n) {\n  try {\n    const gif = await fabricGif(image, 200, 200, 2000);\n    gif.set({ top: 0, left: 0 });\n    gif.id = `${userId}:${uuidv4()}`;\n    canvas.add(gif);\n\n    fabric.util.requestAnimFrame(function render() {\n      canvas.renderAll();\n      fabric.util.requestAnimFrame(render);\n    });\n  } catch (e) {\n    console.error(e);\n  }\n}\n\n/**\n * Function to create an image object\n *\n * @param image Image to upload\n * @param userId User id\n * @param canvas Canvas instance\n * @param laserIsActive Indicates if laser is active, if so, image will not be selectable\n */\nexport function createImageAsObject(\n  image: string,\n  userId: string,\n  canvas: fabric.Canvas,\n  laserIsActive: boolean,\n) {\n  return fabric.Image.fromURL(image, function (img) {\n    const objectImage: ICanvasObject = img.set({\n      left: 0,\n      top: 0,\n      selectable: !laserIsActive,\n    });\n\n    img.scaleToHeight(250);\n    img.scaleToWidth(250);\n\n    objectImage.id = `${userId}:${uuidv4()}`;\n    canvas?.add(objectImage);\n  });\n}\n\ninterface IBackgroundImage extends IImageOptions {\n  id?: string;\n}\n\n/**\n * Function to create a Background Image\n *\n * @param image Image to upload\n * @param userId User id\n * @param canvas Canvas instance\n */\nexport async function createBackgroundImage(\n  image: string,\n  userId: string,\n  canvas: fabric.Canvas\n) {\n  return new Promise((resolve) => {\n    fabric.Image.fromURL(image, function (img) {\n      canvas.setBackgroundImage(img, canvas.renderAll.bind(canvas), {\n        scaleX: (canvas.width || 0) / (img.width || 0),\n        scaleY: (canvas.height || 0) / (img.height || 0),\n        originX: 'left',\n        originY: 'top',\n        id: `${userId}:${uuidv4()}`,\n      } as IBackgroundImage);\n\n      resolve();\n    });\n  });\n}\n","import { useContext, useEffect } from 'react';\nimport { IBackgroundImageEvent } from '../event-serializer/PaintEventSerializer';\nimport {\n  createBackgroundImage,\n  createGif,\n  createImageAsObject,\n} from '../gifs-actions/util';\nimport { WhiteboardContext } from '../WhiteboardContext';\nimport { v4 as uuidv4 } from 'uuid';\nimport { IStaticCanvasOptions } from 'fabric/fabric-impl';\n\ninterface IBackgroundImage extends IStaticCanvasOptions {\n  id?: string;\n}\n\n/**\n * Handles the logic for upload images on Whiteboard\n * (image objects and background images)\n * @param {fabric.Canvas} canvas - Canvas to set the image\n * @param {string} userId - User that will set the image\n */\nexport const useAddImage = (canvas: fabric.Canvas, userId: string) => {\n  // Getting context variables\n  const {\n    isBackgroundImage,\n    setIsBackgroundImage,\n    backgroundImageIsPartialErasable,\n    backgroundImage,\n    setLocalImage,\n    setLocalBackground,\n    updateBackgroundColor,\n    isGif,\n    image,\n    laserIsActive,\n  } = useContext(WhiteboardContext);\n\n  /**\n   * Handles the logic to add images and gifs as objects\n   * and background images to the whiteboard.\n   */\n  useEffect(() => {\n    if (!canvas) return;\n\n    const imageSetup = async () => {\n      try {\n        if (isBackgroundImage) {\n          updateBackgroundColor('#000000');\n          setLocalBackground(false);\n          canvas.setBackgroundColor(\n            'transparent',\n            canvas.renderAll.bind(canvas)\n          );\n\n          if (backgroundImageIsPartialErasable) {\n            await createBackgroundImage(\n              backgroundImage.toString(),\n              userId,\n              canvas\n            );\n\n            if (!canvas.backgroundImage) return;\n\n            const payload: IBackgroundImageEvent = {\n              id: (canvas.backgroundImage as IBackgroundImage).id,\n              type: 'backgroundImage',\n              target: canvas.backgroundImage,\n            };\n\n            canvas.trigger('object:added', payload);\n            return;\n          }\n\n          await setLocalImage(backgroundImage);\n          const id = `${userId}:${uuidv4()}`;\n          const payload: IBackgroundImageEvent = {\n            type: 'localImage',\n            target: { backgroundImage, id },\n            id,\n          };\n\n          canvas.trigger('object:added', payload);\n          setIsBackgroundImage(false);\n\n          return;\n        }\n\n        if (isGif && image) {\n          /*\n            We use then to avoid inspector warning\n            about ignoring the promise returned\n          */\n          await createGif(image, userId, canvas);\n          return;\n        }\n\n        if (image && !isGif) {\n          createImageAsObject(image.toString(), userId, canvas, laserIsActive);\n        }\n      } catch (e) {\n        console.error(e);\n      }\n    };\n\n    imageSetup();\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [\n    image,\n    backgroundImage,\n    canvas,\n    setIsBackgroundImage,\n    isGif,\n    setLocalBackground,\n    setLocalImage,\n    updateBackgroundColor,\n    userId,\n  ]);\n};\n","import { fabric } from 'fabric';\nimport { useCallback, useContext, useEffect } from 'react';\nimport { ICanvasBrush } from '../../../interfaces/brushes/canvas-brush';\nimport { ICanvasPathBrush } from '../../../interfaces/brushes/canvas-path-brush';\nimport { IUndoRedoEvent } from '../../../interfaces/canvas-events/undo-redo-event';\nimport { ICanvasObject } from '../../../interfaces/objects/canvas-object';\nimport { TypedShape } from '../../../interfaces/shapes/shapes';\nimport { changeLineWidthInSpecialBrushes } from '../brushes/actions/changeLineWidthInSpecialBrushes';\nimport {\n  ObjectEvent,\n  ObjectType,\n} from '../event-serializer/PaintEventSerializer';\nimport { CanvasAction, SET } from '../reducers/undo-redo';\nimport { useSharedEventSerializer } from '../SharedEventSerializerProvider';\nimport { isEmptyShape, isFreeDrawing } from '../utils/shapes';\nimport { WhiteboardContext } from '../WhiteboardContext';\nimport { useSynchronization } from './useSynchronization';\n\n/**\n * Handles the logic for change lineWidth in path and shape objects\n * @param {fabric.Canvas} canvas - Canvas in which the objects to modify are.\n * @param {string} userId - User that will modify lineWidth in objects.\n * @param {(action: CanvasAction) => void} undoRedoDispatch - Dispatcher to\n * save lineWidth changes and could make undo/redo over them\n */\nexport const useChangeLineWidth = (\n  canvas: fabric.Canvas,\n  userId: string,\n  undoRedoDispatch: (action: CanvasAction) => void\n) => {\n  // Getting lineWidth context variable\n  const { lineWidth, lineWidthIsActive } = useContext(WhiteboardContext);\n\n  // Getting lineWidth change synchronization effect\n  const { changeLineWidthSync } = useSynchronization(userId);\n\n  // Getting event serializer to synchronize lineWidth changes\n  const {\n    state: { eventSerializer },\n  } = useSharedEventSerializer();\n\n  /**\n   * Checks if the given object is a common path object\n   * @param {ICanvasObject} object - Object to check\n   */\n  const isCommonBrush = useCallback((object: ICanvasObject) => {\n    return (\n      (isEmptyShape(object as TypedShape) || isFreeDrawing(object)) &&\n      (object as ICanvasBrush).basePath?.type === 'pencil'\n    );\n  }, []);\n\n  /**\n   * Checks if the given object is a custom path object\n   * @param {ICanvasBrush} object - Object to check\n   */\n  const isCustomBrush = useCallback((object: ICanvasBrush) => {\n    return (\n      (object.type === 'group' && (object as ICanvasBrush).basePath) ||\n      (object.type === 'image' && (object as ICanvasBrush).basePath) ||\n      (object.type === 'path' &&\n        (object as ICanvasBrush).basePath?.type === 'dashed')\n    );\n  }, []);\n\n  /**\n   * If lineWidth variable changes and a free line drawing is selected\n   * that drawing line width will change to the selected width on Toolbar\n   */\n  useEffect(() => {\n    let newActives: ICanvasObject[] = [];\n    let activeObjects: ICanvasObject[] = [];\n\n    /**\n     * Handles the logic for change strokeWidth property\n     * in a custom path object\n     * @param {ICanvasBrush} object - Custom Path Object to change its width\n     */\n    const customBrushChange = async (\n      object: ICanvasBrush,\n      isUnique: boolean\n    ) => {\n      let payload: ObjectEvent;\n\n      await changeLineWidthInSpecialBrushes(canvas, userId, object, lineWidth)\n        .then((newObject) => {\n          const basePath = newObject.basePath;\n          newActives.push(newObject as fabric.Object);\n\n          payload = {\n            type: newObject.type as ObjectType,\n            target: {\n              basePath: {\n                points: basePath?.points || [],\n                strokeWidth: Number(basePath?.strokeWidth),\n                stroke: String(basePath?.stroke),\n                bristles: basePath?.bristles,\n                imageData: basePath?.imageData,\n              },\n            },\n            id: String(newObject.id),\n          };\n\n          eventSerializer?.push('lineWidthChanged', payload);\n\n          if (isUnique) {\n            // Payload for undo/redo dispatcher\n            const undoRedoPayload = {\n              type: newObject.type,\n              target: { strokeWidth: basePath?.strokeWidth },\n              id: newObject?.id,\n            };\n\n            // Event for undo/redo dispatcher\n            const event = {\n              event: undoRedoPayload,\n              type: 'lineWidthChanged',\n            };\n\n            // Disptaching line width change for custom paths\n            undoRedoDispatch({\n              type: SET,\n              payload: canvas?.getObjects() as TypedShape[],\n              canvasId: userId,\n              event: (event as unknown) as IUndoRedoEvent,\n            });\n          }\n        })\n        .catch((e: Error) => {\n          if (e.message === 'lineWidth is the same') {\n            newActives.push(object as fabric.Object);\n          } else {\n            console.warn(e);\n          }\n        });\n    };\n\n    /**\n     * Handles the logic for change strokeWidth property\n     * in a common path object\n     * @param {ICanvasObject} object - Path Object to change its width\n     * @param {boolean} isUnique - Flag to know if is a single active object\n     * or has sibling active objects\n     */\n    const commonBrushChange = (object: ICanvasObject, isUnique: boolean) => {\n      const target = { strokeWidth: lineWidth };\n\n      object.set(target);\n      newActives.push(object);\n      changeLineWidthSync(object);\n\n      if ((object as ICanvasPathBrush).basePath?.type === 'dashed') {\n        object.set({\n          strokeDashArray: [lineWidth * 2],\n        });\n      }\n\n      // Updating basePath\n      if (\n        isFreeDrawing(object) &&\n        (object as ICanvasPathBrush).basePath?.type !== 'dashed'\n      ) {\n        const basePath = (object as ICanvasPathBrush).basePath;\n        (object as ICanvasPathBrush).set({\n          basePath: {\n            type: basePath?.type,\n            points: basePath?.points,\n            stroke: basePath?.stroke,\n            strokeWidth: lineWidth,\n          },\n        });\n      }\n\n      if (isUnique) {\n        const type = object.get('type');\n        const payload = {\n          type,\n          target,\n          id: object.id,\n        };\n\n        const event = { event: payload, type: 'lineWidthChanged' };\n\n        undoRedoDispatch({\n          type: SET,\n          payload: canvas?.getObjects() as TypedShape[],\n          canvasId: userId,\n          event: event as IUndoRedoEvent,\n        });\n      }\n    };\n\n    const changeLineWidth = async () => {\n      if (!canvas) return;\n\n      const selection = canvas.getActiveObject();\n\n      if (selection?.type === 'activeSelection') {\n        activeObjects = (selection as fabric.ActiveSelection)._objects;\n      } else {\n        activeObjects = canvas.getActiveObjects();\n      }\n\n      const isUniqueObject = activeObjects.length === 1;\n\n      if (!activeObjects) return;\n      canvas.discardActiveObject();\n\n      for (const object of activeObjects) {\n        canvas.discardActiveObject();\n\n        if (isCommonBrush(object)) {\n          commonBrushChange(object, isUniqueObject);\n        } else if (isCustomBrush(object as ICanvasBrush)) {\n          await customBrushChange(object as ICanvasBrush, isUniqueObject);\n        }\n      }\n\n      if (newActives.length === 1) {\n        canvas?.setActiveObject(newActives[0]);\n      } else if (newActives.length >= 2) {\n        const activesGroup = new fabric.ActiveSelection(newActives);\n        canvas?.setActiveObject(activesGroup);\n      }\n\n      canvas.renderAll();\n    };\n\n    if (!lineWidthIsActive) return;\n\n    changeLineWidth();\n\n    /* If commonBrushChange is added on dependencies\n    useEffect is loading more than the necesary times\n    and some issues are happening */\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [\n    lineWidth,\n    canvas,\n    undoRedoDispatch,\n    userId,\n    isCommonBrush,\n    isCustomBrush,\n    eventSerializer,\n  ]);\n};\n","import { fabric } from 'fabric';\nimport { useCallback, useContext, useEffect } from 'react';\nimport { CANVAS_OBJECT_PROPS } from '../../../config/undo-redo-values';\nimport { IUndoRedoEvent } from '../../../interfaces/canvas-events/undo-redo-event';\nimport { ICanvasObject } from '../../../interfaces/objects/canvas-object';\nimport { TypedGroup } from '../../../interfaces/shapes/group';\nimport { TypedShape } from '../../../interfaces/shapes/shapes';\nimport { CanvasAction, SET_GROUP } from '../reducers/undo-redo';\nimport { WhiteboardContext } from '../WhiteboardContext';\nimport { v4 as uuidv4 } from 'uuid';\nimport { IObjectOptions } from 'fabric/fabric-impl';\nimport { IUndoRedoSingleEvent } from '../../../interfaces/canvas-events/undo-redo-single-event';\n\n/**\n * Handles the logic for lineWidth, fontFamily and fontColor undo/redo actions\n * @param {fabric.Canvas} canvas - Canvas in which the action is made\n * @param {string} userId - User that will do the action\n * @param {(action: CanvasAction) => void} undoRedoDispatch - Dispatcher to save\n * the events to could make undo/redo over them.\n */\nexport const useUndoRedo = (\n  canvas: fabric.Canvas,\n  userId: string,\n  undoRedoDispatch: (action: CanvasAction) => void\n) => {\n  // Getting context variables\n  const { lineWidth, fontFamily, fontColor } = useContext(WhiteboardContext);\n\n  /**\n   * Maps the current objects in canvas to set the correct\n   * properties in activeSelection objects\n   */\n  const setMappedObjects = useCallback(\n    (events: IUndoRedoEvent[]) => {\n      return canvas?.getObjects().map((object: ICanvasObject) => {\n        /* If object doesn't belongs to an activeSelection\n        it's just passed directly for the filter */\n        if (!object.group) {\n          return object.toJSON(CANVAS_OBJECT_PROPS);\n        }\n\n        const matrix = object.calcTransformMatrix();\n        const options = fabric.util.qrDecompose(matrix);\n        const transformed = object.toJSON(CANVAS_OBJECT_PROPS);\n\n        // Getting correct top and left properties\n        let top =\n          Number(object.group.height) / 2 +\n          Number(object.top) +\n          Number(object.group.top);\n\n        let left =\n          Number(object.group.width) / 2 +\n          Number(object.left) +\n          Number(object.group.left);\n\n        // Setting correct top and left properties\n        events.forEach((event: IUndoRedoEvent) => {\n          const singleEvent = event.event as IUndoRedoSingleEvent;\n\n          if (singleEvent.id === object.id) {\n            singleEvent.target.top = top;\n            singleEvent.target.left = left;\n          }\n        });\n\n        return {\n          ...transformed,\n          top,\n          left,\n          scaleX: options.scaleX,\n          scaleY: options.scaleY,\n        };\n      });\n    },\n    [canvas]\n  );\n\n  // LineWidth Property undo/redo in group of objects\n  useEffect(() => {\n    if (lineWidth && canvas) {\n      const obj = canvas.getActiveObject() as ICanvasObject;\n      const type = obj?.get('type');\n\n      if (!obj || type !== 'activeSelection') return;\n\n      const activeIds: string[] = canvas\n        ?.getActiveObject()\n        // @ts-ignore - Typings are out of date, getObjects is the correct method to get objects in group.\n        .getObjects()\n        .map((o: TypedShape) => o.id);\n\n      const payload = {\n        type,\n        svg: true,\n        target: null,\n        id: `${userId}:group`,\n      };\n\n      const event = { event: payload, type: 'activeSelection', activeIds };\n\n      let filtered = canvas?.getObjects().filter((o: IObjectOptions) => {\n        return !o.group;\n      });\n\n      let active: TypedGroup = canvas?.getActiveObject() as TypedGroup;\n      active?.set({ id: `${userId}:group` });\n\n      undoRedoDispatch({\n        type: SET_GROUP,\n        payload: [...(filtered as any[]), active],\n        canvasId: userId,\n        event: (event as unknown) as IUndoRedoEvent,\n      });\n    }\n  }, [lineWidth, canvas, undoRedoDispatch, userId]);\n\n  // FontFamily Property undo/redo in group of objects\n  useEffect(() => {\n    if (fontFamily && canvas) {\n      const obj = canvas.getActiveObject() as ICanvasObject;\n      const type = obj?.get('type');\n      const target = { fontFamily };\n\n      if (type === 'activeSelection') {\n        let events: IUndoRedoEvent[] = [];\n        const eventId = uuidv4();\n\n        obj._objects?.forEach((object: ICanvasObject) => {\n          const payload = {\n            type,\n            target,\n            id: object.id,\n          };\n\n          const event = { event: payload, type: 'activeSelection', eventId };\n          events.push(event as IUndoRedoEvent);\n          object.set(target);\n        });\n\n        let mappedObjects = setMappedObjects(events);\n\n        undoRedoDispatch({\n          type: SET_GROUP,\n          payload: mappedObjects as TypedShape[],\n          canvasId: userId,\n          event: (events as unknown) as IUndoRedoEvent,\n        });\n      }\n    }\n  }, [canvas, fontFamily, setMappedObjects, undoRedoDispatch, userId]);\n\n  // FontColor Property undo/redo in group of objects\n  useEffect(() => {\n    if (fontColor && canvas) {\n      const object = canvas.getActiveObject() as ICanvasObject;\n      const type = object?.get('type');\n\n      if (type === 'activeSelection') {\n        const events: IUndoRedoEvent[] = [];\n        const eventId = uuidv4();\n\n        (object as fabric.ActiveSelection).forEachObject(\n          (obj: ICanvasObject) => {\n            const type = obj?.get('type');\n\n            if (type !== 'textbox') return;\n\n            const payload = {\n              type,\n              target: { fill: obj?.fill },\n              id: obj?.id,\n            };\n\n            const event = { event: payload, type: 'activeSelection', eventId };\n            events.push(event as IUndoRedoEvent);\n          }\n        );\n\n        let mappedObjects = setMappedObjects(events);\n\n        undoRedoDispatch({\n          type: SET_GROUP,\n          payload: mappedObjects as TypedShape[],\n          canvasId: userId,\n          event: (events as unknown) as IUndoRedoEvent,\n        });\n      }\n    }\n  }, [fontColor, canvas, undoRedoDispatch, userId, setMappedObjects]);\n};\n","import { useEffect } from 'react';\nimport { useSharedEventSerializer } from '../SharedEventSerializerProvider';\nimport { ICanvasObject } from '../../../interfaces/objects/canvas-object';\nimport { fabric } from 'fabric';\nimport { PenBrush } from '../brushes/classes/penBrush';\nimport { MarkerBrush } from '../brushes/classes/markerBrush';\nimport { PaintBrush } from '../brushes/classes/paintBrush';\nimport { ICoordinate } from '../../../interfaces/brushes/coordinate';\nimport { ICanvasPathBrush } from '../../../interfaces/brushes/canvas-path-brush';\nimport { IPenPoint } from '../../../interfaces/brushes/pen-point';\nimport { ICanvasBrush } from '../../../interfaces/brushes/canvas-brush';\nimport { isEmptyShape } from '../utils/shapes';\nimport { TypedShape } from '../../../interfaces/shapes/shapes';\nimport { shapePoints } from '../../../assets/shapes-points';\nimport { IShapePointsIndex } from '../../../interfaces/brushes/shape-points-index';\nimport { ICanvasShapeBrush } from '../../../interfaces/brushes/canvas-shape-brush';\n\nconst useSynchronizedBrushTypeChanged = (\n  canvas: fabric.Canvas | undefined,\n  userId: string,\n  shouldHandleRemoteEvent: (id: string) => boolean\n) => {\n  const {\n    state: { eventController },\n  } = useSharedEventSerializer();\n\n  // Handling remote events\n  useEffect(() => {\n    /**\n     * Add the given path in current canvas\n     * @param {ICanvasBrush} path - Path to add\n     * @param {ICanvasObject} oldPath - Previous path\n     * with properties to set in the new one\n     * @param {ICanvasBrush} target - received target from event\n     */\n    const addPathInCanvas = (\n      path: ICanvasObject,\n      oldPath: ICanvasObject,\n      target: ICanvasBrush\n    ) => {\n      (path as ICanvasObject).set({\n        id: (oldPath as ICanvasObject).id,\n        top: target.top,\n        left: target.left,\n        angle: oldPath.angle,\n        scaleX: oldPath.scaleX,\n        scaleY: oldPath.scaleY,\n        flipX: oldPath.flipX,\n        flipY: oldPath.flipY,\n        selectable: false,\n        evented: false,\n      });\n\n      delete (oldPath as ICanvasObject).id;\n      canvas?.remove(oldPath);\n      canvas?.add(path as ICanvasObject);\n    };\n\n    const brushTypeChanged = (\n      id: string,\n      target: ICanvasBrush,\n      isPersistent?: boolean\n    ) => {\n      if (!shouldHandleRemoteEvent(id) && !isPersistent) return;\n\n      canvas?.forEachObject(async (object: ICanvasObject) => {\n        if (object.id && object.id === id) {\n          let brush;\n          let newPath;\n          const basePath = target.basePath;\n          const type = basePath?.type;\n          let points = (basePath?.points as ICoordinate[]).map(\n            (point: ICoordinate) => {\n              return new fabric.Point(point.x, point.y);\n            }\n          );\n\n          if (\n            isEmptyShape(object as TypedShape) &&\n            !(object as ICanvasShapeBrush).basePath\n          ) {\n            const original =\n              shapePoints[object.name as keyof IShapePointsIndex];\n            points = original.points.map((point: ICoordinate) => {\n              let scaleX = (point.x / original.width) * Number(object.width);\n              let scaleY = (point.y / original.height) * Number(object.height);\n              return new fabric.Point(scaleX, scaleY);\n            });\n          }\n\n          switch (type) {\n            case 'dashed':\n            case 'pencil':\n              brush = new fabric.PencilBrush();\n              newPath = brush.createPath(\n                brush.convertPointsToSVGPath(points).join('')\n              );\n\n              ((newPath as ICanvasObject) as ICanvasPathBrush).set({\n                stroke: basePath?.stroke,\n                strokeWidth: basePath?.strokeWidth,\n                strokeUniform: true,\n                strokeDashArray:\n                  type === 'dashed' ? [Number(basePath?.strokeWidth) * 2] : [],\n                basePath: {\n                  type: type,\n                  points: basePath?.points || [],\n                  stroke: String(basePath?.stroke),\n                  strokeWidth: Number(basePath?.strokeWidth),\n                },\n              });\n              break;\n\n            case 'pen':\n              brush = new PenBrush(canvas, userId);\n\n              newPath = (brush as PenBrush).createPenPath(\n                String((object as ICanvasObject).id),\n                basePath?.points as IPenPoint[],\n                Number(basePath?.strokeWidth),\n                String(basePath?.stroke)\n              );\n              break;\n\n            case 'marker':\n            case 'felt':\n              brush = new MarkerBrush(canvas, userId, type);\n\n              newPath = (brush as MarkerBrush).createMarkerPath(\n                String((object as ICanvasObject).id),\n                points,\n                Number(basePath?.strokeWidth),\n                String(basePath?.stroke)\n              );\n              break;\n\n            case 'paintbrush':\n              brush = new PaintBrush(canvas, userId);\n\n              newPath = (brush as PaintBrush).modifyPaintBrushPath(\n                String((object as ICanvasObject).id),\n                points,\n                Number(basePath?.strokeWidth),\n                String(basePath?.stroke),\n                basePath?.bristles || []\n              );\n              break;\n\n            case 'chalk':\n            case 'crayon':\n              const imageSrc = String(target.basePath?.imageData);\n              await fabric.Image.fromURL(imageSrc, (data: fabric.Image) => {\n                newPath = data;\n\n                ((newPath as ICanvasObject) as ICanvasBrush).set({\n                  basePath: basePath,\n                });\n\n                addPathInCanvas(newPath as ICanvasObject, object, target);\n              });\n              break;\n          }\n\n          if (!newPath) return;\n\n          addPathInCanvas(newPath as ICanvasObject, object, target);\n        }\n      });\n\n      canvas?.renderAll();\n    };\n\n    eventController?.on('brushTypeChanged', brushTypeChanged);\n\n    return () => {\n      eventController?.removeListener('brushTypeChanged', brushTypeChanged);\n    };\n  }, [canvas, eventController, shouldHandleRemoteEvent, userId]);\n};\n\nexport default useSynchronizedBrushTypeChanged;\n","import { useContext, useEffect } from 'react';\nimport { WhiteboardContext } from '../WhiteboardContext';\nimport { useSharedEventSerializer } from '../SharedEventSerializerProvider';\nimport { ICanvasObject } from '../../../interfaces/objects/canvas-object';\nimport { ObjectEvent } from '../event-serializer/PaintEventSerializer';\nimport { IPermissions } from '../../../interfaces/permissions/permissions';\n\n/**\n * Handles the logic for pointer feature\n * @param {fabric.Canvas} canvas - Canvas in which pointer will change\n * @param {string} userId - Current user\n */\nexport const usePointerFeature = (\n  canvas: fabric.Canvas,\n  userId: string,\n  permissions: IPermissions\n) => {\n  const {\n    state: { eventSerializer },\n  } = useSharedEventSerializer();\n\n  const {\n    pointerEvents,\n    floodFillIsActive,\n    updatePointer,\n    setPointerEvents,\n    allToolbarIsEnabled,\n    findObjectById,\n  } = useContext(WhiteboardContext);\n\n  // Changes canvas defaultCursor to selected pointer or default cursor\n  useEffect(() => {\n    if (!canvas || floodFillIsActive) return;\n\n    if (pointerEvents) {\n      const pointer = findObjectById(`${userId}:cursor`);\n      canvas?.remove(pointer as fabric.Object);\n    }\n\n    canvas.defaultCursor = pointerEvents ? 'default' : 'none';\n  }, [canvas, findObjectById, floodFillIsActive, pointerEvents, userId]);\n\n  // Updates the involucrated states when permission is revoked\n  useEffect(() => {\n    if (canvas && !(permissions.cursorPointer || allToolbarIsEnabled)) {\n      const pointer = findObjectById(`${userId}:cursor`);\n\n      updatePointer('arrow');\n      setPointerEvents(true);\n      canvas.defaultCursor = 'default';\n      canvas.remove(pointer as fabric.Object);\n    }\n  }, [\n    allToolbarIsEnabled,\n    canvas,\n    findObjectById,\n    permissions.cursorPointer,\n    setPointerEvents,\n    updatePointer,\n    userId,\n  ]);\n\n  // Send an event to remove the current cursor when permission is revoked\n  useEffect(() => {\n    if (pointerEvents) {\n      const cursorId = `${userId}:cursor`;\n      const payload: ObjectEvent = {\n        type: 'cursorPointer',\n        target: { top: 0, left: 0, cursorPointer: 'none' } as ICanvasObject,\n        id: cursorId,\n      };\n\n      eventSerializer?.push('cursorPointer', payload);\n    }\n  }, [eventSerializer, pointerEvents, userId]);\n};\n","var img = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAATCAMAAACTKxybAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAASFBMVEUAAAAAAQ4CBRYBAhAAAA4BAhACBBUBAQ8BAhEAAQ8BAQ8BARADBRgBAhICBRf////09Pf4+fvw8PPo6Orh4eOztLzCwsnW1tie05h6AAAAD3RSTlMA5ze99LxN07TX0cwanjErspFPAAAAAWJLR0QPGLoA2QAAAAlwSFlzAAAAyAAAAMgAY/rnrQAAAAd0SU1FB+UBGhE7LewQxNAAAAABb3JOVAHPoneaAAAAEGNhTnYAAAAgAAAAIAAAAAAAAAAAYrnu+gAAAGNJREFUCNdNzlkOgCAMBNCyKOA2qCj3v6lllX7NyySTkpD0n1CDBAYJDGJA+QG9y2gqqKo4sypwJTXgZnUgqAzPA+kSvH4wzWXNa2kQTAZnsi9sqhRnkg5x6b/biLVjc/tB9AFp+gW83/IGegAAACV0RVh0ZGF0ZTpjcmVhdGUAMjAyMS0wMS0yNlQxNzo1OTo0NSswMDowMPC3OrIAAAAldEVYdGRhdGU6bW9kaWZ5ADIwMjEtMDEtMjZUMTc6NTk6NDQrMDA6MDAnnYm6AAAAAElFTkSuQmCC\";\n  export default img;","var img = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAAVCAQAAAAK9c1nAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAAmJLR0QA/4ePzL8AAAAJcEhZcwAAAMgAAADIAGP6560AAAAHdElNRQflARoROy51GZVqAAAAAW9yTlQBz6J3mgAAABBjYU52AAAAIAAAACAAAAAGAAAACOMik2gAAABNSURBVCjPvdExDgAgCANA/v/pilFRIlYHYlnPpILIDHRoUMPRd0JYJww6YtC2gZiMbvYiIg3hlPWPYLE+KYQ2uhC/wBwSoP1OLyQYTQHy0HCePatVlAAAACV0RVh0ZGF0ZTpjcmVhdGUAMjAyMS0wMS0yNlQxNzo1OTo0NSswMDowMPC3OrIAAAAldEVYdGRhdGU6bW9kaWZ5ADIwMjEtMDEtMjZUMTc6NTk6NDQrMDA6MDAnnYm6AAAAAElFTkSuQmCC\";\n  export default img;","var img = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAATCAQAAAA3m5V5AAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAAmJLR0QA/4ePzL8AAAAJcEhZcwAAAMgAAADIAGP6560AAAAHdElNRQflARoSAwJSGPsrAAAAAW9yTlQBz6J3mgAAABBjYU52AAAAIAAAACAAAAAIAAAAB8ytMJgAAAAdSURBVCjPY2BABf/BkAAYkYr+EwGpqGg0xIlRBACI2mWbGaZnQgAAACV0RVh0ZGF0ZTpjcmVhdGUAMjAyMS0wMS0yNlQxODowMzowMCswMDowMGfA8lEAAAAldEVYdGRhdGU6bW9kaWZ5ADIwMjEtMDEtMjZUMTg6MDE6NDkrMDA6MDADutH5AAAAAElFTkSuQmCC\";\n  export default img;","import { useCallback, useContext, useEffect } from 'react';\nimport { fabric } from 'fabric';\nimport CanvasEvent from '../../../interfaces/canvas-events/canvas-events';\nimport { ICanvasObject } from '../../../interfaces/objects/canvas-object';\nimport { ObjectEvent } from '../event-serializer/PaintEventSerializer';\nimport { useSharedEventSerializer } from '../SharedEventSerializerProvider';\nimport { WhiteboardContext } from '../WhiteboardContext';\nimport arrowPointer from '../../../assets/cursors/arrow-pointer.png';\nimport handPointer from '../../../assets/cursors/hand-pointer.png';\nimport crosshairPointer from '../../../assets/cursors/crosshair-pointer.png';\nimport { IPointerType } from '../../../interfaces/pointers/pointer-type';\n\ninterface IPointerTarget {\n  top: number;\n  left: number;\n  cursorPointer: IPointerType;\n}\n\n/**\n * Handles Cursor Pointer Events\n * @param {fabric.Canvas | undefined} canvas - Current Canvas\n * @param {string} userId - User that send the event\n * @param {(id: string) => boolean} shouldHandleRemoteEvent - Checks if\n * an event should be handled\n */\nconst useSynchronizedCursorPointer = (\n  canvas: fabric.Canvas | undefined,\n  userId: string,\n  shouldHandleRemoteEvent: (id: string) => boolean\n) => {\n  const { pointerEvents, pointer, findObjectById } = useContext(\n    WhiteboardContext\n  );\n\n  const {\n    state: { eventSerializer, eventController },\n  } = useSharedEventSerializer();\n\n  /**\n   * Creates an image of the current cursor to be rendered in remote canvases\n   * @param {string} id - Id to set in the image\n   * @param {number} top - Vertical position for the image\n   * @param {number} left - Horizontal position for the image\n   * @param {IPointerType} cursorPointer - Cursor pointer to render\n   */\n  const createCursor = useCallback(\n    async (\n      id: string,\n      top: number,\n      left: number,\n      cursorPointer: IPointerType\n    ) => {\n      let imagePath = getImagePath(cursorPointer);\n\n      return new Promise<void>((resolve) => {\n        fabric.Image.fromURL(imagePath as string, function (img) {\n          // Setting image's position\n          const objectImage: ICanvasObject = img.set({\n            left,\n            top,\n            evented: false,\n            selectable: false,\n          });\n\n          // Finding for an existing object with the same id\n          const existentPointer = findObjectById(id);\n\n          // If another object exists it will be removed\n          if (existentPointer) {\n            canvas?.remove(existentPointer);\n            canvas?.renderAll();\n          }\n\n          // Adding cursor on remote canvases\n          objectImage.set({ id, cursorPointer });\n          canvas?.add(objectImage);\n\n          resolve();\n        });\n      });\n    },\n    [canvas, findObjectById]\n  );\n\n  /**\n   * Returns the image path according with the given cursorPointer\n   * @param {IPointerType} cursorPointer - Cursor Pointer Type\n   * to get its image path\n   */\n  const getImagePath = (cursorPointer: IPointerType) => {\n    switch (cursorPointer) {\n      case 'arrow':\n        return arrowPointer;\n\n      case 'hand':\n        return handPointer;\n\n      case 'crosshair':\n        return crosshairPointer;\n    }\n  };\n\n  /**\n   * Renders the given cursor in the given point in the current canvas\n   * @param {number} top - Vertical position to render the pointer\n   * @param {number} left - Horizontal position to render the pointer\n   * @param {IPointerType} cursorPointer - Pointer type to render\n   * @param {string} cursorId - Id for the pointer object\n   */\n  const renderPointer = useCallback(\n    async (\n      top: number,\n      left: number,\n      cursorPointer: IPointerType,\n      cursorId: string\n    ) => {\n      const pointerImage = findObjectById(cursorId);\n\n      /*\n        If cursor pointer type is 'none', current pointer will be removed.\n        If a cursor pointer type occurs, current pointer will be removed.\n      */\n      if (\n        pointerImage &&\n        (cursorPointer === 'none' ||\n          pointerImage.cursorPointer !== cursorPointer)\n      ) {\n        canvas?.remove(pointerImage);\n        canvas?.renderAll();\n      }\n\n      /*\n        If the cursor already exists, just will be moved;\n        if not, will be created\n      */\n      if (pointerImage) {\n        pointerImage.set({ top, left });\n        canvas?.renderAll();\n      } else {\n        try {\n          await createCursor(cursorId, top, left, cursorPointer);\n        } catch (error) {\n          console.warn(error);\n        }\n      }\n    },\n    [canvas, createCursor, findObjectById]\n  );\n\n  /** Emits local event. */\n  useEffect(() => {\n    const id = `${userId}:cursor`;\n\n    /**\n     * Handles moving event for cursor pointer. Emits event to other users.\n     * @param {CanvasEvent} event - Canvas event.\n     */\n    const move = (event: CanvasEvent) => {\n      const top = (event.pointer as fabric.Point).y;\n      const left = (event.pointer as fabric.Point).x;\n\n      renderPointer(top, left, pointer, id);\n\n      const payload: ObjectEvent = {\n        type: 'cursorPointer',\n        target: { top, left, cursorPointer: pointer } as ICanvasObject,\n        id,\n      };\n\n      eventSerializer.push('cursorPointer', payload);\n    };\n\n    if (!pointerEvents) {\n      canvas?.on('mouse:move', move);\n    }\n\n    return () => {\n      canvas?.off('mouse:move', move);\n    };\n  }, [canvas, eventSerializer, pointer, pointerEvents, renderPointer, userId]);\n\n  /** Register and handle remote moved event. */\n  useEffect(() => {\n    /**\n     * Handles moving event for cursor pointer. Receives event.\n     * @param {string} id - User ID.\n     * Used for know who's send the event.\n     * @param {IPointerTarget} target - Properites for laser pointer.\n     */\n    const moved = async (id: string, target: IPointerTarget) => {\n      if (!shouldHandleRemoteEvent(id)) return;\n\n      const { top, left, cursorPointer } = target;\n\n      renderPointer(top, left, cursorPointer, id);\n    };\n\n    eventController?.on('cursorPointer', moved);\n\n    return () => {\n      eventController?.removeListener('cursorPointer', moved);\n    };\n  }, [eventController, renderPointer, shouldHandleRemoteEvent]);\n};\n\nexport default useSynchronizedCursorPointer;\n","import { useContext, useEffect } from 'react';\nimport { useSharedEventSerializer } from '../SharedEventSerializerProvider';\nimport { WhiteboardContext } from '../WhiteboardContext';\nimport { IWhiteboardContext } from '../../../interfaces/whiteboard-context/whiteboard-context';\n\n/**\n * Synchronize to remote canvases background color changes\n * @param shouldHandleRemoteEvent - Validator to know\n * if synchronization is needed\n */\nconst useSynchronizedBackgroundColorChanged = (\n  shouldHandleRemoteEvent: (id: string) => boolean\n) => {\n  const {\n    state: { eventController },\n  } = useSharedEventSerializer();\n\n  const { backgroundColor, setBackgroundColorInCanvas } = useContext(\n    WhiteboardContext\n  ) as IWhiteboardContext;\n\n  useEffect(() => {\n    const backgroundColorChanged = (id: string, target: string) => {\n      if (id && !shouldHandleRemoteEvent(id) && backgroundColor === target)\n        return;\n\n      setBackgroundColorInCanvas(target);\n    };\n\n    eventController?.on('backgroundColorChanged', backgroundColorChanged);\n\n    return () => {\n      eventController?.removeListener(\n        'backgroundColorChanged',\n        backgroundColorChanged\n      );\n    };\n  }, [\n    backgroundColor,\n    eventController,\n    setBackgroundColorInCanvas,\n    shouldHandleRemoteEvent,\n  ]);\n};\n\nexport default useSynchronizedBackgroundColorChanged;\n","import { CANVAS_OBJECT_PROPS } from '../../../config/undo-redo-values';\nimport { ICanvasObject } from '../../../interfaces/objects/canvas-object';\nimport { requiredEllipseProps, requiredPencilDashedProps, requiredProps } from '../canvas-actions/shapeProps';\nimport { ObjectEvent, ObjectType } from '../event-serializer/PaintEventSerializer';\n\n/**\n * Customizes payload for shape or object.\n * @param shape Canvas shape or object\n * @param target Custom props to emit\n * @param type Shape type\n * @param id Object Id.\n */\nconst formatShape = (shape: ICanvasObject, target: { [key: string]: any }, type: string | undefined, id: string | undefined) => {\n  requiredProps.forEach((prop: string) => {\n    if (shape && (shape as any)[prop]) {\n      target = { ...target, [prop]: (shape as any)[prop] };\n    }\n  });\n\n  return {\n    type,\n    target,\n    id,\n  };\n};\n\n/**\n * Customizes payload for shape or object.\n * @param shape Canvas shape or object\n * @param target Custom props to emit\n * @param type Shape type\n * @param id Object Id.\n */\nconst formatEllipse = (shape: ICanvasObject, target: { [key: string]: any }, type: string | undefined, id: string | undefined) => {\n  requiredEllipseProps.forEach((prop: string) => {\n    if (shape && (shape as any)[prop]) {\n      target = { ...target, [prop]: (shape as any)[prop] };\n    }\n  });\n\n  return {\n    type,\n    target,\n    id,\n  };\n}\n\n/**\n * Customizes payload for shape or object.\n * @param shape Canvas shape or object\n * @param target Custom props to emit\n * @param type Shape type\n * @param id Object Id.\n */\nconst formatNonStandardBrush = (shape: ICanvasObject, target: { [key: string]: any }, type: string | undefined, id: string | undefined) => {\n  requiredPencilDashedProps.forEach((prop: string) => {\n    if (shape && (shape as any)[prop]) {\n      target = { ...target, [prop]: (shape as any)[prop] };\n    }\n  });\n\n  return {\n    type,\n    target,\n    id,\n  };\n}\n\n/**\n * Formats payload for a cloned object for real time features.\n * @param shape Shape or object that is being cloned\n * @param brushType Brush type used for object\n * @param id Object id.\n */\nexport const objectSerializerFormatter = (shape: ICanvasObject, brushType: string, id?: string, fromGroup?: boolean) => {\n  const type: ObjectType = (shape.get('type') || 'path') as ObjectType;\n\n  if (shape.shapeType === 'shape') {\n    let type = shape.type;\n    let target = {\n      type,\n      id: id ? id : shape.id,\n    };\n    if (brushType !== 'pencil' && brushType !== 'dashed') {\n      return formatNonStandardBrush(shape, target, type, id);\n    } else {\n      if (type !== 'ellipse') {\n        return formatShape(shape, target, type, id);\n      } else {\n        return formatEllipse(shape, target, type, id);\n      }\n    }\n  } else {\n    let target = shape;\n\n    const payload: ObjectEvent = {\n      type,\n      target: {\n        ...target.toJSON(CANVAS_OBJECT_PROPS),\n        top: !fromGroup ? 0 : target.top,\n        left: !fromGroup ? 0 : target.left,\n        originX: 'left',\n        originY: 'top',\n      } as ICanvasObject,\n      id: id ? id : shape.id as string,\n    };\n\n    return payload;\n  }\n}\n","import { useEffect } from \"react\";\nimport { fabric } from 'fabric';\nimport { ICanvasKeyboardEvent } from \"../../../interfaces/canvas-events/canvas-keyboard-event\";\nimport { ICanvasObject } from \"../../../interfaces/objects/canvas-object\";\nimport { IPermissions } from \"../../../interfaces/permissions/permissions\";\nimport { v4 as uuidv4 } from 'uuid';\nimport store from '../redux/store';\nimport { IUndoRedoEvent } from \"../../../interfaces/canvas-events/undo-redo-event\";\nimport { TypedShape } from \"../../../interfaces/shapes/shapes\";\nimport { SET } from \"../reducers/undo-redo\";\nimport { CANVAS_OBJECT_PROPS } from \"../../../config/undo-redo-values\";\nimport { objectSerializerFormatter } from \"../utils/objectSerializerFormatter\";\nimport { ELEMENTS } from \"../../../config/toolbar-element-names\";\nimport { ICanvasBrush } from \"../../../interfaces/brushes/canvas-brush\";\nimport { ObjectEvent } from \"../event-serializer/PaintEventSerializer\";\n\n/**\n * Handles copy past functionality\n * @param canvas \n * @param userId \n * @param permissions \n * @param allToolbarIsEnabled \n * @param undoRedoDispatch \n * @param eventSerializer \n * @param activeTool \n */\nexport const useCopy = (\n  canvas: fabric.Canvas,\n  userId: string,\n  allToolbarIsEnabled: boolean,\n  undoRedoDispatch: any,\n  eventSerializer: any,\n  activeTool: string | null\n) => {\n\n  /**\n   * \n   * @param permissions \n   * @param shape \n   */\n  const checkPermission = (permissions: IPermissions, shape: ICanvasObject) => {\n    if (shape.shapeType === 'shape') {\n      return permissions.shape;\n    }\n\n    if (shape.type === 'path') {\n      return permissions.pen;\n    }\n\n    if (shape.type === 'image') {\n      return permissions.uploadImage;\n    }\n\n    if (shape.type === 'textbox') {\n      return permissions.text;\n    }\n  }\n\n  const copyGroup = (clipboard: fabric.Group, permissions: IPermissions): Promise<string[]> => (new Promise((resolve) => {\n    let ids: string[] = [];\n    clipboard.forEachObject((obj: ICanvasObject) => {\n      const allowed = checkPermission(permissions, obj);\n\n      if (allowed || allToolbarIsEnabled) {\n        const id = `${userId}:${uuidv4()}`;\n        obj.set({\n          active: true,\n          id,\n        });\n        ids.push(id);\n        canvas.add(obj)\n      };\n    });\n\n    resolve(ids);\n  }));\n\n  let copied: ICanvasObject | null = null;\n  let target: ICanvasObject | null = null;\n  let unevented: ICanvasObject[] = [];\n  let clipboard: fabric.Group | null;\n\n  const keyDownHandler = async (e: KeyboardEvent) => {\n    const event = e as ICanvasKeyboardEvent;\n    if (event.ctrlKey && event.key === 'c') {\n      if((canvas.getActiveObject() as fabric.Group)?._objects?.length) {\n        canvas.getActiveObject().clone((cloneGroup: fabric.Group) => {\n        \tclipboard = cloneGroup;\n          copied = null;\n        }, CANVAS_OBJECT_PROPS);\n      } else {\n        canvas?.getActiveObject()?.clone((cloned: ICanvasObject) => {\n          cloned.set({\n            top: 0,\n            left: 0,\n            id: `${userId}:${uuidv4()}`\n          });\n\n          copied = cloned;\n          clipboard = null;\n        }, CANVAS_OBJECT_PROPS);\n      }\n    }\n\n    let permissions = store.getState().permissionsState;\n\n    if (event.ctrlKey && event.key === 'v' && copied) {\n      let allowed = checkPermission(permissions, copied);\n\n      if (allToolbarIsEnabled || allowed) {\n        canvas?.add(copied);\n        canvas?.renderAll();\n\n        const payload = objectSerializerFormatter(copied, (copied as ICanvasBrush).basePath?.type as string, copied.id);\n        const event = { event: payload, type: 'added' } as IUndoRedoEvent;\n\n        undoRedoDispatch({\n          type: SET,\n          payload: (canvas?.getObjects() as unknown) as TypedShape[],\n          canvasId: userId,\n          event,\n        });\n\n        eventSerializer?.push('added', payload);\n\n        return;\n      }\n    } else if (event.ctrlKey && event.key === 'v' && clipboard) {\n      clipboard.set({\n        left: 0,\n        top: 0,\n        evented: true\n      });\n\n      let ids = await copyGroup(clipboard, permissions);\n      clipboard.destroy();\n      canvas.discardActiveObject();\n\n      let objects = canvas.getObjects().filter((o: ICanvasObject) => (\n        ids.indexOf(o.id as string) !== -1\n      ));\n\n      let payloads: ObjectEvent [] = [];\n\n      objects.forEach((copied: ICanvasObject) => {\n        const payload = objectSerializerFormatter(copied, (copied as ICanvasBrush).basePath?.type as string, copied.id, true);\n        payloads.push(payload as ObjectEvent);\n        eventSerializer?.push('added', payload);\n      });\n\n      const event = { event: payloads, type: 'added' };\n\n      undoRedoDispatch({\n        type: SET,\n        payload: (canvas?.getObjects() as unknown) as TypedShape[],\n        canvasId: userId,\n        event,\n      });\n\n    }\n  };\n\n  const mouseDown = (e: fabric.IEvent) => {\n    canvas.getObjects().forEach((o: ICanvasObject) => {\n      if (!o.evented) {\n        o.set({\n          evented: true,\n          lockMovementX: true,\n          lockMovementY: true,\n          lockScalingX: true,\n          lockScalingY: true,\n          lockRotation: true,\n        });\n        unevented.push(o);\n      }\n    });\n\n    // @ts-ignore findTarget expects a point, not Event.\n    target = canvas.findTarget(e.pointer, false);\n\n    if (target) {\n      canvas.setActiveObject(target);\n      canvas.renderAll();\n    }\n  };\n\n  const deactivateOther = () => {\n    unevented.forEach((o: ICanvasObject) => {\n      o.set({\n        evented: false,\n        lockMovementX: false,\n        lockMovementY: false,\n        lockScalingX: false,\n        lockScalingY: false,\n        lockRotation: false,\n      });\n    });\n\n    unevented = [];\n  };\n\n  useEffect(() => {\n    if (!canvas) return;\n\n    if (activeTool === ELEMENTS.MOVE_OBJECTS_TOOL) {\n      document.addEventListener('keydown', keyDownHandler, false);\n\n      if (allToolbarIsEnabled) {\n        canvas?.on('mouse:down:before', mouseDown);\n      }\n    }\n\n    return () => {\n      document.removeEventListener('keydown', keyDownHandler);\n\n      if (allToolbarIsEnabled) {\n        canvas?.off('mouse:down:before', mouseDown);\n      }\n\n      if (activeTool !== ELEMENTS.MOVE_OBJECTS_TOOL && unevented.length) {\n        deactivateOther();\n        canvas.discardActiveObject();\n      }\n    };\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [canvas, activeTool]);\n};\n","import { useContext, useEffect } from 'react';\nimport { WhiteboardContext } from '../WhiteboardContext';\n\nexport const useStampFeature = () => {\n  const {\n    stampIsActive,\n    openStampModal,\n    updateStampIsActive,\n    stamp,\n  } = useContext(WhiteboardContext);\n\n  /**\n   * Checks stampIsActive to show the assignation stamp modal\n   */\n  useEffect(() => {\n    if (stampIsActive && stamp) {\n      openStampModal();\n\n      updateStampIsActive(false);\n    }\n  }, [openStampModal, stamp, stampIsActive, updateStampIsActive]);\n};\n","import { useCallback, useContext, useEffect, useState } from 'react';\nimport { useSharedEventSerializer } from '../SharedEventSerializerProvider';\nimport goodStamp from '../../../assets/icons/toolbar/good-stamp.png';\nimport wellDoneStamp from '../../../assets/icons/toolbar/well-done-stamp.png';\nimport excellentStamp from '../../../assets/icons/toolbar/excellent-stamp.png';\nimport { fabric } from 'fabric';\nimport { ICanvasObject } from '../../../interfaces/objects/canvas-object';\nimport store from '../redux/store';\nimport { WhiteboardContext } from '../WhiteboardContext';\nimport { IStampSyncTarget } from '../../../interfaces/stamps/stamp-sync-target';\nimport { IUtilAminEaseFunction } from 'fabric/fabric-impl';\nimport { v4 as uuidv4 } from 'uuid';\nimport { ADD_STAMP } from '../redux/actions';\nimport { IPortfolio } from '../../../interfaces/portfolio/portfolio';\nimport { IUser } from '../../../interfaces/user/user'\n\nconst useSynchronizedSendStamp = (\n  canvas: fabric.Canvas | undefined,\n  userId: string,\n  shouldHandleRemoteEvent: (id: string) => boolean\n) => {\n  const {\n    state: { eventSerializer, eventController },\n  } = useSharedEventSerializer();\n\n  const {\n    stampAssignedStudents,\n    stamp,\n    stampMode,\n    updateStampAssignedStudents,\n  } = useContext(WhiteboardContext);\n\n  /**\n   * Durations for each stage of the animation\n   */\n  const animationDurations = {\n    growing: 1000,\n    staying: 3000,\n    reducing: 500,\n    afterShowing: 500,\n    stampGap: 500,\n  };\n\n  /**\n   * Duration of the complete animation\n   */\n  const totalDuration =\n    animationDurations.growing +\n    animationDurations.staying +\n    animationDurations.reducing +\n    animationDurations.afterShowing +\n    animationDurations.stampGap;\n\n  const stampWidth = 50;\n  const stampHeight = 50;\n\n  // State for register the time in that the animation started\n  const [startTime, setStartTime] = useState<Date | null>(null);\n\n  /**\n   * Checks the received stamp and find its image src\n   * @param stamp - Stamp to find\n   */\n  const getStampURLImage = (stamp: string) => {\n    switch (stamp) {\n      case 'good':\n        return goodStamp;\n\n      case 'wellDone':\n        return wellDoneStamp;\n\n      case 'excellent':\n        return excellentStamp;\n    }\n  };\n\n  /**\n   * Checks the current stamp objects to set the position of the next stamp\n   */\n  const determineStampPosition = useCallback(\n    (stampWidth: number, stampHeight: number, stampQuantity: number) => {\n      let top;\n      let left;\n      const canvasWidth = Number(canvas?.width);\n      const canvasHeight = Number(canvas?.height);\n      const stampsInRow = Math.floor(Number(canvas?.width) / (stampWidth + 10));\n      const stampsInColumn = Math.floor(Number(canvas?.height) / stampHeight);\n\n      if (stampQuantity <= stampsInRow * stampsInColumn) {\n        top = Math.floor(stampQuantity / stampsInRow) * stampHeight + 10;\n        left =\n          canvasWidth -\n          (stampQuantity % stampsInRow) * (stampWidth + 10) -\n          (stampWidth + 10);\n      } else {\n        top = canvasHeight - stampHeight;\n        left = canvasHeight - (stampWidth + 10);\n      }\n\n      return {\n        top,\n        left,\n      };\n    },\n    [canvas]\n  );\n\n  /**\n   * Animates the received object\n   * @param object - Object to animate\n   * @param valuesToChange - Properties and values to change in the object\n   * @param duration - Animation duration in milliseconds\n   * @param easeEffect - Effect to run the animation\n   * @param onComplete - Callback to execute once the animation is finished\n   */\n  const animateObject = useCallback(\n    (\n      object: fabric.Object,\n      valuesToChange: { [key: string]: string | number },\n      duration: number,\n      easeEffect: IUtilAminEaseFunction,\n      onComplete?: () => void\n    ) => {\n      object.animate(valuesToChange, {\n        duration: duration,\n        easing: easeEffect,\n        onChange: canvas?.renderAll.bind(canvas),\n        onComplete: onComplete,\n      });\n    },\n    [canvas]\n  );\n\n  /**\n   * Checks if an stamp with the given id already exists in the whiteboard\n   * @param id - Id to find the stamp\n   */\n  const stampAlreadyExists = useCallback(\n    (id: string) => {\n      return !!canvas?.getObjects().find((obj: ICanvasObject) => {\n        return obj.id === id;\n      });\n    },\n    [canvas]\n  );\n\n  /**\n   * Gets the current stamps quantity for the given student\n   * @param studentId - Id of the student to find the stamps\n   */\n  const getStampsCountByStudentId = useCallback((studentId: string) => {\n    const stampCount = (store.getState().potfolioReducer as IPortfolio[])\n      .find((portfolio) => portfolio.studentId === studentId)\n      ?.studentStamps.map((stamp) => stamp.quantity)\n      .reduce((accumulator, value) => accumulator + value, 0);\n\n    return Number(stampCount);\n  }, []);\n\n  /**\n   * Adds a stamp when it comes from persistent events,\n   * basically omits the animation and directly this added\n   * on the whiteboard's corner.\n   * @param stampId - Id to assign to the stamp.\n   * @param assignTo - Id of the student to assign the stamp.\n   * @param currentStampCount - Current stamps quantity for the given student.\n   * @param image - Image Object for the stamp.\n   */\n  const addPersistentEventStamp = useCallback(\n    (\n      stampId: string,\n      assignTo: string,\n      currentStampCount: number,\n      image: fabric.Image\n    ) => {\n      if (stampAlreadyExists(stampId) || !canvas || assignTo !== userId) return;\n      const { top, left } = determineStampPosition(\n        stampWidth,\n        stampHeight,\n        currentStampCount\n      );\n\n      (image as ICanvasObject).set({\n        id: stampId,\n        top,\n        left,\n        originX: 'left',\n        originY: 'top',\n        scaleX: stampWidth / Number(image.width),\n        scaleY: stampHeight / Number(image.height),\n      });\n\n      canvas.add(image);\n      canvas.renderAll();\n\n      store.dispatch({\n        type: ADD_STAMP,\n        payload: { studentId: assignTo, stamp },\n      });\n    },\n    [canvas, determineStampPosition, stamp, stampAlreadyExists, userId]\n  );\n\n  // Handling remote. Receives the event.\n  useEffect(() => {\n    /**\n     * Handler for sendStamp event\n     * @param id - user id of the user that sent the stamp\n     * @param target - Object with data for render the stamp\n     * @param isPersistent - Flag to know if this event\n     * comes from persistent events or not\n     */\n    const showStamp = (\n      id: string,\n      target: IStampSyncTarget,\n      isPersistent: boolean\n    ) => {\n      const { stampId, stamp, assignTo, stampMode } = target;\n\n      // If teacher receives event ignore it\n      if (!shouldHandleRemoteEvent(id)) return;\n\n      /**\n       * If current user is not the assigned\n       * and stamp mode is student, ignore it\n       */\n      if (userId !== assignTo && stampMode === 'student') return;\n\n      // Getting image URL of the received stamp\n      const imageURL = getStampURLImage(stamp);\n\n      if (!imageURL) return;\n\n      fabric.Image.fromURL(imageURL, (image) => {\n        try {\n          if (!canvas) return;\n\n          const currentStampCount = getStampsCountByStudentId(assignTo);\n\n          if (isPersistent) {\n            addPersistentEventStamp(\n              stampId,\n              assignTo,\n              currentStampCount,\n              image\n            );\n\n            return;\n          }\n\n          let presentText: fabric.IText | null = null;\n          const canvasWidth = Number(canvas?.width);\n          const canvasHeight = Number(canvas?.height);\n\n          // Setting properties for the created stamp\n          ((image as fabric.Object) as ICanvasObject).set({\n            top: canvasHeight / 2 - stampHeight / 2,\n            left: canvasWidth / 2 - stampWidth / 2,\n            scaleX: stampWidth / canvasWidth,\n            scaleY: stampHeight / canvasHeight,\n            originX: 'center',\n            originY: 'center',\n            selectable: false,\n            evented: false,\n            lockMovementX: true,\n            lockMovementY: true,\n            stampObject: true,\n          });\n\n          canvas?.add(image);\n\n          if (stampMode === 'present' && userId !== assignTo) {\n            // Getting the name of the assigned user\n            const assignedUser = (store.getState().usersState as IUser[]).find((student) => {\n              return student.id === assignTo;\n            });\n\n            // Message for present in presentText\n            const presentMessage = `Stamp for ${assignedUser?.name}`;\n\n            // Setting the properties for render the presentText\n            presentText = new fabric.IText(presentMessage, {\n              fontFamily: 'Crayon',\n              top: canvasHeight / 2 - stampHeight / 2,\n              left: canvasWidth / 2 - stampWidth / 2,\n              fill: '#444444',\n              textAlign: 'center',\n              scaleX: stampWidth / canvasWidth,\n              scaleY: stampHeight / canvasHeight,\n              originX: 'center',\n              originY: 'center',\n              selectable: false,\n              evented: false,\n              lockMovementX: true,\n              lockMovementY: true,\n            });\n\n            (presentText as ICanvasObject).set({\n              stampObject: true,\n            });\n\n            canvas.add(presentText);\n          }\n\n          canvas?.renderAll();\n\n          /**\n           * Decides which after showing animation will do\n           * according with the current stamp state\n           */\n          const afterShowingAction = () => {\n            if (assignTo === userId) {\n              moveToCorner();\n            } else {\n              removeStamp();\n            }\n          };\n\n          /**\n           * After showing animation for the stamp\n           * when this stamp is for the current user\n           */\n          const moveToCorner = () => {\n            const { top, left } = determineStampPosition(\n              stampWidth,\n              stampHeight,\n              currentStampCount\n            );\n\n            const valuesToChange = { top, left };\n            const duration = animationDurations.afterShowing;\n            const easeEffect = fabric.util.ease.easeInQuad;\n\n            (image as ICanvasObject).set({\n              id: stampId,\n              originX: 'left',\n              originY: 'top',\n            });\n\n            animateObject(image, valuesToChange, duration, easeEffect);\n\n            if (presentText) {\n              canvas.remove(presentText);\n            }\n\n            store.dispatch({\n              type: ADD_STAMP,\n              payload: { studentId: assignTo, stamp },\n            });\n          };\n\n          /**\n           * After showing animation for stamp and presentText\n           * when this stamp is not for the current user\n           */\n          const removeStamp = () => {\n            const valuesToChange = { scaleX: 0, scaleY: 0 };\n            const duration = animationDurations.afterShowing;\n            const easeEffectStamp = fabric.util.ease.easeInQuad;\n            const easeEffectText = fabric.util.ease.easeInQuad;\n\n            const onCompleteStamp = () => {\n              canvas.remove(image);\n              canvas.renderAll();\n            };\n\n            const onCompleteText = () => {\n              if (!presentText) return;\n\n              canvas.remove(presentText);\n              canvas.renderAll();\n            };\n\n            animateObject(\n              image,\n              valuesToChange,\n              duration,\n              easeEffectStamp,\n              onCompleteStamp\n            );\n\n            if (!presentText) return;\n\n            animateObject(\n              presentText,\n              valuesToChange,\n              duration,\n              easeEffectText,\n              onCompleteText\n            );\n          };\n\n          /**\n           * Reducing animation for stamp and presentText\n           */\n          const reduce = () => {\n            const scaleX = stampWidth / Number(image.width);\n            const scaleY = stampHeight / Number(image.height);\n            const valuesToChangeStamp = { scaleX, scaleY };\n            const valuesToChangeText = { scaleX: 0.5, scaleY: 0.5 };\n            const duration = animationDurations.reducing;\n            const easeEffect = fabric.util.ease.easeInQuad;\n            const onComplete = afterShowingAction;\n\n            window.setTimeout(() => {\n              animateObject(\n                image,\n                valuesToChangeStamp,\n                duration,\n                easeEffect,\n                onComplete\n              );\n\n              if (!presentText) return;\n\n              animateObject(\n                presentText,\n                valuesToChangeText,\n                duration,\n                easeEffect,\n                onComplete\n              );\n            }, animationDurations.staying);\n          };\n\n          /**\n           * Growing animation for stamp and presentText\n           */\n          const growing = () => {\n            const valuesToChange = { scaleX: 2, scaleY: 2 };\n            const duration = animationDurations.growing;\n            const easeEffect = fabric.util.ease.easeInQuad;\n            const onComplete = reduce;\n\n            animateObject(\n              image,\n              valuesToChange,\n              duration,\n              easeEffect,\n              onComplete\n            );\n\n            if (!presentText) return;\n\n            animateObject(\n              presentText,\n              valuesToChange,\n              duration,\n              easeEffect,\n              onComplete\n            );\n          };\n\n          growing();\n        } catch (error) {\n          console.error(error);\n        }\n      });\n    };\n\n    eventController?.on('sendStamp', showStamp);\n\n    return () => {\n      eventController?.removeListener('sendStamp', showStamp);\n    };\n  }, [\n    addPersistentEventStamp,\n    animateObject,\n    animationDurations.afterShowing,\n    animationDurations.growing,\n    animationDurations.reducing,\n    animationDurations.staying,\n    canvas,\n    determineStampPosition,\n    eventController,\n    getStampsCountByStudentId,\n    shouldHandleRemoteEvent,\n    userId,\n  ]);\n\n  // Handling local. Send the event\n  useEffect(() => {\n    if (stampAssignedStudents.length) {\n      /**\n       * Checks if is necessary wait for send the next stamp event or not\n       * @param index - Current stamp assigned students array index\n       */\n      const determineTimeout = (index: number) => {\n        return !index || stampMode === 'student' ? 0 : totalDuration;\n      };\n\n      // Taking the current time\n      const currentTime = new Date();\n      let timeLeft = 0;\n\n      if (startTime) {\n        // Calculating timeElapsed since current animation start to now\n        const timeElapsed = currentTime.getTime() - startTime.getTime();\n\n        // Calculating time left to finish current animation\n        if (stampMode === 'present') {\n          timeLeft = stampAssignedStudents.length * totalDuration - timeElapsed;\n        } else {\n          timeLeft = totalDuration - timeElapsed;\n        }\n      }\n\n      // Timeout for wait the end of the current animation\n      setTimeout(() => {\n        setStartTime(new Date());\n\n        // Iterates over all the students that will recieve a stamp\n        stampAssignedStudents.forEach((studentId, index) => {\n          // Timeout to show stamps in a properly ordered way\n          setTimeout(() => {\n            const payload = {\n              id: `${userId}:stamp`,\n              target: {\n                stampId: `${userId}:${uuidv4()}`,\n                stamp,\n                assignTo: studentId,\n                stampMode: stampMode,\n              },\n            };\n\n            eventSerializer.push('sendStamp', payload);\n          }, determineTimeout(index));\n        });\n      }, timeLeft);\n\n      updateStampAssignedStudents([]);\n    }\n  }, [\n    eventSerializer,\n    stamp,\n    stampAssignedStudents,\n    stampMode,\n    startTime,\n    totalDuration,\n    updateStampAssignedStudents,\n    userId,\n  ]);\n};\n\nexport default useSynchronizedSendStamp;\n","import { useContext, useEffect } from 'react';\nimport { fabric } from 'fabric';\nimport { UserInfoTooltip } from '../brushes/classes/userInfoTooltip';\nimport { ICanvasObject } from '../../../interfaces/objects/canvas-object';\nimport { WhiteboardContext } from '../WhiteboardContext';\nimport { DEFAULT_VALUES } from '../../../config/toolbar-default-values';\n/**\n * Handles logic for showing user info on object hover\n * @param {fabric.Canvas} canvas - Canvas to draw\n * @param {string} displayUserInfo - display option\n */\nexport const useObjectHover = (\n  canvas: fabric.Canvas,\n  displayUserInfo: string\n) => {\n  /**\n   * Initializing the tooltip and tooltip group\n   */\n  let tooltipShapesGroup: fabric.Group;\n  const tooltip = UserInfoTooltip.createInstance(displayUserInfo);\n\n  // Getting necessary context variables\n  const { selectedTool } = useContext(WhiteboardContext);\n\n  /**\n   * Get tooltip and add it to the canvas\n   * @param {fabric.Object} hoveredObject - hovered object\n   */\n  const showTooltip = (hoveredObject: fabric.Object) => {\n    if (\n      !tooltip ||\n      !hoveredObject.hasOwnProperty('id') ||\n      (tooltip.hasTheSameObject(hoveredObject) &&\n        tooltip.hasTheSameSelectedType(displayUserInfo))\n    ) {\n      return;\n    }\n    hideTooltip();\n    tooltipShapesGroup = tooltip.getDrawing(hoveredObject, displayUserInfo);\n    canvas.add(tooltipShapesGroup);\n  };\n\n  /**\n   * Remove tooltip from canvas and unlink it from the object\n   */\n  const hideTooltip = () => {\n    const canvasObjects = canvas.getObjects();\n    if (tooltip && tooltip.isShown()) {\n      tooltip.reset();\n    }\n    for (let x = 0; x < canvasObjects.length; x++) {\n      if (\n        canvasObjects[x].hasOwnProperty('id') &&\n        (canvasObjects[x] as ICanvasObject).id === 'tooltip'\n      )\n        canvas.remove(canvasObjects[x]);\n    }\n  };\n\n  /**\n   * Check if pointer is hovering some fabric canvas object\n   * @param {fabric.Ievent} e - fabric event\n   */\n  const checkIfIsHoverSomeObject = (e: fabric.IEvent) => {\n    if (!e.pointer || selectedTool !== DEFAULT_VALUES.SELECTED_TOOL) {\n      hideTooltip();\n      return;\n    }\n    const { pointer } = e;\n    const canvasObjects = canvas.getObjects();\n    const canvasObject = canvasObjects.find((obj) =>\n      obj.containsPoint(pointer)\n    );\n\n    if (canvasObject) showTooltip(canvasObject);\n    else hideTooltip();\n  };\n\n  const eventHandler = function (e: fabric.IEvent) {\n    checkIfIsHoverSomeObject(e);\n  };\n\n  /**\n   * Activate hover tooltip.\n   */\n  useEffect(() => {\n    if (canvas && displayUserInfo !== 'none') {\n      canvas.on('mouse:move', eventHandler);\n    }\n    return () => {\n      canvas?.off('mouse:move', eventHandler);\n    };\n  });\n};\n","import { fabric } from 'fabric';\nimport React, {\n  CSSProperties,\n  FunctionComponent,\n  ReactChild,\n  ReactChildren,\n  useCallback,\n  useContext,\n  useEffect,\n  useState,\n} from 'react';\nimport { connect } from 'react-redux';\nimport { WhiteboardContext } from './WhiteboardContext';\nimport { useCanvasActions } from './canvas-actions/useCanvasActions';\nimport useSynchronizedAdded from './synchronization-hooks/useSynchronizedAdded';\nimport useSynchronizedMoved from './synchronization-hooks/useSynchronizedMoved';\nimport '../../assets/style/whiteboard.css';\nimport { UndoRedo } from './hooks/useUndoRedoEffect';\nimport useSynchronizedColorChanged from './synchronization-hooks/useSynchronizedColorChanged';\nimport useSynchronizedFontFamilyChanged from './synchronization-hooks/useSynchronizedFontFamilyChanged';\nimport useSynchronizedRemoved from './synchronization-hooks/useSynchronizedRemoved';\nimport useSynchronizedRotated from './synchronization-hooks/useSynchronizedRotated';\nimport useSynchronizedScaled from './synchronization-hooks/useSynchronizedScaled';\nimport useSynchronizedSkewed from './synchronization-hooks/useSynchronizedSkewed';\nimport useSynchronizedReconstruct from './synchronization-hooks/useSynchronizedReconstruct';\nimport useSynchronizedPointer from './synchronization-hooks/useSynchronizedPointer';\nimport useSynchronizedSetToolbarPermissions from './synchronization-hooks/useSynchronizedSetToolbarPermissions';\nimport useSynchronizedFontColorChanged from './synchronization-hooks/useSynchronizedFontColorChanged';\nimport useSynchronizedRealtime from './synchronization-hooks/useSynchronizedMovingRealtime';\nimport { IWhiteboardContext } from '../../interfaces/whiteboard-context/whiteboard-context';\nimport { IClearWhiteboardPermissions } from '../../interfaces/canvas-events/clear-whiteboard-permissions';\nimport useSynchronizedLineWidthChanged from './synchronization-hooks/useSynchronizedLineWidthChanged';\nimport useSynchronizedModified from './synchronization-hooks/useSynchronizedModified';\nimport useFixedAspectScaling, {\n  ScaleMode,\n} from './utils/useFixedAspectScaling';\nimport { CanvasDownloadConfirm } from '../../modals/canvas-download/canvasDownload';\nimport { useSetCanvas } from './canvas-features/useSetCanvas';\nimport { useObjectManipulation } from './canvas-features/useObjectManipulation';\nimport { useFreeHandDrawing } from './canvas-features/useFreeHandDrawing';\nimport { useShapeFeature } from './canvas-features/useShapeFeature';\nimport { useFloodFill } from './canvas-features/useFloodFill';\nimport { useObjectSelection } from './canvas-features/useObjectSelection';\nimport { useTextObject } from './canvas-features/useTextObject';\nimport { useAddImage } from './canvas-features/useAddImage';\nimport { useChangeLineWidth } from './canvas-features/useChangeLineWidth';\nimport { useUndoRedo } from './canvas-features/useUndoRedo';\nimport useSynchronizedBrushTypeChanged from './synchronization-hooks/useSynchronizedBrushTypeChanged';\nimport { v4 as uuidv4 } from 'uuid';\nimport { usePointerFeature } from './canvas-features/usePointerFeature';\nimport useSynchronizedCursorPointer from './synchronization-hooks/useSynchronizedCursorPointer';\nimport { IPermissions } from '../../interfaces/permissions/permissions';\nimport useSynchronizedBackgroundColorChanged from './synchronization-hooks/useBackgroundColorChanged';\nimport { useCopy } from './canvas-features/useCopy';\nimport { useStampFeature } from './canvas-features/useStampFeature';\nimport useSynchronizedSendStamp from './synchronization-hooks/useSynchronizedSendStamp';\nimport { useObjectHover } from './canvas-features/useObjectHover';\n\n/**\n * @field instanceId: Unique ID for this canvas.\n * This enables fabricjs canvas to know which target to use.\n * @field userId: The user's ID,\n * events originating from this canvas will contain this ID.\n * @field style: How the canvas should be styled.\n * @field pointerEvents: Enable or disable pointer interaction.\n * @field pixelWidth: The width of this canvas buffer in pixels.\n * @field pixelHeight: The height of this canvas buffer in pixels.\n * @field filterUsers: Only render remote events\n * originating from userId's in this list.\n * @field scaleMode: Determines how the canvas should scale\n * if parent element doesn't match aspect ratio.\n * @field onCanvasCreated: Is called when canvas changes from undefined\n * to fabric canvas element\n */\nexport type Props = {\n  children?: ReactChild | ReactChildren | null;\n  instanceId: string;\n  userId: string;\n  initialStyle?: CSSProperties;\n  pointerEvents: boolean;\n  pixelWidth: number;\n  pixelHeight: number;\n  filterUsers?: string[];\n  clearWhiteboardPermissions: IClearWhiteboardPermissions;\n  scaleMode?: ScaleMode;\n  display?: boolean;\n  permissions: IPermissions;\n  updatePermissions: (tool: string, payload: boolean) => void;\n  onCanvasCreated: (status: boolean) => void;\n};\n\nconst WhiteboardCanvas: FunctionComponent<Props> = ({\n  children,\n  instanceId,\n  userId,\n  initialStyle,\n  pointerEvents,\n  pixelWidth,\n  pixelHeight,\n  scaleMode,\n  display,\n  permissions,\n  updatePermissions,\n  onCanvasCreated,\n}: Props): JSX.Element => {\n  const [canvas, setCanvas] = useState<fabric.Canvas>();\n  const [wrapper, setWrapper] = useState<HTMLElement>();\n  const [generatedBy, setGeneratedBy] = useState<string>(uuidv4());\n\n  const { width, height } = useFixedAspectScaling(\n    wrapper?.parentElement,\n    pixelWidth / pixelHeight,\n    scaleMode || 'ScaleToFit'\n  );\n\n  const serializerToolbarState = permissions;\n\n  // Getting context variables for this file\n  const {\n    penColor,\n    isLocalObject,\n    shape,\n    canvasActions,\n    updateCanvasActions,\n    laserIsActive,\n    allToolbarIsEnabled,\n    imagePopupIsOpen,\n    updateImagePopupIsOpen,\n    backgroundImage,\n    backgroundImageIsPartialErasable,\n    localImage,\n    localBackground,\n    backgroundColor,\n    displayUserInfo,\n    eventSerializer,\n    eventController,\n    setLocalBackground,\n    setLocalImage,\n    activeTool,\n  } = useContext(WhiteboardContext) as IWhiteboardContext;\n\n  const { dispatch: undoRedoDispatch } = UndoRedo(\n    canvas as fabric.Canvas,\n    eventSerializer,\n    userId\n  );\n\n  // useEffects and logic to set canvas properties\n  useSetCanvas(\n    instanceId,\n    setCanvas,\n    canvas as fabric.Canvas,\n    wrapper as HTMLElement,\n    setWrapper,\n    pixelWidth,\n    pixelHeight,\n    pointerEvents,\n    scaleMode,\n    display,\n    initialStyle\n  );\n\n  // Getting Canvas shared functions\n  const { actions, mouseDown } = useCanvasActions(\n    canvas as fabric.Canvas,\n    undoRedoDispatch,\n    instanceId,\n    eventSerializer,\n    userId\n  );\n\n  const filterOutgoingEvents = useCallback(\n    (id: string): boolean => {\n      if (!id) return false;\n\n      const apply = isLocalObject(id, userId);\n      if (apply) {\n        //console.log(`send local event ${id} to remote`);\n        return apply;\n      }\n\n      return false;\n    },\n    [isLocalObject, userId]\n  );\n\n  const filterIncomingEvents = useCallback(\n    (id: string): boolean => {\n      if (!id) return false;\n\n      // TODO: isLocalObject will not work in case we're reloading\n      // the page and server resends all our events. They would be\n      // discarded when they shouldn't be discarded. Another solution\n      // could be to keep track of all 'local' objects we've created\n      // this session and only filter those.\n      // TODO: Filter based on the filterUsers list. We should only\n      // display events coming from users in that list if the list\n      // isn't undefined.\n      const apply = !isLocalObject(id, userId);\n      if (apply) {\n        // console.log(`apply remote event ${id} locally.`);\n      }\n      return apply;\n    },\n    [isLocalObject, userId]\n  );\n\n  /**\n   * Sends the status of the current canvas to the parent\n   */\n  useEffect(() => {\n    if (onCanvasCreated) {\n      onCanvasCreated(!!canvasActions);\n    }\n  }, [canvasActions, onCanvasCreated]);\n\n  /**\n   * Reset the canvas state in case the event controller will replay all events.\n   */\n  useEffect(() => {\n    if (!canvas) return;\n    if (!eventController) return;\n\n    const reset = () => {\n      canvas.clear();\n\n      // NOTE: Regenerate generatedBy so our own events gets applied again after the clear.\n      setGeneratedBy(uuidv4());\n\n      // This is just to avoid typescript unused variables error\n      console.log(generatedBy);\n    };\n\n    eventController.on('aboutToReplayAll', reset);\n\n    return () => {\n      eventController.removeListener('aboutToReplayAll', reset);\n    };\n  }, [canvas, eventController, generatedBy]);\n\n  const getObjects = useCallback(() => {\n    const objects = canvas?.getObjects().map((object) => {\n      return object.toJSON(['basePath']);\n    });\n\n    localStorage.setItem('objects', JSON.stringify(objects));\n    return canvas?.getObjects();\n  }, [canvas]);\n\n  // useEffects and logic for manage the object manipulation in canvas\n  useObjectManipulation(\n    canvas as fabric.Canvas,\n    userId,\n    actions,\n    pointerEvents,\n    permissions\n  );\n\n  // useEffects and logic for manage free hand drawing feature\n  useFreeHandDrawing(canvas as fabric.Canvas, userId, permissions);\n\n  // useEffects and logic for shape creation feature\n  useShapeFeature(\n    canvas as fabric.Canvas,\n    userId,\n    actions,\n    mouseDown,\n    undoRedoDispatch,\n    permissions\n  );\n\n  // useEffects and logic for flood-fill feature\n  useFloodFill(\n    canvas as fabric.Canvas,\n    permissions,\n    userId,\n    actions,\n    eventSerializer,\n    undoRedoDispatch\n  );\n\n  /* useEffects and logic for manage the changes that would happen\n  when an object is selected */\n  useObjectSelection(canvas as fabric.Canvas, actions);\n\n  // useEffects and logic for manage text object creation/edition\n  useTextObject(\n    canvas as fabric.Canvas,\n    instanceId,\n    userId,\n    actions,\n    permissions\n  );\n\n  // useEffects and logic for manage image adding feature\n  useAddImage(canvas as fabric.Canvas, userId);\n\n  // useEffects and logic for manage line width changes in objects\n  useChangeLineWidth(canvas as fabric.Canvas, userId, undoRedoDispatch);\n\n  // useEffects and logic for manage undo/redo feature\n  useUndoRedo(canvas as fabric.Canvas, userId, undoRedoDispatch);\n  \n  useCopy(\n    canvas as fabric.Canvas,\n    userId,\n    allToolbarIsEnabled,\n    undoRedoDispatch,\n    eventSerializer,\n    activeTool\n  );\n\n  // useEffects and logic for stamp feature\n  useStampFeature();\n\n  // useEffects and logic for manage the changes that would happen when an object is hovered\n  useObjectHover(canvas as fabric.Canvas, displayUserInfo);\n\n  // useEffects and logic for manage pointers\n  usePointerFeature(canvas as fabric.Canvas, userId, permissions);\n  // useEffects and logic for manage the changes that would happen when an object is hovered\n  useObjectHover(canvas as fabric.Canvas, displayUserInfo);\n\n  useSynchronizedMoved(\n    canvas,\n    userId,\n    filterOutgoingEvents,\n    filterIncomingEvents,\n    undoRedoDispatch\n  );\n  useSynchronizedRemoved(\n    canvas,\n    userId,\n    filterOutgoingEvents,\n    filterIncomingEvents,\n    undoRedoDispatch\n  );\n  useSynchronizedModified(\n    canvas,\n    filterOutgoingEvents,\n    filterIncomingEvents,\n    userId,\n    undoRedoDispatch\n  );\n  useSynchronizedRotated(\n    canvas,\n    userId,\n    filterOutgoingEvents,\n    filterIncomingEvents,\n    undoRedoDispatch\n  );\n  useSynchronizedScaled(\n    canvas,\n    userId,\n    filterOutgoingEvents,\n    filterIncomingEvents,\n    undoRedoDispatch\n  );\n  useSynchronizedSkewed(canvas, filterOutgoingEvents, filterIncomingEvents);\n  useSynchronizedReconstruct(\n    canvas,\n    filterIncomingEvents,\n    userId,\n    undoRedoDispatch,\n    setLocalImage,\n    setLocalBackground\n  );\n  useSynchronizedColorChanged(\n    canvas,\n    userId,\n    filterIncomingEvents,\n    undoRedoDispatch\n  );\n  useSynchronizedFontFamilyChanged(canvas, filterIncomingEvents);\n  useSynchronizedPointer(\n    canvas,\n    allToolbarIsEnabled || serializerToolbarState.pointer,\n    filterIncomingEvents,\n    userId,\n    penColor,\n    laserIsActive\n  );\n  useSynchronizedSetToolbarPermissions(\n    canvas,\n    userId,\n    filterIncomingEvents,\n    mapDispatchToProps\n  );\n  useSynchronizedFontColorChanged(\n    canvas,\n    userId,\n    filterIncomingEvents,\n    undoRedoDispatch\n  );\n  useSynchronizedLineWidthChanged(\n    canvas,\n    userId,\n    filterIncomingEvents,\n    undoRedoDispatch\n  );\n  useSynchronizedRealtime(canvas, filterIncomingEvents, userId);\n  useSynchronizedBrushTypeChanged(canvas, userId, filterIncomingEvents);\n  useSynchronizedAdded(\n    canvas,\n    userId,\n    filterOutgoingEvents,\n    filterIncomingEvents,\n    undoRedoDispatch\n  );\n  useSynchronizedSetToolbarPermissions(\n    canvas,\n    userId,\n    filterIncomingEvents,\n    updatePermissions\n  );\n  useSynchronizedCursorPointer(canvas, userId, filterIncomingEvents);\n  useSynchronizedBackgroundColorChanged(filterIncomingEvents);\n  useSynchronizedSendStamp(canvas, userId, filterIncomingEvents);\n\n  // NOTE: Register canvas actions with context.\n  useEffect(() => {\n    if (!canvasActions && canvas) {\n      updateCanvasActions(actions);\n    }\n  }, [actions, updateCanvasActions, canvasActions, canvas]);\n\n  return (\n    <>\n      <CanvasDownloadConfirm\n        open={imagePopupIsOpen}\n        onClose={updateImagePopupIsOpen}\n        canvas={canvas as fabric.Canvas}\n        backgroundImage={backgroundImage}\n        localImage={localImage}\n        width={width}\n        height={height}\n        backgroundColor={localBackground ? backgroundColor : undefined}\n      ></CanvasDownloadConfirm>\n      <button\n        id=\"get-objects-button\"\n        onClick={() => getObjects()}\n        hidden={true}\n        disabled={!canvas?.getObjects().length}\n      >\n        Picale bro\n      </button>\n      <canvas\n        width={pixelWidth}\n        height={pixelHeight}\n        id={instanceId}\n        placeholder={instanceId}\n        style={{ ...initialStyle, backgroundColor: 'transparent' }}\n        tabIndex={0}\n        onClick={() => {\n          actions.addShape(shape);\n        }}\n      >\n        {children}\n      </canvas>\n      {!backgroundImageIsPartialErasable && localImage && (\n        <img\n          style={{\n            height: '100%',\n            width: '100%',\n          }}\n          alt=\"background\"\n          src={localImage.toString()}\n        />\n      )}\n      {!localImage && localBackground && (\n        <div\n          style={{\n            height: '100%',\n            width: '100%',\n            backgroundColor: backgroundColor,\n          }}\n        />\n      )}\n    </>\n  );\n};\n\nconst mapStateToProps = (state: any, ownProps: any) => ({\n  ...ownProps,\n  permissions: state.permissionsState,\n  toolbarIsEnabled: (state: any) => {\n    for (const key in state.permissionsState) {\n      if (state.permissionsState[key] === true) {\n        return true;\n      }\n    }\n\n    return false;\n  },\n});\nconst mapDispatchToProps = (dispatch: any) => ({\n  updatePermissions: (tool: string, payload: boolean) =>\n    dispatch({ type: tool, payload }),\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(WhiteboardCanvas);\n","import React from 'react';\nimport { CSSProperties } from '@material-ui/core/styles/withStyles';\n\n/**\n * Container for WhiteboardCanvas used to resize\n * proportionally the canvas background\n * @param props - Properties needed to render the component:\n * @field {number} width: initial width for the container\n * @field {number} height: initial heigth for the container\n * @field {React.ReactNode} children: container's content\n */\nexport function WhiteboardContainer(props: {\n  width: number;\n  height: number;\n  children: React.ReactNode;\n}) {\n  const { width, height, children } = props;\n\n  /**\n   * Calculates the padding in the container to resize it proportionally\n   */\n  const calcProportionalPadding = () => {\n    return ((height / width) * 100) / 2;\n  };\n\n  const wrapperStyle: CSSProperties = {\n    width: `${width}px`,\n    height: `${height}px`,\n    display: 'flex',\n    flexDirection: 'column',\n    justifyContent: 'center',\n    margin: '0 13px 0 8px',\n  };\n\n  const resizeDivStyle: CSSProperties = {\n    width: '100%',\n    height: '0',\n    position: 'relative',\n    paddingBottom: `${calcProportionalPadding()}%`,\n    paddingTop: `${calcProportionalPadding()}%`,\n  };\n\n  const containerStyle: CSSProperties = {\n    border: '2px blue solid',\n    width: '100%',\n    height: '100%',\n    position: 'absolute',\n    top: 0,\n    left: 0,\n    display: 'flex',\n    alignItems: 'center',\n    justifyContent: 'center',\n    backgroundColor: 'white',\n  };\n\n  return (\n    <div style={wrapperStyle}>\n      <div style={resizeDivStyle}>\n        <div style={containerStyle}>{children}</div>\n      </div>\n    </div>\n  );\n}\n","import React, { useState } from 'react';\nimport { makeStyles, Theme, createStyles } from '@material-ui/core/styles';\nimport List from '@material-ui/core/List';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport FormControl from '@material-ui/core/FormControl';\nimport FormGroup from '@material-ui/core/FormGroup';\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\nimport Checkbox from '@material-ui/core/Checkbox';\nimport { useSharedEventSerializer } from '../domain/whiteboard/SharedEventSerializerProvider';\nimport { connect } from 'react-redux';\nimport Modal from 'react-modal';\n\nModal.setAppElement('#root')\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    root: {\n      display: 'flex',\n    },\n    formControl: {\n      margin: theme.spacing(3),\n    },\n  })\n);\n\nfunction AuthMenu(props: {\n  userId: string;\n  [key: string]: any\n}) {\n  \n  const { userId } = props;\n  const isTeacher = userId === 'teacher';\n  const [modalIsOpen,setIsOpen] = React.useState(false);\n  const [anchorEl, setAnchorEl] = useState<null | HTMLElement>(null);\n  const {\n    state: { eventSerializer },\n  } = useSharedEventSerializer();\n  const handleClickListItem = (event: React.MouseEvent<HTMLElement>) => {\n    setAnchorEl(event.currentTarget);\n  };\n  const handleClose = () => {\n    setAnchorEl(null);\n  };\n  function openModal() {\n    setIsOpen(true);\n  }\n\n  function closeModal(){\n    setIsOpen(false);\n  }\n  const classes = useStyles();\n  const {\n    cursorPointer,\n    pointer,\n    move,\n    erase,\n    partialErase,\n    pen,\n    floodFill,\n    text,\n    shape,\n    undoRedo,\n    clearWhiteboard,\n    downloadCanvas,\n    uploadImage,\n    backgroundColor\n  } = props.permissions;\n\n  const handleToolbarChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n    props.updatePermissions(event.target.name, event.target.checked);\n\n    const payload = {\n      id: userId,\n      target: {\n        [event.target.name]: event.target.checked,\n      },\n    };\n\n    eventSerializer?.push('setToolbarPermissions', payload);\n  };\n\n  const tools = [\n    {\n      checked: cursorPointer,\n      name: 'cursorPointer',\n      label: 'Cursor pointer tool',\n    },\n    {\n      checked: pointer,\n      name: 'pointer',\n      label: 'Laser pointer tool',\n    },\n    {\n      checked: move,\n      name: 'move',\n      label: 'Move tool',\n    },\n    {\n      checked: erase,\n      name: 'erase',\n      label: 'Erase tool',\n    },\n    {\n      checked: partialErase,\n      name: 'partialErase',\n      label: 'Partial Erase tool',\n    },\n    {\n      checked: pen,\n      name: 'pen',\n      label: 'Pen tool',\n    },\n    {\n      checked: floodFill,\n      name: 'floodFill',\n      label: 'Flood-fill tool',\n    },\n    {\n      checked: backgroundColor,\n      name: 'backgroundColor',\n      label: 'Background Color tool',\n    },\n    {\n      checked: text,\n      name: 'text',\n      label: 'Text tool',\n    },\n    {\n      checked: shape,\n      name: 'shape',\n      label: 'Shape tool',\n    },\n    {\n      checked: undoRedo,\n      name: 'undoRedo',\n      label: 'Undo-redo tool',\n    },\n    {\n      checked: clearWhiteboard,\n      name: 'clearWhiteboard',\n      label: 'Clear whiteboard tool',\n    },\n    {\n      checked: downloadCanvas,\n      name: 'downloadCanvas',\n      label: 'Save Canvas As Image',\n    },\n    {\n      checked: uploadImage,\n      name: 'uploadImage',\n      label: 'Upload Image tool',\n    },\n  ];\n\n  if (!isTeacher) {\n    return <div style={{height:'60px'}}></div>;\n  }\n\n  return (\n    <div>\n      <div\n        style={{\n          display: 'flex',\n        }}\n        className={classes.root}\n      >\n        <List component=\"nav\" aria-label=\"Device settings\">\n          <ListItem\n            button\n            aria-haspopup=\"true\"\n            aria-controls=\"lock-menu-2\"\n            onClick={openModal}\n          >\n            <ListItemText primary=\"Authorize Tools\" />\n          </ListItem>\n        </List>\n\n        <Modal\n          isOpen={modalIsOpen}\n          onRequestClose={closeModal}\n          id=\"lock-menu-2\"\n        >\n          <FormControl component=\"fieldset\" className={classes.formControl}>\n            <FormGroup>\n              {tools.map((el) => (\n                <FormControlLabel\n                  key={el.name}\n                  control={\n                    <Checkbox\n                      checked={el.checked}\n                      onChange={handleToolbarChange}\n                      name={el.name}\n                    />\n                  }\n                  label={el.label}\n                />\n              ))}\n            </FormGroup>\n          </FormControl>\n        </Modal>\n      </div>\n    </div>\n  );\n}\n\n// TEMPORARY : once we have an actual login, this will have to be mapped to the login data for the user state and isAdmin properties. \nconst mapStateToProps = (state:any, ownProps: any) => (\n  { \n    ...ownProps, \n    permissions: state.permissionsState,\n    user: state.userState,\n    isAdmin: ownProps.userId === 'teacher', // TEMPORARY until actual login process is created.\n  }\n);\n\nconst mapDispatchToProps = (dispatch: any) => ({\n  updatePermissions: (tool: string, payload: boolean) => dispatch({ type: tool, payload }),\n  updateUser: (id: string) => dispatch({ type: 'UPDATE_USER', id }),\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(AuthMenu);","import React, {\n  CSSProperties,\n  FunctionComponent,\n  useEffect,\n  useRef,\n} from 'react';\nimport '../../assets/style/whiteboard.css';\nimport { WhiteboardProvider } from './WhiteboardContext';\nimport Toolbar from '../../components/toolbar/Toolbar';\nimport WhiteboardCanvas from './WhiteboardCanvas';\nimport { ICanvasKeyboardEvent } from '../../interfaces/canvas-events/canvas-keyboard-event';\nimport { WhiteboardContainer } from '../../components/whiteboard/WhiteboardContainer';\n\n// Redux\nimport { Provider } from 'react-redux';\nimport store from './redux/store';\nimport AuthMenu from '../../components/AuthMenu';\nimport { IUser } from '../../interfaces/user/user'\nimport { UPDATE_USERS } from './redux/actions';\n\nconst users: IUser[] = store.getState().usersState as IUser[];\n\nexport type Props = {\n  user?: IUser,\n  users?: IUser[]\n};\n\nconst defaultProps: Props = {\n  user: users[0],\n  users: users\n}\n\n/**\n * \n * @param props User and users from the canvas app parent or the default state\n */\nconst Whiteboard: FunctionComponent<Props> = ( props: Props) => {\n\n  const user = props.user!\n  const users = props.users\n  store.dispatch({\n    type: UPDATE_USERS,\n    payload: users,\n  });\n\n  const whiteboardWidth = window.innerWidth * 0.75\n  const whiteboardHeight = whiteboardWidth * 0.5\n\n  const canvasStyle: CSSProperties = {\n    position: 'absolute',\n    top: '0px',\n    left: '0px',\n    width: '100%',\n  };\n\n  const activeCanvas = useRef<null | string>(null);\n\n  /**\n   * Blocks the Firefox previous page action triggered when the Backspace key is pressed\n   */\n  useEffect(() => {\n    const keydownHandler = (event: Event) => {\n      if (\n        (event as ICanvasKeyboardEvent).key === 'Backspace' &&\n        (event.target as HTMLElement).nodeName !== 'TEXTAREA'\n      ) {\n        event.preventDefault();\n      }\n    };\n\n    window.addEventListener('keydown', keydownHandler);\n\n    // Remove event listeners on cleanup\n    return () => {\n      window.removeEventListener('keydown', keydownHandler);\n    };\n  }, []);\n\n  return (\n    <>\n        <WhiteboardProvider\n        key={user.id}\n        clearWhiteboardPermissions={user.permissions}\n        allToolbarIsEnabled={user.role === 'teacher'}\n        activeCanvas={activeCanvas}\n        userId={user.id}\n      >\n        <Provider store={store}>\n          <AuthMenu userId={user.id} />\n          <div\n            className=\"whiteboard\"\n            onClick={() => {\n              activeCanvas.current = `canvas${user.id}`;\n            }}\n          >\n            <Toolbar />\n            <WhiteboardContainer\n              width={whiteboardWidth}\n              height={whiteboardHeight}\n            >\n              <WhiteboardCanvas\n                instanceId={`canvas${user.id}`}\n                userId={user.id}\n                initialStyle={canvasStyle}\n                pointerEvents={true}\n                clearWhiteboardPermissions={user.permissions}\n                pixelWidth={whiteboardWidth}\n                pixelHeight={whiteboardHeight}\n              >\n                <button>{user.role}</button>\n              </WhiteboardCanvas>\n            </WhiteboardContainer>\n          </div>\n        </Provider>\n      </WhiteboardProvider>\n      \n    </>\n  );\n};\n\nWhiteboard.defaultProps = defaultProps\n\nexport default Whiteboard;\n","import React, { useState } from 'react';\nimport SharedEventSerializerContextProvider from './domain/whiteboard/SharedEventSerializerProvider';\nimport Whiteboard from './domain/whiteboard/Whiteboard';\nimport { IUser } from './interfaces/user/user'\n\ninterface IAppProps{\n  user?: IUser\n  users?: IUser[]\n}\n\n/**\n * \n * @param props Optional User and users to be pass in case the App is implemented as a \n * library or package from another app.\n */\nfunction App(props: IAppProps) {\n\n  console.log(React.version)\n\n  const [canvasAreCreated, setCanvasAreCreated] = useState(false);\n\n  return (\n    <div className=\"App\">\n      <div>\n        <SharedEventSerializerContextProvider\n          simulateNetworkSynchronization={true}\n          simulatePersistence={true}\n          canvasAreCreated={canvasAreCreated}\n        >\n          <Whiteboard\n            {...props}\n          />\n        </SharedEventSerializerContextProvider>\n      </div>\n    </div>\n  );\n}\n\nexport default App;\n"],"names":["createContext","useState","useEffect","useCallback","React","useContext","Dialog","DialogTitle","DialogActions","Button","useFloodFill","FormControlLabel","Switch","Modal","FormLabel","FormControl","RadioGroup","Radio","FormGroup","Checkbox","initialState","combineReducers","createStore","fabric","img","photo","undo","redo","clear","screenshot","share","avatar","pointer","hand","crosshair","laser","move","trash","eraser","pen","pencil","felt","crayon","chalk","paintBrush","marker","dashedPen","BorderColorRoundedIcon","FiberManualRecordRoundedIcon","FormatColorFillRoundedIcon","PaletteIcon","textIcon","FormatColorTextRoundedIcon","circleShape","rectangleShape","triangleShape","pentagonShape","hexagonShape","right","starShape","chatBubbleShape","goodStamp","wellDoneStamp","excellentStamp","studentStampMode","presentStampMode","useRef","ArrowRightIcon","useMemo","mapStateToProps","connect","isLocalObject","useUndoRedo","useReducer","uuidv4","tinycolor","shapes.triangle","shapes.circle","eraseObjectCursor","require$$0","_jsBinarySchemaParser","_uint","_lzw","_deinterlace","gifToSprite","gif","maxWidth","maxHeight","maxDuration","type","reader","FileReader","Promise","resolve","reject","onload","result","onerror","error","readAsArrayBuffer","arrayBuffer","fetch","then","resp","frames","decompressFrames","parseGIF","length","console","dataCanvas","document","createElement","dataCtx","getContext","frameCanvas","frameCtx","spriteCanvas","spriteCtx","dims","width","height","reduce","acc","cur","delay","duration","splice","Math","ceil","scale","min","forEach","frame","i","frameImageData","createImageData","data","set","patch","putImageData","disposalType","clearRect","drawImage","left","top","dataUrl","toDataURL","remove","frameWidth","framesLength","PLAY","PAUSE","STOP","fabricGif","Image","fromURL","sprite","getElement","framesIndex","start","performance","now","status","naturalHeight","mode","_render","ctx","delta","play","dirty","pause","stop","getStatus","FontFaceObserver","shapes.rectangle","triangle","pentagon","shapes.pentagon","hexagon","shapes.hexagon","star","shapes.star","chat","shapes.chat","arrow","shapes.arrow","ResizeObserver","useStyles","makeStyles","floodFillCursor","arrowPointer","handPointer","crosshairPointer","mapDispatchToProps","createStyles","List","ListItem","ListItemText","Provider","AuthMenu","Toolbar","WhiteboardCanvas"],"mappings":"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CAAC,EAAE,kBAAkB,EAAE,CAAC,EAAE,iBAAiB,EAAE;QAC/C,EAAE,CAAC,EAAE,kBAAkB,EAAE,CAAC,EAAE,kBAAkB,EAAE;QAChD,EAAE,CAAC,EAAE,kBAAkB,EAAE,CAAC,EAAE,iBAAiB,EAAE;QAC/C,EAAE,CAAC,EAAE,kBAAkB,EAAE,CAAC,EAAE,iBAAiB,EAAE;QAC/C,EAAE,CAAC,EAAE,kBAAkB,EAAE,CAAC,EAAE,kBAAkB,EAAE;QAChD,EAAE,CAAC,EAAE,kBAAkB,EAAE,CAAC,EAAE,iBAAiB,EAAE;QAC/C,EAAE,CAAC,EAAE,iBAAiB,EAAE,CAAC,EAAE,kBAAkB,EAAE;QAC/C,EAAE,CAAC,EAAE,kBAAkB,EAAE,CAAC,EAAE,iBAAiB,EAAE;QAC/C,EAAE,CAAC,EAAE,kBAAkB,EAAE,CAAC,EAAE,kBAAkB,EAAE;QAChD,EAAE,CAAC,EAAE,iBAAiB,EAAE,CAAC,EAAE,kBAAkB,EAAE;QAC/C,EAAE,CAAC,EAAE,iBAAiB,EAAE,CAAC,EAAE,iBAAiB,EAAE;QAC9C,EAAE,CAAC,EAAE,kBAAkB,EAAE,CAAC,EAAE,kBAAkB,EAAE;QAChD,EAAE,CAAC,EAAE,kBAAkB,EAAE,CAAC,EAAE,kBAAkB,EAAE;QAChD,EAAE,CAAC,EAAE,iBAAiB,EAAE,CAAC,EAAE,iBAAiB,EAAE;QAC9C,EAAE,CAAC,EAAE,gBAAgB,EAAE,CAAC,EAAE,gBAAgB,EAAE;QAC5C,EAAE,CAAC,EAAE,iBAAiB,EAAE,CAAC,EAAE,iBAAiB,EAAE;QAC9C,EAAE,CAAC,EAAE,iBAAiB,EAAE,CAAC,EAAE,iBAAiB,EAAE;QAC9C,EAAE,CAAC,EAAE,iBAAiB,EAAE,CAAC,EAAE,kBAAkB,EAAE;QAC/C,EAAE,CAAC,EAAE,iBAAiB,EAAE,CAAC,EAAE,kBAAkB,EAAE;QAC/C,EAAE,CAAC,EAAE,kBAAkB,EAAE,CAAC,EAAE,kBAAkB,EAAE;QAChD,EAAE,CAAC,EAAE,iBAAiB,EAAE,CAAC,EAAE,iBAAiB,EAAE;QAC9C,EAAE,CAAC,EAAE,kBAAkB,EAAE,CAAC,EAAE,kBAAkB,EAAE;QAChD,EAAE,CAAC,EAAE,iBAAiB,EAAE,CAAC,EAAE,iBAAiB,EAAE;QAC9C,EAAE,CAAC,EAAE,iBAAiB,EAAE,CAAC,EAAE,kBAAkB,EAAE;QAC/C,EAAE,CAAC,EAAE,iBAAiB,EAAE,CAAC,EAAE,kBAAkB,EAAE;QAC/C,EAAE,CAAC,EAAE,gBAAgB,EAAE,CAAC,EAAE,kBAAkB,EAAE;QAC9C,EAAE,CAAC,EAAE,iBAAiB,EAAE,CAAC,EAAE,kBAAkB,EAAE;QAC/C,EAAE,CAAC,EAAE,iBAAiB,EAAE,CAAC,EAAE,kBAAkB,EAAE;KAChD;CACF;;ACzFM,IAAM,gBAAgB,GAAG;IAC9B,KAAK,EAAE,IAAI;IACX,MAAM,EAAE,KAAK;IACb,MAAM,EAAE;QACN,EAAE,CAAC,EAAE,kBAAkB,EAAE,CAAC,EAAE,kBAAkB,EAAE;QAChD,EAAE,CAAC,EAAE,iBAAiB,EAAE,CAAC,EAAE,iBAAiB,EAAE;QAC9C,EAAE,CAAC,EAAE,iBAAiB,EAAE,CAAC,EAAE,kBAAkB,EAAE;QAC/C,EAAE,CAAC,EAAE,kBAAkB,EAAE,CAAC,EAAE,iBAAiB,EAAE;QAC/C,EAAE,CAAC,EAAE,kBAAkB,EAAE,CAAC,EAAE,iBAAiB,EAAE;QAC/C,EAAE,CAAC,EAAE,kBAAkB,EAAE,CAAC,EAAE,kBAAkB,EAAE;QAChD,EAAE,CAAC,EAAE,kBAAkB,EAAE,CAAC,EAAE,kBAAkB,EAAE;QAChD,EAAE,CAAC,EAAE,kBAAkB,EAAE,CAAC,EAAE,iBAAiB,EAAE;QAC/C,EAAE,CAAC,EAAE,iBAAiB,EAAE,CAAC,EAAE,iBAAiB,EAAE;QAC9C,EAAE,CAAC,EAAE,mBAAmB,EAAE,CAAC,EAAE,kBAAkB,EAAE;QACjD,EAAE,CAAC,EAAE,kBAAkB,EAAE,CAAC,EAAE,iBAAiB,EAAE;QAC/C,EAAE,CAAC,EAAE,kBAAkB,EAAE,CAAC,EAAE,kBAAkB,EAAE;QAChD,EAAE,CAAC,EAAE,iBAAiB,EAAE,CAAC,EAAE,iBAAiB,EAAE;QAC9C,EAAE,CAAC,EAAE,iBAAiB,EAAE,CAAC,EAAE,kBAAkB,EAAE;QAC/C,EAAE,CAAC,EAAE,kBAAkB,EAAE,CAAC,EAAE,iBAAiB,EAAE;QAC/C,EAAE,CAAC,EAAE,cAAc,EAAE,CAAC,EAAE,gBAAgB,EAAE;QAC1C,EAAE,CAAC,EAAE,iBAAiB,EAAE,CAAC,EAAE,kBAAkB,EAAE;QAC/C,EAAE,CAAC,EAAE,kBAAkB,EAAE,CAAC,EAAE,iBAAiB,EAAE;QAC/C,EAAE,CAAC,EAAE,kBAAkB,EAAE,CAAC,EAAE,iBAAiB,EAAE;QAC/C,EAAE,CAAC,EAAE,kBAAkB,EAAE,CAAC,EAAE,iBAAiB,EAAE;QAC/C,EAAE,CAAC,EAAE,kBAAkB,EAAE,CAAC,EAAE,eAAe,EAAE;QAC7C,EAAE,CAAC,EAAE,iBAAiB,EAAE,CAAC,EAAE,iBAAiB,EAAE;QAC9C,EAAE,CAAC,EAAE,kBAAkB,EAAE,CAAC,EAAE,kBAAkB,EAAE;QAChD,EAAE,CAAC,EAAE,iBAAiB,EAAE,CAAC,EAAE,kBAAkB,EAAE;QAC/C,EAAE,CAAC,EAAE,kBAAkB,EAAE,CAAC,EAAE,kBAAkB,EAAE;QAChD,EAAE,CAAC,EAAE,iBAAiB,EAAE,CAAC,EAAE,gBAAgB,EAAE;QAC7C,EAAE,CAAC,EAAE,iBAAiB,EAAE,CAAC,EAAE,kBAAkB,EAAE;QAC/C,EAAE,CAAC,EAAE,iBAAiB,EAAE,CAAC,EAAE,gBAAgB,EAAE;QAC7C,EAAE,CAAC,EAAE,kBAAkB,EAAE,CAAC,EAAE,iBAAiB,EAAE;QAC/C,EAAE,CAAC,EAAE,iBAAiB,EAAE,CAAC,EAAE,iBAAiB,EAAE;QAC9C,EAAE,CAAC,EAAE,kBAAkB,EAAE,CAAC,EAAE,iBAAiB,EAAE;QAC/C,EAAE,CAAC,EAAE,iBAAiB,EAAE,CAAC,EAAE,iBAAiB,EAAE;QAC9C,EAAE,CAAC,EAAE,iBAAiB,EAAE,CAAC,EAAE,kBAAkB,EAAE;QAC/C,EAAE,CAAC,EAAE,iBAAiB,EAAE,CAAC,EAAE,kBAAkB,EAAE;QAC/C,EAAE,CAAC,EAAE,iBAAiB,EAAE,CAAC,EAAE,iBAAiB,EAAE;QAC9C,EAAE,CAAC,EAAE,kBAAkB,EAAE,CAAC,EAAE,kBAAkB,EAAE;QAChD,EAAE,CAAC,EAAE,iBAAiB,EAAE,CAAC,EAAE,kBAAkB,EAAE;QAC/C,EAAE,CAAC,EAAE,kBAAkB,EAAE,CAAC,EAAE,gBAAgB,EAAE;QAC9C,EAAE,CAAC,EAAE,iBAAiB,EAAE,CAAC,EAAE,iBAAiB,EAAE;QAC9C,EAAE,CAAC,EAAE,iBAAiB,EAAE,CAAC,EAAE,kBAAkB,EAAE;QAC/C,EAAE,CAAC,EAAE,iBAAiB,EAAE,CAAC,EAAE,iBAAiB,EAAE;QAC9C,EAAE,CAAC,EAAE,kBAAkB,EAAE,CAAC,EAAE,kBAAkB,EAAE;QAChD,EAAE,CAAC,EAAE,kBAAkB,EAAE,CAAC,EAAE,kBAAkB,EAAE;KACjD;CACF;;AChDM,IAAM,YAAY,GAAG;IAC1B,KAAK,EAAE,GAAG;IACV,MAAM,EAAE,GAAG;IACX,MAAM,EAAE;QACN,EAAE,CAAC,EAAE,iBAAiB,EAAE,CAAC,EAAE,kBAAkB,EAAE;QAC/C,EAAE,CAAC,EAAE,kBAAkB,EAAE,CAAC,EAAE,kBAAkB,EAAE;QAChD,EAAE,CAAC,EAAE,kBAAkB,EAAE,CAAC,EAAE,kBAAkB,EAAE;QAChD,EAAE,CAAC,EAAE,iBAAiB,EAAE,CAAC,EAAE,kBAAkB,EAAE;QAC/C,EAAE,CAAC,EAAE,kBAAkB,EAAE,CAAC,EAAE,kBAAkB,EAAE;QAChD,EAAE,CAAC,EAAE,kBAAkB,EAAE,CAAC,EAAE,kBAAkB,EAAE;QAChD,EAAE,CAAC,EAAE,iBAAiB,EAAE,CAAC,EAAE,gBAAgB,EAAE;QAC7C,EAAE,CAAC,EAAE,iBAAiB,EAAE,CAAC,EAAE,kBAAkB,EAAE;QAC/C,EAAE,CAAC,EAAE,kBAAkB,EAAE,CAAC,EAAE,iBAAiB,EAAE;QAC/C,EAAE,CAAC,EAAE,iBAAiB,EAAE,CAAC,EAAE,iBAAiB,EAAE;QAC9C,EAAE,CAAC,EAAE,iBAAiB,EAAE,CAAC,EAAE,iBAAiB,EAAE;QAC9C,EAAE,CAAC,EAAE,iBAAiB,EAAE,CAAC,EAAE,kBAAkB,EAAE;QAC/C,EAAE,CAAC,EAAE,kBAAkB,EAAE,CAAC,EAAE,kBAAkB,EAAE;QAChD,EAAE,CAAC,EAAE,kBAAkB,EAAE,CAAC,EAAE,iBAAiB,EAAE;QAC/C,EAAE,CAAC,EAAE,kBAAkB,EAAE,CAAC,EAAE,kBAAkB,EAAE;QAChD,EAAE,CAAC,EAAE,kBAAkB,EAAE,CAAC,EAAE,iBAAiB,EAAE;QAC/C,EAAE,CAAC,EAAE,kBAAkB,EAAE,CAAC,EAAE,kBAAkB,EAAE;QAChD,EAAE,CAAC,EAAE,kBAAkB,EAAE,CAAC,EAAE,kBAAkB,EAAE;QAChD,EAAE,CAAC,EAAE,iBAAiB,EAAE,CAAC,EAAE,kBAAkB,EAAE;QAC/C,EAAE,CAAC,EAAE,iBAAiB,EAAE,CAAC,EAAE,kBAAkB,EAAE;QAC/C,EAAE,CAAC,EAAE,kBAAkB,EAAE,CAAC,EAAE,iBAAiB,EAAE;QAC/C,EAAE,CAAC,EAAE,kBAAkB,EAAE,CAAC,EAAE,kBAAkB,EAAE;QAChD,EAAE,CAAC,EAAE,kBAAkB,EAAE,CAAC,EAAE,kBAAkB,EAAE;QAChD,EAAE,CAAC,EAAE,iBAAiB,EAAE,CAAC,EAAE,kBAAkB,EAAE;QAC/C,EAAE,CAAC,EAAE,iBAAiB,EAAE,CAAC,EAAE,iBAAiB,EAAE;QAC9C,EAAE,CAAC,EAAE,kBAAkB,EAAE,CAAC,EAAE,iBAAiB,EAAE;QAC/C,EAAE,CAAC,EAAE,kBAAkB,EAAE,CAAC,EAAE,iBAAiB,EAAE;QAC/C,EAAE,CAAC,EAAE,kBAAkB,EAAE,CAAC,EAAE,iBAAiB,EAAE;QAC/C,EAAE,CAAC,EAAE,kBAAkB,EAAE,CAAC,EAAE,kBAAkB,EAAE;QAChD,EAAE,CAAC,EAAE,kBAAkB,EAAE,CAAC,EAAE,kBAAkB,EAAE;QAChD,EAAE,CAAC,EAAE,kBAAkB,EAAE,CAAC,EAAE,iBAAiB,EAAE;QAC/C,EAAE,CAAC,EAAE,iBAAiB,EAAE,CAAC,EAAE,gBAAgB,EAAE;QAC7C,EAAE,CAAC,EAAE,iBAAiB,EAAE,CAAC,EAAE,kBAAkB,EAAE;QAC/C,EAAE,CAAC,EAAE,kBAAkB,EAAE,CAAC,EAAE,iBAAiB,EAAE;QAC/C,EAAE,CAAC,EAAE,kBAAkB,EAAE,CAAC,EAAE,iBAAiB,EAAE;QAC/C,EAAE,CAAC,EAAE,iBAAiB,EAAE,CAAC,EAAE,kBAAkB,EAAE;QAC/C,EAAE,CAAC,EAAE,iBAAiB,EAAE,CAAC,EAAE,kBAAkB,EAAE;QAC/C,EAAE,CAAC,EAAE,iBAAiB,EAAE,CAAC,EAAE,gBAAgB,EAAE;QAC7C,EAAE,CAAC,EAAE,iBAAiB,EAAE,CAAC,EAAE,kBAAkB,EAAE;QAC/C,EAAE,CAAC,EAAE,iBAAiB,EAAE,CAAC,EAAE,iBAAiB,EAAE;QAC9C,EAAE,CAAC,EAAE,kBAAkB,EAAE,CAAC,EAAE,kBAAkB,EAAE;QAChD,EAAE,CAAC,EAAE,kBAAkB,EAAE,CAAC,EAAE,kBAAkB,EAAE;QAChD,EAAE,CAAC,EAAE,kBAAkB,EAAE,CAAC,EAAE,iBAAiB,EAAE;QAC/C,EAAE,CAAC,EAAE,iBAAiB,EAAE,CAAC,EAAE,iBAAiB,EAAE;QAC9C,EAAE,CAAC,EAAE,iBAAiB,EAAE,CAAC,EAAE,iBAAiB,EAAE;QAC9C,EAAE,CAAC,EAAE,iBAAiB,EAAE,CAAC,EAAE,iBAAiB,EAAE;QAC9C,EAAE,CAAC,EAAE,iBAAiB,EAAE,CAAC,EAAE,iBAAiB,EAAE;QAC9C,EAAE,CAAC,EAAE,kBAAkB,EAAE,CAAC,EAAE,iBAAiB,EAAE;QAC/C,EAAE,CAAC,EAAE,iBAAiB,EAAE,CAAC,EAAE,kBAAkB,EAAE;KAChD;CACF;;ACtDM,IAAM,cAAc,GAAG;IAC5B,KAAK,EAAE,GAAG;IACV,MAAM,EAAE,GAAG;IACX,MAAM,EAAE;QACN,EAAE,CAAC,EAAE,iBAAiB,EAAE,CAAC,EAAE,iBAAiB,EAAE;QAC9C,EAAE,CAAC,EAAE,iBAAiB,EAAE,CAAC,EAAE,kBAAkB,EAAE;QAC/C,EAAE,CAAC,EAAE,iBAAiB,EAAE,CAAC,EAAE,kBAAkB,EAAE;QAC/C,EAAE,CAAC,EAAE,kBAAkB,EAAE,CAAC,EAAE,kBAAkB,EAAE;QAChD,EAAE,CAAC,EAAE,iBAAiB,EAAE,CAAC,EAAE,kBAAkB,EAAE;QAC/C,EAAE,CAAC,EAAE,kBAAkB,EAAE,CAAC,EAAE,kBAAkB,EAAE;QAChD,EAAE,CAAC,EAAE,iBAAiB,EAAE,CAAC,EAAE,kBAAkB,EAAE;QAC/C,EAAE,CAAC,EAAE,kBAAkB,EAAE,CAAC,EAAE,kBAAkB,EAAE;QAChD,EAAE,CAAC,EAAE,iBAAiB,EAAE,CAAC,EAAE,kBAAkB,EAAE;QAC/C,EAAE,CAAC,EAAE,iBAAiB,EAAE,CAAC,EAAE,iBAAiB,EAAE;QAC9C,EAAE,CAAC,EAAE,kBAAkB,EAAE,CAAC,EAAE,iBAAiB,EAAE;QAC/C,EAAE,CAAC,EAAE,kBAAkB,EAAE,CAAC,EAAE,iBAAiB,EAAE;QAC/C,EAAE,CAAC,EAAE,iBAAiB,EAAE,CAAC,EAAE,iBAAiB,EAAE;QAC9C,EAAE,CAAC,EAAE,iBAAiB,EAAE,CAAC,EAAE,kBAAkB,EAAE;QAC/C,EAAE,CAAC,EAAE,iBAAiB,EAAE,CAAC,EAAE,kBAAkB,EAAE;QAC/C,EAAE,CAAC,EAAE,iBAAiB,EAAE,CAAC,EAAE,gBAAgB,EAAE;QAC7C,EAAE,CAAC,EAAE,kBAAkB,EAAE,CAAC,EAAE,kBAAkB,EAAE;QAChD,EAAE,CAAC,EAAE,kBAAkB,EAAE,CAAC,EAAE,iBAAiB,EAAE;QAC/C,EAAE,CAAC,EAAE,kBAAkB,EAAE,CAAC,EAAE,kBAAkB,EAAE;QAChD,EAAE,CAAC,EAAE,kBAAkB,EAAE,CAAC,EAAE,gBAAgB,EAAE;QAC9C,EAAE,CAAC,EAAE,kBAAkB,EAAE,CAAC,EAAE,iBAAiB,EAAE;QAC/C,EAAE,CAAC,EAAE,kBAAkB,EAAE,CAAC,EAAE,iBAAiB,EAAE;QAC/C,EAAE,CAAC,EAAE,kBAAkB,EAAE,CAAC,EAAE,iBAAiB,EAAE;QAC/C,EAAE,CAAC,EAAE,kBAAkB,EAAE,CAAC,EAAE,iBAAiB,EAAE;QAC/C,EAAE,CAAC,EAAE,kBAAkB,EAAE,CAAC,EAAE,iBAAiB,EAAE;QAC/C,EAAE,CAAC,EAAE,kBAAkB,EAAE,CAAC,EAAE,iBAAiB,EAAE;QAC/C,EAAE,CAAC,EAAE,iBAAiB,EAAE,CAAC,EAAE,kBAAkB,EAAE;QAC/C,EAAE,CAAC,EAAE,iBAAiB,EAAE,CAAC,EAAE,kBAAkB,EAAE;QAC/C,EAA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kBAAkB,EAAE,CAAC,EAAE,iBAAiB,EAAE;QAC/C,EAAE,CAAC,EAAE,iBAAiB,EAAE,CAAC,EAAE,gBAAgB,EAAE;QAC7C,EAAE,CAAC,EAAE,kBAAkB,EAAE,CAAC,EAAE,iBAAiB,EAAE;QAC/C,EAAE,CAAC,EAAE,iBAAiB,EAAE,CAAC,EAAE,kBAAkB,EAAE;QAC/C,EAAE,CAAC,EAAE,kBAAkB,EAAE,CAAC,EAAE,kBAAkB,EAAE;QAChD,EAAE,CAAC,EAAE,kBAAkB,EAAE,CAAC,EAAE,iBAAiB,EAAE;QAC/C,EAAE,CAAC,EAAE,kBAAkB,EAAE,CAAC,EAAE,iBAAiB,EAAE;QAC/C,EAAE,CAAC,EAAE,kBAAkB,EAAE,CAAC,EAAE,kBAAkB,EAAE;QAChD,EAAE,CAAC,EAAE,iBAAiB,EAAE,CAAC,EAAE,kBAAkB,EAAE;QAC/C,EAAE,CAAC,EAAE,kBAAkB,EAAE,CAAC,EAAE,iBAAiB,EAAE;QAC/C,EAAE,CAAC,EAAE,iBAAiB,EAAE,CAAC,EAAE,iBAAiB,EAAE;QAC9C,EAAE,CAAC,EAAE,kBAAkB,EAAE,CAAC,EAAE,kBAAkB,EAAE;QAChD,EAAE,CAAC,EAAE,kBAAkB,EAAE,CAAC,EAAE,kBAAkB,EAAE;QAChD,EAAE,CAAC,EAAE,kBAAkB,EAAE,CAAC,EAAE,kBAAkB,EAAE;QAChD,EAAE,CAAC,EAAE,kBAAkB,EAAE,CAAC,EAAE,kBAAkB,EAAE;QAChD,EAAE,CAAC,EAAE,kBAAkB,EAAE,CAAC,EAAE,iBAAiB,EAAE;QAC/C,EAAE,CAAC,EAAE,kBAAkB,EAAE,CAAC,EAAE,iBAAiB,EAAE;QAC/C,EAAE,CAAC,EAAE,kBAAkB,EAAE,CAAC,EAAE,kBAAkB,EAAE;QAChD,EAAE,CAAC,EAAE,gBAAgB,EAAE,CAAC,EAAE,kBAAkB,EAAE;QAC9C,EAAE,CAAC,EAAE,kBAAkB,EAAE,CAAC,EAAE,kBAAkB,EAAE;QAChD,EAAE,CAAC,EAAE,iBAAiB,EAAE,CAAC,EAAE,kBAAkB,EAAE;QAC/C,EAAE,CAAC,EAAE,iBAAiB,EAAE,CAAC,EAAE,iBAAiB,EAAE;QAC9C,EAAE,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AC,EAAE,kBAAkB,EAAE,CAAC,EAAE,iBAAiB,EAAE;QAC/C,EAAE,CAAC,EAAE,kBAAkB,EAAE,CAAC,EAAE,iBAAiB,EAAE;QAC/C,EAAE,CAAC,EAAE,kBAAkB,EAAE,CAAC,EAAE,kBAAkB,EAAE;QAChD,EAAE,CAAC,EAAE,iBAAiB,EAAE,CAAC,EAAE,iBAAiB,EAAE;QAC9C,EAAE,CAAC,EAAE,kBAAkB,EAAE,CAAC,EAAE,iBAAiB,EAAE;QAC/C,EAAE,CAAC,EAAE,kBAAkB,EAAE,CAAC,EAAE,gBAAgB,EAAE;QAC9C,EAAE,CAAC,EAAE,kBAAkB,EAAE,CAAC,EAAE,gBAAgB,EAAE;QAC9C,EAAE,CAAC,EAAE,kBAAkB,EAAE,CAAC,EAAE,iBAAiB,EAAE;QAC/C,EAAE,CAAC,EAAE,kBAAkB,EAAE,CAAC,EAAE,kBAAkB,EAAE;QAChD,EAAE,CAAC,EAAE,kBAAkB,EAAE,CAAC,EAAE,kBAAkB,EAAE;QAChD,EAAE,CAAC,EAAE,kBAAkB,EAAE,CAAC,EAAE,kBAAkB,EAAE;QAChD,EAAE,CAAC,EAAE,kBAAkB,EAAE,CAAC,EAAE,iBAAiB,EAAE;QAC/C,EAAE,CAAC,EAAE,kBAAkB,EAAE,CAAC,EAAE,kBAAkB,EAAE;QAChD,EAAE,CAAC,EAAE,kBAAkB,EAAE,CAAC,EAAE,kBAAkB,EAAE;QAChD,EAAE,CAAC,EAAE,kBAAkB,EAAE,CAAC,EAAE,kBAAkB,EAAE;QAChD,EAAE,CAAC,EAAE,iBAAiB,EAAE,CAAC,EAAE,kBAAkB,EAAE;QAC/C,EAAE,CAAC,EAAE,kBAAkB,EAAE,CAAC,EAAE,iBAAiB,EAAE;QAC/C,EAAE,CAAC,EAAE,iBAAiB,EAAE,CAAC,EAAE,iBAAiB,EAAE;QAC9C,EAAE,CAAC,EAAE,iBAAiB,EAAE,CAAC,EAAE,kBAAkB,EAAE;QAC/C,EAAE,CAAC,EAAE,iBAAiB,EAAE,CAAC,EAAE,kBAAkB,EAAE;QAC/C,EAAE,CAAC,EAAE,iBAAiB,EAAE,CAAC,EAAE,kBAAkB,EAAE;QAC/C,EAAE,CAAC,EAAE,iBAAiB,EAAE,CAAC,EAAE,iBAAiB,EAAE;QAC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,EAAE,kBAAkB,EAAE;QAC/C,EAAE,CAAC,EAAE,kBAAkB,EAAE,CAAC,EAAE,iBAAiB,EAAE;QAC/C,EAAE,CAAC,EAAE,kBAAkB,EAAE,CAAC,EAAE,kBAAkB,EAAE;QAChD,EAAE,CAAC,EAAE,iBAAiB,EAAE,CAAC,EAAE,kBAAkB,EAAE;QAC/C,EAAE,CAAC,EAAE,kBAAkB,EAAE,CAAC,EAAE,kBAAkB,EAAE;QAChD,EAAE,CAAC,EAAE,kBAAkB,EAAE,CAAC,EAAE,kBAAkB,EAAE;QAChD,EAAE,CAAC,EAAE,iBAAiB,EAAE,CAAC,EAAE,kBAAkB,EAAE;QAC/C,EAAE,CAAC,EAAE,iBAAiB,EAAE,CAAC,EAAE,kBAAkB,EAAE;QAC/C,EAAE,CAAC,EAAE,kBAAkB,EAAE,CAAC,EAAE,kBAAkB,EAAE;QAChD,EAAE,CAAC,EAAE,kBAAkB,EAAE,CAAC,EAAE,kBAAkB,EAAE;QAChD,EAAE,CAAC,EAAE,kBAAkB,EAAE,CAAC,EAAE,kBAAkB,EAAE;QAChD,EAAE,CAAC,EAAE,kBAAkB,EAAE,CAAC,EAAE,iBAAiB,EAAE;QAC/C,EAAE,CAAC,EAAE,iBAAiB,EAAE,CAAC,EAAE,iBAAiB,EAAE;QAC9C,EAAE,CAAC,EAAE,iBAAiB,EAAE,CAAC,EAAE,iBAAiB,EAAE;QAC9C,EAAE,CAAC,EAAE,iBAAiB,EAAE,CAAC,EAAE,kBAAkB,EAAE;QAC/C,EAAE,CAAC,EAAE,kBAAkB,EAAE,CAAC,EAAE,kBAAkB,EAAE;QAChD,EAAE,CAAC,EAAE,kBAAkB,EAAE,CAAC,EAAE,kBAAkB,EAAE;QAChD,EAAE,CAAC,EAAE,kBAAkB,EAAE,CAAC,EAAE,kBAAkB,EAAE;QAChD,EAAE,CAAC,EAAE,kBAAkB,EAAE,CAAC,EAAE,kBAAkB,EAAE;QAChD,EAAE,CAAC,EAAE,iBAAiB,EAAE,CAAC,EAAE,kBAAkB,EAAE;QAC/C,EAAE,CAAC,EAAE,kBAAkB,EAAE,CAAC,EAAE,kBAAkB,EAAE;QAChD,EAAE,CAAC,EAAE,gBAAgB,EAAE,CAAC,EAAE,iBAAiB,EAAE;QAC7C,EAAE,CAAC,EAAE,iBAAiB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"}